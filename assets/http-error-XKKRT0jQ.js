function a(t){if(typeof t!="string")return null;const r=t.trim();return r||null}function c(t){if(!t||typeof t!="object")return null;const r=t,e=a(r.message);if(e)return e;const n=r.message;if(Array.isArray(n)){const o=n.map(a).filter(s=>!!s);if(o.length>0)return o.join(", ")}return a(r.error)}async function u(t){let r="";try{r=await t.text()}catch{return null}const e=r.trim();if(!e)return null;if((t.headers.get("content-type")??"").includes("application/json")||e.startsWith("{")||e.startsWith("["))try{const s=JSON.parse(e),i=c(s);if(i)return i}catch{}return e}async function f(t,r,e={}){var s;if(t.ok)return;const n=(s=e.statusMessages)==null?void 0:s[t.status];if(n)throw new Error(n);const o=await u(t);throw new Error(o||r)}export{f as a};
