var _p=Object.defineProperty;var Tp=(l,e,t)=>e in l?_p(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var k=(l,e,t)=>Tp(l,typeof e!="symbol"?e+"":e,t);import{z as Qf,r as bp}from"./index-Be86izrq.js";import{u as Rp}from"./IconDotsVertical-JA2D39GJ.js";var Lr={},Do={},pl;function Np(){if(pl)return Do;pl=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(Do,"__esModule",{value:!0}),Do}var Io={},xl;function wp(){if(xl)return Io;xl=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(Io,"__esModule",{value:!0}),Io}var Br={},Lo={exports:{}},Bo={},Mo={},ko={},zo,ml;function La(){return ml||(ml=1,zo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==o||s.enumerable!==!0)return!1}return!0}),zo}var jo,gl;function xo(){if(gl)return jo;gl=1;var l=La();return jo=function(){return l()&&!!Symbol.toStringTag},jo}var qo,yl;function Ba(){return yl||(yl=1,qo=Object),qo}var Ho,vl;function Op(){return vl||(vl=1,Ho=Error),Ho}var Uo,Sl;function Fp(){return Sl||(Sl=1,Uo=EvalError),Uo}var $o,Al;function Pp(){return Al||(Al=1,$o=RangeError),$o}var Vo,Cl;function Dp(){return Cl||(Cl=1,Vo=ReferenceError),Vo}var Wo,El;function Jf(){return El||(El=1,Wo=SyntaxError),Wo}var Go,_l;function Ui(){return _l||(_l=1,Go=TypeError),Go}var Yo,Tl;function Ip(){return Tl||(Tl=1,Yo=URIError),Yo}var Xo,bl;function Lp(){return bl||(bl=1,Xo=Math.abs),Xo}var Ko,Rl;function Bp(){return Rl||(Rl=1,Ko=Math.floor),Ko}var Qo,Nl;function Mp(){return Nl||(Nl=1,Qo=Math.max),Qo}var Jo,wl;function kp(){return wl||(wl=1,Jo=Math.min),Jo}var Zo,Ol;function zp(){return Ol||(Ol=1,Zo=Math.pow),Zo}var es,Fl;function jp(){return Fl||(Fl=1,es=Math.round),es}var ts,Pl;function qp(){return Pl||(Pl=1,ts=Number.isNaN||function(e){return e!==e}),ts}var rs,Dl;function Hp(){if(Dl)return rs;Dl=1;var l=qp();return rs=function(t){return l(t)||t===0?t:t<0?-1:1},rs}var ns,Il;function Up(){return Il||(Il=1,ns=Object.getOwnPropertyDescriptor),ns}var is,Ll;function ri(){if(Ll)return is;Ll=1;var l=Up();if(l)try{l([],"length")}catch{l=null}return is=l,is}var os,Bl;function mo(){if(Bl)return os;Bl=1;var l=Object.defineProperty||!1;if(l)try{l({},"a",{value:1})}catch{l=!1}return os=l,os}var ss,Ml;function $p(){if(Ml)return ss;Ml=1;var l=typeof Symbol<"u"&&Symbol,e=La();return ss=function(){return typeof l!="function"||typeof Symbol!="function"||typeof l("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ss}var as,kl;function Zf(){return kl||(kl=1,as=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),as}var ls,zl;function ed(){if(zl)return ls;zl=1;var l=Ba();return ls=l.getPrototypeOf||null,ls}var us,jl;function Vp(){if(jl)return us;jl=1;var l="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",o=function(a,c){for(var u=[],h=0;h<a.length;h+=1)u[h]=a[h];for(var f=0;f<c.length;f+=1)u[f+a.length]=c[f];return u},i=function(a,c){for(var u=[],h=c,f=0;h<a.length;h+=1,f+=1)u[f]=a[h];return u},r=function(s,a){for(var c="",u=0;u<s.length;u+=1)c+=s[u],u+1<s.length&&(c+=a);return c};return us=function(a){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(l+c);for(var u=i(arguments,1),h,f=function(){if(this instanceof h){var v=c.apply(this,o(u,arguments));return Object(v)===v?v:this}return c.apply(a,o(u,arguments))},d=t(0,c.length-u.length),p=[],S=0;S<d;S++)p[S]="$"+S;if(h=Function("binder","return function ("+r(p,",")+"){ return binder.apply(this,arguments); }")(f),c.prototype){var x=function(){};x.prototype=c.prototype,h.prototype=new x,x.prototype=null}return h},us}var cs,ql;function $i(){if(ql)return cs;ql=1;var l=Vp();return cs=Function.prototype.bind||l,cs}var hs,Hl;function Ma(){return Hl||(Hl=1,hs=Function.prototype.call),hs}var fs,Ul;function ka(){return Ul||(Ul=1,fs=Function.prototype.apply),fs}var ds,$l;function Wp(){return $l||($l=1,ds=typeof Reflect<"u"&&Reflect&&Reflect.apply),ds}var ps,Vl;function td(){if(Vl)return ps;Vl=1;var l=$i(),e=ka(),t=Ma(),n=Wp();return ps=n||l.call(t,e),ps}var xs,Wl;function za(){if(Wl)return xs;Wl=1;var l=$i(),e=Ui(),t=Ma(),n=td();return xs=function(i){if(i.length<1||typeof i[0]!="function")throw new e("a function is required");return n(l,t,i)},xs}var ms,Gl;function Gp(){if(Gl)return ms;Gl=1;var l=za(),e=ri(),t;try{t=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var n=!!t&&e&&e(Object.prototype,"__proto__"),o=Object,i=o.getPrototypeOf;return ms=n&&typeof n.get=="function"?l([n.get]):typeof i=="function"?function(s){return i(s==null?s:o(s))}:!1,ms}var gs,Yl;function ja(){if(Yl)return gs;Yl=1;var l=Zf(),e=ed(),t=Gp();return gs=l?function(o){return l(o)}:e?function(o){if(!o||typeof o!="object"&&typeof o!="function")throw new TypeError("getProto: not an object");return e(o)}:t?function(o){return t(o)}:null,gs}var ys,Xl;function rd(){if(Xl)return ys;Xl=1;var l=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=$i();return ys=t.call(l,e),ys}var vs,Kl;function qa(){if(Kl)return vs;Kl=1;var l,e=Ba(),t=Op(),n=Fp(),o=Pp(),i=Dp(),r=Jf(),s=Ui(),a=Ip(),c=Lp(),u=Bp(),h=Mp(),f=kp(),d=zp(),p=jp(),S=Hp(),x=Function,v=function(D){try{return x('"use strict"; return ('+D+").constructor;")()}catch{}},m=ri(),g=mo(),y=function(){throw new s},T=m?function(){try{return arguments.callee,y}catch{try{return m(arguments,"callee").get}catch{return y}}}():y,A=$p()(),b=ja(),R=ed(),N=Zf(),P=ka(),B=Ma(),I={},V=typeof Uint8Array>"u"||!b?l:b(Uint8Array),J={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?l:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?l:ArrayBuffer,"%ArrayIteratorPrototype%":A&&b?b([][Symbol.iterator]()):l,"%AsyncFromSyncIteratorPrototype%":l,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":typeof Atomics>"u"?l:Atomics,"%BigInt%":typeof BigInt>"u"?l:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?l:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?l:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?l:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?l:Float16Array,"%Float32Array%":typeof Float32Array>"u"?l:Float32Array,"%Float64Array%":typeof Float64Array>"u"?l:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?l:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":I,"%Int8Array%":typeof Int8Array>"u"?l:Int8Array,"%Int16Array%":typeof Int16Array>"u"?l:Int16Array,"%Int32Array%":typeof Int32Array>"u"?l:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&b?b(b([][Symbol.iterator]())):l,"%JSON%":typeof JSON=="object"?JSON:l,"%Map%":typeof Map>"u"?l:Map,"%MapIteratorPrototype%":typeof Map>"u"||!A||!b?l:b(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":m,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?l:Promise,"%Proxy%":typeof Proxy>"u"?l:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?l:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?l:Set,"%SetIteratorPrototype%":typeof Set>"u"||!A||!b?l:b(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?l:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&b?b(""[Symbol.iterator]()):l,"%Symbol%":A?Symbol:l,"%SyntaxError%":r,"%ThrowTypeError%":T,"%TypedArray%":V,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?l:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?l:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?l:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?l:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?l:WeakMap,"%WeakRef%":typeof WeakRef>"u"?l:WeakRef,"%WeakSet%":typeof WeakSet>"u"?l:WeakSet,"%Function.prototype.call%":B,"%Function.prototype.apply%":P,"%Object.defineProperty%":g,"%Object.getPrototypeOf%":R,"%Math.abs%":c,"%Math.floor%":u,"%Math.max%":h,"%Math.min%":f,"%Math.pow%":d,"%Math.round%":p,"%Math.sign%":S,"%Reflect.getPrototypeOf%":N};if(b)try{null.error}catch(D){var te=b(b(D));J["%Error.prototype%"]=te}var oe=function D(j){var U;if(j==="%AsyncFunction%")U=v("async function () {}");else if(j==="%GeneratorFunction%")U=v("function* () {}");else if(j==="%AsyncGeneratorFunction%")U=v("async function* () {}");else if(j==="%AsyncGenerator%"){var W=D("%AsyncGeneratorFunction%");W&&(U=W.prototype)}else if(j==="%AsyncIteratorPrototype%"){var L=D("%AsyncGenerator%");L&&b&&(U=b(L.prototype))}return J[j]=U,U},ge={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ce=$i(),ee=rd(),G=ce.call(B,Array.prototype.concat),Q=ce.call(P,Array.prototype.splice),ie=ce.call(B,String.prototype.replace),E=ce.call(B,String.prototype.slice),C=ce.call(B,RegExp.prototype.exec),_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,F=function(j){var U=E(j,0,1),W=E(j,-1);if(U==="%"&&W!=="%")throw new r("invalid intrinsic syntax, expected closing `%`");if(W==="%"&&U!=="%")throw new r("invalid intrinsic syntax, expected opening `%`");var L=[];return ie(j,_,function(M,H,Y,re){L[L.length]=Y?ie(re,w,"$1"):H||M}),L},O=function(j,U){var W=j,L;if(ee(ge,W)&&(L=ge[W],W="%"+L[0]+"%"),ee(J,W)){var M=J[W];if(M===I&&(M=oe(W)),typeof M>"u"&&!U)throw new s("intrinsic "+j+" exists, but is not available. Please file an issue!");return{alias:L,name:W,value:M}}throw new r("intrinsic "+j+" does not exist!")};return vs=function(j,U){if(typeof j!="string"||j.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof U!="boolean")throw new s('"allowMissing" argument must be a boolean');if(C(/^%?[^%]*%?$/,j)===null)throw new r("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var W=F(j),L=W.length>0?W[0]:"",M=O("%"+L+"%",U),H=M.name,Y=M.value,re=!1,ne=M.alias;ne&&(L=ne[0],Q(W,G([0,1],ne)));for(var q=1,X=!0;q<W.length;q+=1){var he=W[q],be=E(he,0,1),Re=E(he,-1);if((be==='"'||be==="'"||be==="`"||Re==='"'||Re==="'"||Re==="`")&&be!==Re)throw new r("property names with quotes must have matching quotes");if((he==="constructor"||!X)&&(re=!0),L+="."+he,H="%"+L+"%",ee(J,H))Y=J[H];else if(Y!=null){if(!(he in Y)){if(!U)throw new s("base intrinsic for "+j+" exists, but the property is not available.");return}if(m&&q+1>=W.length){var z=m(Y,he);X=!!z,X&&"get"in z&&!("originalValue"in z.get)?Y=z.get:Y=Y[he]}else X=ee(Y,he),Y=Y[he];X&&!re&&(J[H]=Y)}}return Y},vs}var Ss,Ql;function ni(){if(Ql)return Ss;Ql=1;var l=qa(),e=za(),t=e([l("%String.prototype.indexOf%")]);return Ss=function(o,i){var r=l(o,!!i);return typeof r=="function"&&t(o,".prototype.")>-1?e([r]):r},Ss}var As,Jl;function Yp(){if(Jl)return As;Jl=1;var l=xo()(),e=ni(),t=e("Object.prototype.toString"),n=function(s){return l&&s&&typeof s=="object"&&Symbol.toStringTag in s?!1:t(s)==="[object Arguments]"},o=function(s){return n(s)?!0:s!==null&&typeof s=="object"&&"length"in s&&typeof s.length=="number"&&s.length>=0&&t(s)!=="[object Array]"&&"callee"in s&&t(s.callee)==="[object Function]"},i=function(){return n(arguments)}();return n.isLegacyArguments=o,As=i?n:o,As}var Cs,Zl;function Xp(){if(Zl)return Cs;Zl=1;var l=ni(),e=xo()(),t=rd(),n=ri(),o;if(e){var i=l("RegExp.prototype.exec"),r={},s=function(){throw r},a={toString:s,valueOf:s};typeof Symbol.toPrimitive=="symbol"&&(a[Symbol.toPrimitive]=s),o=function(f){if(!f||typeof f!="object")return!1;var d=n(f,"lastIndex"),p=d&&t(d,"value");if(!p)return!1;try{i(f,a)}catch(S){return S===r}}}else{var c=l("Object.prototype.toString"),u="[object RegExp]";o=function(f){return!f||typeof f!="object"&&typeof f!="function"?!1:c(f)===u}}return Cs=o,Cs}var Es,eu;function Kp(){if(eu)return Es;eu=1;var l=ni(),e=Xp(),t=l("RegExp.prototype.exec"),n=Ui();return Es=function(i){if(!e(i))throw new n("`regex` must be a RegExp");return function(s){return t(i,s)!==null}},Es}var _s,tu;function Qp(){if(tu)return _s;tu=1;var l=ni(),e=Kp(),t=e(/^\s*(?:function)?\*/),n=xo()(),o=ja(),i=l("Object.prototype.toString"),r=l("Function.prototype.toString"),s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},a;return _s=function(u){if(typeof u!="function")return!1;if(t(r(u)))return!0;if(!n){var h=i(u);return h==="[object GeneratorFunction]"}if(!o)return!1;if(typeof a>"u"){var f=s();a=f?o(f):!1}return o(u)===a},_s}var Ts,ru;function Jp(){if(ru)return Ts;ru=1;var l=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(m){m!==n&&(e=null)}else e=null;var o=/^\s*class\b/,i=function(g){try{var y=l.call(g);return o.test(y)}catch{return!1}},r=function(g){try{return i(g)?!1:(l.call(g),!0)}catch{return!1}},s=Object.prototype.toString,a="[object Object]",c="[object Function]",u="[object GeneratorFunction]",h="[object HTMLAllCollection]",f="[object HTML document.all class]",d="[object HTMLCollection]",p=typeof Symbol=="function"&&!!Symbol.toStringTag,S=!(0 in[,]),x=function(){return!1};if(typeof document=="object"){var v=document.all;s.call(v)===s.call(document.all)&&(x=function(g){if((S||!g)&&(typeof g>"u"||typeof g=="object"))try{var y=s.call(g);return(y===h||y===f||y===d||y===a)&&g("")==null}catch{}return!1})}return Ts=e?function(g){if(x(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;try{e(g,null,t)}catch(y){if(y!==n)return!1}return!i(g)&&r(g)}:function(g){if(x(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;if(p)return r(g);if(i(g))return!1;var y=s.call(g);return y!==c&&y!==u&&!/^\[object HTML/.test(y)?!1:r(g)},Ts}var bs,nu;function Zp(){if(nu)return bs;nu=1;var l=Jp(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(a,c,u){for(var h=0,f=a.length;h<f;h++)t.call(a,h)&&(u==null?c(a[h],h,a):c.call(u,a[h],h,a))},o=function(a,c,u){for(var h=0,f=a.length;h<f;h++)u==null?c(a.charAt(h),h,a):c.call(u,a.charAt(h),h,a)},i=function(a,c,u){for(var h in a)t.call(a,h)&&(u==null?c(a[h],h,a):c.call(u,a[h],h,a))};function r(s){return e.call(s)==="[object Array]"}return bs=function(a,c,u){if(!l(c))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=u),r(a)?n(a,c,h):typeof a=="string"?o(a,c,h):i(a,c,h)},bs}var Rs,iu;function e0(){return iu||(iu=1,Rs=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Rs}var Ns,ou;function t0(){if(ou)return Ns;ou=1;var l=e0(),e=typeof globalThis>"u"?Qf:globalThis;return Ns=function(){for(var n=[],o=0;o<l.length;o++)typeof e[l[o]]=="function"&&(n[n.length]=l[o]);return n},Ns}var ws={exports:{}},Os,su;function nd(){if(su)return Os;su=1;var l=mo(),e=Jf(),t=Ui(),n=ri();return Os=function(i,r,s){if(!i||typeof i!="object"&&typeof i!="function")throw new t("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,f=!!n&&n(i,r);if(l)l(i,r,{configurable:u===null&&f?f.configurable:!u,enumerable:a===null&&f?f.enumerable:!a,value:s,writable:c===null&&f?f.writable:!c});else if(h||!a&&!c&&!u)i[r]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Os}var Fs,au;function id(){if(au)return Fs;au=1;var l=mo(),e=function(){return!!l};return e.hasArrayLengthDefineBug=function(){if(!l)return null;try{return l([],"length",{value:1}).length!==1}catch{return!0}},Fs=e,Fs}var Ps,lu;function r0(){if(lu)return Ps;lu=1;var l=qa(),e=nd(),t=id()(),n=ri(),o=Ui(),i=l("%Math.floor%");return Ps=function(s,a){if(typeof s!="function")throw new o("`fn` is not a function");if(typeof a!="number"||a<0||a>4294967295||i(a)!==a)throw new o("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],u=!0,h=!0;if("length"in s&&n){var f=n(s,"length");f&&!f.configurable&&(u=!1),f&&!f.writable&&(h=!1)}return(u||h||!c)&&(t?e(s,"length",a,!0,!0):e(s,"length",a)),s},Ps}var Ds,uu;function n0(){if(uu)return Ds;uu=1;var l=$i(),e=ka(),t=td();return Ds=function(){return t(l,e,arguments)},Ds}var cu;function go(){return cu||(cu=1,function(l){var e=r0(),t=mo(),n=za(),o=n0();l.exports=function(r){var s=n(arguments),a=r.length-(arguments.length-1);return e(s,1+(a>0?a:0),!0)},t?t(l.exports,"apply",{value:o}):l.exports.apply=o}(ws)),ws.exports}var Is,hu;function od(){if(hu)return Is;hu=1;var l=Zp(),e=t0(),t=go(),n=ni(),o=ri(),i=ja(),r=n("Object.prototype.toString"),s=xo()(),a=typeof globalThis>"u"?Qf:globalThis,c=e(),u=n("String.prototype.slice"),h=n("Array.prototype.indexOf",!0)||function(x,v){for(var m=0;m<x.length;m+=1)if(x[m]===v)return m;return-1},f={__proto__:null};s&&o&&i?l(c,function(S){var x=new a[S];if(Symbol.toStringTag in x&&i){var v=i(x),m=o(v,Symbol.toStringTag);if(!m&&v){var g=i(v);m=o(g,Symbol.toStringTag)}f["$"+S]=t(m.get)}}):l(c,function(S){var x=new a[S],v=x.slice||x.set;v&&(f["$"+S]=t(v))});var d=function(x){var v=!1;return l(f,function(m,g){if(!v)try{"$"+m(x)===g&&(v=u(g,1))}catch{}}),v},p=function(x){var v=!1;return l(f,function(m,g){if(!v)try{m(x),v=u(g,1)}catch{}}),v};return Is=function(x){if(!x||typeof x!="object")return!1;if(!s){var v=u(r(x),8,-1);return h(c,v)>-1?v:v!=="Object"?!1:p(x)}return o?d(x):null},Is}var Ls,fu;function i0(){if(fu)return Ls;fu=1;var l=od();return Ls=function(t){return!!l(t)},Ls}var du;function o0(){return du||(du=1,function(l){var e=Yp(),t=Qp(),n=od(),o=i0();function i(q){return q.call.bind(q)}var r=typeof BigInt<"u",s=typeof Symbol<"u",a=i(Object.prototype.toString),c=i(Number.prototype.valueOf),u=i(String.prototype.valueOf),h=i(Boolean.prototype.valueOf);if(r)var f=i(BigInt.prototype.valueOf);if(s)var d=i(Symbol.prototype.valueOf);function p(q,X){if(typeof q!="object")return!1;try{return X(q),!0}catch{return!1}}l.isArgumentsObject=e,l.isGeneratorFunction=t,l.isTypedArray=o;function S(q){return typeof Promise<"u"&&q instanceof Promise||q!==null&&typeof q=="object"&&typeof q.then=="function"&&typeof q.catch=="function"}l.isPromise=S;function x(q){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(q):o(q)||E(q)}l.isArrayBufferView=x;function v(q){return n(q)==="Uint8Array"}l.isUint8Array=v;function m(q){return n(q)==="Uint8ClampedArray"}l.isUint8ClampedArray=m;function g(q){return n(q)==="Uint16Array"}l.isUint16Array=g;function y(q){return n(q)==="Uint32Array"}l.isUint32Array=y;function T(q){return n(q)==="Int8Array"}l.isInt8Array=T;function A(q){return n(q)==="Int16Array"}l.isInt16Array=A;function b(q){return n(q)==="Int32Array"}l.isInt32Array=b;function R(q){return n(q)==="Float32Array"}l.isFloat32Array=R;function N(q){return n(q)==="Float64Array"}l.isFloat64Array=N;function P(q){return n(q)==="BigInt64Array"}l.isBigInt64Array=P;function B(q){return n(q)==="BigUint64Array"}l.isBigUint64Array=B;function I(q){return a(q)==="[object Map]"}I.working=typeof Map<"u"&&I(new Map);function V(q){return typeof Map>"u"?!1:I.working?I(q):q instanceof Map}l.isMap=V;function J(q){return a(q)==="[object Set]"}J.working=typeof Set<"u"&&J(new Set);function te(q){return typeof Set>"u"?!1:J.working?J(q):q instanceof Set}l.isSet=te;function oe(q){return a(q)==="[object WeakMap]"}oe.working=typeof WeakMap<"u"&&oe(new WeakMap);function ge(q){return typeof WeakMap>"u"?!1:oe.working?oe(q):q instanceof WeakMap}l.isWeakMap=ge;function ce(q){return a(q)==="[object WeakSet]"}ce.working=typeof WeakSet<"u"&&ce(new WeakSet);function ee(q){return ce(q)}l.isWeakSet=ee;function G(q){return a(q)==="[object ArrayBuffer]"}G.working=typeof ArrayBuffer<"u"&&G(new ArrayBuffer);function Q(q){return typeof ArrayBuffer>"u"?!1:G.working?G(q):q instanceof ArrayBuffer}l.isArrayBuffer=Q;function ie(q){return a(q)==="[object DataView]"}ie.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ie(new DataView(new ArrayBuffer(1),0,1));function E(q){return typeof DataView>"u"?!1:ie.working?ie(q):q instanceof DataView}l.isDataView=E;var C=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function _(q){return a(q)==="[object SharedArrayBuffer]"}function w(q){return typeof C>"u"?!1:(typeof _.working>"u"&&(_.working=_(new C)),_.working?_(q):q instanceof C)}l.isSharedArrayBuffer=w;function F(q){return a(q)==="[object AsyncFunction]"}l.isAsyncFunction=F;function O(q){return a(q)==="[object Map Iterator]"}l.isMapIterator=O;function D(q){return a(q)==="[object Set Iterator]"}l.isSetIterator=D;function j(q){return a(q)==="[object Generator]"}l.isGeneratorObject=j;function U(q){return a(q)==="[object WebAssembly.Module]"}l.isWebAssemblyCompiledModule=U;function W(q){return p(q,c)}l.isNumberObject=W;function L(q){return p(q,u)}l.isStringObject=L;function M(q){return p(q,h)}l.isBooleanObject=M;function H(q){return r&&p(q,f)}l.isBigIntObject=H;function Y(q){return s&&p(q,d)}l.isSymbolObject=Y;function re(q){return W(q)||L(q)||M(q)||H(q)||Y(q)}l.isBoxedPrimitive=re;function ne(q){return typeof Uint8Array<"u"&&(Q(q)||w(q))}l.isAnyArrayBuffer=ne,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(q){Object.defineProperty(l,q,{enumerable:!1,value:function(){throw new Error(q+" is not supported in userland")}})})}(ko)),ko}var Bs,pu;function s0(){return pu||(pu=1,Bs=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),Bs}var eo={exports:{}},xu;function a0(){return xu||(xu=1,typeof Object.create=="function"?eo.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:eo.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),eo.exports}var mu;function Qn(){return mu||(mu=1,function(l){var e={},t=Object.getOwnPropertyDescriptors||function(C){for(var _=Object.keys(C),w={},F=0;F<_.length;F++)w[_[F]]=Object.getOwnPropertyDescriptor(C,_[F]);return w},n=/%[sdj%]/g;l.format=function(E){if(!A(E)){for(var C=[],_=0;_<arguments.length;_++)C.push(s(arguments[_]));return C.join(" ")}for(var _=1,w=arguments,F=w.length,O=String(E).replace(n,function(j){if(j==="%%")return"%";if(_>=F)return j;switch(j){case"%s":return String(w[_++]);case"%d":return Number(w[_++]);case"%j":try{return JSON.stringify(w[_++])}catch{return"[Circular]"}default:return j}}),D=w[_];_<F;D=w[++_])g(D)||!P(D)?O+=" "+D:O+=" "+s(D);return O},l.deprecate=function(E,C){if(typeof process<"u"&&process.noDeprecation===!0)return E;if(typeof process>"u")return function(){return l.deprecate(E,C).apply(this,arguments)};var _=!1;function w(){if(!_){if(process.throwDeprecation)throw new Error(C);process.traceDeprecation?console.trace(C):console.error(C),_=!0}return E.apply(this,arguments)}return w};var o={},i=/^$/;if(e.NODE_DEBUG){var r=e.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+r+"$","i")}l.debuglog=function(E){if(E=E.toUpperCase(),!o[E])if(i.test(E)){var C=process.pid;o[E]=function(){var _=l.format.apply(l,arguments);console.error("%s %d: %s",E,C,_)}}else o[E]=function(){};return o[E]};function s(E,C){var _={seen:[],stylize:c};return arguments.length>=3&&(_.depth=arguments[2]),arguments.length>=4&&(_.colors=arguments[3]),m(C)?_.showHidden=C:C&&l._extend(_,C),R(_.showHidden)&&(_.showHidden=!1),R(_.depth)&&(_.depth=2),R(_.colors)&&(_.colors=!1),R(_.customInspect)&&(_.customInspect=!0),_.colors&&(_.stylize=a),h(_,E,_.depth)}l.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(E,C){var _=s.styles[C];return _?"\x1B["+s.colors[_][0]+"m"+E+"\x1B["+s.colors[_][1]+"m":E}function c(E,C){return E}function u(E){var C={};return E.forEach(function(_,w){C[_]=!0}),C}function h(E,C,_){if(E.customInspect&&C&&V(C.inspect)&&C.inspect!==l.inspect&&!(C.constructor&&C.constructor.prototype===C)){var w=C.inspect(_,E);return A(w)||(w=h(E,w,_)),w}var F=f(E,C);if(F)return F;var O=Object.keys(C),D=u(O);if(E.showHidden&&(O=Object.getOwnPropertyNames(C)),I(C)&&(O.indexOf("message")>=0||O.indexOf("description")>=0))return d(C);if(O.length===0){if(V(C)){var j=C.name?": "+C.name:"";return E.stylize("[Function"+j+"]","special")}if(N(C))return E.stylize(RegExp.prototype.toString.call(C),"regexp");if(B(C))return E.stylize(Date.prototype.toString.call(C),"date");if(I(C))return d(C)}var U="",W=!1,L=["{","}"];if(v(C)&&(W=!0,L=["[","]"]),V(C)){var M=C.name?": "+C.name:"";U=" [Function"+M+"]"}if(N(C)&&(U=" "+RegExp.prototype.toString.call(C)),B(C)&&(U=" "+Date.prototype.toUTCString.call(C)),I(C)&&(U=" "+d(C)),O.length===0&&(!W||C.length==0))return L[0]+U+L[1];if(_<0)return N(C)?E.stylize(RegExp.prototype.toString.call(C),"regexp"):E.stylize("[Object]","special");E.seen.push(C);var H;return W?H=p(E,C,_,D,O):H=O.map(function(Y){return S(E,C,_,D,Y,W)}),E.seen.pop(),x(H,U,L)}function f(E,C){if(R(C))return E.stylize("undefined","undefined");if(A(C)){var _="'"+JSON.stringify(C).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return E.stylize(_,"string")}if(T(C))return E.stylize(""+C,"number");if(m(C))return E.stylize(""+C,"boolean");if(g(C))return E.stylize("null","null")}function d(E){return"["+Error.prototype.toString.call(E)+"]"}function p(E,C,_,w,F){for(var O=[],D=0,j=C.length;D<j;++D)ee(C,String(D))?O.push(S(E,C,_,w,String(D),!0)):O.push("");return F.forEach(function(U){U.match(/^\d+$/)||O.push(S(E,C,_,w,U,!0))}),O}function S(E,C,_,w,F,O){var D,j,U;if(U=Object.getOwnPropertyDescriptor(C,F)||{value:C[F]},U.get?U.set?j=E.stylize("[Getter/Setter]","special"):j=E.stylize("[Getter]","special"):U.set&&(j=E.stylize("[Setter]","special")),ee(w,F)||(D="["+F+"]"),j||(E.seen.indexOf(U.value)<0?(g(_)?j=h(E,U.value,null):j=h(E,U.value,_-1),j.indexOf(`
`)>-1&&(O?j=j.split(`
`).map(function(W){return"  "+W}).join(`
`).slice(2):j=`
`+j.split(`
`).map(function(W){return"   "+W}).join(`
`))):j=E.stylize("[Circular]","special")),R(D)){if(O&&F.match(/^\d+$/))return j;D=JSON.stringify(""+F),D.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(D=D.slice(1,-1),D=E.stylize(D,"name")):(D=D.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),D=E.stylize(D,"string"))}return D+": "+j}function x(E,C,_){var w=E.reduce(function(F,O){return O.indexOf(`
`)>=0,F+O.replace(/\u001b\[\d\d?m/g,"").length+1},0);return w>60?_[0]+(C===""?"":C+`
 `)+" "+E.join(`,
  `)+" "+_[1]:_[0]+C+" "+E.join(", ")+" "+_[1]}l.types=o0();function v(E){return Array.isArray(E)}l.isArray=v;function m(E){return typeof E=="boolean"}l.isBoolean=m;function g(E){return E===null}l.isNull=g;function y(E){return E==null}l.isNullOrUndefined=y;function T(E){return typeof E=="number"}l.isNumber=T;function A(E){return typeof E=="string"}l.isString=A;function b(E){return typeof E=="symbol"}l.isSymbol=b;function R(E){return E===void 0}l.isUndefined=R;function N(E){return P(E)&&te(E)==="[object RegExp]"}l.isRegExp=N,l.types.isRegExp=N;function P(E){return typeof E=="object"&&E!==null}l.isObject=P;function B(E){return P(E)&&te(E)==="[object Date]"}l.isDate=B,l.types.isDate=B;function I(E){return P(E)&&(te(E)==="[object Error]"||E instanceof Error)}l.isError=I,l.types.isNativeError=I;function V(E){return typeof E=="function"}l.isFunction=V;function J(E){return E===null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||typeof E=="symbol"||typeof E>"u"}l.isPrimitive=J,l.isBuffer=s0();function te(E){return Object.prototype.toString.call(E)}function oe(E){return E<10?"0"+E.toString(10):E.toString(10)}var ge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(){var E=new Date,C=[oe(E.getHours()),oe(E.getMinutes()),oe(E.getSeconds())].join(":");return[E.getDate(),ge[E.getMonth()],C].join(" ")}l.log=function(){console.log("%s - %s",ce(),l.format.apply(l,arguments))},l.inherits=a0(),l._extend=function(E,C){if(!C||!P(C))return E;for(var _=Object.keys(C),w=_.length;w--;)E[_[w]]=C[_[w]];return E};function ee(E,C){return Object.prototype.hasOwnProperty.call(E,C)}var G=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;l.promisify=function(C){if(typeof C!="function")throw new TypeError('The "original" argument must be of type Function');if(G&&C[G]){var _=C[G];if(typeof _!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(_,G,{value:_,enumerable:!1,writable:!1,configurable:!0}),_}function _(){for(var w,F,O=new Promise(function(U,W){w=U,F=W}),D=[],j=0;j<arguments.length;j++)D.push(arguments[j]);D.push(function(U,W){U?F(U):w(W)});try{C.apply(this,D)}catch(U){F(U)}return O}return Object.setPrototypeOf(_,Object.getPrototypeOf(C)),G&&Object.defineProperty(_,G,{value:_,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(_,t(C))},l.promisify.custom=G;function Q(E,C){if(!E){var _=new Error("Promise was rejected with a falsy value");_.reason=E,E=_}return C(E)}function ie(E){if(typeof E!="function")throw new TypeError('The "original" argument must be of type Function');function C(){for(var _=[],w=0;w<arguments.length;w++)_.push(arguments[w]);var F=_.pop();if(typeof F!="function")throw new TypeError("The last argument must be of type Function");var O=this,D=function(){return F.apply(O,arguments)};E.apply(this,_).then(function(j){process.nextTick(D.bind(null,null,j))},function(j){process.nextTick(Q.bind(null,j,D))})}return Object.setPrototypeOf(C,Object.getPrototypeOf(E)),Object.defineProperties(C,t(E)),C}l.callbackify=ie}(Mo)),Mo}var gu;function sd(){if(gu)return Bo;gu=1;function l(m){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l(m)}function e(m,g,y){return Object.defineProperty(m,"prototype",{writable:!1}),m}function t(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function n(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),g&&o(m,g)}function o(m,g){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(T,A){return T.__proto__=A,T},o(m,g)}function i(m){var g=a();return function(){var T=c(m),A;if(g){var b=c(this).constructor;A=Reflect.construct(T,arguments,b)}else A=T.apply(this,arguments);return r(this,A)}}function r(m,g){if(g&&(l(g)==="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c(m){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},c(m)}var u={},h,f;function d(m,g,y){y||(y=Error);function T(b,R,N){return typeof g=="string"?g:g(b,R,N)}var A=function(b){n(N,b);var R=i(N);function N(P,B,I){var V;return t(this,N),V=R.call(this,T(P,B,I)),V.code=m,V}return e(N)}(y);u[m]=A}function p(m,g){if(Array.isArray(m)){var y=m.length;return m=m.map(function(T){return String(T)}),y>2?"one of ".concat(g," ").concat(m.slice(0,y-1).join(", "),", or ")+m[y-1]:y===2?"one of ".concat(g," ").concat(m[0]," or ").concat(m[1]):"of ".concat(g," ").concat(m[0])}else return"of ".concat(g," ").concat(String(m))}function S(m,g,y){return m.substr(0,g.length)===g}function x(m,g,y){return(y===void 0||y>m.length)&&(y=m.length),m.substring(y-g.length,y)===g}function v(m,g,y){return typeof y!="number"&&(y=0),y+g.length>m.length?!1:m.indexOf(g,y)!==-1}return d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",function(m,g,y){h===void 0&&(h=$e()),h(typeof m=="string","'name' must be a string");var T;typeof g=="string"&&S(g,"not ")?(T="must not be",g=g.replace(/^not /,"")):T="must be";var A;if(x(m," argument"))A="The ".concat(m," ").concat(T," ").concat(p(g,"type"));else{var b=v(m,".")?"property":"argument";A='The "'.concat(m,'" ').concat(b," ").concat(T," ").concat(p(g,"type"))}return A+=". Received type ".concat(l(y)),A},TypeError),d("ERR_INVALID_ARG_VALUE",function(m,g){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";f===void 0&&(f=Qn());var T=f.inspect(g);return T.length>128&&(T="".concat(T.slice(0,128),"...")),"The argument '".concat(m,"' ").concat(y,". Received ").concat(T)},TypeError),d("ERR_INVALID_RETURN_VALUE",function(m,g,y){var T;return y&&y.constructor&&y.constructor.name?T="instance of ".concat(y.constructor.name):T="type ".concat(l(y)),"Expected ".concat(m,' to be returned from the "').concat(g,'"')+" function but got ".concat(T,".")},TypeError),d("ERR_MISSING_ARGS",function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];h===void 0&&(h=$e()),h(g.length>0,"At least one arg needs to be specified");var T="The ",A=g.length;switch(g=g.map(function(b){return'"'.concat(b,'"')}),A){case 1:T+="".concat(g[0]," argument");break;case 2:T+="".concat(g[0]," and ").concat(g[1]," arguments");break;default:T+=g.slice(0,A-1).join(", "),T+=", and ".concat(g[A-1]," arguments");break}return"".concat(T," must be specified")},TypeError),Bo.codes=u,Bo}var Ms,yu;function l0(){if(yu)return Ms;yu=1;function l(ee,G){var Q=Object.keys(ee);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(ee);G&&(ie=ie.filter(function(E){return Object.getOwnPropertyDescriptor(ee,E).enumerable})),Q.push.apply(Q,ie)}return Q}function e(ee){for(var G=1;G<arguments.length;G++){var Q=arguments[G]!=null?arguments[G]:{};G%2?l(Object(Q),!0).forEach(function(ie){t(ee,ie,Q[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(Q)):l(Object(Q)).forEach(function(ie){Object.defineProperty(ee,ie,Object.getOwnPropertyDescriptor(Q,ie))})}return ee}function t(ee,G,Q){return G=r(G),G in ee?Object.defineProperty(ee,G,{value:Q,enumerable:!0,configurable:!0,writable:!0}):ee[G]=Q,ee}function n(ee,G){if(!(ee instanceof G))throw new TypeError("Cannot call a class as a function")}function o(ee,G){for(var Q=0;Q<G.length;Q++){var ie=G[Q];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(ee,r(ie.key),ie)}}function i(ee,G,Q){return G&&o(ee.prototype,G),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function r(ee){var G=s(ee,"string");return m(G)==="symbol"?G:String(G)}function s(ee,G){if(m(ee)!=="object"||ee===null)return ee;var Q=ee[Symbol.toPrimitive];if(Q!==void 0){var ie=Q.call(ee,G);if(m(ie)!=="object")return ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ee)}function a(ee,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(G&&G.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),G&&x(ee,G)}function c(ee){var G=p();return function(){var ie=v(ee),E;if(G){var C=v(this).constructor;E=Reflect.construct(ie,arguments,C)}else E=ie.apply(this,arguments);return u(this,E)}}function u(ee,G){if(G&&(m(G)==="object"||typeof G=="function"))return G;if(G!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(ee)}function h(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function f(ee){var G=typeof Map=="function"?new Map:void 0;return f=function(ie){if(ie===null||!S(ie))return ie;if(typeof ie!="function")throw new TypeError("Super expression must either be null or a function");if(typeof G<"u"){if(G.has(ie))return G.get(ie);G.set(ie,E)}function E(){return d(ie,arguments,v(this).constructor)}return E.prototype=Object.create(ie.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),x(E,ie)},f(ee)}function d(ee,G,Q){return p()?d=Reflect.construct.bind():d=function(E,C,_){var w=[null];w.push.apply(w,C);var F=Function.bind.apply(E,w),O=new F;return _&&x(O,_.prototype),O},d.apply(null,arguments)}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(ee){return Function.toString.call(ee).indexOf("[native code]")!==-1}function x(ee,G){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ie,E){return ie.__proto__=E,ie},x(ee,G)}function v(ee){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Q){return Q.__proto__||Object.getPrototypeOf(Q)},v(ee)}function m(ee){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},m(ee)}var g=Qn(),y=g.inspect,T=sd(),A=T.codes.ERR_INVALID_ARG_TYPE;function b(ee,G,Q){return(Q===void 0||Q>ee.length)&&(Q=ee.length),ee.substring(Q-G.length,Q)===G}function R(ee,G){if(G=Math.floor(G),ee.length==0||G==0)return"";var Q=ee.length*G;for(G=Math.floor(Math.log(G)/Math.log(2));G;)ee+=ee,G--;return ee+=ee.substring(0,Q-ee.length),ee}var N="",P="",B="",I="",V={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},J=10;function te(ee){var G=Object.keys(ee),Q=Object.create(Object.getPrototypeOf(ee));return G.forEach(function(ie){Q[ie]=ee[ie]}),Object.defineProperty(Q,"message",{value:ee.message}),Q}function oe(ee){return y(ee,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function ge(ee,G,Q){var ie="",E="",C=0,_="",w=!1,F=oe(ee),O=F.split(`
`),D=oe(G).split(`
`),j=0,U="";if(Q==="strictEqual"&&m(ee)==="object"&&m(G)==="object"&&ee!==null&&G!==null&&(Q="strictEqualObject"),O.length===1&&D.length===1&&O[0]!==D[0]){var W=O[0].length+D[0].length;if(W<=J){if((m(ee)!=="object"||ee===null)&&(m(G)!=="object"||G===null)&&(ee!==0||G!==0))return"".concat(V[Q],`

`)+"".concat(O[0]," !== ").concat(D[0],`
`)}else if(Q!=="strictEqualObject"){var L=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(W<L){for(;O[0][j]===D[0][j];)j++;j>2&&(U=`
  `.concat(R(" ",j),"^"),j=0)}}}for(var M=O[O.length-1],H=D[D.length-1];M===H&&(j++<2?_=`
  `.concat(M).concat(_):ie=M,O.pop(),D.pop(),!(O.length===0||D.length===0));)M=O[O.length-1],H=D[D.length-1];var Y=Math.max(O.length,D.length);if(Y===0){var re=F.split(`
`);if(re.length>30)for(re[26]="".concat(N,"...").concat(I);re.length>27;)re.pop();return"".concat(V.notIdentical,`

`).concat(re.join(`
`),`
`)}j>3&&(_=`
`.concat(N,"...").concat(I).concat(_),w=!0),ie!==""&&(_=`
  `.concat(ie).concat(_),ie="");var ne=0,q=V[Q]+`
`.concat(P,"+ actual").concat(I," ").concat(B,"- expected").concat(I),X=" ".concat(N,"...").concat(I," Lines skipped");for(j=0;j<Y;j++){var he=j-C;if(O.length<j+1)he>1&&j>2&&(he>4?(E+=`
`.concat(N,"...").concat(I),w=!0):he>3&&(E+=`
  `.concat(D[j-2]),ne++),E+=`
  `.concat(D[j-1]),ne++),C=j,ie+=`
`.concat(B,"-").concat(I," ").concat(D[j]),ne++;else if(D.length<j+1)he>1&&j>2&&(he>4?(E+=`
`.concat(N,"...").concat(I),w=!0):he>3&&(E+=`
  `.concat(O[j-2]),ne++),E+=`
  `.concat(O[j-1]),ne++),C=j,E+=`
`.concat(P,"+").concat(I," ").concat(O[j]),ne++;else{var be=D[j],Re=O[j],z=Re!==be&&(!b(Re,",")||Re.slice(0,-1)!==be);z&&b(be,",")&&be.slice(0,-1)===Re&&(z=!1,Re+=","),z?(he>1&&j>2&&(he>4?(E+=`
`.concat(N,"...").concat(I),w=!0):he>3&&(E+=`
  `.concat(O[j-2]),ne++),E+=`
  `.concat(O[j-1]),ne++),C=j,E+=`
`.concat(P,"+").concat(I," ").concat(Re),ie+=`
`.concat(B,"-").concat(I," ").concat(be),ne+=2):(E+=ie,ie="",(he===1||j===0)&&(E+=`
  `.concat(Re),ne++))}if(ne>20&&j<Y-2)return"".concat(q).concat(X,`
`).concat(E,`
`).concat(N,"...").concat(I).concat(ie,`
`)+"".concat(N,"...").concat(I)}return"".concat(q).concat(w?X:"",`
`).concat(E).concat(ie).concat(_).concat(U)}var ce=function(ee,G){a(ie,ee);var Q=c(ie);function ie(E){var C;if(n(this,ie),m(E)!=="object"||E===null)throw new A("options","Object",E);var _=E.message,w=E.operator,F=E.stackStartFn,O=E.actual,D=E.expected,j=Error.stackTraceLimit;if(Error.stackTraceLimit=0,_!=null)C=Q.call(this,String(_));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(N="\x1B[34m",P="\x1B[32m",I="\x1B[39m",B="\x1B[31m"):(N="",P="",I="",B="")),m(O)==="object"&&O!==null&&m(D)==="object"&&D!==null&&"stack"in O&&O instanceof Error&&"stack"in D&&D instanceof Error&&(O=te(O),D=te(D)),w==="deepStrictEqual"||w==="strictEqual")C=Q.call(this,ge(O,D,w));else if(w==="notDeepStrictEqual"||w==="notStrictEqual"){var U=V[w],W=oe(O).split(`
`);if(w==="notStrictEqual"&&m(O)==="object"&&O!==null&&(U=V.notStrictEqualObject),W.length>30)for(W[26]="".concat(N,"...").concat(I);W.length>27;)W.pop();W.length===1?C=Q.call(this,"".concat(U," ").concat(W[0])):C=Q.call(this,"".concat(U,`

`).concat(W.join(`
`),`
`))}else{var L=oe(O),M="",H=V[w];w==="notDeepEqual"||w==="notEqual"?(L="".concat(V[w],`

`).concat(L),L.length>1024&&(L="".concat(L.slice(0,1021),"..."))):(M="".concat(oe(D)),L.length>512&&(L="".concat(L.slice(0,509),"...")),M.length>512&&(M="".concat(M.slice(0,509),"...")),w==="deepEqual"||w==="equal"?L="".concat(H,`

`).concat(L,`

should equal

`):M=" ".concat(w," ").concat(M)),C=Q.call(this,"".concat(L).concat(M))}return Error.stackTraceLimit=j,C.generatedMessage=!_,Object.defineProperty(h(C),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),C.code="ERR_ASSERTION",C.actual=O,C.expected=D,C.operator=w,Error.captureStackTrace&&Error.captureStackTrace(h(C),F),C.stack,C.name="AssertionError",u(C)}return i(ie,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:G,value:function(C,_){return y(this,e(e({},_),{},{customInspect:!1,depth:0}))}}]),ie}(f(Error),y.custom);return Ms=ce,Ms}var ks,vu;function ad(){if(vu)return ks;vu=1;var l=Object.prototype.toString;return ks=function(t){var n=l.call(t),o=n==="[object Arguments]";return o||(o=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&l.call(t.callee)==="[object Function]"),o},ks}var zs,Su;function u0(){if(Su)return zs;Su=1;var l;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=ad(),o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),r=o.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=function(f){var d=f.constructor;return d&&d.prototype===f},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!c["$"+f]&&e.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{a(window[f])}catch{return!0}}catch{return!0}return!1}(),h=function(f){if(typeof window>"u"||!u)return a(f);try{return a(f)}catch{return!1}};l=function(d){var p=d!==null&&typeof d=="object",S=t.call(d)==="[object Function]",x=n(d),v=p&&t.call(d)==="[object String]",m=[];if(!p&&!S&&!x)throw new TypeError("Object.keys called on a non-object");var g=r&&S;if(v&&d.length>0&&!e.call(d,0))for(var y=0;y<d.length;++y)m.push(String(y));if(x&&d.length>0)for(var T=0;T<d.length;++T)m.push(String(T));else for(var A in d)!(g&&A==="prototype")&&e.call(d,A)&&m.push(String(A));if(i)for(var b=h(d),R=0;R<s.length;++R)!(b&&s[R]==="constructor")&&e.call(d,s[R])&&m.push(s[R]);return m}}return zs=l,zs}var js,Au;function ld(){if(Au)return js;Au=1;var l=Array.prototype.slice,e=ad(),t=Object.keys,n=t?function(r){return t(r)}:u0(),o=Object.keys;return n.shim=function(){if(Object.keys){var r=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);r||(Object.keys=function(a){return e(a)?o(l.call(a)):o(a)})}else Object.keys=n;return Object.keys||n},js=n,js}var qs,Cu;function c0(){if(Cu)return qs;Cu=1;var l=ld(),e=La()(),t=ni(),n=Ba(),o=t("Array.prototype.push"),i=t("Object.prototype.propertyIsEnumerable"),r=e?n.getOwnPropertySymbols:null;return qs=function(a,c){if(a==null)throw new TypeError("target must be an object");var u=n(a);if(arguments.length===1)return u;for(var h=1;h<arguments.length;++h){var f=n(arguments[h]),d=l(f),p=e&&(n.getOwnPropertySymbols||r);if(p)for(var S=p(f),x=0;x<S.length;++x){var v=S[x];i(f,v)&&o(d,v)}for(var m=0;m<d.length;++m){var g=d[m];if(i(f,g)){var y=f[g];u[g]=y}}}return u},qs}var Hs,Eu;function h0(){if(Eu)return Hs;Eu=1;var l=c0(),e=function(){if(!Object.assign)return!1;for(var n="abcdefghijklmnopqrst",o=n.split(""),i={},r=0;r<o.length;++r)i[o[r]]=o[r];var s=Object.assign({},i),a="";for(var c in s)a+=c;return n!==a},t=function(){if(!Object.assign||!Object.preventExtensions)return!1;var n=Object.preventExtensions({1:2});try{Object.assign(n,"xy")}catch{return n[1]==="y"}return!1};return Hs=function(){return!Object.assign||e()||t()?l:Object.assign},Hs}var Us,_u;function ud(){if(_u)return Us;_u=1;var l=function(e){return e!==e};return Us=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||l(t)&&l(n))},Us}var $s,Tu;function Ha(){if(Tu)return $s;Tu=1;var l=ud();return $s=function(){return typeof Object.is=="function"?Object.is:l},$s}var Vs,bu;function f0(){if(bu)return Vs;bu=1;var l=qa(),e=go(),t=e(l("String.prototype.indexOf"));return Vs=function(o,i){var r=l(o,!!i);return typeof r=="function"&&t(o,".prototype.")>-1?e(r):r},Vs}var Ws,Ru;function yo(){if(Ru)return Ws;Ru=1;var l=ld(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,n=Array.prototype.concat,o=nd(),i=function(c){return typeof c=="function"&&t.call(c)==="[object Function]"},r=id()(),s=function(c,u,h,f){if(u in c){if(f===!0){if(c[u]===h)return}else if(!i(f)||!f())return}r?o(c,u,h,!0):o(c,u,h)},a=function(c,u){var h=arguments.length>2?arguments[2]:{},f=l(u);e&&(f=n.call(f,Object.getOwnPropertySymbols(u)));for(var d=0;d<f.length;d+=1)s(c,f[d],u[f[d]],h[f[d]])};return a.supportsDescriptors=!!r,Ws=a,Ws}var Gs,Nu;function d0(){if(Nu)return Gs;Nu=1;var l=Ha(),e=yo();return Gs=function(){var n=l();return e(Object,{is:n},{is:function(){return Object.is!==n}}),n},Gs}var Ys,wu;function p0(){if(wu)return Ys;wu=1;var l=yo(),e=go(),t=ud(),n=Ha(),o=d0(),i=e(n(),Object);return l(i,{getPolyfill:n,implementation:t,shim:o}),Ys=i,Ys}var Xs,Ou;function cd(){return Ou||(Ou=1,Xs=function(e){return e!==e}),Xs}var Ks,Fu;function hd(){if(Fu)return Ks;Fu=1;var l=cd();return Ks=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:l},Ks}var Qs,Pu;function x0(){if(Pu)return Qs;Pu=1;var l=yo(),e=hd();return Qs=function(){var n=e();return l(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n},Qs}var Js,Du;function m0(){if(Du)return Js;Du=1;var l=go(),e=yo(),t=cd(),n=hd(),o=x0(),i=l(n(),Number);return e(i,{getPolyfill:n,implementation:t,shim:o}),Js=i,Js}var Zs,Iu;function g0(){if(Iu)return Zs;Iu=1;function l(z,$){return i(z)||o(z,$)||t(z,$)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(z,$){if(z){if(typeof z=="string")return n(z,$);var le=Object.prototype.toString.call(z).slice(8,-1);if(le==="Object"&&z.constructor&&(le=z.constructor.name),le==="Map"||le==="Set")return Array.from(z);if(le==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(le))return n(z,$)}}function n(z,$){($==null||$>z.length)&&($=z.length);for(var le=0,de=new Array($);le<$;le++)de[le]=z[le];return de}function o(z,$){var le=z==null?null:typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(le!=null){var de,xe,_e,Se,Ne=[],we=!0,ze=!1;try{if(_e=(le=le.call(z)).next,$!==0)for(;!(we=(de=_e.call(le)).done)&&(Ne.push(de.value),Ne.length!==$);we=!0);}catch(K){ze=!0,xe=K}finally{try{if(!we&&le.return!=null&&(Se=le.return(),Object(Se)!==Se))return}finally{if(ze)throw xe}}return Ne}}function i(z){if(Array.isArray(z))return z}function r(z){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},r(z)}var s=/a/g.flags!==void 0,a=function($){var le=[];return $.forEach(function(de){return le.push(de)}),le},c=function($){var le=[];return $.forEach(function(de,xe){return le.push([xe,de])}),le},u=Object.is?Object.is:p0(),h=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},f=Number.isNaN?Number.isNaN:m0();function d(z){return z.call.bind(z)}var p=d(Object.prototype.hasOwnProperty),S=d(Object.prototype.propertyIsEnumerable),x=d(Object.prototype.toString),v=Qn().types,m=v.isAnyArrayBuffer,g=v.isArrayBufferView,y=v.isDate,T=v.isMap,A=v.isRegExp,b=v.isSet,R=v.isNativeError,N=v.isBoxedPrimitive,P=v.isNumberObject,B=v.isStringObject,I=v.isBooleanObject,V=v.isBigIntObject,J=v.isSymbolObject,te=v.isFloat32Array,oe=v.isFloat64Array;function ge(z){if(z.length===0||z.length>10)return!0;for(var $=0;$<z.length;$++){var le=z.charCodeAt($);if(le<48||le>57)return!0}return z.length===10&&z>=Math.pow(2,32)}function ce(z){return Object.keys(z).filter(ge).concat(h(z).filter(Object.prototype.propertyIsEnumerable.bind(z)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function ee(z,$){if(z===$)return 0;for(var le=z.length,de=$.length,xe=0,_e=Math.min(le,de);xe<_e;++xe)if(z[xe]!==$[xe]){le=z[xe],de=$[xe];break}return le<de?-1:de<le?1:0}var G=!0,Q=!1,ie=0,E=1,C=2,_=3;function w(z,$){return s?z.source===$.source&&z.flags===$.flags:RegExp.prototype.toString.call(z)===RegExp.prototype.toString.call($)}function F(z,$){if(z.byteLength!==$.byteLength)return!1;for(var le=0;le<z.byteLength;le++)if(z[le]!==$[le])return!1;return!0}function O(z,$){return z.byteLength!==$.byteLength?!1:ee(new Uint8Array(z.buffer,z.byteOffset,z.byteLength),new Uint8Array($.buffer,$.byteOffset,$.byteLength))===0}function D(z,$){return z.byteLength===$.byteLength&&ee(new Uint8Array(z),new Uint8Array($))===0}function j(z,$){return P(z)?P($)&&u(Number.prototype.valueOf.call(z),Number.prototype.valueOf.call($)):B(z)?B($)&&String.prototype.valueOf.call(z)===String.prototype.valueOf.call($):I(z)?I($)&&Boolean.prototype.valueOf.call(z)===Boolean.prototype.valueOf.call($):V(z)?V($)&&BigInt.prototype.valueOf.call(z)===BigInt.prototype.valueOf.call($):J($)&&Symbol.prototype.valueOf.call(z)===Symbol.prototype.valueOf.call($)}function U(z,$,le,de){if(z===$)return z!==0?!0:le?u(z,$):!0;if(le){if(r(z)!=="object")return typeof z=="number"&&f(z)&&f($);if(r($)!=="object"||z===null||$===null||Object.getPrototypeOf(z)!==Object.getPrototypeOf($))return!1}else{if(z===null||r(z)!=="object")return $===null||r($)!=="object"?z==$:!1;if($===null||r($)!=="object")return!1}var xe=x(z),_e=x($);if(xe!==_e)return!1;if(Array.isArray(z)){if(z.length!==$.length)return!1;var Se=ce(z),Ne=ce($);return Se.length!==Ne.length?!1:L(z,$,le,de,E,Se)}if(xe==="[object Object]"&&(!T(z)&&T($)||!b(z)&&b($)))return!1;if(y(z)){if(!y($)||Date.prototype.getTime.call(z)!==Date.prototype.getTime.call($))return!1}else if(A(z)){if(!A($)||!w(z,$))return!1}else if(R(z)||z instanceof Error){if(z.message!==$.message||z.name!==$.name)return!1}else if(g(z)){if(!le&&(te(z)||oe(z))){if(!F(z,$))return!1}else if(!O(z,$))return!1;var we=ce(z),ze=ce($);return we.length!==ze.length?!1:L(z,$,le,de,ie,we)}else{if(b(z))return!b($)||z.size!==$.size?!1:L(z,$,le,de,C);if(T(z))return!T($)||z.size!==$.size?!1:L(z,$,le,de,_);if(m(z)){if(!D(z,$))return!1}else if(N(z)&&!j(z,$))return!1}return L(z,$,le,de,ie)}function W(z,$){return $.filter(function(le){return S(z,le)})}function L(z,$,le,de,xe,_e){if(arguments.length===5){_e=Object.keys(z);var Se=Object.keys($);if(_e.length!==Se.length)return!1}for(var Ne=0;Ne<_e.length;Ne++)if(!p($,_e[Ne]))return!1;if(le&&arguments.length===5){var we=h(z);if(we.length!==0){var ze=0;for(Ne=0;Ne<we.length;Ne++){var K=we[Ne];if(S(z,K)){if(!S($,K))return!1;_e.push(K),ze++}else if(S($,K))return!1}var me=h($);if(we.length!==me.length&&W($,me).length!==ze)return!1}else{var ye=h($);if(ye.length!==0&&W($,ye).length!==0)return!1}}if(_e.length===0&&(xe===ie||xe===E&&z.length===0||z.size===0))return!0;if(de===void 0)de={val1:new Map,val2:new Map,position:0};else{var Ce=de.val1.get(z);if(Ce!==void 0){var Pe=de.val2.get($);if(Pe!==void 0)return Ce===Pe}de.position++}de.val1.set(z,de.position),de.val2.set($,de.position);var Ve=he(z,$,le,_e,de,xe);return de.val1.delete(z),de.val2.delete($),Ve}function M(z,$,le,de){for(var xe=a(z),_e=0;_e<xe.length;_e++){var Se=xe[_e];if(U($,Se,le,de))return z.delete(Se),!0}return!1}function H(z){switch(r(z)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":z=+z;case"number":if(f(z))return!1}return!0}function Y(z,$,le){var de=H(le);return de??($.has(de)&&!z.has(de))}function re(z,$,le,de,xe){var _e=H(le);if(_e!=null)return _e;var Se=$.get(_e);return Se===void 0&&!$.has(_e)||!U(de,Se,!1,xe)?!1:!z.has(_e)&&U(de,Se,!1,xe)}function ne(z,$,le,de){for(var xe=null,_e=a(z),Se=0;Se<_e.length;Se++){var Ne=_e[Se];if(r(Ne)==="object"&&Ne!==null)xe===null&&(xe=new Set),xe.add(Ne);else if(!$.has(Ne)){if(le||!Y(z,$,Ne))return!1;xe===null&&(xe=new Set),xe.add(Ne)}}if(xe!==null){for(var we=a($),ze=0;ze<we.length;ze++){var K=we[ze];if(r(K)==="object"&&K!==null){if(!M(xe,K,le,de))return!1}else if(!le&&!z.has(K)&&!M(xe,K,le,de))return!1}return xe.size===0}return!0}function q(z,$,le,de,xe,_e){for(var Se=a(z),Ne=0;Ne<Se.length;Ne++){var we=Se[Ne];if(U(le,we,xe,_e)&&U(de,$.get(we),xe,_e))return z.delete(we),!0}return!1}function X(z,$,le,de){for(var xe=null,_e=c(z),Se=0;Se<_e.length;Se++){var Ne=l(_e[Se],2),we=Ne[0],ze=Ne[1];if(r(we)==="object"&&we!==null)xe===null&&(xe=new Set),xe.add(we);else{var K=$.get(we);if(K===void 0&&!$.has(we)||!U(ze,K,le,de)){if(le||!re(z,$,we,ze,de))return!1;xe===null&&(xe=new Set),xe.add(we)}}}if(xe!==null){for(var me=c($),ye=0;ye<me.length;ye++){var Ce=l(me[ye],2),Pe=Ce[0],Ve=Ce[1];if(r(Pe)==="object"&&Pe!==null){if(!q(xe,z,Pe,Ve,le,de))return!1}else if(!le&&(!z.has(Pe)||!U(z.get(Pe),Ve,!1,de))&&!q(xe,z,Pe,Ve,!1,de))return!1}return xe.size===0}return!0}function he(z,$,le,de,xe,_e){var Se=0;if(_e===C){if(!ne(z,$,le,xe))return!1}else if(_e===_){if(!X(z,$,le,xe))return!1}else if(_e===E)for(;Se<z.length;Se++)if(p(z,Se)){if(!p($,Se)||!U(z[Se],$[Se],le,xe))return!1}else{if(p($,Se))return!1;for(var Ne=Object.keys(z);Se<Ne.length;Se++){var we=Ne[Se];if(!p($,we)||!U(z[we],$[we],le,xe))return!1}return Ne.length===Object.keys($).length}for(Se=0;Se<de.length;Se++){var ze=de[Se];if(!U(z[ze],$[ze],le,xe))return!1}return!0}function be(z,$){return U(z,$,Q)}function Re(z,$){return U(z,$,G)}return Zs={isDeepEqual:be,isDeepStrictEqual:Re},Zs}var Lu;function $e(){if(Lu)return Lo.exports;Lu=1;function l(C){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},l(C)}function e(C,_,w){return Object.defineProperty(C,"prototype",{writable:!1}),C}function t(C,_){if(!(C instanceof _))throw new TypeError("Cannot call a class as a function")}var n=sd(),o=n.codes,i=o.ERR_AMBIGUOUS_ARGUMENT,r=o.ERR_INVALID_ARG_TYPE,s=o.ERR_INVALID_ARG_VALUE,a=o.ERR_INVALID_RETURN_VALUE,c=o.ERR_MISSING_ARGS,u=l0(),h=Qn(),f=h.inspect,d=Qn().types,p=d.isPromise,S=d.isRegExp,x=h0()(),v=Ha()(),m=f0()("RegExp.prototype.test"),g,y;function T(){var C=g0();g=C.isDeepEqual,y=C.isDeepStrictEqual}var A=!1,b=Lo.exports=I,R={};function N(C){throw C.message instanceof Error?C.message:new u(C)}function P(C,_,w,F,O){var D=arguments.length,j;if(D===0)j="Failed";else if(D===1)w=C,C=void 0;else{if(A===!1){A=!0;var U=process.emitWarning?process.emitWarning:console.warn.bind(console);U("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}D===2&&(F="!=")}if(w instanceof Error)throw w;var W={actual:C,expected:_,operator:F===void 0?"fail":F,stackStartFn:O||P};w!==void 0&&(W.message=w);var L=new u(W);throw j&&(L.message=j,L.generatedMessage=!0),L}b.fail=P,b.AssertionError=u;function B(C,_,w,F){if(!w){var O=!1;if(_===0)O=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var D=new u({actual:w,expected:!0,message:F,operator:"==",stackStartFn:C});throw D.generatedMessage=O,D}}function I(){for(var C=arguments.length,_=new Array(C),w=0;w<C;w++)_[w]=arguments[w];B.apply(void 0,[I,_.length].concat(_))}b.ok=I,b.equal=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");_!=w&&N({actual:_,expected:w,message:F,operator:"==",stackStartFn:C})},b.notEqual=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");_==w&&N({actual:_,expected:w,message:F,operator:"!=",stackStartFn:C})},b.deepEqual=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");g===void 0&&T(),g(_,w)||N({actual:_,expected:w,message:F,operator:"deepEqual",stackStartFn:C})},b.notDeepEqual=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");g===void 0&&T(),g(_,w)&&N({actual:_,expected:w,message:F,operator:"notDeepEqual",stackStartFn:C})},b.deepStrictEqual=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");g===void 0&&T(),y(_,w)||N({actual:_,expected:w,message:F,operator:"deepStrictEqual",stackStartFn:C})},b.notDeepStrictEqual=V;function V(C,_,w){if(arguments.length<2)throw new c("actual","expected");g===void 0&&T(),y(C,_)&&N({actual:C,expected:_,message:w,operator:"notDeepStrictEqual",stackStartFn:V})}b.strictEqual=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");v(_,w)||N({actual:_,expected:w,message:F,operator:"strictEqual",stackStartFn:C})},b.notStrictEqual=function C(_,w,F){if(arguments.length<2)throw new c("actual","expected");v(_,w)&&N({actual:_,expected:w,message:F,operator:"notStrictEqual",stackStartFn:C})};var J=e(function C(_,w,F){var O=this;t(this,C),w.forEach(function(D){D in _&&(F!==void 0&&typeof F[D]=="string"&&S(_[D])&&m(_[D],F[D])?O[D]=F[D]:O[D]=_[D])})});function te(C,_,w,F,O,D){if(!(w in C)||!y(C[w],_[w])){if(!F){var j=new J(C,O),U=new J(_,O,C),W=new u({actual:j,expected:U,operator:"deepStrictEqual",stackStartFn:D});throw W.actual=C,W.expected=_,W.operator=D.name,W}N({actual:C,expected:_,message:F,operator:D.name,stackStartFn:D})}}function oe(C,_,w,F){if(typeof _!="function"){if(S(_))return m(_,C);if(arguments.length===2)throw new r("expected",["Function","RegExp"],_);if(l(C)!=="object"||C===null){var O=new u({actual:C,expected:_,message:w,operator:"deepStrictEqual",stackStartFn:F});throw O.operator=F.name,O}var D=Object.keys(_);if(_ instanceof Error)D.push("name","message");else if(D.length===0)throw new s("error",_,"may not be an empty object");return g===void 0&&T(),D.forEach(function(j){typeof C[j]=="string"&&S(_[j])&&m(_[j],C[j])||te(C,_,j,w,D,F)}),!0}return _.prototype!==void 0&&C instanceof _?!0:Error.isPrototypeOf(_)?!1:_.call({},C)===!0}function ge(C){if(typeof C!="function")throw new r("fn","Function",C);try{C()}catch(_){return _}return R}function ce(C){return p(C)||C!==null&&l(C)==="object"&&typeof C.then=="function"&&typeof C.catch=="function"}function ee(C){return Promise.resolve().then(function(){var _;if(typeof C=="function"){if(_=C(),!ce(_))throw new a("instance of Promise","promiseFn",_)}else if(ce(C))_=C;else throw new r("promiseFn",["Function","Promise"],C);return Promise.resolve().then(function(){return _}).then(function(){return R}).catch(function(w){return w})})}function G(C,_,w,F){if(typeof w=="string"){if(arguments.length===4)throw new r("error",["Object","Error","Function","RegExp"],w);if(l(_)==="object"&&_!==null){if(_.message===w)throw new i("error/message",'The error message "'.concat(_.message,'" is identical to the message.'))}else if(_===w)throw new i("error/message",'The error "'.concat(_,'" is identical to the message.'));F=w,w=void 0}else if(w!=null&&l(w)!=="object"&&typeof w!="function")throw new r("error",["Object","Error","Function","RegExp"],w);if(_===R){var O="";w&&w.name&&(O+=" (".concat(w.name,")")),O+=F?": ".concat(F):".";var D=C.name==="rejects"?"rejection":"exception";N({actual:void 0,expected:w,operator:C.name,message:"Missing expected ".concat(D).concat(O),stackStartFn:C})}if(w&&!oe(_,w,F,C))throw _}function Q(C,_,w,F){if(_!==R){if(typeof w=="string"&&(F=w,w=void 0),!w||oe(_,w)){var O=F?": ".concat(F):".",D=C.name==="doesNotReject"?"rejection":"exception";N({actual:_,expected:w,operator:C.name,message:"Got unwanted ".concat(D).concat(O,`
`)+'Actual message: "'.concat(_&&_.message,'"'),stackStartFn:C})}throw _}}b.throws=function C(_){for(var w=arguments.length,F=new Array(w>1?w-1:0),O=1;O<w;O++)F[O-1]=arguments[O];G.apply(void 0,[C,ge(_)].concat(F))},b.rejects=function C(_){for(var w=arguments.length,F=new Array(w>1?w-1:0),O=1;O<w;O++)F[O-1]=arguments[O];return ee(_).then(function(D){return G.apply(void 0,[C,D].concat(F))})},b.doesNotThrow=function C(_){for(var w=arguments.length,F=new Array(w>1?w-1:0),O=1;O<w;O++)F[O-1]=arguments[O];Q.apply(void 0,[C,ge(_)].concat(F))},b.doesNotReject=function C(_){for(var w=arguments.length,F=new Array(w>1?w-1:0),O=1;O<w;O++)F[O-1]=arguments[O];return ee(_).then(function(D){return Q.apply(void 0,[C,D].concat(F))})},b.ifError=function C(_){if(_!=null){var w="ifError got unwanted exception: ";l(_)==="object"&&typeof _.message=="string"?_.message.length===0&&_.constructor?w+=_.constructor.name:w+=_.message:w+=f(_);var F=new u({actual:_,expected:null,operator:"ifError",message:w,stackStartFn:C}),O=_.stack;if(typeof O=="string"){var D=O.split(`
`);D.shift();for(var j=F.stack.split(`
`),U=0;U<D.length;U++){var W=j.indexOf(D[U]);if(W!==-1){j=j.slice(0,W);break}}F.stack="".concat(j.join(`
`),`
`).concat(D.join(`
`))}throw F}};function ie(C,_,w,F,O){if(!S(_))throw new r("regexp","RegExp",_);var D=O==="match";if(typeof C!="string"||m(_,C)!==D){if(w instanceof Error)throw w;var j=!w;w=w||(typeof C!="string"?'The "string" argument must be of type string. Received type '+"".concat(l(C)," (").concat(f(C),")"):(D?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(f(_),`. Input:

`).concat(f(C),`
`));var U=new u({actual:C,expected:_,message:w,operator:O,stackStartFn:F});throw U.generatedMessage=j,U}}b.match=function C(_,w,F){ie(_,w,F,C,"match")},b.doesNotMatch=function C(_,w,F){ie(_,w,F,C,"doesNotMatch")};function E(){for(var C=arguments.length,_=new Array(C),w=0;w<C;w++)_[w]=arguments[w];B.apply(void 0,[E,_.length].concat(_))}return b.strict=x(E,b,{equal:b.strictEqual,deepEqual:b.deepStrictEqual,notEqual:b.notStrictEqual,notDeepEqual:b.notDeepStrictEqual}),b.strict.strict=b.strict,Lo.exports}var rt={},Bu;function Z(){if(Bu)return rt;Bu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(rt,"__esModule",{value:!0}),rt.SuppressWarnings=rt.Override=rt.Nullable=rt.NotNull=void 0;function l(o,i,r){}rt.NotNull=l;function e(o,i,r){}rt.Nullable=e;function t(o,i,r){}rt.Override=t;function n(o){return(i,r,s)=>{}}return rt.SuppressWarnings=n,rt}var ea={},Mu;function Rr(){return Mu||(Mu=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.IntStream=void 0,function(e){e.EOF=-1,e.UNKNOWN_SOURCE_NAME="<unknown>"}(l.IntStream||(l.IntStream={}))}(ea)),ea}var ku;function y0(){if(ku)return Br;ku=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Br&&Br.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(Br,"__esModule",{value:!0}),Br.ANTLRInputStream=void 0;const e=$e(),t=Z(),n=Rr();let o=class{constructor(r){this.p=0,this.data=r,this.n=r.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw e(this.LA(1)===n.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(r){return r===0?0:r<0&&(r++,this.p+r-1<0)||this.p+r-1>=this.n?n.IntStream.EOF:this.data.charCodeAt(this.p+r-1)}LT(r){return this.LA(r)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(r){}seek(r){if(r<=this.p){this.p=r;return}for(r=Math.min(r,this.n);this.p<r;)this.consume()}getText(r){let s=r.a,a=r.b;a>=this.n&&(a=this.n-1);let c=a-s+1;return s>=this.n?"":this.data.substr(s,c)}get sourceName(){return this.name?this.name:n.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}};return l([t.Override],o.prototype,"consume",null),l([t.Override],o.prototype,"LA",null),l([t.Override],o.prototype,"index",null),l([t.Override],o.prototype,"size",null),l([t.Override],o.prototype,"mark",null),l([t.Override],o.prototype,"release",null),l([t.Override],o.prototype,"seek",null),l([t.Override],o.prototype,"getText",null),l([t.Override],o.prototype,"sourceName",null),l([t.Override],o.prototype,"toString",null),Br.ANTLRInputStream=o,Br}var Mr={},ft={},ui={},zu;function mr(){return zu||(zu=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=ui&&ui.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(l,"__esModule",{value:!0}),l.ATNState=void 0;const t=Z();let n=class Sa{constructor(){this.stateNumber=Sa.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(i){return i instanceof Sa?this.stateNumber===i.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(i,r){if(this.transitions.length===0)this.epsilonOnlyTransitions=i.isEpsilon;else if(this.epsilonOnlyTransitions!==i.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(r!==void 0?r:this.transitions.length,0,i)}transition(i){return this.transitions[i]}setTransition(i,r){this.transitions[i]=r}removeTransition(i){return this.transitions.splice(i,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(i){this.ruleIndex=i}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(i){return this.optimizedTransitions[i]}addOptimizedTransition(i){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(i)}setOptimizedTransition(i,r){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[i]=r}removeOptimizedTransition(i){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(i,1)}};e([t.Override],n.prototype,"hashCode",null),e([t.Override],n.prototype,"equals",null),e([t.Override],n.prototype,"toString",null),l.ATNState=n,function(o){o.INVALID_STATE_NUMBER=-1}(n=l.ATNState||(l.ATNState={}))}(ui)),ui}var ta={},ju;function He(){return ju||(ju=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.ATNStateType=void 0,function(e){e[e.INVALID_TYPE=0]="INVALID_TYPE",e[e.BASIC=1]="BASIC",e[e.RULE_START=2]="RULE_START",e[e.BLOCK_START=3]="BLOCK_START",e[e.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",e[e.STAR_BLOCK_START=5]="STAR_BLOCK_START",e[e.TOKEN_START=6]="TOKEN_START",e[e.RULE_STOP=7]="RULE_STOP",e[e.BLOCK_END=8]="BLOCK_END",e[e.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",e[e.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",e[e.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",e[e.LOOP_END=12]="LOOP_END"}(l.ATNStateType||(l.ATNStateType={}))}(ta)),ta}var dt={},ci={},qu;function Nr(){if(qu)return ci;qu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(ci,"__esModule",{value:!0}),ci.RecognitionException=void 0;let l=class extends Error{constructor(t,n,o,i){super(i),this._offendingState=-1,this._recognizer=t,this.input=n,this.ctx=o,t&&(this._offendingState=t.state)}get offendingState(){return this._offendingState}setOffendingState(t){this._offendingState=t}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(t){if(!(t&&t!==this._recognizer))return this.offendingToken}setOffendingToken(t,n){t===this._recognizer&&(this.offendingToken=n)}get recognizer(){return this._recognizer}};return ci.RecognitionException=l,ci}var pt={},hi={},xt={},Hu;function wr(){if(Hu)return xt;Hu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=xt&&xt.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c},e=xt&&xt.__param||function(o,i){return function(r,s){i(r,s,o)}};Object.defineProperty(xt,"__esModule",{value:!0}),xt.Transition=void 0;const t=Z();let n=class{constructor(i){if(i==null)throw new Error("target cannot be null.");this.target=i}get isEpsilon(){return!1}get label(){}};return n.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"],l([t.NotNull],n.prototype,"target",void 0),n=l([e(0,t.NotNull)],n),xt.Transition=n,xt}var Uu;function Ua(){if(Uu)return hi;Uu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(hi,"__esModule",{value:!0}),hi.AbstractPredicateTransition=void 0;const l=wr();let e=class extends l.Transition{constructor(n){super(n)}};return hi.AbstractPredicateTransition=e,hi}var kr={},mt={},zr={},ra={},$u;function je(){return $u||($u=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash=void 0,function(e){function n(a=0){return a}e.initialize=n;function o(a,c){c==null?c=0:typeof c=="string"?c=s(c):typeof c=="object"&&(c=c.hashCode());let x=c;return x=Math.imul(x,3432918353),x=x<<15|x>>>17,x=Math.imul(x,461845907),a=a^x,a=a<<13|a>>>19,a=Math.imul(a,5)+3864292196,a&4294967295}e.update=o;function i(a,c){return a=a^c*4,a=a^a>>>16,a=Math.imul(a,2246822507),a=a^a>>>13,a=Math.imul(a,3266489909),a=a^a>>>16,a}e.finish=i;function r(a,c=0){let u=n(c),h=0;for(let f of a)u=o(u,f),h++;return u=i(u,h),u}e.hashCode=r;function s(a){let c=a.length;if(c===0)return 0;let u=0;for(let h=0;h<c;h++){let f=a.charCodeAt(h);u=(u<<5>>>0)-u+f,u|=0}return u}}(l.MurmurHash||(l.MurmurHash={}))}(ra)),ra}var jr={},Vu;function ct(){if(Vu)return jr;Vu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=jr&&jr.__decorate||function(n,o,i,r){var s=arguments.length,a=s<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,o,i,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(s<3?c(a):s>3?c(o,i,a):c(o,i))||a);return s>3&&a&&Object.defineProperty(o,i,a),a};Object.defineProperty(jr,"__esModule",{value:!0}),jr.ObjectEqualityComparator=void 0;const e=Z();let t=class{hashCode(o){return o==null?0:o.hashCode()}equals(o,i){return o==null?i==null:o.equals(i)}};return t.INSTANCE=new t,l([e.Override],t.prototype,"hashCode",null),l([e.Override],t.prototype,"equals",null),jr.ObjectEqualityComparator=t,jr}var Wu;function v0(){if(Wu)return zr;Wu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=zr&&zr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(zr,"__esModule",{value:!0}),zr.DefaultEqualityComparator=void 0;const e=Z(),t=je(),n=ct();let o=class{hashCode(r){return r==null?0:typeof r=="string"||typeof r=="number"?t.MurmurHash.hashCode([r]):n.ObjectEqualityComparator.INSTANCE.hashCode(r)}equals(r,s){return r==null?s==null:typeof r=="string"||typeof r=="number"?r===s:n.ObjectEqualityComparator.INSTANCE.equals(r,s)}};return o.INSTANCE=new o,l([e.Override],o.prototype,"hashCode",null),l([e.Override],o.prototype,"equals",null),zr.DefaultEqualityComparator=o,zr}var Gu;function Or(){if(Gu)return mt;Gu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=mt&&mt.__decorate||function(c,u,h,f){var d=arguments.length,p=d<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,h):f,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,u,h,f);else for(var x=c.length-1;x>=0;x--)(S=c[x])&&(p=(d<3?S(p):d>3?S(u,h,p):S(u,h))||p);return d>3&&p&&Object.defineProperty(u,h,p),p},e=mt&&mt.__param||function(c,u){return function(h,f){u(h,f,c)}};Object.defineProperty(mt,"__esModule",{value:!0}),mt.Array2DHashSet=void 0;const t=$e(),n=v0(),o=Z(),i=je(),r=16,s=.75;let a=class so{constructor(u,h=r){if(this.n=0,this.threshold=Math.floor(r*s),u instanceof so){this.comparator=u.comparator,this.buckets=u.buckets.slice(0);for(let f=0;f<this.buckets.length;f++){let d=this.buckets[f];d&&(this.buckets[f]=d.slice(0))}this.n=u.n,this.threshold=u.threshold}else this.comparator=u||n.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(h)}getOrAdd(u){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(u)}getOrAddImpl(u){let h=this.getBucket(u),f=this.buckets[h];if(!f)return f=[u],this.buckets[h]=f,this.n++,u;for(let d of f)if(this.comparator.equals(d,u))return d;return f.push(u),this.n++,u}get(u){if(u==null)return u;let h=this.getBucket(u),f=this.buckets[h];if(f){for(let d of f)if(this.comparator.equals(d,u))return d}}getBucket(u){return this.comparator.hashCode(u)&this.buckets.length-1}hashCode(){let u=i.MurmurHash.initialize();for(let h of this.buckets)if(h!=null)for(let f of h){if(f==null)break;u=i.MurmurHash.update(u,this.comparator.hashCode(f))}return u=i.MurmurHash.finish(u,this.size),u}equals(u){return u===this?!0:!(u instanceof so)||u.size!==this.size?!1:this.containsAll(u)}expand(){let u=this.buckets,h=this.buckets.length*2,f=this.createBuckets(h);this.buckets=f,this.threshold=Math.floor(h*s);let d=this.size;for(let p of u)if(p)for(let S of p){let x=this.getBucket(S),v=this.buckets[x];v||(v=[],this.buckets[x]=v),v.push(S)}t(this.n===d)}add(u){return this.getOrAdd(u)===u}get size(){return this.n}get isEmpty(){return this.n===0}contains(u){return this.containsFast(this.asElementType(u))}containsFast(u){return u==null?!1:this.get(u)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){const u=new Array(this.size);let h=0;for(let f of this.buckets)if(f!=null)for(let d of f){if(d==null)break;u[h++]=d}return u}containsAll(u){if(u instanceof so){let h=u;for(let f of h.buckets)if(f!=null)for(let d of f){if(d==null)break;if(!this.containsFast(this.asElementType(d)))return!1}}else for(let h of u)if(!this.containsFast(this.asElementType(h)))return!1;return!0}addAll(u){let h=!1;for(let f of u)this.getOrAdd(f)!==f&&(h=!0);return h}clear(){this.buckets=this.createBuckets(r),this.n=0,this.threshold=Math.floor(r*s)}toString(){if(this.size===0)return"{}";let u="{",h=!0;for(let f of this.buckets)if(f!=null)for(let d of f){if(d==null)break;h?h=!1:u+=", ",u+=d.toString()}return u+="}",u}toTableString(){let u="";for(let h of this.buckets){if(h==null){u+=`null
`;continue}u+="[";let f=!0;for(let d of h)f?f=!1:u+=" ",d==null?u+="_":u+=d.toString();u+=`]
`}return u}asElementType(u){return u}createBuckets(u){return new Array(u)}};return l([o.NotNull],a.prototype,"comparator",void 0),l([o.Override],a.prototype,"hashCode",null),l([o.Override],a.prototype,"equals",null),l([o.Override],a.prototype,"add",null),l([o.Override],a.prototype,"size",null),l([o.Override],a.prototype,"isEmpty",null),l([o.Override],a.prototype,"contains",null),l([e(0,o.Nullable)],a.prototype,"containsFast",null),l([o.Override],a.prototype,Symbol.iterator,null),l([o.Override],a.prototype,"toArray",null),l([o.Override],a.prototype,"containsAll",null),l([o.Override],a.prototype,"addAll",null),l([o.Override],a.prototype,"clear",null),l([o.Override],a.prototype,"toString",null),l([o.SuppressWarnings("unchecked")],a.prototype,"asElementType",null),l([o.SuppressWarnings("unchecked")],a.prototype,"createBuckets",null),mt.Array2DHashSet=a,mt}var qr={},Yu;function vo(){if(Yu)return qr;Yu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=qr&&qr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(qr,"__esModule",{value:!0}),qr.ArrayEqualityComparator=void 0;const e=Z(),t=je(),n=ct();let o=class{hashCode(r){return r==null?0:t.MurmurHash.hashCode(r,0)}equals(r,s){if(r==null)return s==null;if(s==null||r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(!n.ObjectEqualityComparator.INSTANCE.equals(r[a],s[a]))return!1;return!0}};return o.INSTANCE=new o,l([e.Override],o.prototype,"hashCode",null),l([e.Override],o.prototype,"equals",null),qr.ArrayEqualityComparator=o,qr}var Ge={},Xu;function gr(){if(Xu)return Ge;Xu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.toCharArray=Ge.toMap=Ge.equals=Ge.join=Ge.escapeWhitespace=void 0;function l(i,r){return r?i.replace(/ /,""):i.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Ge.escapeWhitespace=l;function e(i,r){let s="",a=!0;for(let c of i)a?a=!1:s+=r,s+=c;return s}Ge.join=e;function t(i,r){return i===r?!0:i===void 0||r===void 0?!1:i.equals(r)}Ge.equals=t;function n(i){let r=new Map;for(let s=0;s<i.length;s++)r.set(i[s],s);return r}Ge.toMap=n;function o(i){if(typeof i=="string"){let r=new Uint16Array(i.length);for(let s=0;s<i.length;s++)r[s]=i.charCodeAt(s);return r}else return i.toCharArray()}return Ge.toCharArray=o,Ge}var Ku;function ii(){return Ku||(Ku=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=kr&&kr.__decorate||function(f,d,p,S){var x=arguments.length,v=x<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,p):S,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,d,p,S);else for(var g=f.length-1;g>=0;g--)(m=f[g])&&(v=(x<3?m(v):x>3?m(d,p,v):m(d,p))||v);return x>3&&v&&Object.defineProperty(d,p,v),v},t=kr&&kr.__param||function(f,d){return function(p,S){d(p,S,f)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SemanticContext=void 0;const n=Or(),o=vo(),i=je(),r=Z(),s=ct(),a=gr();function c(f){let d;for(let p of f){if(d===void 0){d=p;continue}d.compareTo(p)<0&&(d=p)}return d}function u(f){let d;for(let p of f){if(d===void 0){d=p;continue}d.compareTo(p)>0&&(d=p)}return d}let h=class Je{static get NONE(){return Je._NONE===void 0&&(Je._NONE=new Je.Predicate),Je._NONE}evalPrecedence(d,p){return this}static and(d,p){if(!d||d===Je.NONE)return p;if(p===Je.NONE)return d;let S=new Je.AND(d,p);return S.opnds.length===1?S.opnds[0]:S}static or(d,p){if(!d)return p;if(d===Je.NONE||p===Je.NONE)return Je.NONE;let S=new Je.OR(d,p);return S.opnds.length===1?S.opnds[0]:S}};l.SemanticContext=h,function(f){function S(T){let A=[];for(let b=0;b<T.length;b++){let R=T[b];R instanceof f.PrecedencePredicate&&(A.push(R),T.splice(b,1),b--)}return A}class x extends f{constructor(A=-1,b=-1,R=!1){super(),this.ruleIndex=A,this.predIndex=b,this.isCtxDependent=R}eval(A,b){let R=this.isCtxDependent?b:void 0;return A.sempred(R,this.ruleIndex,this.predIndex)}hashCode(){let A=i.MurmurHash.initialize();return A=i.MurmurHash.update(A,this.ruleIndex),A=i.MurmurHash.update(A,this.predIndex),A=i.MurmurHash.update(A,this.isCtxDependent?1:0),A=i.MurmurHash.finish(A,3),A}equals(A){return A instanceof x?this===A?!0:this.ruleIndex===A.ruleIndex&&this.predIndex===A.predIndex&&this.isCtxDependent===A.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}e([r.Override],x.prototype,"eval",null),e([r.Override],x.prototype,"hashCode",null),e([r.Override],x.prototype,"equals",null),e([r.Override],x.prototype,"toString",null),f.Predicate=x;class v extends f{constructor(A){super(),this.precedence=A}eval(A,b){return A.precpred(b,this.precedence)}evalPrecedence(A,b){if(A.precpred(b,this.precedence))return f.NONE}compareTo(A){return this.precedence-A.precedence}hashCode(){let A=1;return A=31*A+this.precedence,A}equals(A){return A instanceof v?this===A?!0:this.precedence===A.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}e([r.Override],v.prototype,"eval",null),e([r.Override],v.prototype,"evalPrecedence",null),e([r.Override],v.prototype,"compareTo",null),e([r.Override],v.prototype,"hashCode",null),e([r.Override],v.prototype,"equals",null),e([r.Override],v.prototype,"toString",null),f.PrecedencePredicate=v;class m extends f{}f.Operator=m;let g=class ao extends m{constructor(A,b){super();let R=new n.Array2DHashSet(s.ObjectEqualityComparator.INSTANCE);A instanceof ao?R.addAll(A.opnds):R.add(A),b instanceof ao?R.addAll(b.opnds):R.add(b),this.opnds=R.toArray();let N=S(this.opnds),P=u(N);P&&this.opnds.push(P)}get operands(){return this.opnds}equals(A){return this===A?!0:A instanceof ao?o.ArrayEqualityComparator.INSTANCE.equals(this.opnds,A.opnds):!1}hashCode(){return i.MurmurHash.hashCode(this.opnds,40363613)}eval(A,b){for(let R of this.opnds)if(!R.eval(A,b))return!1;return!0}evalPrecedence(A,b){let R=!1,N=[];for(let B of this.opnds){let I=B.evalPrecedence(A,b);if(R=R||I!==B,I==null)return;I!==f.NONE&&N.push(I)}if(!R)return this;if(N.length===0)return f.NONE;let P=N[0];for(let B=1;B<N.length;B++)P=f.and(P,N[B]);return P}toString(){return a.join(this.opnds,"&&")}};e([r.Override],g.prototype,"operands",null),e([r.Override],g.prototype,"equals",null),e([r.Override],g.prototype,"hashCode",null),e([r.Override],g.prototype,"eval",null),e([r.Override],g.prototype,"evalPrecedence",null),e([r.Override],g.prototype,"toString",null),g=e([t(0,r.NotNull),t(1,r.NotNull)],g),f.AND=g;let y=class lo extends m{constructor(A,b){super();let R=new n.Array2DHashSet(s.ObjectEqualityComparator.INSTANCE);A instanceof lo?R.addAll(A.opnds):R.add(A),b instanceof lo?R.addAll(b.opnds):R.add(b),this.opnds=R.toArray();let N=S(this.opnds),P=c(N);P&&this.opnds.push(P)}get operands(){return this.opnds}equals(A){return this===A?!0:A instanceof lo?o.ArrayEqualityComparator.INSTANCE.equals(this.opnds,A.opnds):!1}hashCode(){return i.MurmurHash.hashCode(this.opnds,486279973)}eval(A,b){for(let R of this.opnds)if(R.eval(A,b))return!0;return!1}evalPrecedence(A,b){let R=!1,N=[];for(let B of this.opnds){let I=B.evalPrecedence(A,b);if(R=R||I!==B,I===f.NONE)return f.NONE;I&&N.push(I)}if(!R)return this;if(N.length===0)return;let P=N[0];for(let B=1;B<N.length;B++)P=f.or(P,N[B]);return P}toString(){return a.join(this.opnds,"||")}};e([r.Override],y.prototype,"operands",null),e([r.Override],y.prototype,"equals",null),e([r.Override],y.prototype,"hashCode",null),e([r.Override],y.prototype,"eval",null),e([r.Override],y.prototype,"evalPrecedence",null),e([r.Override],y.prototype,"toString",null),y=e([t(0,r.NotNull),t(1,r.NotNull)],y),f.OR=y}(h=l.SemanticContext||(l.SemanticContext={}))}(kr)),kr}var Qu;function fd(){if(Qu)return pt;Qu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=pt&&pt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=pt&&pt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(pt,"__esModule",{value:!0}),pt.PredicateTransition=void 0;const t=Ua(),n=Z(),o=ii();let i=class extends t.AbstractPredicateTransition{constructor(s,a,c,u){super(s),this.ruleIndex=a,this.predIndex=c,this.isCtxDependent=u}get serializationType(){return 4}get isEpsilon(){return!0}matches(s,a,c){return!1}get predicate(){return new o.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};return l([n.Override],i.prototype,"serializationType",null),l([n.Override],i.prototype,"isEpsilon",null),l([n.Override],i.prototype,"matches",null),l([n.Override,n.NotNull],i.prototype,"toString",null),i=l([e(0,n.NotNull)],i),pt.PredicateTransition=i,pt}var Ju;function So(){if(Ju)return dt;Ju=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=dt&&dt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=dt&&dt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(dt,"__esModule",{value:!0}),dt.FailedPredicateException=void 0;const t=Nr(),n=Z(),o=fd();let i=class dd extends t.RecognitionException{constructor(s,a,c){super(s,s.inputStream,s.context,dd.formatMessage(a,c));let h=s.interpreter.atn.states[s.state].transition(0);h instanceof o.PredicateTransition?(this._ruleIndex=h.ruleIndex,this._predicateIndex=h.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=a,super.setOffendingToken(s,s.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(s,a){return a||`failed predicate: {${s}}?`}};return l([n.NotNull],i,"formatMessage",null),i=l([e(0,n.NotNull)],i),dt.FailedPredicateException=i,dt}var gt={},Zu;function Ao(){if(Zu)return gt;Zu=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=gt&&gt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=gt&&gt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(gt,"__esModule",{value:!0}),gt.InputMismatchException=void 0;const t=Nr(),n=Z();let o=class extends t.RecognitionException{constructor(r,s,a){a===void 0&&(a=r.context),super(r,r.inputStream,a),s!==void 0&&this.setOffendingState(s),this.setOffendingToken(r,r.currentToken)}};return o=l([e(0,n.NotNull)],o),gt.InputMismatchException=o,gt}var yt={},Hr={},na={},ec;function $a(){return ec||(ec=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.Arrays=void 0,function(e){function t(i,r,s,a){return n(i,s!==void 0?s:0,a!==void 0?a:i.length,r)}e.binarySearch=t;function n(i,r,s,a){let c=r,u=s-1;for(;c<=u;){let h=c+u>>>1,f=i[h];if(f<a)c=h+1;else if(f>a)u=h-1;else return h}return-(c+1)}function o(i){let r="[",s=!0;for(let a of i)s?s=!1:r+=", ",a===null?r+="null":a===void 0?r+="undefined":r+=a;return r+="]",r}e.toString=o}(l.Arrays||(l.Arrays={}))}(na)),na}var tc;function Va(){if(tc)return Hr;tc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Hr&&Hr.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f};Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.IntegerList=void 0;const e=$a(),t=Z(),n=new Int32Array(0),o=4,i=(1<<31>>>0)-1-8;let r=class uo{constructor(a){if(!a)this._data=n,this._size=0;else if(a instanceof uo)this._data=a._data.slice(0),this._size=a._size;else if(typeof a=="number")a===0?(this._data=n,this._size=0):(this._data=new Int32Array(a),this._size=0);else{this._data=n,this._size=0;for(let c of a)this.add(c)}}add(a){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=a,this._size++}addAll(a){if(Array.isArray(a))this.ensureCapacity(this._size+a.length),this._data.subarray(this._size,this._size+a.length).set(a),this._size+=a.length;else if(a instanceof uo)this.ensureCapacity(this._size+a._size),this._data.subarray(this._size,this._size+a.size).set(a._data),this._size+=a._size;else{this.ensureCapacity(this._size+a.size);let c=0;for(let u of a)this._data[this._size+c]=u,c++;this._size+=a.size}}get(a){if(a<0||a>=this._size)throw RangeError();return this._data[a]}contains(a){for(let c=0;c<this._size;c++)if(this._data[c]===a)return!0;return!1}set(a,c){if(a<0||a>=this._size)throw RangeError();let u=this._data[a];return this._data[a]=c,u}removeAt(a){let c=this.get(a);return this._data.copyWithin(a,a+1,this._size),this._data[this._size-1]=0,this._size--,c}removeRange(a,c){if(a<0||c<0||a>this._size||c>this._size||a>c)throw RangeError();this._data.copyWithin(c,a,this._size),this._data.fill(0,this._size-(c-a),this._size),this._size-=c-a}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(a){if(a===this)return!0;if(!(a instanceof uo)||this._size!==a._size)return!1;for(let c=0;c<this._size;c++)if(this._data[c]!==a._data[c])return!1;return!0}hashCode(){let a=1;for(let c=0;c<this._size;c++)a=31*a+this._data[c];return a}toString(){return this._data.toString()}binarySearch(a,c,u){if(c===void 0&&(c=0),u===void 0&&(u=this._size),c<0||u<0||c>this._size||u>this._size)throw new RangeError;if(c>u)throw new RangeError;return e.Arrays.binarySearch(this._data,a,c,u)}ensureCapacity(a){if(a<0||a>i)throw new RangeError;let c;for(this._data.length===0?c=o:c=this._data.length;c<a;)c=c*2,(c<0||c>i)&&(c=i);let u=new Int32Array(c);u.set(this._data),this._data=u}toCharArray(){let a=new Uint16Array(this._size),c=0,u=!1;for(let h=0;h<this._size;h++){let f=this._data[h];if(f>=0&&f<65536){a[c]=f,c++;continue}if(!u){let p=new Uint16Array(this.charArraySize());p.set(a,0),a=p,u=!0}let d=String.fromCodePoint(f);a[c]=d.charCodeAt(0),a[c+1]=d.charCodeAt(1),c+=2}return a}charArraySize(){let a=0;for(let c=0;c<this._size;c++)a+=this._data[c]>=65536?2:1;return a}};return l([t.NotNull],r.prototype,"_data",void 0),l([t.Override],r.prototype,"equals",null),l([t.Override],r.prototype,"hashCode",null),l([t.Override],r.prototype,"toString",null),Hr.IntegerList=r,Hr}var Ur={},rc;function We(){if(rc)return Ur;rc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ur&&Ur.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.Interval=void 0;const e=Z(),t=1e3;let n=class Ze{constructor(i,r){this.a=i,this.b=r}static get INVALID(){return Ze._INVALID}static of(i,r){return i!==r||i<0||i>t?new Ze(i,r):(Ze.cache[i]==null&&(Ze.cache[i]=new Ze(i,i)),Ze.cache[i])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(i){return i===this?!0:i instanceof Ze?this.a===i.a&&this.b===i.b:!1}hashCode(){let i=23;return i=i*31+this.a,i=i*31+this.b,i}startsBeforeDisjoint(i){return this.a<i.a&&this.b<i.a}startsBeforeNonDisjoint(i){return this.a<=i.a&&this.b>=i.a}startsAfter(i){return this.a>i.a}startsAfterDisjoint(i){return this.a>i.b}startsAfterNonDisjoint(i){return this.a>i.a&&this.a<=i.b}disjoint(i){return this.startsBeforeDisjoint(i)||this.startsAfterDisjoint(i)}adjacent(i){return this.a===i.b+1||this.b===i.a-1}properlyContains(i){return i.a>=this.a&&i.b<=this.b}union(i){return Ze.of(Math.min(this.a,i.a),Math.max(this.b,i.b))}intersection(i){return Ze.of(Math.max(this.a,i.a),Math.min(this.b,i.b))}differenceNotProperlyContained(i){let r;return i.startsBeforeNonDisjoint(this)?r=Ze.of(Math.max(this.a,i.b+1),this.b):i.startsAfterNonDisjoint(this)&&(r=Ze.of(this.a,i.a-1)),r}toString(){return this.a+".."+this.b}};return n._INVALID=new n(-1,-2),n.cache=new Array(t+1),l([e.Override],n.prototype,"equals",null),l([e.Override],n.prototype,"hashCode",null),l([e.Override],n.prototype,"toString",null),Ur.Interval=n,Ur}var $r={},fi={},vt={},ia={},nc;function Be(){return nc||(nc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.Token=void 0;const e=Rr();(function(t){t.INVALID_TYPE=0,t.EPSILON=-2,t.MIN_USER_TOKEN_TYPE=1,t.EOF=e.IntStream.EOF,t.DEFAULT_CHANNEL=0,t.HIDDEN_CHANNEL=1,t.MIN_USER_CHANNEL_VALUE=2})(l.Token||(l.Token={}))}(ia)),ia}var ic;function Vi(){if(ic)return vt;ic=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=vt&&vt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=vt&&vt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(vt,"__esModule",{value:!0}),vt.CommonToken=void 0;const t=We(),n=Z(),o=Be();let i=class Di{constructor(s,a,c=Di.EMPTY_SOURCE,u=o.Token.DEFAULT_CHANNEL,h=0,f=0){this._line=0,this._charPositionInLine=-1,this._channel=o.Token.DEFAULT_CHANNEL,this.index=-1,this._text=a,this._type=s,this.source=c,this._channel=u,this.start=h,this.stop=f,c.source!=null&&(this._line=c.source.line,this._charPositionInLine=c.source.charPositionInLine)}static fromToken(s){let a=new Di(s.type,void 0,Di.EMPTY_SOURCE,s.channel,s.startIndex,s.stopIndex);return a._line=s.line,a.index=s.tokenIndex,a._charPositionInLine=s.charPositionInLine,s instanceof Di?(a._text=s._text,a.source=s.source):(a._text=s.text,a.source={source:s.tokenSource,stream:s.inputStream}),a}get type(){return this._type}set type(s){this._type=s}get line(){return this._line}set line(s){this._line=s}get text(){if(this._text!=null)return this._text;let s=this.inputStream;if(s==null)return;let a=s.size;return this.start<a&&this.stop<a?s.getText(t.Interval.of(this.start,this.stop)):"<EOF>"}set text(s){this._text=s}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(s){this._charPositionInLine=s}get channel(){return this._channel}set channel(s){this._channel=s}get startIndex(){return this.start}set startIndex(s){this.start=s}get stopIndex(){return this.stop}set stopIndex(s){this.stop=s}get tokenIndex(){return this.index}set tokenIndex(s){this.index=s}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(s){let a="";this._channel>0&&(a=",channel="+this._channel);let c=this.text;c!=null?(c=c.replace(/\n/g,"\\n"),c=c.replace(/\r/g,"\\r"),c=c.replace(/\t/g,"\\t")):c="<no text>";let u=String(this._type);return s&&(u=s.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+c+"',<"+u+">"+a+","+this._line+":"+this.charPositionInLine+"]"}};return i.EMPTY_SOURCE={source:void 0,stream:void 0},l([n.NotNull],i.prototype,"source",void 0),l([n.Override],i.prototype,"type",null),l([n.Override],i.prototype,"line",null),l([n.Override],i.prototype,"text",null),l([n.Override],i.prototype,"charPositionInLine",null),l([n.Override],i.prototype,"channel",null),l([n.Override],i.prototype,"startIndex",null),l([n.Override],i.prototype,"stopIndex",null),l([n.Override],i.prototype,"tokenIndex",null),l([n.Override],i.prototype,"tokenSource",null),l([n.Override],i.prototype,"inputStream",null),l([n.Override],i.prototype,"toString",null),l([e(0,n.NotNull)],i,"fromToken",null),i=l([e(2,n.NotNull)],i),vt.CommonToken=i,vt}var oc;function Wa(){return oc||(oc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=fi&&fi.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(l,"__esModule",{value:!0}),l.CommonTokenFactory=void 0;const t=Vi(),n=We(),o=Z();let i=class{constructor(s=!1){this.copyText=s}create(s,a,c,u,h,f,d,p){let S=new t.CommonToken(a,c,s,u,h,f);return S.line=d,S.charPositionInLine=p,c==null&&this.copyText&&s.stream!=null&&(S.text=s.stream.getText(n.Interval.of(h,f))),S}createSimple(s,a){return new t.CommonToken(s,a)}};e([o.Override],i.prototype,"create",null),e([o.Override],i.prototype,"createSimple",null),l.CommonTokenFactory=i,function(r){r.DEFAULT=new r}(i=l.CommonTokenFactory||(l.CommonTokenFactory={}))}(fi)),fi}var di={},sc;function pd(){if(sc)return di;sc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(di,"__esModule",{value:!0}),di.IntegerStack=void 0;const l=Va();let e=class extends l.IntegerList{constructor(n){super(n)}push(n){this.add(n)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}};return di.IntegerStack=e,di}var Vr={},pi={},ac;function xd(){if(ac)return pi;ac=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(pi,"__esModule",{value:!0}),pi.AcceptStateInfo=void 0;let l=class{constructor(t,n){this._prediction=t,this._lexerActionExecutor=n}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}};return pi.AcceptStateInfo=l,pi}var Wr={},xi={},lc;function oi(){if(lc)return xi;lc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(xi,"__esModule",{value:!0}),xi.Array2DHashMap=void 0;const l=Or();class e{constructor(o){this.keyComparator=o}hashCode(o){return this.keyComparator.hashCode(o.key)}equals(o,i){return this.keyComparator.equals(o.key,i.key)}}let t=class Aa{constructor(o){o instanceof Aa?this.backingStore=new l.Array2DHashSet(o.backingStore):this.backingStore=new l.Array2DHashSet(new e(o))}clear(){this.backingStore.clear()}containsKey(o){return this.backingStore.contains({key:o})}get(o){let i=this.backingStore.get({key:o});if(i)return i.value}get isEmpty(){return this.backingStore.isEmpty}put(o,i){let r=this.backingStore.get({key:o,value:i}),s;return r?(s=r.value,r.value=i):this.backingStore.add({key:o,value:i}),s}putIfAbsent(o,i){let r=this.backingStore.get({key:o,value:i}),s;return r?s=r.value:this.backingStore.add({key:o,value:i}),s}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(o){return o instanceof Aa?this.backingStore.equals(o.backingStore):!1}};return xi.Array2DHashMap=t,xi}var St={},Gr={},At={},mi={},uc;function $n(){if(uc)return mi;uc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(mi,"__esModule",{value:!0}),mi.DecisionState=void 0;const l=mr();let e=class extends l.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}};return mi.DecisionState=e,mi}var Yr={},gi={},cc;function Ga(){return cc||(cc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=gi&&gi.__decorate||function(a,c,u,h){var f=arguments.length,d=f<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,c,u,h);else for(var S=a.length-1;S>=0;S--)(p=a[S])&&(d=(f<3?p(d):f>3?p(c,u,d):p(c,u))||d);return f>3&&d&&Object.defineProperty(c,u,d),d};Object.defineProperty(l,"__esModule",{value:!0}),l.PredictionContextCache=void 0;const t=oi(),n=Z(),o=ct(),i=it(),r=$e();let s=class Ca{constructor(c=!0){this.contexts=new t.Array2DHashMap(o.ObjectEqualityComparator.INSTANCE),this.childContexts=new t.Array2DHashMap(o.ObjectEqualityComparator.INSTANCE),this.joinContexts=new t.Array2DHashMap(o.ObjectEqualityComparator.INSTANCE),this.enableCache=c}getAsCached(c){if(!this.enableCache)return c;let u=this.contexts.get(c);return u||(u=c,this.contexts.put(c,c)),u}getChild(c,u){if(!this.enableCache)return c.getChild(u);let h=new Ca.PredictionContextAndInt(c,u),f=this.childContexts.get(h);return f||(f=c.getChild(u),f=this.getAsCached(f),this.childContexts.put(h,f)),f}join(c,u){if(!this.enableCache)return i.PredictionContext.join(c,u,this);let h=new Ca.IdentityCommutativePredictionContextOperands(c,u),f=this.joinContexts.get(h);return f||(f=i.PredictionContext.join(c,u,this),f=this.getAsCached(f),this.joinContexts.put(h,f),f)}};l.PredictionContextCache=s,s.UNCACHED=new s(!1),function(a){class c{constructor(f,d){this.obj=f,this.value=d}equals(f){if(f instanceof c){if(f===this)return!0}else return!1;let d=f;return this.value===d.value&&(this.obj===d.obj||this.obj!=null&&this.obj.equals(d.obj))}hashCode(){let f=5;return f=7*f+(this.obj!=null?this.obj.hashCode():0),f=7*f+this.value,f}}e([n.Override],c.prototype,"equals",null),e([n.Override],c.prototype,"hashCode",null),a.PredictionContextAndInt=c;class u{constructor(f,d){r(f!=null),r(d!=null),this._x=f,this._y=d}get x(){return this._x}get y(){return this._y}equals(f){if(f instanceof u){if(this===f)return!0}else return!1;let d=f;return this._x===d._x&&this._y===d._y||this._x===d._y&&this._y===d._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}e([n.Override],u.prototype,"equals",null),e([n.Override],u.prototype,"hashCode",null),a.IdentityCommutativePredictionContextOperands=u}(s=l.PredictionContextCache||(l.PredictionContextCache={}))}(gi)),gi}var hc;function it(){return hc||(hc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Yr&&Yr.__decorate||function(S,x,v,m){var g=arguments.length,y=g<3?x:m===null?m=Object.getOwnPropertyDescriptor(x,v):m,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,x,v,m);else for(var A=S.length-1;A>=0;A--)(T=S[A])&&(y=(g<3?T(y):g>3?T(x,v,y):T(x,v))||y);return g>3&&y&&Object.defineProperty(x,v,y),y},t=Yr&&Yr.__param||function(S,x){return function(v,m){x(v,m,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SingletonPredictionContext=l.PredictionContext=void 0;const n=oi(),o=Or(),i=$a(),r=je(),s=Z(),a=Ga(),c=$e(),u=1;let h=class Ue{constructor(x){this.cachedHashCode=x}static calculateEmptyHashCode(){let x=r.MurmurHash.initialize(u);return x=r.MurmurHash.finish(x,0),x}static calculateSingleHashCode(x,v){let m=r.MurmurHash.initialize(u);return m=r.MurmurHash.update(m,x),m=r.MurmurHash.update(m,v),m=r.MurmurHash.finish(m,2),m}static calculateHashCode(x,v){let m=r.MurmurHash.initialize(u);for(let g of x)m=r.MurmurHash.update(m,g);for(let g of v)m=r.MurmurHash.update(m,g);return m=r.MurmurHash.finish(m,2*x.length),m}static fromRuleContext(x,v,m=!0){if(v.isEmpty)return m?Ue.EMPTY_FULL:Ue.EMPTY_LOCAL;let g;v._parent?g=Ue.fromRuleContext(x,v._parent,m):g=m?Ue.EMPTY_FULL:Ue.EMPTY_LOCAL;let T=x.states[v.invokingState].transition(0);return g.getChild(T.followState.stateNumber)}static addEmptyContext(x){return x.addEmptyContext()}static removeEmptyContext(x){return x.removeEmptyContext()}static join(x,v,m=a.PredictionContextCache.UNCACHED){if(x===v)return x;if(x.isEmpty)return Ue.isEmptyLocal(x)?x:Ue.addEmptyContext(v);if(v.isEmpty)return Ue.isEmptyLocal(v)?v:Ue.addEmptyContext(x);let g=x.size,y=v.size;if(g===1&&y===1&&x.getReturnState(0)===v.getReturnState(0)){let I=m.join(x.getParent(0),v.getParent(0));return I===x.getParent(0)?x:I===v.getParent(0)?v:I.getChild(x.getReturnState(0))}let T=0,A=new Array(g+y),b=new Array(A.length),R=0,N=0,P=!0,B=!0;for(;R<g&&N<y;)x.getReturnState(R)===v.getReturnState(N)?(A[T]=m.join(x.getParent(R),v.getParent(N)),b[T]=x.getReturnState(R),P=P&&A[T]===x.getParent(R),B=B&&A[T]===v.getParent(N),R++,N++):x.getReturnState(R)<v.getReturnState(N)?(A[T]=x.getParent(R),b[T]=x.getReturnState(R),B=!1,R++):(c(v.getReturnState(N)<x.getReturnState(R)),A[T]=v.getParent(N),b[T]=v.getReturnState(N),P=!1,N++),T++;for(;R<g;)A[T]=x.getParent(R),b[T]=x.getReturnState(R),R++,B=!1,T++;for(;N<y;)A[T]=v.getParent(N),b[T]=v.getReturnState(N),N++,P=!1,T++;return P?x:B?v:(T<A.length&&(A=A.slice(0,T),b=b.slice(0,T)),A.length===0?Ue.EMPTY_FULL:A.length===1?new p(A[0],b[0]):new d(A,b))}static isEmptyLocal(x){return x===Ue.EMPTY_LOCAL}static getCachedContext(x,v,m){if(x.isEmpty)return x;let g=m.get(x);if(g)return g;if(g=v.get(x),g)return m.put(x,g),g;let y=!1,T=new Array(x.size);for(let b=0;b<T.length;b++){let R=Ue.getCachedContext(x.getParent(b),v,m);if(y||R!==x.getParent(b)){if(!y){T=new Array(x.size);for(let N=0;N<x.size;N++)T[N]=x.getParent(N);y=!0}T[b]=R}}if(!y)return g=v.putIfAbsent(x,x),m.put(x,g??x),x;let A;if(T.length===1)A=new p(T[0],x.getReturnState(0));else{let b=new Array(x.size);for(let R=0;R<x.size;R++)b[R]=x.getReturnState(R);A=new d(T,b,x.hashCode())}return g=v.putIfAbsent(A,A),m.put(A,g||A),m.put(x,g||A),A}appendSingleContext(x,v){return this.appendContext(Ue.EMPTY_FULL.getChild(x),v)}getChild(x){return new p(this,x)}hashCode(){return this.cachedHashCode}toStrings(x,v,m=Ue.EMPTY_FULL){let g=[];e:for(let y=0;;y++){let T=0,A=!0,b=this,R=v,N="";for(N+="[";!b.isEmpty&&b!==m;){let P=0;if(b.size>0){let B=1;for(;1<<B>>>0<b.size;)B++;let I=(1<<B>>>0)-1;if(P=y>>T&I,A=A&&P>=b.size-1,P>=b.size)continue e;T+=B}if(x){N.length>1&&(N+=" ");let I=x.atn.states[R],V=x.ruleNames[I.ruleIndex];N+=V}else b.getReturnState(P)!==Ue.EMPTY_FULL_STATE_KEY&&(b.isEmpty||(N.length>1&&(N+=" "),N+=b.getReturnState(P)));R=b.getReturnState(P),b=b.getParent(P)}if(N+="]",g.push(N),A)break}return g}};e([s.Override],h.prototype,"hashCode",null),e([t(0,s.NotNull),t(1,s.NotNull),t(2,s.NotNull)],h,"join",null),e([t(0,s.NotNull),t(1,s.NotNull),t(2,s.NotNull)],h,"getCachedContext",null),l.PredictionContext=h;class f extends h{constructor(x){super(h.calculateEmptyHashCode()),this.fullContext=x}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(x){throw new Error("index out of bounds")}getReturnState(x){throw new Error("index out of bounds")}findReturnState(x){return-1}get size(){return 0}appendSingleContext(x,v){return v.getChild(this,x)}appendContext(x,v){return x}get isEmpty(){return!0}get hasEmpty(){return!0}equals(x){return this===x}toStrings(x,v,m){return["[]"]}}e([s.Override],f.prototype,"addEmptyContext",null),e([s.Override],f.prototype,"removeEmptyContext",null),e([s.Override],f.prototype,"getParent",null),e([s.Override],f.prototype,"getReturnState",null),e([s.Override],f.prototype,"findReturnState",null),e([s.Override],f.prototype,"size",null),e([s.Override],f.prototype,"appendSingleContext",null),e([s.Override],f.prototype,"appendContext",null),e([s.Override],f.prototype,"isEmpty",null),e([s.Override],f.prototype,"hasEmpty",null),e([s.Override],f.prototype,"equals",null),e([s.Override],f.prototype,"toStrings",null);let d=class zn extends h{constructor(x,v,m){super(m||h.calculateHashCode(x,v)),c(x.length===v.length),c(v.length>1||v[0]!==h.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=x,this.returnStates=v}getParent(x){return this.parents[x]}getReturnState(x){return this.returnStates[x]}findReturnState(x){return i.Arrays.binarySearch(this.returnStates,x)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===h.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let x=this.parents.slice(0),v=this.returnStates.slice(0);return x.push(h.EMPTY_FULL),v.push(h.EMPTY_FULL_STATE_KEY),new zn(x,v)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new p(this.parents[0],this.returnStates[0]);{let x=this.parents.slice(0,this.parents.length-1),v=this.returnStates.slice(0,this.returnStates.length-1);return new zn(x,v)}}appendContext(x,v){return zn.appendContextImpl(this,x,new h.IdentityHashMap)}static appendContextImpl(x,v,m){if(v.isEmpty){if(h.isEmptyLocal(v)){if(x.hasEmpty)return h.EMPTY_LOCAL;throw new Error("what to do here?")}return x}if(v.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let g=m.get(x);if(!g){if(x.isEmpty)g=v;else{let y=x.size;x.hasEmpty&&y--;let T=new Array(y),A=new Array(y);for(let b=0;b<y;b++)A[b]=x.getReturnState(b);for(let b=0;b<y;b++)T[b]=zn.appendContextImpl(x.getParent(b),v,m);T.length===1?g=new p(T[0],A[0]):(c(T.length>1),g=new zn(T,A)),x.hasEmpty&&(g=h.join(g,v))}m.put(x,g)}return g}equals(x){if(this===x)return!0;if(!(x instanceof zn)||this.hashCode()!==x.hashCode())return!1;let v=x;return this.equalsImpl(v,new o.Array2DHashSet)}equalsImpl(x,v){let m=[],g=[];for(m.push(this),g.push(x);;){let y=m.pop(),T=g.pop();if(!y||!T)break;let A=new a.PredictionContextCache.IdentityCommutativePredictionContextOperands(y,T);if(!v.add(A))continue;let b=A.x.size;if(b===0){if(!A.x.equals(A.y))return!1;continue}let R=A.y.size;if(b!==R)return!1;for(let N=0;N<b;N++){if(A.x.getReturnState(N)!==A.y.getReturnState(N))return!1;let P=A.x.getParent(N),B=A.y.getParent(N);if(P.hashCode()!==B.hashCode())return!1;P!==B&&(m.push(P),g.push(B))}}return!0}};e([s.NotNull],d.prototype,"parents",void 0),e([s.NotNull],d.prototype,"returnStates",void 0),e([s.Override],d.prototype,"getParent",null),e([s.Override],d.prototype,"getReturnState",null),e([s.Override],d.prototype,"findReturnState",null),e([s.Override],d.prototype,"size",null),e([s.Override],d.prototype,"isEmpty",null),e([s.Override],d.prototype,"hasEmpty",null),e([s.Override],d.prototype,"addEmptyContext",null),e([s.Override],d.prototype,"removeEmptyContext",null),e([s.Override],d.prototype,"appendContext",null),e([s.Override],d.prototype,"equals",null),d=e([t(0,s.NotNull)],d);let p=class md extends h{constructor(x,v){super(h.calculateSingleHashCode(x,v)),this.parent=x,this.returnState=v}getParent(x){return this.parent}getReturnState(x){return this.returnState}findReturnState(x){return this.returnState===x?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(x,v){return v.getChild(this.parent.appendContext(x,v),this.returnState)}addEmptyContext(){let x=[this.parent,h.EMPTY_FULL],v=[this.returnState,h.EMPTY_FULL_STATE_KEY];return new d(x,v)}removeEmptyContext(){return this}equals(x){if(x===this)return!0;if(!(x instanceof md))return!1;let v=x;return this.hashCode()!==v.hashCode()?!1:this.returnState===v.returnState&&this.parent.equals(v.parent)}};e([s.NotNull],p.prototype,"parent",void 0),e([s.Override],p.prototype,"getParent",null),e([s.Override],p.prototype,"getReturnState",null),e([s.Override],p.prototype,"findReturnState",null),e([s.Override],p.prototype,"size",null),e([s.Override],p.prototype,"isEmpty",null),e([s.Override],p.prototype,"hasEmpty",null),e([s.Override],p.prototype,"appendContext",null),e([s.Override],p.prototype,"addEmptyContext",null),e([s.Override],p.prototype,"removeEmptyContext",null),e([s.Override],p.prototype,"equals",null),p=e([t(0,s.NotNull)],p),l.SingletonPredictionContext=p,function(S){S.EMPTY_LOCAL=new f(!1),S.EMPTY_FULL=new f(!0),S.EMPTY_LOCAL_STATE_KEY=-2147483648,S.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class x extends n.Array2DHashMap{constructor(){super(v.INSTANCE)}}S.IdentityHashMap=x;class v{IdentityEqualityComparator(){}hashCode(g){return g.hashCode()}equals(g,y){return g===y}}v.INSTANCE=new v,e([s.Override],v.prototype,"hashCode",null),e([s.Override],v.prototype,"equals",null),S.IdentityEqualityComparator=v}(h=l.PredictionContext||(l.PredictionContext={}))}(Yr)),Yr}var fc;function Co(){if(fc)return At;fc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=At&&At.__decorate||function(S,x,v,m){var g=arguments.length,y=g<3?x:m===null?m=Object.getOwnPropertyDescriptor(x,v):m,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,x,v,m);else for(var A=S.length-1;A>=0;A--)(T=S[A])&&(y=(g<3?T(y):g>3?T(x,v,y):T(x,v))||y);return g>3&&y&&Object.defineProperty(x,v,y),y},e=At&&At.__param||function(S,x){return function(v,m){x(v,m,S)}};Object.defineProperty(At,"__esModule",{value:!0}),At.ATNConfig=void 0;const t=oi(),n=$n(),o=je(),i=Z(),r=ct(),s=it(),a=ii(),c=$e(),u=2147483648;let h=class Ii{constructor(x,v,m){typeof v=="number"?(c((v&16777215)===v),this._state=x,this.altAndOuterContextDepth=v,this._context=m):(this._state=x,this.altAndOuterContextDepth=v.altAndOuterContextDepth,this._context=m)}static create(x,v,m,g=a.SemanticContext.NONE,y){return g!==a.SemanticContext.NONE?y!=null?new p(y,g,x,v,m,!1):new f(g,x,v,m):y!=null?new d(y,x,v,m,!1):new Ii(x,v,m)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(x){this._context=x}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(x){c(x>=0),x=Math.min(x,127),this.altAndOuterContextDepth=x<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return a.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(x,v,m){return m==null?this.transformImpl(x,this._context,this.semanticContext,v,this.lexerActionExecutor):m instanceof s.PredictionContext?this.transformImpl(x,m,this.semanticContext,v,this.lexerActionExecutor):m instanceof a.SemanticContext?this.transformImpl(x,this._context,m,v,this.lexerActionExecutor):this.transformImpl(x,this._context,this.semanticContext,v,m)}transformImpl(x,v,m,g,y){let T=g&&Ii.checkNonGreedyDecision(this,x);return m!==a.SemanticContext.NONE?y!=null||T?new p(y,m,x,this,v,T):new f(m,x,this,v):y!=null||T?new d(y,x,this,v,T):new Ii(x,this,v)}static checkNonGreedyDecision(x,v){return x.hasPassedThroughNonGreedyDecision||v instanceof n.DecisionState&&v.nonGreedy}appendContext(x,v){if(typeof x=="number"){let m=this.context.appendSingleContext(x,v);return this.transform(this.state,!1,m)}else{let m=this.context.appendContext(x,v);return this.transform(this.state,!1,m)}}contains(x){if(this.state.stateNumber!==x.state.stateNumber||this.alt!==x.alt||!this.semanticContext.equals(x.semanticContext))return!1;let v=[],m=[];for(v.push(this.context),m.push(x.context);;){let g=v.pop(),y=m.pop();if(!g||!y)break;if(g===y)return!0;if(g.size<y.size)return!1;if(y.isEmpty)return g.hasEmpty;for(let T=0;T<y.size;T++){let A=g.findReturnState(y.getReturnState(T));if(A<0)return!1;v.push(g.getParent(A)),m.push(y.getParent(T))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&u)!==0}set isPrecedenceFilterSuppressed(x){x?this.altAndOuterContextDepth|=u:this.altAndOuterContextDepth&=2147483647}equals(x){return this===x?!0:x instanceof Ii?this.state.stateNumber===x.state.stateNumber&&this.alt===x.alt&&this.reachesIntoOuterContext===x.reachesIntoOuterContext&&this.context.equals(x.context)&&this.semanticContext.equals(x.semanticContext)&&this.isPrecedenceFilterSuppressed===x.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===x.hasPassedThroughNonGreedyDecision&&r.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,x.lexerActionExecutor):!1}hashCode(){let x=o.MurmurHash.initialize(7);return x=o.MurmurHash.update(x,this.state.stateNumber),x=o.MurmurHash.update(x,this.alt),x=o.MurmurHash.update(x,this.reachesIntoOuterContext?1:0),x=o.MurmurHash.update(x,this.context),x=o.MurmurHash.update(x,this.semanticContext),x=o.MurmurHash.update(x,this.hasPassedThroughNonGreedyDecision?1:0),x=o.MurmurHash.update(x,this.lexerActionExecutor),x=o.MurmurHash.finish(x,7),x}toDotString(){let x="";x+=`digraph G {
`,x+=`rankdir=LR;
`;let v=new t.Array2DHashMap(s.PredictionContext.IdentityEqualityComparator.INSTANCE),m=[];function g(y){let T=v.size,A=v.putIfAbsent(y,T);return A??(m.push(y),T)}for(m.push(this.context),v.put(this.context,0);;){let y=m.pop();if(!y)break;for(let T=0;T<y.size;T++)x+="  s"+g(y),x+="->",x+="s"+g(y.getParent(T)),x+='[label="'+y.getReturnState(T)+`"];
`}return x+=`}
`,x.toString()}toString(x,v,m){m==null&&(m=v!=null),v==null&&(v=!0);let g="",y;m?y=this.context.toStrings(x,this.state.stateNumber):y=["?"];let T=!0;for(let A of y)T?T=!1:g+=", ",g+="(",g+=this.state,v&&(g+=",",g+=this.alt),this.context&&(g+=",",g+=A),this.semanticContext!==a.SemanticContext.NONE&&(g+=",",g+=this.semanticContext),this.reachesIntoOuterContext&&(g+=",up="+this.outerContextDepth),g+=")";return g.toString()}};l([i.NotNull],h.prototype,"_state",void 0),l([i.NotNull],h.prototype,"_context",void 0),l([i.NotNull],h.prototype,"state",null),l([i.NotNull,e(0,i.NotNull)],h.prototype,"context",null),l([i.NotNull],h.prototype,"semanticContext",null),l([i.Override],h.prototype,"clone",null),l([e(0,i.NotNull),e(2,i.NotNull)],h.prototype,"transformImpl",null),l([i.Override],h.prototype,"equals",null),l([i.Override],h.prototype,"hashCode",null),l([e(0,i.NotNull),e(3,i.NotNull)],h,"create",null),h=l([e(0,i.NotNull),e(2,i.NotNull)],h),At.ATNConfig=h;let f=class extends h{constructor(x,v,m,g){typeof m=="number"?super(v,m,g):super(v,m,g),this._semanticContext=x}get semanticContext(){return this._semanticContext}};l([i.NotNull],f.prototype,"_semanticContext",void 0),l([i.Override],f.prototype,"semanticContext",null),f=l([e(1,i.NotNull),e(2,i.NotNull)],f);let d=class extends h{constructor(x,v,m,g,y){if(typeof m=="number")super(v,m,g);else if(super(v,m,g),m.semanticContext!==a.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=x,this.passedThroughNonGreedyDecision=y}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};l([i.Override],d.prototype,"lexerActionExecutor",null),l([i.Override],d.prototype,"hasPassedThroughNonGreedyDecision",null),d=l([e(1,i.NotNull),e(2,i.NotNull)],d);let p=class extends f{constructor(x,v,m,g,y,T){typeof g=="number"?super(v,m,g,y):super(v,m,g,y),this._lexerActionExecutor=x,this.passedThroughNonGreedyDecision=T}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};return l([i.Override],p.prototype,"lexerActionExecutor",null),l([i.Override],p.prototype,"hasPassedThroughNonGreedyDecision",null),p=l([e(1,i.NotNull),e(2,i.NotNull)],p),At}var yi={},dc;function Fr(){if(dc)return yi;dc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(yi,"__esModule",{value:!0}),yi.BitSet=void 0;const l=Qn(),e=je(),t=new Uint16Array(0);function n(h){return h>>>4}function o(h){return h*16}function i(h){let f=1;for(let d=0;d<16;d++){if((h&f)!==0)return d;f=f<<1>>>0}throw new RangeError("No specified bit found")}function r(h){let f=32768;for(let d=15;d>=0;d--){if((h&f)!==0)return d;f=f>>>1}throw new RangeError("No specified bit found")}function s(h,f){return h&=15,f&=15,h===f?1<<h>>>0:65535>>>15-f^65535>>>16-h}const a=new Uint8Array(65536);for(let h=0;h<16;h++){const f=1<<h>>>0;let d=0;for(;d<a.length;){d+=f;for(let p=0;p<f;p++)a[d]++,d++}}let c=class Li{constructor(f){if(!f)this.data=t;else if(typeof f=="number"){if(f<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(n(f-1)+1)}else if(f instanceof Li)this.data=f.data.slice(0);else{let d=-1;for(let p of f)d<p&&(d=p);this.data=new Uint16Array(n(d-1)+1);for(let p of f)this.set(p)}}and(f){const d=this.data,p=f.data,S=Math.min(d.length,p.length);let x=-1;for(let v=0;v<S;v++)(d[v]&=p[v])!==0&&(x=v);x===-1&&(this.data=t),x<d.length-1&&(this.data=d.slice(0,x+1))}andNot(f){const d=this.data,p=f.data,S=Math.min(d.length,p.length);let x=-1;for(let v=0;v<S;v++)(d[v]&=p[v]^65535)!==0&&(x=v);x===-1&&(this.data=t),x<d.length-1&&(this.data=d.slice(0,x+1))}cardinality(){if(this.isEmpty)return 0;const f=this.data,d=f.length;let p=0;for(let S=0;S<d;S++)p+=a[f[S]];return p}clear(f,d){f==null?this.data.fill(0):d==null?this.set(f,!1):this.set(f,d,!1)}flip(f,d){if(d==null&&(d=f),f<0||d<f)throw new RangeError;let p=n(f);const S=n(d);if(p===S)this.data[p]^=s(f,d);else{for(this.data[p++]^=s(f,15);p<S;)this.data[p++]^=65535;this.data[p++]^=s(0,d)}}get(f,d){if(d===void 0)return!!(this.data[n(f)]&s(f,f));{let p=new Li(d+1);for(let S=f;S<=d;S++)p.set(S,this.get(S));return p}}intersects(f){let d=Math.min(this.length(),f.length());if(d===0)return!1;let p=n(d-1);for(let S=0;S<=p;S++)if((this.data[S]&f.data[S])!==0)return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(o(this.data.length)-1)+1:0}nextClearBit(f){if(f<0)throw new RangeError("fromIndex cannot be negative");const d=this.data,p=d.length;let S=n(f);if(S>p)return-1;let x=65535^s(f,15);if((d[S]|x)===65535){for(S++,x=0;S<p&&d[S]===65535;S++);if(S===p)return-1}return o(S)+i((d[S]|x)^65535)}nextSetBit(f){if(f<0)throw new RangeError("fromIndex cannot be negative");const d=this.data,p=d.length;let S=n(f);if(S>p)return-1;let x=s(f,15);if((d[S]&x)===0){for(S++,x=65535;S<p&&d[S]===0;S++);if(S>=p)return-1}return o(S)+i(d[S]&x)}or(f){const d=this.data,p=f.data,S=Math.min(d.length,p.length),x=Math.max(d.length,p.length),v=d.length===x?d:new Uint16Array(x);let m=-1;for(let y=0;y<S;y++)(v[y]=d[y]|p[y])!==0&&(m=y);const g=d.length>p.length?d:p;for(let y=S;y<x;y++)(v[y]=g[y])!==0&&(m=y);m===-1?this.data=t:v.length===m+1?this.data=v:this.data=v.slice(0,m)}previousClearBit(f){if(f<0)throw new RangeError("fromIndex cannot be negative");const d=this.data,p=d.length;let S=n(f);S>=p&&(S=p-1);let x=65535^s(0,f);if((d[S]|x)===65535){for(x=0,S--;S>=0&&d[S]===65535;S--);if(S<0)return-1}return o(S)+r((d[S]|x)^65535)}previousSetBit(f){if(f<0)throw new RangeError("fromIndex cannot be negative");const d=this.data,p=d.length;let S=n(f);S>=p&&(S=p-1);let x=s(0,f);if((d[S]&x)===0){for(S--,x=65535;S>=0&&d[S]===0;S--);if(S<0)return-1}return o(S)+r(d[S]&x)}set(f,d,p){if(d===void 0?(d=f,p=!0):typeof d=="boolean"&&(p=d,d=f),p===void 0&&(p=!0),f<0||f>d)throw new RangeError;let S=n(f),x=n(d);if(p&&x>=this.data.length){let v=new Uint16Array(x+1);this.data.forEach((m,g)=>v[g]=m),this.data=v}else if(!p){if(S>=this.data.length)return;x>=this.data.length&&(x=this.data.length-1,d=this.data.length*16-1)}if(S===x)this._setBits(S,p,s(f,d));else{for(this._setBits(S++,p,s(f,15));S<x;)this.data[S++]=p?65535:0;this._setBits(S,p,s(0,d))}}_setBits(f,d,p){d?this.data[f]|=p:this.data[f]&=65535^p}get size(){return this.data.byteLength*8}hashCode(){return e.MurmurHash.hashCode(this.data,22)}equals(f){if(f===this)return!0;if(!(f instanceof Li))return!1;const d=this.length();if(d!==f.length())return!1;if(d===0)return!0;let p=n(d-1);for(let S=0;S<=p;S++)if(this.data[S]!==f.data[S])return!1;return!0}toString(){let f="{",d=!0;for(let p=this.nextSetBit(0);p>=0;p=this.nextSetBit(p+1))d?d=!1:f+=", ",f+=p;return f+="}",f}xor(f){const d=this.data,p=f.data,S=Math.min(d.length,p.length),x=Math.max(d.length,p.length),v=d.length===x?d:new Uint16Array(x);let m=-1;for(let y=0;y<S;y++)(v[y]=d[y]^p[y])!==0&&(m=y);const g=d.length>p.length?d:p;for(let y=S;y<x;y++)(v[y]=g[y])!==0&&(m=y);m===-1?this.data=t:v.length===m+1?this.data=v:this.data=v.slice(0,m+1)}clone(){return new Li(this)}[Symbol.iterator](){return new u(this.data)}[l.inspect.custom](){return"BitSet "+this.toString()}};yi.BitSet=c;class u{constructor(f){this.data=f,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const f=this.data[this.index]&this.mask;if(f!==0){const d=o(this.index)+i(f);return this.mask=s(d+1,15),{done:!1,value:d}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}return yi}var pc;function Wi(){if(pc)return Gr;pc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Gr&&Gr.__decorate||function(v,m,g,y){var T=arguments.length,A=T<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,g):y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(v,m,g,y);else for(var R=v.length-1;R>=0;R--)(b=v[R])&&(A=(T<3?b(A):T>3?b(m,g,A):b(m,g))||A);return T>3&&A&&Object.defineProperty(m,g,A),A};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.ATNConfigSet=void 0;const e=oi(),t=Or(),n=vo(),o=ht(),i=Co(),r=Fr(),s=Z(),a=ct(),c=it(),u=Ga(),h=ii(),f=$e(),d=gr();class p{hashCode(m){return m.state^m.alt}equals(m,g){return m.state===g.state&&m.alt===g.alt}}p.INSTANCE=new p;function S(v){return v?new e.Array2DHashMap(v):new e.Array2DHashMap(p.INSTANCE)}let x=class Ea{constructor(m,g){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,m?(g?(this.mergedConfigs=void 0,this.unmerged=void 0):m.isReadOnly?(this.mergedConfigs=S(),this.unmerged=[]):(this.mergedConfigs=S(m.mergedConfigs),this.unmerged=m.unmerged.slice(0)),this.configs=m.configs.slice(0),this._dipsIntoOuterContext=m._dipsIntoOuterContext,this._hasSemanticContext=m._hasSemanticContext,this.outermostConfigSet=m.outermostConfigSet,(g||!m.isReadOnly)&&(this._uniqueAlt=m._uniqueAlt,this._conflictInfo=m._conflictInfo)):(this.mergedConfigs=S(),this.unmerged=[],this.configs=[],this._uniqueAlt=o.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let m=new r.BitSet;for(let g of this)m.set(g.alt);return m}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(m){if(this.outermostConfigSet&&!m)throw new Error("IllegalStateException");f(!m||!this._dipsIntoOuterContext),this.outermostConfigSet=m}getStates(){let m=new t.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);for(let g of this.configs)m.add(g.state);return m}optimizeConfigs(m){if(this.configs.length!==0)for(let g of this.configs)g.context=m.atn.getCachedContext(g.context)}clone(m){let g=new Ea(this,m);return!m&&this.isReadOnly&&g.addAll(this.configs),g}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(m){if(!(m instanceof i.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let g=m,y=this.getKey(g),T=this.mergedConfigs.get(y);if(T!=null&&this.canMerge(g,y,T))return T.contains(g);for(let A of this.unmerged)if(A.contains(m))return!0}else for(let g of this.configs)if(g.contains(m))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(m,g){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");f(!this.outermostConfigSet||!m.reachesIntoOuterContext),g==null&&(g=u.PredictionContextCache.UNCACHED);let y,T=this.getKey(m),A=this.mergedConfigs.get(T);if(y=A==null,A!=null&&this.canMerge(m,T,A)){A.outerContextDepth=Math.max(A.outerContextDepth,m.outerContextDepth),m.isPrecedenceFilterSuppressed&&(A.isPrecedenceFilterSuppressed=!0);let b=c.PredictionContext.join(A.context,m.context,g);return this.updatePropertiesForMergedConfig(m),A.context===b?!1:(A.context=b,!0)}for(let b=0;b<this.unmerged.length;b++){let R=this.unmerged[b];if(this.canMerge(m,T,R)){R.outerContextDepth=Math.max(R.outerContextDepth,m.outerContextDepth),m.isPrecedenceFilterSuppressed&&(R.isPrecedenceFilterSuppressed=!0);let N=c.PredictionContext.join(R.context,m.context,g);return this.updatePropertiesForMergedConfig(m),R.context===N?!1:(R.context=N,y&&(this.mergedConfigs.put(T,R),this.unmerged.splice(b,1)),!0)}}return this.configs.push(m),y?this.mergedConfigs.put(T,m):this.unmerged.push(m),this.updatePropertiesForAddedConfig(m),!0}updatePropertiesForMergedConfig(m){this._dipsIntoOuterContext=this._dipsIntoOuterContext||m.reachesIntoOuterContext,f(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(m){this.configs.length===1?this._uniqueAlt=m.alt:this._uniqueAlt!==m.alt&&(this._uniqueAlt=o.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!h.SemanticContext.NONE.equals(m.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||m.reachesIntoOuterContext,f(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(m,g,y){return m.state.stateNumber!==y.state.stateNumber||g.alt!==y.alt?!1:m.semanticContext.equals(y.semanticContext)}getKey(m){return{state:m.state.stateNumber,alt:m.alt}}containsAll(m){for(let g of m)if(!(g instanceof i.ATNConfig)||!this.contains(g))return!1;return!0}addAll(m,g){this.ensureWritable();let y=!1;for(let T of m)this.add(T,g)&&(y=!0);return y}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=o.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(m){return this===m?!0:m instanceof Ea?this.outermostConfigSet===m.outermostConfigSet&&d.equals(this._conflictInfo,m._conflictInfo)&&n.ArrayEqualityComparator.INSTANCE.equals(this.configs,m.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let m=1;return m=5*m^(this.outermostConfigSet?1:0),m=5*m^n.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=m),m}toString(m){m==null&&(m=!1);let g="",y=this.configs.slice(0);y.sort((T,A)=>T.alt!==A.alt?T.alt-A.alt:T.state.stateNumber!==A.state.stateNumber?T.state.stateNumber-A.state.stateNumber:T.semanticContext.toString().localeCompare(A.semanticContext.toString())),g+="[";for(let T=0;T<y.length;T++)T>0&&(g+=", "),g+=y[T].toString(void 0,!0,m);return g+="]",this._hasSemanticContext&&(g+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==o.ATN.INVALID_ALT_NUMBER&&(g+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(g+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(g+="*")),this._dipsIntoOuterContext&&(g+=",dipsIntoOuterContext"),g.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(m){this.ensureWritable(),this._hasSemanticContext=m}get conflictInfo(){return this._conflictInfo}set conflictInfo(m){this.ensureWritable(),this._conflictInfo=m}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(m){return this.configs[m]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}};return l([s.NotNull],x.prototype,"getRepresentedAlternatives",null),l([s.Override],x.prototype,"size",null),l([s.Override],x.prototype,"isEmpty",null),l([s.Override],x.prototype,"contains",null),l([s.Override],x.prototype,Symbol.iterator,null),l([s.Override],x.prototype,"toArray",null),l([s.Override],x.prototype,"containsAll",null),l([s.Override],x.prototype,"clear",null),l([s.Override],x.prototype,"equals",null),l([s.Override],x.prototype,"hashCode",null),Gr.ATNConfigSet=x,Gr}var Xr={},Kr={},Qr={},xc;function Eo(){return xc||(xc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Qr&&Qr.__decorate||function(u,h,f,d){var p=arguments.length,S=p<3?h:d===null?d=Object.getOwnPropertyDescriptor(h,f):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,h,f,d);else for(var v=u.length-1;v>=0;v--)(x=u[v])&&(S=(p<3?x(S):p>3?x(h,f,S):x(h,f))||S);return p>3&&S&&Object.defineProperty(h,f,S),S},t=Qr&&Qr.__param||function(u,h){return function(f,d){h(f,d,u)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DFAState=void 0;const n=ht(),o=Fr(),i=je(),r=Z(),s=it(),a=$e();let c=class gd{constructor(h){this.stateNumber=-1,this.configs=h,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(h){return this.isContextSensitive?this.contextSymbols.get(h):!1}setContextSymbol(h){a(this.isContextSensitive),this.contextSymbols.set(h)}setContextSensitive(h){a(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new o.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(h){this._acceptStateInfo=h}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:n.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(h){return this.edges.get(h)}setTarget(h,f){this.edges.set(h,f)}getEdgeMap(){return this.edges}getContextTarget(h){return h===s.PredictionContext.EMPTY_FULL_STATE_KEY&&(h=-1),this.contextEdges.get(h)}setContextTarget(h,f){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");h===s.PredictionContext.EMPTY_FULL_STATE_KEY&&(h=-1),this.contextEdges.set(h,f)}getContextEdgeMap(){let h=new Map(this.contextEdges),f=h.get(-1);if(f!==void 0)if(h.size===1){let d=new Map;return d.set(s.PredictionContext.EMPTY_FULL_STATE_KEY,f),d}else h.delete(-1),h.set(s.PredictionContext.EMPTY_FULL_STATE_KEY,f);return h}hashCode(){let h=i.MurmurHash.initialize(7);return h=i.MurmurHash.update(h,this.configs.hashCode()),h=i.MurmurHash.finish(h,1),h}equals(h){if(this===h)return!0;if(!(h instanceof gd))return!1;let f=h;return this.configs.equals(f.configs)}toString(){let h="";return h+=this.stateNumber+":"+this.configs,this.isAcceptState&&(h+="=>",this.predicates?h+=this.predicates:h+=this.prediction),h.toString()}};e([r.NotNull],c.prototype,"configs",void 0),e([r.NotNull],c.prototype,"edges",void 0),e([r.NotNull],c.prototype,"contextEdges",void 0),e([r.Override],c.prototype,"hashCode",null),e([r.Override],c.prototype,"equals",null),e([r.Override],c.prototype,"toString",null),l.DFAState=c,function(u){let h=class{constructor(d,p){this.alt=p,this.pred=d}toString(){return"("+this.pred+", "+this.alt+")"}};e([r.NotNull],h.prototype,"pred",void 0),e([r.Override],h.prototype,"toString",null),h=e([t(0,r.NotNull)],h),u.PredPrediction=h}(c=l.DFAState||(l.DFAState={}))}(Qr)),Qr}var mc;function _o(){return mc||(mc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Kr&&Kr.__decorate||function(a,c,u,h){var f=arguments.length,d=f<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,c,u,h);else for(var S=a.length-1;S>=0;S--)(p=a[S])&&(d=(f<3?p(d):f>3?p(c,u,d):p(c,u))||d);return f>3&&d&&Object.defineProperty(c,u,d),d},t=Kr&&Kr.__param||function(a,c){return function(u,h){c(u,h,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ATNSimulator=void 0;const n=Wi(),o=Eo(),i=Z(),r=it();let s=class Bi{constructor(c){this.atn=c}static get ERROR(){return Bi._ERROR||(Bi._ERROR=new o.DFAState(new n.ATNConfigSet),Bi._ERROR.stateNumber=r.PredictionContext.EMPTY_FULL_STATE_KEY),Bi._ERROR}clearDFA(){this.atn.clearDFA()}};e([i.NotNull],s.prototype,"atn",void 0),e([i.NotNull],s,"ERROR",null),s=e([t(0,i.NotNull)],s),l.ATNSimulator=s,s=l.ATNSimulator||(l.ATNSimulator={}),l.ATNSimulator=s}(Kr)),Kr}var Ct={},vi={},gc;function yd(){if(gc)return vi;gc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(vi,"__esModule",{value:!0}),vi.ConsoleErrorListener=void 0;let l=class{syntaxError(t,n,o,i,r,s){console.error(`line ${o}:${i} ${r}`)}};return vi.ConsoleErrorListener=l,l.INSTANCE=new l,vi}var Et={},yc;function Ya(){if(yc)return Et;yc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Et&&Et.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c},e=Et&&Et.__param||function(o,i){return function(r,s){i(r,s,o)}};Object.defineProperty(Et,"__esModule",{value:!0}),Et.ProxyErrorListener=void 0;const t=Z();let n=class{constructor(i){if(this.delegates=i,!i)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(i,r,s,a,c,u){this.delegates.forEach(h=>{h.syntaxError&&h.syntaxError(i,r,s,a,c,u)})}};return l([t.Override,e(0,t.NotNull),e(4,t.NotNull)],n.prototype,"syntaxError",null),Et.ProxyErrorListener=n,Et}var vc;function Gi(){if(vc)return Ct;vc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ct&&Ct.__decorate||function(a,c,u,h){var f=arguments.length,d=f<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,u):h,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,c,u,h);else for(var S=a.length-1;S>=0;S--)(p=a[S])&&(d=(f<3?p(d):f>3?p(c,u,d):p(c,u))||d);return f>3&&d&&Object.defineProperty(c,u,d),d},e=Ct&&Ct.__param||function(a,c){return function(u,h){c(u,h,a)}};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.Recognizer=void 0;const t=yd(),n=Ya(),o=Z(),i=Be(),r=gr();let s=class Mi{constructor(){this._listeners=[t.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let c=this.vocabulary,u=Mi.tokenTypeMapCache.get(c);if(u==null){let h=new Map;for(let f=0;f<=this.atn.maxTokenType;f++){let d=c.getLiteralName(f);d!=null&&h.set(d,f);let p=c.getSymbolicName(f);p!=null&&h.set(p,f)}h.set("EOF",i.Token.EOF),u=h,Mi.tokenTypeMapCache.set(c,u)}return u}getRuleIndexMap(){let c=this.ruleNames;if(c==null)throw new Error("The current recognizer does not provide a list of rule names.");let u=Mi.ruleIndexMapCache.get(c);return u==null&&(u=r.toMap(c),Mi.ruleIndexMapCache.set(c,u)),u}getTokenType(c){let u=this.getTokenTypeMap().get(c);return u??i.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(c){this._interp=c}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(c){let u=c.getOffendingToken();if(!u)return"";let h=u.line,f=u.charPositionInLine;return"line "+h+":"+f}addErrorListener(c){if(!c)throw new TypeError("listener must not be null");this._listeners.push(c)}removeErrorListener(c){let u=this._listeners.indexOf(c);u!==-1&&this._listeners.splice(u,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new n.ProxyErrorListener(this.getErrorListeners())}sempred(c,u,h){return!0}precpred(c,u){return!0}action(c,u,h){}get state(){return this._stateNumber}set state(c){this._stateNumber=c}};return s.EOF=-1,s.tokenTypeMapCache=new WeakMap,s.ruleIndexMapCache=new WeakMap,l([o.SuppressWarnings("serial"),o.NotNull],s.prototype,"_listeners",void 0),l([o.NotNull],s.prototype,"getTokenTypeMap",null),l([o.NotNull],s.prototype,"getRuleIndexMap",null),l([o.NotNull],s.prototype,"serializedATN",null),l([o.NotNull],s.prototype,"atn",null),l([o.NotNull,e(0,o.NotNull)],s.prototype,"interpreter",null),l([o.NotNull,e(0,o.NotNull)],s.prototype,"getErrorHeader",null),l([e(0,o.NotNull)],s.prototype,"addErrorListener",null),l([e(0,o.NotNull)],s.prototype,"removeErrorListener",null),l([o.NotNull],s.prototype,"getErrorListeners",null),Ct.Recognizer=s,Ct}var Jr={},Sc;function Vn(){if(Sc)return Jr;Sc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Jr&&Jr.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.VocabularyImpl=void 0;const e=Z(),t=Be();let n=class{constructor(i,r,s){this.literalNames=i,this.symbolicNames=r,this.displayNames=s,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(i){if(i>=0&&i<this.literalNames.length)return this.literalNames[i]}getSymbolicName(i){if(i>=0&&i<this.symbolicNames.length)return this.symbolicNames[i];if(i===t.Token.EOF)return"EOF"}getDisplayName(i){if(i>=0&&i<this.displayNames.length){let a=this.displayNames[i];if(a)return a}let r=this.getLiteralName(i);if(r)return r;let s=this.getSymbolicName(i);return s||String(i)}};return n.EMPTY_VOCABULARY=new n([],[],[]),l([e.NotNull],n.prototype,"literalNames",void 0),l([e.NotNull],n.prototype,"symbolicNames",void 0),l([e.NotNull],n.prototype,"displayNames",void 0),l([e.Override],n.prototype,"maxTokenType",null),l([e.Override],n.prototype,"getLiteralName",null),l([e.Override],n.prototype,"getSymbolicName",null),l([e.Override,e.NotNull],n.prototype,"getDisplayName",null),l([e.NotNull],n,"EMPTY_VOCABULARY",void 0),Jr.VocabularyImpl=n,Jr}var Ac;function vd(){if(Ac)return Xr;Ac=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Xr&&Xr.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f};Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.DFASerializer=void 0;const e=_o(),t=Z(),n=it(),o=Gi(),i=Vn();let r=class{constructor(a,c,u,h){c instanceof o.Recognizer?(u=c.ruleNames,h=c.atn,c=c.vocabulary):c||(c=i.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=a,this.vocabulary=c,this.ruleNames=u,this.atn=h}toString(){if(!this.dfa.s0)return"";let a="";if(this.dfa.states){let u=new Array(...this.dfa.states.toArray());u.sort((h,f)=>h.stateNumber-f.stateNumber);for(let h of u){let f=h.getEdgeMap(),d=[...f.keys()].sort((x,v)=>x-v),p=h.getContextEdgeMap(),S=[...p.keys()].sort((x,v)=>x-v);for(let x of d){let v=f.get(x);if((v==null||v===e.ATNSimulator.ERROR)&&!h.isContextSymbol(x))continue;let m=!1;a+=this.getStateString(h)+"-"+this.getEdgeLabel(x)+"->",h.isContextSymbol(x)&&(a+="!",m=!0);let g=v;g&&g.stateNumber!==e.ATNSimulator.ERROR.stateNumber?a+=this.getStateString(g)+`
`:m&&(a+=`ctx
`)}if(h.isContextSensitive)for(let x of S)a+=this.getStateString(h)+"-"+this.getContextLabel(x)+"->"+this.getStateString(p.get(x))+`
`}}let c=a;return c.length===0?"":c}getContextLabel(a){if(a===n.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(a===n.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&a>0&&a<=this.atn.states.length){let u=this.atn.states[a].ruleIndex;if(this.ruleNames&&u>=0&&u<this.ruleNames.length)return"ctx:"+String(a)+"("+this.ruleNames[u]+")"}return"ctx:"+String(a)}getEdgeLabel(a){return this.vocabulary.getDisplayName(a)}getStateString(a){if(a===e.ATNSimulator.ERROR)return"ERROR";let c=a.stateNumber,u="s"+c;if(a.isAcceptState&&(a.predicates?u=":s"+c+"=>"+a.predicates:u=":s"+c+"=>"+a.prediction),a.isContextSensitive){u+="*";for(let h of a.configs)if(h.reachesIntoOuterContext){u+="*";break}}return u}};return l([t.NotNull],r.prototype,"dfa",void 0),l([t.NotNull],r.prototype,"vocabulary",void 0),l([t.Override],r.prototype,"toString",null),Xr.DFASerializer=r,Xr}var _t={},Cc;function S0(){if(Cc)return _t;Cc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=_t&&_t.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=_t&&_t.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(_t,"__esModule",{value:!0}),_t.LexerDFASerializer=void 0;const t=vd(),n=Z(),o=Vn();let i=class extends t.DFASerializer{constructor(s){super(s,o.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(s){return"'"+String.fromCodePoint(s)+"'"}};return l([n.Override,n.NotNull],i.prototype,"getEdgeLabel",null),i=l([e(0,n.NotNull)],i),_t.LexerDFASerializer=i,_t}var Zr={},Ec;function Xa(){if(Ec)return Zr;Ec=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Zr&&Zr.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.StarLoopEntryState=void 0;const e=He(),t=Fr(),n=$n(),o=Z();let i=class extends n.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new t.BitSet}get stateType(){return e.ATNStateType.STAR_LOOP_ENTRY}};return l([o.Override],i.prototype,"stateType",null),Zr.StarLoopEntryState=i,Zr}var _c;function Sd(){if(_c)return St;_c=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=St&&St.__decorate||function(f,d,p,S){var x=arguments.length,v=x<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,p):S,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,d,p,S);else for(var g=f.length-1;g>=0;g--)(m=f[g])&&(v=(x<3?m(v):x>3?m(d,p,v):m(d,p))||v);return x>3&&v&&Object.defineProperty(d,p,v),v},e=St&&St.__param||function(f,d){return function(p,S){d(p,S,f)}};Object.defineProperty(St,"__esModule",{value:!0}),St.DFA=void 0;const t=Or(),n=Wi(),o=vd(),i=Eo(),r=S0(),s=Z(),a=ct(),c=Xa(),u=Vn();let h=class{constructor(d,p=0){if(this.states=new t.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!d.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=d,this.atn=d.atn,this.decision=p;let S=!1;d instanceof c.StarLoopEntryState&&d.precedenceRuleDecision&&(S=!0,this.s0=new i.DFAState(new n.ATNConfigSet),this.s0full=new i.DFAState(new n.ATNConfigSet)),this.precedenceDfa=S}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(d,p){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return p?this.s0full.getTarget(d):this.s0.getTarget(d)}setPrecedenceStartState(d,p,S){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");d<0||(p?this.s0full.setTarget(d,S):this.s0.setTarget(d,S))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(d){return d.stateNumber=this.nextStateNumber++,this.states.getOrAdd(d)}toString(d,p){if(d||(d=u.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let S;return p?S=new o.DFASerializer(this,d,p,this.atnStartState.atn):S=new o.DFASerializer(this,d),S.toString()}toLexerString(){return this.s0?new r.LexerDFASerializer(this).toString():""}};return l([s.NotNull],h.prototype,"states",void 0),l([s.NotNull],h.prototype,"atnStartState",void 0),l([s.NotNull],h.prototype,"atn",void 0),h=l([e(0,s.NotNull)],h),St.DFA=h,St}var en={},tn={},Tc;function Ad(){if(Tc)return tn;Tc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=tn&&tn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(tn,"__esModule",{value:!0}),tn.BasicState=void 0;const e=mr(),t=He(),n=Z();let o=class extends e.ATNState{get stateType(){return t.ATNStateType.BASIC}};return l([n.Override],o.prototype,"stateType",null),tn.BasicState=o,tn}var bc;function Cd(){if(bc)return en;bc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=en&&en.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(en,"__esModule",{value:!0}),en.InvalidState=void 0;const e=He(),t=Ad(),n=Z();let o=class extends t.BasicState{get stateType(){return e.ATNStateType.INVALID_TYPE}};return l([n.Override],o.prototype,"stateType",null),en.InvalidState=o,en}var Tt={},bt={},Rt={},Rc;function Ka(){if(Rc)return Rt;Rc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Rt&&Rt.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f},e=Rt&&Rt.__param||function(s,a){return function(c,u){a(c,u,s)}};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.SetTransition=void 0;const t=Wn(),n=Z(),o=Be(),i=wr();let r=class extends i.Transition{constructor(a,c){super(a),c==null&&(c=t.IntervalSet.of(o.Token.INVALID_TYPE)),this.set=c}get serializationType(){return 7}get label(){return this.set}matches(a,c,u){return this.set.contains(a)}toString(){return this.set.toString()}};return l([n.NotNull],r.prototype,"set",void 0),l([n.Override],r.prototype,"serializationType",null),l([n.Override,n.NotNull],r.prototype,"label",null),l([n.Override],r.prototype,"matches",null),l([n.Override,n.NotNull],r.prototype,"toString",null),r=l([e(0,n.NotNull),e(1,n.Nullable)],r),Rt.SetTransition=r,Rt}var Nc;function Qa(){if(Nc)return bt;Nc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=bt&&bt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=bt&&bt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(bt,"__esModule",{value:!0}),bt.NotSetTransition=void 0;const t=Z(),n=Ka();let o=class extends n.SetTransition{constructor(r,s){super(r,s)}get serializationType(){return 8}matches(r,s,a){return r>=s&&r<=a&&!super.matches(r,s,a)}toString(){return"~"+super.toString()}};return l([t.Override],o.prototype,"serializationType",null),l([t.Override],o.prototype,"matches",null),l([t.Override],o.prototype,"toString",null),o=l([e(0,t.NotNull),e(1,t.Nullable)],o),bt.NotSetTransition=o,bt}var rn={},wc;function Yi(){if(wc)return rn;wc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=rn&&rn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(rn,"__esModule",{value:!0}),rn.RuleStopState=void 0;const e=mr(),t=He(),n=Z();let o=class extends e.ATNState{get nonStopStateNumber(){return-1}get stateType(){return t.ATNStateType.RULE_STOP}};return l([n.Override],o.prototype,"nonStopStateNumber",null),l([n.Override],o.prototype,"stateType",null),rn.RuleStopState=o,rn}var Nt={},Oc;function Ja(){if(Oc)return Nt;Oc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Nt&&Nt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=Nt&&Nt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.RuleTransition=void 0;const t=Z(),n=wr();let o=class extends n.Transition{constructor(r,s,a,c){super(r),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=s,this.precedence=a,this.followState=c}get serializationType(){return 3}get isEpsilon(){return!0}matches(r,s,a){return!1}};return l([t.NotNull],o.prototype,"followState",void 0),l([t.Override],o.prototype,"serializationType",null),l([t.Override],o.prototype,"isEpsilon",null),l([t.Override],o.prototype,"matches",null),o=l([e(0,t.NotNull),e(3,t.NotNull)],o),Nt.RuleTransition=o,Nt}var wt={},Fc;function Ed(){if(Fc)return wt;Fc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=wt&&wt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=wt&&wt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(wt,"__esModule",{value:!0}),wt.WildcardTransition=void 0;const t=Z(),n=wr();let o=class extends n.Transition{constructor(r){super(r)}get serializationType(){return 9}matches(r,s,a){return r>=s&&r<=a}toString(){return"."}};return l([t.Override],o.prototype,"serializationType",null),l([t.Override],o.prototype,"matches",null),l([t.Override,t.NotNull],o.prototype,"toString",null),o=l([e(0,t.NotNull)],o),wt.WildcardTransition=o,wt}var Pc;function A0(){if(Pc)return Tt;Pc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Tt&&Tt.__decorate||function(x,v,m,g){var y=arguments.length,T=y<3?v:g===null?g=Object.getOwnPropertyDescriptor(v,m):g,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(x,v,m,g);else for(var b=x.length-1;b>=0;b--)(A=x[b])&&(T=(y<3?A(T):y>3?A(v,m,T):A(v,m))||T);return y>3&&T&&Object.defineProperty(v,m,T),T},e=Tt&&Tt.__param||function(x,v){return function(m,g){v(m,g,x)}};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.LL1Analyzer=void 0;const t=Ua(),n=Or(),o=Co(),i=Fr(),r=Wn(),s=Z(),a=Qa(),c=ct(),u=it(),h=Yi(),f=Ja(),d=Be(),p=Ed();let S=class _a{constructor(v){this.atn=v}getDecisionLookahead(v){if(v==null)return;let m=new Array(v.numberOfTransitions);for(let g=0;g<v.numberOfTransitions;g++){let y=new r.IntervalSet;m[g]=y;let T=new n.Array2DHashSet(c.ObjectEqualityComparator.INSTANCE);this._LOOK(v.transition(g).target,void 0,u.PredictionContext.EMPTY_LOCAL,y,T,new i.BitSet,!1,!1),(y.size===0||y.contains(_a.HIT_PRED))&&(y=void 0,m[g]=y)}return m}LOOK(v,m,g){if(g===void 0){if(v.atn==null)throw new Error("Illegal state");g=v.atn.ruleToStopState[v.ruleIndex]}else g===null&&(g=void 0);let y=new r.IntervalSet;return this._LOOK(v,g,m,y,new n.Array2DHashSet,new i.BitSet,!0,!0),y}_LOOK(v,m,g,y,T,A,b,R){let N=o.ATNConfig.create(v,0,g);if(!T.add(N))return;if(v===m){if(u.PredictionContext.isEmptyLocal(g)){y.add(d.Token.EPSILON);return}else if(g.isEmpty){R&&y.add(d.Token.EOF);return}}if(v instanceof h.RuleStopState){if(g.isEmpty&&!u.PredictionContext.isEmptyLocal(g)){R&&y.add(d.Token.EOF);return}let B=A.get(v.ruleIndex);try{A.clear(v.ruleIndex);for(let I=0;I<g.size;I++){if(g.getReturnState(I)===u.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let V=this.atn.states[g.getReturnState(I)];this._LOOK(V,m,g.getParent(I),y,T,A,b,R)}}finally{B&&A.set(v.ruleIndex)}}let P=v.numberOfTransitions;for(let B=0;B<P;B++){let I=v.transition(B);if(I instanceof f.RuleTransition){if(A.get(I.ruleIndex))continue;let V=g.getChild(I.followState.stateNumber);try{A.set(I.ruleIndex),this._LOOK(I.target,m,V,y,T,A,b,R)}finally{A.clear(I.ruleIndex)}}else if(I instanceof t.AbstractPredicateTransition)b?this._LOOK(I.target,m,g,y,T,A,b,R):y.add(_a.HIT_PRED);else if(I.isEpsilon)this._LOOK(I.target,m,g,y,T,A,b,R);else if(I instanceof p.WildcardTransition)y.addAll(r.IntervalSet.of(d.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let V=I.label;V!=null&&(I instanceof a.NotSetTransition&&(V=V.complement(r.IntervalSet.of(d.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),y.addAll(V))}}}};return S.HIT_PRED=d.Token.INVALID_TYPE,l([s.NotNull],S.prototype,"atn",void 0),l([s.NotNull,e(0,s.NotNull),e(1,s.NotNull)],S.prototype,"LOOK",null),l([e(0,s.NotNull),e(2,s.NotNull),e(3,s.NotNull),e(4,s.NotNull),e(5,s.NotNull)],S.prototype,"_LOOK",null),S=l([e(0,s.NotNull)],S),Tt.LL1Analyzer=S,Tt}var Dc;function ht(){return Dc||(Dc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Wr&&Wr.__decorate||function(p,S,x,v){var m=arguments.length,g=m<3?S:v===null?v=Object.getOwnPropertyDescriptor(S,x):v,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(p,S,x,v);else for(var T=p.length-1;T>=0;T--)(y=p[T])&&(g=(m<3?y(g):m>3?y(S,x,g):y(S,x))||g);return m>3&&g&&Object.defineProperty(S,x,g),g},t=Wr&&Wr.__param||function(p,S){return function(x,v){S(x,v,p)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ATN=void 0;const n=oi(),o=Sd(),i=Wn(),r=Cd(),s=A0(),a=Z(),c=ct(),u=it(),h=Be(),f=$e();let d=class{constructor(S,x){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new n.Array2DHashMap(c.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=S,this.maxTokenType=x}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let S=0;S<this.decisionToDFA.length;S++)this.decisionToDFA[S]=new o.DFA(this.decisionToState[S],S);this.modeToDFA=new Array(this.modeToStartState.length);for(let S=0;S<this.modeToDFA.length;S++)this.modeToDFA[S]=new o.DFA(this.modeToStartState[S]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(S){return u.PredictionContext.getCachedContext(S,this.contextCache,new u.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return f(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(S,x){return x?new s.LL1Analyzer(this).LOOK(S,x):(S.nextTokenWithinRule||(S.nextTokenWithinRule=this.nextTokens(S,u.PredictionContext.EMPTY_LOCAL),S.nextTokenWithinRule.setReadonly(!0)),S.nextTokenWithinRule)}addState(S){S.atn=this,S.stateNumber=this.states.length,this.states.push(S)}removeState(S){let x=new r.InvalidState;x.atn=this,x.stateNumber=S.stateNumber,this.states[S.stateNumber]=x}defineMode(S,x){this.modeNameToStartState.set(S,x),this.modeToStartState.push(x),this.modeToDFA.push(new o.DFA(x)),this.defineDecisionState(x)}defineDecisionState(S){return this.decisionToState.push(S),S.decision=this.decisionToState.length-1,this.decisionToDFA.push(new o.DFA(S,S.decision)),S.decision}getDecisionState(S){if(this.decisionToState.length>0)return this.decisionToState[S]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(S,x){if(S<0||S>=this.states.length)throw new RangeError("Invalid state number.");let v=x,m=this.states[S],g=this.nextTokens(m);if(!g.contains(h.Token.EPSILON))return g;let y=new i.IntervalSet;for(y.addAll(g),y.remove(h.Token.EPSILON);v!=null&&v.invokingState>=0&&g.contains(h.Token.EPSILON);){let A=this.states[v.invokingState].transition(0);g=this.nextTokens(A.followState),y.addAll(g),y.remove(h.Token.EPSILON),v=v._parent}return g.contains(h.Token.EPSILON)&&y.add(h.Token.EOF),y}};e([a.NotNull],d.prototype,"states",void 0),e([a.NotNull],d.prototype,"decisionToState",void 0),e([a.NotNull],d.prototype,"modeNameToStartState",void 0),e([a.NotNull],d.prototype,"modeToStartState",void 0),e([a.NotNull],d.prototype,"decisionToDFA",void 0),e([a.NotNull],d.prototype,"modeToDFA",void 0),e([a.NotNull],d.prototype,"nextTokens",null),e([t(0,a.NotNull)],d.prototype,"removeState",null),e([t(0,a.NotNull),t(1,a.NotNull)],d.prototype,"defineMode",null),e([t(0,a.NotNull)],d.prototype,"defineDecisionState",null),e([a.NotNull],d.prototype,"getExpectedTokens",null),d=e([t(0,a.NotNull)],d),l.ATN=d,function(p){p.INVALID_ALT_NUMBER=0}(d=l.ATN||(l.ATN={})),l.ATN=d}(Wr)),Wr}var Ot={},Ft={},Ic;function C0(){if(Ic)return Ft;Ic=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ft&&Ft.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=Ft&&Ft.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.LexerIndexedCustomAction=void 0;const t=je(),n=Z();let o=class _d{constructor(r,s){this._offset=r,this._action=s}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(r){this._action.execute(r)}hashCode(){let r=t.MurmurHash.initialize();return r=t.MurmurHash.update(r,this._offset),r=t.MurmurHash.update(r,this._action),t.MurmurHash.finish(r,2)}equals(r){return r===this?!0:r instanceof _d?this._offset===r._offset&&this._action.equals(r._action):!1}};return l([n.NotNull],o.prototype,"action",null),l([n.Override],o.prototype,"actionType",null),l([n.Override],o.prototype,"isPositionDependent",null),l([n.Override],o.prototype,"execute",null),l([n.Override],o.prototype,"hashCode",null),l([n.Override],o.prototype,"equals",null),o=l([e(1,n.NotNull)],o),Ft.LexerIndexedCustomAction=o,Ft}var Lc;function E0(){if(Lc)return Ot;Lc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ot&&Ot.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f},e=Ot&&Ot.__param||function(s,a){return function(c,u){a(c,u,s)}};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.LexerActionExecutor=void 0;const t=vo(),n=C0(),o=je(),i=Z();let r=class ki{constructor(a){this._lexerActions=a;let c=o.MurmurHash.initialize();for(let u of a)c=o.MurmurHash.update(c,u);this.cachedHashCode=o.MurmurHash.finish(c,a.length)}static append(a,c){if(!a)return new ki([c]);let u=a._lexerActions.slice(0);return u.push(c),new ki(u)}fixOffsetBeforeMatch(a){let c;for(let u=0;u<this._lexerActions.length;u++)this._lexerActions[u].isPositionDependent&&!(this._lexerActions[u]instanceof n.LexerIndexedCustomAction)&&(c||(c=this._lexerActions.slice(0)),c[u]=new n.LexerIndexedCustomAction(a,this._lexerActions[u]));return c?new ki(c):this}get lexerActions(){return this._lexerActions}execute(a,c,u){let h=!1,f=c.index;try{for(let d of this._lexerActions){if(d instanceof n.LexerIndexedCustomAction){let p=d.offset;c.seek(u+p),d=d.action,h=u+p!==f}else d.isPositionDependent&&(c.seek(f),h=!1);d.execute(a)}}finally{h&&c.seek(f)}}hashCode(){return this.cachedHashCode}equals(a){return a===this?!0:a instanceof ki?this.cachedHashCode===a.cachedHashCode&&t.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,a._lexerActions):!1}};return l([i.NotNull],r.prototype,"_lexerActions",void 0),l([i.NotNull],r.prototype,"lexerActions",null),l([e(0,i.NotNull)],r.prototype,"execute",null),l([i.Override],r.prototype,"hashCode",null),l([i.Override],r.prototype,"equals",null),l([i.NotNull,e(1,i.NotNull)],r,"append",null),r=l([e(0,i.NotNull)],r),Ot.LexerActionExecutor=r,Ot}var Pt={},Bc;function To(){if(Bc)return Pt;Bc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Pt&&Pt.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f},e=Pt&&Pt.__param||function(s,a){return function(c,u){a(c,u,s)}};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.LexerNoViableAltException=void 0;const t=Nr(),n=Z(),o=We(),i=gr();let r=class extends t.RecognitionException{constructor(a,c,u,h){super(a,c),this._startIndex=u,this._deadEndConfigs=h}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let a="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(a=this.inputStream.getText(o.Interval.of(this._startIndex,this._startIndex)),a=i.escapeWhitespace(a,!1)),`LexerNoViableAltException('${a}')`}};return l([n.Override],r.prototype,"inputStream",null),l([n.Override],r.prototype,"toString",null),r=l([e(1,n.NotNull)],r),Pt.LexerNoViableAltException=r,Pt}var nn={},Mc;function _0(){if(Mc)return nn;Mc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=nn&&nn.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(nn,"__esModule",{value:!0}),nn.OrderedATNConfigSet=void 0;const e=Wi(),t=Z();let n=class Td extends e.ATNConfigSet{constructor(i,r){i!=null&&r!=null?super(i,r):super()}clone(i){let r=new Td(this,i);return!i&&this.isReadOnly&&r.addAll(this),r}getKey(i){return{state:0,alt:i.hashCode()}}canMerge(i,r,s){return i.equals(s)}};return l([t.Override],n.prototype,"clone",null),l([t.Override],n.prototype,"getKey",null),l([t.Override],n.prototype,"canMerge",null),nn.OrderedATNConfigSet=n,nn}var kc;function bo(){return kc||(kc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Vr&&Vr.__decorate||function(T,A,b,R){var N=arguments.length,P=N<3?A:R===null?R=Object.getOwnPropertyDescriptor(A,b):R,B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(T,A,b,R);else for(var I=T.length-1;I>=0;I--)(B=T[I])&&(P=(N<3?B(P):N>3?B(A,b,P):B(A,b))||P);return N>3&&P&&Object.defineProperty(A,b,P),P},t=Vr&&Vr.__param||function(T,A){return function(b,R){A(b,R,T)}};Object.defineProperty(l,"__esModule",{value:!0}),l.LexerATNSimulator=void 0;const n=xd(),o=ht(),i=Co(),r=Wi(),s=_o(),a=Eo(),c=We(),u=Rr(),h=Pr(),f=E0(),d=To(),p=Z(),S=_0(),x=it(),v=Yi(),m=Be(),g=$e();let y=class Ye extends s.ATNSimulator{constructor(A,b){super(A),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=h.Lexer.DEFAULT_MODE,this.prevAccept=new Ye.SimState,this.recog=b}copyState(A){this._charPositionInLine=A.charPositionInLine,this._line=A._line,this.mode=A.mode,this.startIndex=A.startIndex}match(A,b){this.mode=b;let R=A.mark();try{this.startIndex=A.index,this.prevAccept.reset();let N=this.atn.modeToDFA[b].s0;return N==null?this.matchATN(A):this.execATN(A,N)}finally{A.release(R)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=h.Lexer.DEFAULT_MODE}matchATN(A){let b=this.atn.modeToStartState[this.mode];Ye.debug&&console.log(`matchATN mode ${this.mode} start: ${b}`);let R=this.mode,N=this.computeStartState(A,b),P=N.hasSemanticContext;P&&(N.hasSemanticContext=!1);let B=this.addDFAState(N);if(!P){let V=this.atn.modeToDFA[this.mode];V.s0?B=V.s0:V.s0=B}let I=this.execATN(A,B);return Ye.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[R].toLexerString()}`),I}execATN(A,b){Ye.debug&&console.log(`start state closure=${b.configs}`),b.isAcceptState&&this.captureSimState(this.prevAccept,A,b);let R=A.LA(1),N=b;for(;;){Ye.debug&&console.log(`execATN loop starting closure: ${N.configs}`);let P=this.getExistingTargetState(N,R);if(P==null&&(P=this.computeTargetState(A,N,R)),P===s.ATNSimulator.ERROR||(R!==u.IntStream.EOF&&this.consume(A),P.isAcceptState&&(this.captureSimState(this.prevAccept,A,P),R===u.IntStream.EOF)))break;R=A.LA(1),N=P}return this.failOrAccept(this.prevAccept,A,N.configs,R)}getExistingTargetState(A,b){let R=A.getTarget(b);return Ye.debug&&R!=null&&console.log("reuse state "+A.stateNumber+" edge to "+R.stateNumber),R}computeTargetState(A,b,R){let N=new S.OrderedATNConfigSet;return this.getReachableConfigSet(A,b.configs,N,R),N.isEmpty?(N.hasSemanticContext||this.addDFAEdge(b,R,s.ATNSimulator.ERROR),s.ATNSimulator.ERROR):this.addDFAEdge(b,R,N)}failOrAccept(A,b,R,N){if(A.dfaState!=null){let P=A.dfaState.lexerActionExecutor;return this.accept(b,P,this.startIndex,A.index,A.line,A.charPos),A.dfaState.prediction}else{if(N===u.IntStream.EOF&&b.index===this.startIndex)return m.Token.EOF;throw new d.LexerNoViableAltException(this.recog,b,this.startIndex,R)}}getReachableConfigSet(A,b,R,N){let P=o.ATN.INVALID_ALT_NUMBER;for(let B of b){let I=B.alt===P;if(I&&B.hasPassedThroughNonGreedyDecision)continue;Ye.debug&&console.log(`testing ${this.getTokenName(N)} at ${B.toString(this.recog,!0)}`);let V=B.state.numberOfOptimizedTransitions;for(let J=0;J<V;J++){let te=B.state.getOptimizedTransition(J),oe=this.getReachableTarget(te,N);if(oe!=null){let ge=B.lexerActionExecutor,ce;ge!=null?(ge=ge.fixOffsetBeforeMatch(A.index-this.startIndex),ce=B.transform(oe,!0,ge)):(g(B.lexerActionExecutor==null),ce=B.transform(oe,!0));let ee=N===u.IntStream.EOF;if(this.closure(A,ce,R,I,!0,ee)){P=B.alt;break}}}}}accept(A,b,R,N,P,B){Ye.debug&&console.log(`ACTION ${b}`),A.seek(N),this._line=P,this._charPositionInLine=B,b!=null&&this.recog!=null&&b.execute(this.recog,A,R)}getReachableTarget(A,b){if(A.matches(b,h.Lexer.MIN_CHAR_VALUE,h.Lexer.MAX_CHAR_VALUE))return A.target}computeStartState(A,b){let R=x.PredictionContext.EMPTY_FULL,N=new S.OrderedATNConfigSet;for(let P=0;P<b.numberOfTransitions;P++){let B=b.transition(P).target,I=i.ATNConfig.create(B,P+1,R);this.closure(A,I,N,!1,!1,!1)}return N}closure(A,b,R,N,P,B){if(Ye.debug&&console.log("closure("+b.toString(this.recog,!0)+")"),b.state instanceof v.RuleStopState){Ye.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[b.state.ruleIndex]} rule stop ${b}`):console.log(`closure at rule stop ${b}`));let V=b.context;if(V.isEmpty)return R.add(b),!0;V.hasEmpty&&(R.add(b.transform(b.state,!0,x.PredictionContext.EMPTY_FULL)),N=!0);for(let J=0;J<V.size;J++){let te=V.getReturnState(J);if(te===x.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let oe=V.getParent(J),ge=this.atn.states[te],ce=b.transform(ge,!1,oe);N=this.closure(A,ce,R,N,P,B)}return N}b.state.onlyHasEpsilonTransitions||(!N||!b.hasPassedThroughNonGreedyDecision)&&R.add(b);let I=b.state;for(let V=0;V<I.numberOfOptimizedTransitions;V++){let J=I.getOptimizedTransition(V),te=this.getEpsilonTarget(A,b,J,R,P,B);te!=null&&(N=this.closure(A,te,R,N,P,B))}return N}getEpsilonTarget(A,b,R,N,P,B){let I;switch(R.serializationType){case 3:let V=R;if(this.optimize_tail_calls&&V.optimizedTailCall&&!b.context.hasEmpty)I=b.transform(R.target,!0);else{let te=b.context.getChild(V.followState.stateNumber);I=b.transform(R.target,!0,te)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let J=R;Ye.debug&&console.log("EVAL rule "+J.ruleIndex+":"+J.predIndex),N.hasSemanticContext=!0,this.evaluatePredicate(A,J.ruleIndex,J.predIndex,P)?I=b.transform(R.target,!0):I=void 0;break;case 6:if(b.context.hasEmpty){let te=f.LexerActionExecutor.append(b.lexerActionExecutor,this.atn.lexerActions[R.actionIndex]);I=b.transform(R.target,!0,te);break}else{I=b.transform(R.target,!0);break}case 1:I=b.transform(R.target,!0);break;case 5:case 2:case 7:if(B&&R.matches(u.IntStream.EOF,h.Lexer.MIN_CHAR_VALUE,h.Lexer.MAX_CHAR_VALUE)){I=b.transform(R.target,!1);break}I=void 0;break;default:I=void 0;break}return I}evaluatePredicate(A,b,R,N){if(this.recog==null)return!0;if(!N)return this.recog.sempred(void 0,b,R);let P=this._charPositionInLine,B=this._line,I=A.index,V=A.mark();try{return this.consume(A),this.recog.sempred(void 0,b,R)}finally{this._charPositionInLine=P,this._line=B,A.seek(I),A.release(V)}}captureSimState(A,b,R){A.index=b.index,A.line=this._line,A.charPos=this._charPositionInLine,A.dfaState=R}addDFAEdge(A,b,R){if(R instanceof r.ATNConfigSet){let N=R.hasSemanticContext;N&&(R.hasSemanticContext=!1);let P=this.addDFAState(R);return N||this.addDFAEdge(A,b,P),P}else Ye.debug&&console.log("EDGE "+A+" -> "+R+" upon "+String.fromCharCode(b)),A!=null&&A.setTarget(b,R)}addDFAState(A){g(!A.hasSemanticContext);let b=new a.DFAState(A),R=this.atn.modeToDFA[this.mode].states.get(b);if(R!=null)return R;A.optimizeConfigs(this);let N=new a.DFAState(A.clone(!0)),P;for(let B of A)if(B.state instanceof v.RuleStopState){P=B;break}if(P!=null){let B=this.atn.ruleToTokenType[P.state.ruleIndex],I=P.lexerActionExecutor;N.acceptStateInfo=new n.AcceptStateInfo(B,I)}return this.atn.modeToDFA[this.mode].addState(N)}getDFA(A){return this.atn.modeToDFA[A]}getText(A){return A.getText(c.Interval.of(this.startIndex,A.index-1))}get line(){return this._line}set line(A){this._line=A}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(A){this._charPositionInLine=A}consume(A){A.LA(1)===10?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,A.consume()}getTokenName(A){return A===-1?"EOF":"'"+String.fromCharCode(A)+"'"}};e([p.NotNull],y.prototype,"prevAccept",void 0),e([t(0,p.NotNull)],y.prototype,"copyState",null),e([t(0,p.NotNull)],y.prototype,"match",null),e([p.Override],y.prototype,"reset",null),e([t(0,p.NotNull)],y.prototype,"matchATN",null),e([t(0,p.NotNull),t(1,p.NotNull)],y.prototype,"execATN",null),e([t(0,p.NotNull)],y.prototype,"getExistingTargetState",null),e([p.NotNull,t(0,p.NotNull),t(1,p.NotNull)],y.prototype,"computeTargetState",null),e([t(0,p.NotNull),t(1,p.NotNull),t(2,p.NotNull)],y.prototype,"getReachableConfigSet",null),e([t(0,p.NotNull)],y.prototype,"accept",null),e([p.NotNull,t(0,p.NotNull),t(1,p.NotNull)],y.prototype,"computeStartState",null),e([t(0,p.NotNull),t(1,p.NotNull),t(2,p.NotNull)],y.prototype,"closure",null),e([t(0,p.NotNull),t(1,p.NotNull),t(2,p.NotNull),t(3,p.NotNull)],y.prototype,"getEpsilonTarget",null),e([t(0,p.NotNull)],y.prototype,"evaluatePredicate",null),e([t(0,p.NotNull),t(1,p.NotNull),t(2,p.NotNull)],y.prototype,"captureSimState",null),e([p.NotNull,t(0,p.NotNull)],y.prototype,"addDFAState",null),e([p.NotNull],y.prototype,"getDFA",null),e([p.NotNull,t(0,p.NotNull)],y.prototype,"getText",null),e([t(0,p.NotNull)],y.prototype,"consume",null),e([p.NotNull],y.prototype,"getTokenName",null),y=e([t(0,p.NotNull)],y),l.LexerATNSimulator=y,function(T){T.debug=!1,T.dfa_debug=!1;class A{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}T.SimState=A}(y=l.LexerATNSimulator||(l.LexerATNSimulator={})),l.LexerATNSimulator=y}(Vr)),Vr}var zc;function Pr(){if(zc)return $r;zc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=$r&&$r.__decorate||function(h,f,d,p){var S=arguments.length,x=S<3?f:p===null?p=Object.getOwnPropertyDescriptor(f,d):p,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(h,f,d,p);else for(var m=h.length-1;m>=0;m--)(v=h[m])&&(x=(S<3?v(x):S>3?v(f,d,x):v(f,d))||x);return S>3&&x&&Object.defineProperty(f,d,x),x};Object.defineProperty($r,"__esModule",{value:!0}),$r.Lexer=void 0;const e=Wa(),t=pd(),n=We(),o=Rr(),i=bo(),r=To(),s=Z(),a=Gi(),c=Be();let u=class vr extends a.Recognizer{constructor(f){super(),this._factory=e.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new t.IntegerStack,this._mode=vr.DEFAULT_MODE,this._input=f,this._tokenFactorySourcePair={source:this,stream:f}}static get DEFAULT_TOKEN_CHANNEL(){return c.Token.DEFAULT_CHANNEL}static get HIDDEN(){return c.Token.HIDDEN_CHANNEL}reset(f){(f===void 0||f)&&this._input.seek(0),this._token=void 0,this._type=c.Token.INVALID_TYPE,this._channel=c.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=vr.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let f=this._input.mark();try{e:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=c.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=c.Token.INVALID_TYPE;let d;try{d=this.interpreter.match(this._input,this._mode)}catch(p){if(p instanceof r.LexerNoViableAltException)this.notifyListeners(p),this.recover(p),d=vr.SKIP;else throw p}if(this._input.LA(1)===o.IntStream.EOF&&(this._hitEOF=!0),this._type===c.Token.INVALID_TYPE&&(this._type=d),this._type===vr.SKIP)continue e}while(this._type===vr.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(f)}}skip(){this._type=vr.SKIP}more(){this._type=vr.MORE}mode(f){this._mode=f}pushMode(f){i.LexerATNSimulator.debug&&console.log("pushMode "+f),this._modeStack.push(this._mode),this.mode(f)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return i.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(f){this._factory=f}get inputStream(){return this._input}set inputStream(f){this.reset(!1),this._input=f,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(f){return f||(f=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=f,f}emitEOF(){let f=this.charPositionInLine,d=this.line,p=this._factory.create(this._tokenFactorySourcePair,c.Token.EOF,void 0,c.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,d,f);return this.emit(p),p}get line(){return this.interpreter.line}set line(f){this.interpreter.line=f}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(f){this.interpreter.charPositionInLine=f}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(f){this._text=f}get token(){return this._token}set token(f){this._token=f}set type(f){this._type=f}get type(){return this._type}set channel(f){this._channel=f}get channel(){return this._channel}getAllTokens(){let f=[],d=this.nextToken();for(;d.type!==c.Token.EOF;)f.push(d),d=this.nextToken();return f}notifyListeners(f){let d=this._input.getText(n.Interval.of(this._tokenStartCharIndex,this._input.index)),p="token recognition error at: '"+this.getErrorDisplay(d)+"'",S=this.getErrorListenerDispatch();S.syntaxError&&S.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,p,f)}getErrorDisplay(f){if(typeof f=="number"){switch(f){case c.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(f)}return f.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(f){return"'"+this.getErrorDisplay(f)+"'"}recover(f){f instanceof r.LexerNoViableAltException?this._input.LA(1)!==o.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}};return u.DEFAULT_MODE=0,u.MORE=-2,u.SKIP=-3,u.MIN_CHAR_VALUE=0,u.MAX_CHAR_VALUE=1114111,l([s.Override],u.prototype,"nextToken",null),l([s.Override],u.prototype,"tokenFactory",null),l([s.Override],u.prototype,"inputStream",null),l([s.Override],u.prototype,"sourceName",null),l([s.Override],u.prototype,"line",null),l([s.Override],u.prototype,"charPositionInLine",null),$r.Lexer=u,$r}var jc;function Wn(){if(jc)return yt;jc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=yt&&yt.__decorate||function(u,h,f,d){var p=arguments.length,S=p<3?h:d===null?d=Object.getOwnPropertyDescriptor(h,f):d,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(u,h,f,d);else for(var v=u.length-1;v>=0;v--)(x=u[v])&&(S=(p<3?x(S):p>3?x(h,f,S):x(h,f))||S);return p>3&&S&&Object.defineProperty(h,f,S),S},e=yt&&yt.__param||function(u,h){return function(f,d){h(f,d,u)}};Object.defineProperty(yt,"__esModule",{value:!0}),yt.IntervalSet=void 0;const t=vo(),n=Va(),o=We(),i=Pr(),r=je(),s=Z(),a=Be();let c=class Oe{constructor(h){this.readonly=!1,h!=null?this._intervals=h.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return Oe._COMPLETE_CHAR_SET===void 0&&(Oe._COMPLETE_CHAR_SET=Oe.of(i.Lexer.MIN_CHAR_VALUE,i.Lexer.MAX_CHAR_VALUE),Oe._COMPLETE_CHAR_SET.setReadonly(!0)),Oe._COMPLETE_CHAR_SET}static get EMPTY_SET(){return Oe._EMPTY_SET==null&&(Oe._EMPTY_SET=new Oe,Oe._EMPTY_SET.setReadonly(!0)),Oe._EMPTY_SET}static of(h,f=h){let d=new Oe;return d.add(h,f),d}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(h,f=h){this.addRange(o.Interval.of(h,f))}addRange(h){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(h.b<h.a)){for(let f=0;f<this._intervals.length;f++){let d=this._intervals[f];if(h.equals(d))return;if(h.adjacent(d)||!h.disjoint(d)){let p=h.union(d);for(this._intervals[f]=p;f<this._intervals.length-1;){f++;let S=this._intervals[f];if(!p.adjacent(S)&&p.disjoint(S))break;this._intervals.splice(f,1),f--,this._intervals[f]=p.union(S)}return}if(h.startsBeforeDisjoint(d)){this._intervals.splice(f,0,h);return}}this._intervals.push(h)}}static or(h){let f=new Oe;for(let d of h)f.addAll(d);return f}addAll(h){if(h==null)return this;if(h instanceof Oe){let f=h,d=f._intervals.length;for(let p=0;p<d;p++){let S=f._intervals[p];this.add(S.a,S.b)}}else for(let f of h.toArray())this.add(f);return this}complementRange(h,f){return this.complement(Oe.of(h,f))}complement(h){if(h.isNil)return Oe.EMPTY_SET;let f;return h instanceof Oe?f=h:(f=new Oe,f.addAll(h)),f.subtract(this)}subtract(h){if(h==null||h.isNil)return new Oe(this._intervals);if(h instanceof Oe)return Oe.subtract(this,h);let f=new Oe;return f.addAll(h),Oe.subtract(this,f)}static subtract(h,f){if(h.isNil)return new Oe;let d=new Oe(h._intervals);if(f.isNil)return d;let p=0,S=0;for(;p<d._intervals.length&&S<f._intervals.length;){let x=d._intervals[p],v=f._intervals[S];if(v.b<x.a){S++;continue}if(v.a>x.b){p++;continue}let m,g;if(v.a>x.a&&(m=new o.Interval(x.a,v.a-1)),v.b<x.b&&(g=new o.Interval(v.b+1,x.b)),m)if(g){d._intervals[p]=m,d._intervals.splice(p+1,0,g),p++,S++;continue}else{d._intervals[p]=m,p++;continue}else if(g){d._intervals[p]=g,S++;continue}else{d._intervals.splice(p,1);continue}}return d}or(h){let f=new Oe;return f.addAll(this),f.addAll(h),f}and(h){if(h.isNil)return new Oe;let f=this._intervals,d=h._intervals,p,S=f.length,x=d.length,v=0,m=0;for(;v<S&&m<x;){let g=f[v],y=d[m];g.startsBeforeDisjoint(y)?v++:y.startsBeforeDisjoint(g)?m++:g.properlyContains(y)?(p||(p=new Oe),p.addRange(g.intersection(y)),m++):y.properlyContains(g)?(p||(p=new Oe),p.addRange(g.intersection(y)),v++):g.disjoint(y)||(p||(p=new Oe),p.addRange(g.intersection(y)),g.startsAfterNonDisjoint(y)?m++:y.startsAfterNonDisjoint(g)&&v++)}return p||new Oe}contains(h){let f=this._intervals.length,d=0,p=f-1;for(;d<=p;){let S=d+p>>1,x=this._intervals[S],v=x.a;if(x.b<h)d=S+1;else if(v>h)p=S-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let h=r.MurmurHash.initialize();for(let f of this._intervals)h=r.MurmurHash.update(h,f.a),h=r.MurmurHash.update(h,f.b);return h=r.MurmurHash.finish(h,this._intervals.length*2),h}equals(h){return h==null||!(h instanceof Oe)?!1:t.ArrayEqualityComparator.INSTANCE.equals(this._intervals,h._intervals)}toString(h=!1){let f="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(f+="{");let d=!0;for(let p of this._intervals){d?d=!1:f+=", ";let S=p.a,x=p.b;S===x?S===a.Token.EOF?f+="<EOF>":h?f+="'"+String.fromCodePoint(S)+"'":f+=S:h?f+="'"+String.fromCodePoint(S)+"'..'"+String.fromCodePoint(x)+"'":f+=S+".."+x}return this.size>1&&(f+="}"),f}toStringVocabulary(h){if(this._intervals==null||this._intervals.length===0)return"{}";let f="";this.size>1&&(f+="{");let d=!0;for(let p of this._intervals){d?d=!1:f+=", ";let S=p.a,x=p.b;if(S===x)f+=this.elementName(h,S);else for(let v=S;v<=x;v++)v>S&&(f+=", "),f+=this.elementName(h,v)}return this.size>1&&(f+="}"),f}elementName(h,f){return f===a.Token.EOF?"<EOF>":f===a.Token.EPSILON?"<EPSILON>":h.getDisplayName(f)}get size(){let h=0,f=this._intervals.length;if(f===1){let d=this._intervals[0];return d.b-d.a+1}for(let d=0;d<f;d++){let p=this._intervals[d];h+=p.b-p.a+1}return h}toIntegerList(){let h=new n.IntegerList(this.size),f=this._intervals.length;for(let d=0;d<f;d++){let p=this._intervals[d],S=p.a,x=p.b;for(let v=S;v<=x;v++)h.add(v)}return h}toSet(){let h=new Set;for(let f of this._intervals){let d=f.a,p=f.b;for(let S=d;S<=p;S++)h.add(S)}return h}toArray(){let h=new Array,f=this._intervals.length;for(let d=0;d<f;d++){let p=this._intervals[d],S=p.a,x=p.b;for(let v=S;v<=x;v++)h.push(v)}return h}remove(h){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let f=this._intervals.length;for(let d=0;d<f;d++){let p=this._intervals[d],S=p.a,x=p.b;if(h<S)break;if(h===S&&h===x){this._intervals.splice(d,1);break}if(h===S){this._intervals[d]=o.Interval.of(p.a+1,p.b);break}if(h===x){this._intervals[d]=o.Interval.of(p.a,p.b-1);break}if(h>S&&h<x){let v=p.b;this._intervals[d]=o.Interval.of(p.a,h-1),this.add(h+1,v)}}}get isReadonly(){return this.readonly}setReadonly(h){if(this.readonly&&!h)throw new Error("can't alter readonly IntervalSet");this.readonly=h}};return l([s.Override],c.prototype,"addAll",null),l([s.Override],c.prototype,"complement",null),l([s.Override],c.prototype,"subtract",null),l([s.Override],c.prototype,"or",null),l([s.Override],c.prototype,"and",null),l([s.Override],c.prototype,"contains",null),l([s.Override],c.prototype,"isNil",null),l([s.Override],c.prototype,"hashCode",null),l([s.Override],c.prototype,"equals",null),l([e(0,s.NotNull)],c.prototype,"toStringVocabulary",null),l([s.NotNull,e(0,s.NotNull)],c.prototype,"elementName",null),l([s.Override],c.prototype,"size",null),l([s.Override],c.prototype,"remove",null),l([s.NotNull],c,"of",null),l([s.NotNull],c,"subtract",null),yt.IntervalSet=c,yt}var on={},nt={},sn={},qc;function bd(){if(qc)return sn;qc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=sn&&sn.__decorate||function(n,o,i,r){var s=arguments.length,a=s<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,o,i,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(s<3?c(a):s>3?c(o,i,a):c(o,i))||a);return s>3&&a&&Object.defineProperty(o,i,a),a};Object.defineProperty(sn,"__esModule",{value:!0}),sn.ATNDeserializationOptions=void 0;const e=Z();let t=class Xn{constructor(o){this.readOnly=!1,o?(this.verifyATN=o.verifyATN,this.generateRuleBypassTransitions=o.generateRuleBypassTransitions,this.optimize=o.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return Xn._defaultOptions==null&&(Xn._defaultOptions=new Xn,Xn._defaultOptions.makeReadOnly()),Xn._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(o){this.throwIfReadOnly(),this.verifyATN=o}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(o){this.throwIfReadOnly(),this.generateRuleBypassTransitions=o}get isOptimize(){return this.optimize}set isOptimize(o){this.throwIfReadOnly(),this.optimize=o}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}};return l([e.NotNull],t,"defaultOptions",null),sn.ATNDeserializationOptions=t,sn}var Dt={},It={},Hc;function Rd(){if(Hc)return It;Hc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=It&&It.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=It&&It.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(It,"__esModule",{value:!0}),It.ActionTransition=void 0;const t=Z(),n=wr();let o=class extends n.Transition{constructor(r,s,a=-1,c=!1){super(r),this.ruleIndex=s,this.actionIndex=a,this.isCtxDependent=c}get serializationType(){return 6}get isEpsilon(){return!0}matches(r,s,a){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};return l([t.Override],o.prototype,"serializationType",null),l([t.Override],o.prototype,"isEpsilon",null),l([t.Override],o.prototype,"matches",null),l([t.Override],o.prototype,"toString",null),o=l([e(0,t.NotNull)],o),It.ActionTransition=o,It}var Lt={},Uc;function Nd(){if(Uc)return Lt;Uc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Lt&&Lt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=Lt&&Lt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.AtomTransition=void 0;const t=Wn(),n=Z(),o=wr();let i=class extends o.Transition{constructor(s,a){super(s),this._label=a}get serializationType(){return 5}get label(){return t.IntervalSet.of(this._label)}matches(s,a,c){return this._label===s}toString(){return String(this.label)}};return l([n.Override],i.prototype,"serializationType",null),l([n.Override,n.NotNull],i.prototype,"label",null),l([n.Override],i.prototype,"matches",null),l([n.Override,n.NotNull],i.prototype,"toString",null),i=l([e(0,n.NotNull)],i),Lt.AtomTransition=i,Lt}var an={},Si={},$c;function Ro(){if($c)return Si;$c=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Si,"__esModule",{value:!0}),Si.BlockStartState=void 0;const l=$n();let e=class extends l.DecisionState{};return Si.BlockStartState=e,Si}var Vc;function T0(){if(Vc)return an;Vc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=an&&an.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(an,"__esModule",{value:!0}),an.BasicBlockStartState=void 0;const e=He(),t=Ro(),n=Z();let o=class extends t.BlockStartState{get stateType(){return e.ATNStateType.BLOCK_START}};return l([n.Override],o.prototype,"stateType",null),an.BasicBlockStartState=o,an}var ln={},Wc;function b0(){if(Wc)return ln;Wc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=ln&&ln.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(ln,"__esModule",{value:!0}),ln.BlockEndState=void 0;const e=mr(),t=He(),n=Z();let o=class extends e.ATNState{get stateType(){return t.ATNStateType.BLOCK_END}};return l([n.Override],o.prototype,"stateType",null),ln.BlockEndState=o,ln}var Bt={},Gc;function R0(){if(Gc)return Bt;Gc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Bt&&Bt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=Bt&&Bt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.EpsilonTransition=void 0;const t=Z(),n=wr();let o=class extends n.Transition{constructor(r,s=-1){super(r),this._outermostPrecedenceReturn=s}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(r,s,a){return!1}toString(){return"epsilon"}};return l([t.Override],o.prototype,"serializationType",null),l([t.Override],o.prototype,"isEpsilon",null),l([t.Override],o.prototype,"matches",null),l([t.Override,t.NotNull],o.prototype,"toString",null),o=l([e(0,t.NotNull)],o),Bt.EpsilonTransition=o,Bt}var Mt={},Yc;function N0(){if(Yc)return Mt;Yc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Mt&&Mt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=Mt&&Mt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.LexerChannelAction=void 0;const t=je(),n=Z();let o=class wd{constructor(r){this._channel=r}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(r){r.channel=this._channel}hashCode(){let r=t.MurmurHash.initialize();return r=t.MurmurHash.update(r,this.actionType),r=t.MurmurHash.update(r,this._channel),t.MurmurHash.finish(r,2)}equals(r){return r===this?!0:r instanceof wd?this._channel===r._channel:!1}toString(){return`channel(${this._channel})`}};return l([n.Override],o.prototype,"actionType",null),l([n.Override],o.prototype,"isPositionDependent",null),l([n.Override,e(0,n.NotNull)],o.prototype,"execute",null),l([n.Override],o.prototype,"hashCode",null),l([n.Override],o.prototype,"equals",null),l([n.Override],o.prototype,"toString",null),Mt.LexerChannelAction=o,Mt}var kt={},Xc;function w0(){if(Xc)return kt;Xc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=kt&&kt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=kt&&kt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(kt,"__esModule",{value:!0}),kt.LexerCustomAction=void 0;const t=je(),n=Z();let o=class Od{constructor(r,s){this._ruleIndex=r,this._actionIndex=s}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(r){r.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let r=t.MurmurHash.initialize();return r=t.MurmurHash.update(r,this.actionType),r=t.MurmurHash.update(r,this._ruleIndex),r=t.MurmurHash.update(r,this._actionIndex),t.MurmurHash.finish(r,3)}equals(r){return r===this?!0:r instanceof Od?this._ruleIndex===r._ruleIndex&&this._actionIndex===r._actionIndex:!1}};return l([n.Override],o.prototype,"actionType",null),l([n.Override],o.prototype,"isPositionDependent",null),l([n.Override,e(0,n.NotNull)],o.prototype,"execute",null),l([n.Override],o.prototype,"hashCode",null),l([n.Override],o.prototype,"equals",null),kt.LexerCustomAction=o,kt}var zt={},Kc;function O0(){if(Kc)return zt;Kc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=zt&&zt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=zt&&zt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.LexerModeAction=void 0;const t=je(),n=Z();let o=class Fd{constructor(r){this._mode=r}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(r){r.mode(this._mode)}hashCode(){let r=t.MurmurHash.initialize();return r=t.MurmurHash.update(r,this.actionType),r=t.MurmurHash.update(r,this._mode),t.MurmurHash.finish(r,2)}equals(r){return r===this?!0:r instanceof Fd?this._mode===r._mode:!1}toString(){return`mode(${this._mode})`}};return l([n.Override],o.prototype,"actionType",null),l([n.Override],o.prototype,"isPositionDependent",null),l([n.Override,e(0,n.NotNull)],o.prototype,"execute",null),l([n.Override],o.prototype,"hashCode",null),l([n.Override],o.prototype,"equals",null),l([n.Override],o.prototype,"toString",null),zt.LexerModeAction=o,zt}var un={},Qc;function F0(){return Qc||(Qc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=un&&un.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},t=un&&un.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(l,"__esModule",{value:!0}),l.LexerMoreAction=void 0;const n=je(),o=Z();let i=class{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(s){s.more()}hashCode(){let s=n.MurmurHash.initialize();return s=n.MurmurHash.update(s,this.actionType),n.MurmurHash.finish(s,1)}equals(s){return s===this}toString(){return"more"}};e([o.Override],i.prototype,"actionType",null),e([o.Override],i.prototype,"isPositionDependent",null),e([o.Override,t(0,o.NotNull)],i.prototype,"execute",null),e([o.Override],i.prototype,"hashCode",null),e([o.Override],i.prototype,"equals",null),e([o.Override],i.prototype,"toString",null),l.LexerMoreAction=i,function(r){r.INSTANCE=new r}(i=l.LexerMoreAction||(l.LexerMoreAction={}))}(un)),un}var cn={},Jc;function P0(){return Jc||(Jc=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=cn&&cn.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},t=cn&&cn.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(l,"__esModule",{value:!0}),l.LexerPopModeAction=void 0;const n=je(),o=Z();let i=class{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(s){s.popMode()}hashCode(){let s=n.MurmurHash.initialize();return s=n.MurmurHash.update(s,this.actionType),n.MurmurHash.finish(s,1)}equals(s){return s===this}toString(){return"popMode"}};e([o.Override],i.prototype,"actionType",null),e([o.Override],i.prototype,"isPositionDependent",null),e([o.Override,t(0,o.NotNull)],i.prototype,"execute",null),e([o.Override],i.prototype,"hashCode",null),e([o.Override],i.prototype,"equals",null),e([o.Override],i.prototype,"toString",null),l.LexerPopModeAction=i,function(r){r.INSTANCE=new r}(i=l.LexerPopModeAction||(l.LexerPopModeAction={}))}(cn)),cn}var jt={},Zc;function D0(){if(Zc)return jt;Zc=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=jt&&jt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=jt&&jt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(jt,"__esModule",{value:!0}),jt.LexerPushModeAction=void 0;const t=je(),n=Z();let o=class Pd{constructor(r){this._mode=r}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(r){r.pushMode(this._mode)}hashCode(){let r=t.MurmurHash.initialize();return r=t.MurmurHash.update(r,this.actionType),r=t.MurmurHash.update(r,this._mode),t.MurmurHash.finish(r,2)}equals(r){return r===this?!0:r instanceof Pd?this._mode===r._mode:!1}toString(){return`pushMode(${this._mode})`}};return l([n.Override],o.prototype,"actionType",null),l([n.Override],o.prototype,"isPositionDependent",null),l([n.Override,e(0,n.NotNull)],o.prototype,"execute",null),l([n.Override],o.prototype,"hashCode",null),l([n.Override],o.prototype,"equals",null),l([n.Override],o.prototype,"toString",null),jt.LexerPushModeAction=o,jt}var hn={},eh;function I0(){return eh||(eh=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=hn&&hn.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},t=hn&&hn.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(l,"__esModule",{value:!0}),l.LexerSkipAction=void 0;const n=je(),o=Z();let i=class{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(s){s.skip()}hashCode(){let s=n.MurmurHash.initialize();return s=n.MurmurHash.update(s,this.actionType),n.MurmurHash.finish(s,1)}equals(s){return s===this}toString(){return"skip"}};e([o.Override],i.prototype,"actionType",null),e([o.Override],i.prototype,"isPositionDependent",null),e([o.Override,t(0,o.NotNull)],i.prototype,"execute",null),e([o.Override],i.prototype,"hashCode",null),e([o.Override],i.prototype,"equals",null),e([o.Override],i.prototype,"toString",null),l.LexerSkipAction=i,function(r){r.INSTANCE=new r}(i=l.LexerSkipAction||(l.LexerSkipAction={}))}(hn)),hn}var qt={},th;function L0(){if(th)return qt;th=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=qt&&qt.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=qt&&qt.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.LexerTypeAction=void 0;const t=je(),n=Z();let o=class Dd{constructor(r){this._type=r}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(r){r.type=this._type}hashCode(){let r=t.MurmurHash.initialize();return r=t.MurmurHash.update(r,this.actionType),r=t.MurmurHash.update(r,this._type),t.MurmurHash.finish(r,2)}equals(r){return r===this?!0:r instanceof Dd?this._type===r._type:!1}toString(){return`type(${this._type})`}};return l([n.Override],o.prototype,"actionType",null),l([n.Override],o.prototype,"isPositionDependent",null),l([n.Override,e(0,n.NotNull)],o.prototype,"execute",null),l([n.Override],o.prototype,"hashCode",null),l([n.Override],o.prototype,"equals",null),l([n.Override],o.prototype,"toString",null),qt.LexerTypeAction=o,qt}var fn={},rh;function Id(){if(rh)return fn;rh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=fn&&fn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(fn,"__esModule",{value:!0}),fn.LoopEndState=void 0;const e=mr(),t=He(),n=Z();let o=class extends e.ATNState{get stateType(){return t.ATNStateType.LOOP_END}};return l([n.Override],o.prototype,"stateType",null),fn.LoopEndState=o,fn}var Ht={},dn={},nh;function B0(){if(nh)return dn;nh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=dn&&dn.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(dn,"__esModule",{value:!0}),dn.ConflictInfo=void 0;const e=Z(),t=gr();let n=class Ld{constructor(i,r){this._conflictedAlts=i,this.exact=r}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(i){return i===this?!0:i instanceof Ld?this.isExact===i.isExact&&t.equals(this.conflictedAlts,i.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}};return l([e.Override],n.prototype,"equals",null),l([e.Override],n.prototype,"hashCode",null),dn.ConflictInfo=n,dn}var pn={},xn={},mn={},ih;function si(){if(ih)return mn;ih=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=mn&&mn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(mn,"__esModule",{value:!0}),mn.TerminalNode=void 0;const e=We(),t=Z(),n=Be();let o=class{constructor(r){this._symbol=r}getChild(r){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(r){this._parent=r}get payload(){return this._symbol}get sourceInterval(){let r=this._symbol.tokenIndex;return new e.Interval(r,r)}get childCount(){return 0}accept(r){return r.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(r){return this.toString()}toString(){return this._symbol.type===n.Token.EOF?"<EOF>":this._symbol.text||""}};return l([t.Override],o.prototype,"getChild",null),l([t.Override],o.prototype,"parent",null),l([t.Override],o.prototype,"setParent",null),l([t.Override],o.prototype,"payload",null),l([t.Override],o.prototype,"sourceInterval",null),l([t.Override],o.prototype,"childCount",null),l([t.Override],o.prototype,"accept",null),l([t.Override],o.prototype,"text",null),l([t.Override],o.prototype,"toStringTree",null),l([t.Override],o.prototype,"toString",null),mn.TerminalNode=o,mn}var oh;function Za(){if(oh)return xn;oh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=xn&&xn.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(xn,"__esModule",{value:!0}),xn.ErrorNode=void 0;const e=Z(),t=si();let n=class extends t.TerminalNode{constructor(i){super(i)}accept(i){return i.visitErrorNode(this)}};return l([e.Override],n.prototype,"accept",null),xn.ErrorNode=n,xn}var gn={},Ai={},sh;function el(){if(sh)return Ai;sh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.RuleNode=void 0;let l=class{};return Ai.RuleNode=l,Ai}var Ut={},ah;function Gn(){if(ah)return Ut;ah=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ut&&Ut.__decorate||function(d,p,S,x){var v=arguments.length,m=v<3?p:x===null?x=Object.getOwnPropertyDescriptor(p,S):x,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(d,p,S,x);else for(var y=d.length-1;y>=0;y--)(g=d[y])&&(m=(v<3?g(m):v>3?g(p,S,m):g(p,S))||m);return v>3&&m&&Object.defineProperty(p,S,m),m},e=Ut&&Ut.__param||function(d,p){return function(S,x){p(S,x,d)}};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.Trees=void 0;const t=ht(),n=Vi(),o=Za(),i=Z(),r=Qi(),s=ot(),a=el(),c=si(),u=Be(),h=gr();let f=class Sr{static toStringTree(p,S){let x;S instanceof r.Parser?x=S.ruleNames:x=S;let v=h.escapeWhitespace(this.getNodeText(p,x),!1);if(p.childCount===0)return v;let m="";m+="(",v=h.escapeWhitespace(this.getNodeText(p,x),!1),m+=v,m+=" ";for(let g=0;g<p.childCount;g++)g>0&&(m+=" "),m+=this.toStringTree(p.getChild(g),x);return m+=")",m}static getNodeText(p,S){let x;if(S instanceof r.Parser)x=S.ruleNames;else if(S)x=S;else{let v=p.payload;return typeof v.text=="string"?v.text:p.payload.toString()}if(p instanceof a.RuleNode){let v=p.ruleContext,m=v.ruleIndex,g=x[m],y=v.altNumber;return y!==t.ATN.INVALID_ALT_NUMBER?g+":"+y:g}else{if(p instanceof o.ErrorNode)return p.toString();if(p instanceof c.TerminalNode)return p.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(p){let S=[];for(let x=0;x<p.childCount;x++)S.push(p.getChild(x));return S}static getAncestors(p){let S=[],x=p.parent;for(;x;)S.unshift(x),x=x.parent;return S}static isAncestorOf(p,S){if(!p||!S||!p.parent)return!1;let x=S.parent;for(;x;){if(p===x)return!0;x=x.parent}return!1}static findAllTokenNodes(p,S){return Sr.findAllNodes(p,S,!0)}static findAllRuleNodes(p,S){return Sr.findAllNodes(p,S,!1)}static findAllNodes(p,S,x){let v=[];return Sr._findAllNodes(p,S,x,v),v}static _findAllNodes(p,S,x,v){x&&p instanceof c.TerminalNode?p.symbol.type===S&&v.push(p):!x&&p instanceof s.ParserRuleContext&&p.ruleIndex===S&&v.push(p);for(let m=0;m<p.childCount;m++)Sr._findAllNodes(p.getChild(m),S,x,v)}static getDescendants(p){let S=[];function x(v){S.push(v);const m=v.childCount;for(let g=0;g<m;g++)x(v.getChild(g))}return x(p),S}static getRootOfSubtreeEnclosingRegion(p,S,x){let v=p.childCount;for(let m=0;m<v;m++){let g=p.getChild(m),y=Sr.getRootOfSubtreeEnclosingRegion(g,S,x);if(y)return y}if(p instanceof s.ParserRuleContext){let m=p.stop;if(S>=p.start.tokenIndex&&(m==null||x<=m.tokenIndex))return p}}static stripChildrenOutOfRange(p,S,x,v){if(!p)return;let m=p.childCount;for(let g=0;g<m;g++){let y=p.getChild(g),T=y.sourceInterval;if(y instanceof s.ParserRuleContext&&(T.b<x||T.a>v)&&Sr.isAncestorOf(y,S)){let A=new n.CommonToken(u.Token.INVALID_TYPE,"...");p.children[g]=new c.TerminalNode(A)}}}static findNodeSuchThat(p,S){if(S(p))return p;let x=p.childCount;for(let v=0;v<x;v++){let m=Sr.findNodeSuchThat(p.getChild(v),S);if(m!==void 0)return m}}};return l([e(0,i.NotNull)],f,"toStringTree",null),l([i.NotNull,e(0,i.NotNull)],f,"getAncestors",null),l([e(0,i.NotNull)],f,"getRootOfSubtreeEnclosingRegion",null),Ut.Trees=f,Ut}var lh;function Md(){if(lh)return gn;lh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=gn&&gn.__decorate||function(c,u,h,f){var d=arguments.length,p=d<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,h):f,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,u,h,f);else for(var x=c.length-1;x>=0;x--)(S=c[x])&&(p=(d<3?S(p):d>3?S(u,h,p):S(u,h))||p);return d>3&&p&&Object.defineProperty(u,h,p),p};Object.defineProperty(gn,"__esModule",{value:!0}),gn.RuleContext=void 0;const e=ht(),t=Gi(),n=el(),o=We(),i=Z(),r=Gn(),s=ot();let a=class Bd extends n.RuleNode{constructor(u,h){super(),this._parent=u,this.invokingState=h??-1}static getChildContext(u,h){return new Bd(u,h)}depth(){let u=0,h=this;for(;h;)h=h._parent,u++;return u}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return o.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(u){this._parent=u}get payload(){return this}get text(){if(this.childCount===0)return"";let u="";for(let h=0;h<this.childCount;h++)u+=this.getChild(h).text;return u.toString()}get ruleIndex(){return-1}get altNumber(){return e.ATN.INVALID_ALT_NUMBER}set altNumber(u){}getChild(u){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(u){return u.visitChildren(this)}toStringTree(u){return r.Trees.toStringTree(this,u)}toString(u,h){const f=u instanceof t.Recognizer?u.ruleNames:u;h=h||s.ParserRuleContext.emptyContext();let d="",p=this;for(d+="[";p&&p!==h;){if(!f)p.isEmpty||(d+=p.invokingState);else{let S=p.ruleIndex,x=S>=0&&S<f.length?f[S]:S.toString();d+=x}p._parent&&(f||!p._parent.isEmpty)&&(d+=" "),p=p._parent}return d+="]",d.toString()}};return l([i.Override],a.prototype,"sourceInterval",null),l([i.Override],a.prototype,"ruleContext",null),l([i.Override],a.prototype,"parent",null),l([i.Override],a.prototype,"setParent",null),l([i.Override],a.prototype,"payload",null),l([i.Override],a.prototype,"text",null),l([i.Override],a.prototype,"getChild",null),l([i.Override],a.prototype,"childCount",null),l([i.Override],a.prototype,"accept",null),l([i.Override],a.prototype,"toStringTree",null),gn.RuleContext=a,gn}var uh;function ot(){if(uh)return pn;uh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=pn&&pn.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f};Object.defineProperty(pn,"__esModule",{value:!0}),pn.ParserRuleContext=void 0;const e=Za(),t=We(),n=Z(),o=Md(),i=si();let r=class Ta extends o.RuleContext{constructor(a,c){c==null?super():super(a,c)}static emptyContext(){return Ta.EMPTY}copyFrom(a){if(this._parent=a._parent,this.invokingState=a.invokingState,this._start=a._start,this._stop=a._stop,a.children){this.children=[];for(let c of a.children)c instanceof e.ErrorNode&&this.addChild(c)}}enterRule(a){}exitRule(a){}addAnyChild(a){return this.children?this.children.push(a):this.children=[a],a}addChild(a){if(a instanceof i.TerminalNode){a.setParent(this),this.addAnyChild(a);return}else if(a instanceof o.RuleContext){this.addAnyChild(a);return}else return a=new i.TerminalNode(a),this.addAnyChild(a),a.setParent(this),a}addErrorNode(a){if(a instanceof e.ErrorNode){const c=a;return c.setParent(this),this.addAnyChild(c)}else{const c=a;let u=new e.ErrorNode(c);return this.addAnyChild(u),u.setParent(this),u}}removeLastChild(){this.children&&this.children.pop()}get parent(){let a=super.parent;if(a===void 0||a instanceof Ta)return a;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(a,c){if(!this.children||a<0||a>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(c==null)return this.children[a];let u=this.tryGetChild(a,c);if(u===void 0)throw new Error("The specified node does not exist");return u}tryGetChild(a,c){if(!this.children||a<0||a>=this.children.length)return;let u=-1;for(let h of this.children)if(h instanceof c&&(u++,u===a))return h}getToken(a,c){let u=this.tryGetToken(a,c);if(u===void 0)throw new Error("The specified token does not exist");return u}tryGetToken(a,c){if(!this.children||c<0||c>=this.children.length)return;let u=-1;for(let h of this.children)if(h instanceof i.TerminalNode&&h.symbol.type===a&&(u++,u===c))return h}getTokens(a){let c=[];if(!this.children)return c;for(let u of this.children)u instanceof i.TerminalNode&&u.symbol.type===a&&c.push(u);return c}get ruleContext(){return this}getRuleContext(a,c){return this.getChild(a,c)}tryGetRuleContext(a,c){return this.tryGetChild(a,c)}getRuleContexts(a){let c=[];if(!this.children)return c;for(let u of this.children)u instanceof a&&c.push(u);return c}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?t.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):t.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):t.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(a){return"ParserRuleContext"+a.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}};return r.EMPTY=new r,l([n.Override],r.prototype,"parent",null),l([n.Override],r.prototype,"childCount",null),l([n.Override],r.prototype,"sourceInterval",null),pn.ParserRuleContext=r,pn}var Ci={},ch;function M0(){return ch||(ch=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Ci&&Ci.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(l,"__esModule",{value:!0}),l.PredictionMode=void 0;const t=oi(),n=je(),o=Z(),i=Yi();(function(r){r[r.SLL=0]="SLL",r[r.LL=1]="LL",r[r.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(l.PredictionMode||(l.PredictionMode={})),function(r){class s extends t.Array2DHashMap{constructor(){super(a.INSTANCE)}}class a{AltAndContextConfigEqualityComparator(){}hashCode(f){let d=n.MurmurHash.initialize(7);return d=n.MurmurHash.update(d,f.state.stateNumber),d=n.MurmurHash.update(d,f.context),d=n.MurmurHash.finish(d,2),d}equals(f,d){return f===d?!0:f==null||d==null?!1:f.state.stateNumber===d.state.stateNumber&&f.context.equals(d.context)}}a.INSTANCE=new a,e([o.Override],a.prototype,"hashCode",null),e([o.Override],a.prototype,"equals",null);function c(h){for(let f of h)if(f.state instanceof i.RuleStopState)return!0;return!1}r.hasConfigInRuleStopState=c;function u(h){for(let f of h)if(!(f.state instanceof i.RuleStopState))return!1;return!0}r.allConfigsInRuleStopStates=u}(l.PredictionMode||(l.PredictionMode={}))}(Ci)),Ci}var $t={},hh;function kd(){if(hh)return $t;hh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=$t&&$t.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=$t&&$t.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty($t,"__esModule",{value:!0}),$t.SimulatorState=void 0;const t=Z(),n=ot();let o=class{constructor(r,s,a,c){this.outerContext=r??n.ParserRuleContext.emptyContext(),this.s0=s,this.useContext=a,this.remainingOuterContext=c}};return o=l([e(1,t.NotNull)],o),$t.SimulatorState=o,$t}var fh;function Xi(){if(fh)return Ht;fh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ht&&Ht.__decorate||function(ie,E,C,_){var w=arguments.length,F=w<3?E:_===null?_=Object.getOwnPropertyDescriptor(E,C):_,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(ie,E,C,_);else for(var D=ie.length-1;D>=0;D--)(O=ie[D])&&(F=(w<3?O(F):w>3?O(E,C,F):O(E,C))||F);return w>3&&F&&Object.defineProperty(E,C,F),F},e=Ht&&Ht.__param||function(ie,E){return function(C,_){E(C,_,ie)}};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.ParserATNSimulator=void 0;const t=xd(),n=Rd(),o=Or(),i=$a(),r=ht(),s=Co(),a=Wi(),c=_o(),u=He(),h=Nd(),f=Fr(),d=B0(),p=$n(),S=Eo(),x=Va(),v=We(),m=Rr(),g=Z(),y=Qa(),T=No(),A=ct(),b=ot(),R=it(),N=Ga(),P=M0(),B=Yi(),I=Ja(),V=ii(),J=Ka(),te=kd(),oe=Be(),ge=Vn(),ce=$e(),ee=65535,G=-2147483648;let Q=class Ee extends c.ATNSimulator{constructor(E,C){super(E),this.predictionMode=P.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=C}getPredictionMode(){return this.predictionMode}setPredictionMode(E){this.predictionMode=E}reset(){}adaptivePredict(E,C,_,w){w===void 0&&(w=!1);let F=this.atn.decisionToDFA[C];if(ce(F!=null),this.optimize_ll1&&!F.isPrecedenceDfa&&!F.isEmpty){let U=E.LA(1);if(U>=0&&U<=65535){let W=(C<<16>>>0)+U,L=this.atn.LL1Table.get(W);if(L!=null)return L}}this.dfa=F,this.force_global_context?w=!0:this.always_try_local_context||(w=w||F.isContextSensitive),this.userWantsCtxSensitive=w||this.predictionMode!==P.PredictionMode.SLL&&_!=null&&!this.atn.decisionToState[C].sll,_==null&&(_=b.ParserRuleContext.emptyContext());let O;F.isEmpty||(O=this.getStartState(F,E,_,w)),O==null&&(_==null&&(_=b.ParserRuleContext.emptyContext()),Ee.debug&&console.log("ATN decision "+F.decision+" exec LA(1)=="+this.getLookaheadName(E)+", outerContext="+_.toString(this._parser)),O=this.computeStartState(F,_,w));let D=E.mark(),j=E.index;try{let U=this.execDFA(F,E,j,O);return Ee.debug&&console.log("DFA after predictATN: "+F.toString(this._parser.vocabulary,this._parser.ruleNames)),U}finally{this.dfa=void 0,E.seek(j),E.release(D)}}getStartState(E,C,_,w){if(!w)if(E.isPrecedenceDfa){let D=E.getPrecedenceStartState(this._parser.precedence,!1);return D==null?void 0:new te.SimulatorState(_,D,!1,_)}else return E.s0==null?void 0:new te.SimulatorState(_,E.s0,!1,_);if(!this.enable_global_context_dfa)return;let F=_;ce(_!=null);let O;for(E.isPrecedenceDfa?O=E.getPrecedenceStartState(this._parser.precedence,!0):O=E.s0full;F!=null&&O!=null&&O.isContextSensitive;)F=this.skipTailCalls(F),O=O.getContextTarget(this.getReturnState(F)),F.isEmpty?ce(O==null||!O.isContextSensitive):F=F.parent;if(O!=null)return new te.SimulatorState(_,O,w,F)}execDFA(E,C,_,w){let F=w.outerContext;Ee.dfa_debug&&console.log("DFA decision "+E.decision+" exec LA(1)=="+this.getLookaheadName(C)+", outerContext="+F.toString(this._parser)),Ee.dfa_debug&&console.log(E.toString(this._parser.vocabulary,this._parser.ruleNames));let O=w.s0,D=C.LA(1),j=w.remainingOuterContext;for(;;){if(Ee.dfa_debug&&console.log("DFA state "+O.stateNumber+" LA(1)=="+this.getLookaheadName(C)),w.useContext)for(;O.isContextSymbol(D);){let L;if(j!=null&&(j=this.skipTailCalls(j),L=O.getContextTarget(this.getReturnState(j))),L==null){let M=new te.SimulatorState(w.outerContext,O,w.useContext,j);return this.execATN(E,C,_,M)}ce(j!=null),j=j.parent,O=L}if(this.isAcceptState(O,w.useContext)){O.predicates!=null?Ee.dfa_debug&&console.log("accept "+O):Ee.dfa_debug&&console.log("accept; predict "+O.prediction+" in state "+O.stateNumber);break}ce(!this.isAcceptState(O,w.useContext));let W=this.getExistingTargetState(O,D);if(W==null){Ee.dfa_debug&&D>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(D));let L;if(Ee.dfa_debug){let H=v.Interval.of(_,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(H)+" at DFA state "+O.stateNumber)}let M=new te.SimulatorState(F,O,w.useContext,j);return L=this.execATN(E,C,_,M),Ee.dfa_debug&&console.log("back from DFA update, alt="+L+`, dfa=
`+E.toString(this._parser.vocabulary,this._parser.ruleNames)),Ee.dfa_debug&&console.log("DFA decision "+E.decision+" predicts "+L),L}else if(W===c.ATNSimulator.ERROR){let L=new te.SimulatorState(F,O,w.useContext,j);return this.handleNoViableAlt(C,_,L)}O=W,!this.isAcceptState(O,w.useContext)&&D!==m.IntStream.EOF&&(C.consume(),D=C.LA(1))}if(!w.useContext&&O.configs.conflictInfo!=null&&E.atnStartState instanceof p.DecisionState&&!(!this.userWantsCtxSensitive||!O.configs.dipsIntoOuterContext&&O.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&C.index===_)){ce(!w.useContext);let W,L=O.predicates;if(L!=null){let M=C.index;if(M!==_&&C.seek(_),W=this.evalSemanticContext(L,F,!0),W.cardinality()===1)return W.nextSetBit(0);M!==_&&C.seek(M)}if(this.reportAmbiguities){let M=new te.SimulatorState(F,O,w.useContext,j);this.reportAttemptingFullContext(E,W,M,_,C.index)}return C.seek(_),this.adaptivePredict(C,E.decision,F,!0)}let U=O.predicates;if(U!=null){let W=C.index;_!==W&&C.seek(_);let L=this.evalSemanticContext(U,F,this.reportAmbiguities&&this.predictionMode===P.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch(L.cardinality()){case 0:throw this.noViableAlt(C,F,O.configs,_);case 1:return L.nextSetBit(0);default:return _!==W&&C.seek(W),this.reportAmbiguity(E,O,_,W,O.configs.isExactConflict,L,O.configs),L.nextSetBit(0)}}return Ee.dfa_debug&&console.log("DFA decision "+E.decision+" predicts "+O.prediction),O.prediction}isAcceptState(E,C){return E.isAcceptState?E.configs.conflictingAlts==null?!0:C&&this.predictionMode===P.PredictionMode.LL_EXACT_AMBIG_DETECTION?E.configs.isExactConflict:!0:!1}execATN(E,C,_,w){Ee.debug&&console.log("execATN decision "+E.decision+" exec LA(1)=="+this.getLookaheadName(C));let F=w.outerContext,O=w.useContext,D=C.LA(1),j=w,U=new N.PredictionContextCache;for(;;){let W=this.computeReachSet(E,j,D,U);if(W==null)return this.setDFAEdge(j.s0,C.LA(1),c.ATNSimulator.ERROR),this.handleNoViableAlt(C,_,j);let L=W.s0;if(ce(L.isAcceptState||L.prediction===r.ATN.INVALID_ALT_NUMBER),ce(L.isAcceptState||L.configs.conflictInfo==null),this.isAcceptState(L,O)){let M=L.configs.conflictingAlts,H=M==null?L.prediction:r.ATN.INVALID_ALT_NUMBER;if(H!==r.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&C.index===_&&!E.isPrecedenceDfa&&W.outerContext===W.remainingOuterContext&&E.decision>=0&&!L.configs.hasSemanticContext&&D>=0&&D<=ee){let re=(E.decision<<16>>>0)+D;this.atn.LL1Table.set(re,H)}O&&this.always_try_local_context&&this.reportContextSensitivity(E,H,W,_,C.index)}H=L.prediction;let Y=M!=null&&this.userWantsCtxSensitive;if(Y&&(Y=!O&&(L.configs.dipsIntoOuterContext||!L.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||C.index!==_)),L.configs.hasSemanticContext){let re=L.predicates;if(re!=null){let ne=C.index;switch(ne!==_&&C.seek(_),M=this.evalSemanticContext(re,F,Y||this.reportAmbiguities),M.cardinality()){case 0:throw this.noViableAlt(C,F,L.configs,_);case 1:return M.nextSetBit(0)}ne!==_&&C.seek(ne)}}if(Y){ce(!O),ce(this.isAcceptState(L,!1)),Ee.debug&&console.log("RETRY with outerContext="+F);let re=this.computeStartState(E,F,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(E,M,W,_,C.index),C.seek(_),this.execATN(E,C,_,re)}else return M!=null&&(this.reportAmbiguities&&M.cardinality()>1&&this.reportAmbiguity(E,L,_,C.index,L.configs.isExactConflict,M,L.configs),H=M.nextSetBit(0)),H}j=W,D!==m.IntStream.EOF&&(C.consume(),D=C.LA(1))}}handleNoViableAlt(E,C,_){if(_.s0!=null){let w=new f.BitSet,F=0;for(let O of _.s0.configs)(O.reachesIntoOuterContext||O.state instanceof B.RuleStopState)&&(w.set(O.alt),F=Math.max(F,O.alt));switch(w.cardinality()){case 0:break;case 1:return w.nextSetBit(0);default:if(!_.s0.configs.hasSemanticContext)return w.nextSetBit(0);let O=new a.ATNConfigSet;for(let j of _.s0.configs)(j.reachesIntoOuterContext||j.state instanceof B.RuleStopState)&&O.add(j);let D=this.getPredsForAmbigAlts(w,O,F);if(D!=null){let j=this.getPredicatePredictions(w,D);if(j!=null){let U=E.index;try{E.seek(C);let W=this.evalSemanticContext(j,_.outerContext,!1);if(!W.isEmpty)return W.nextSetBit(0)}finally{E.seek(U)}}}return w.nextSetBit(0)}}throw this.noViableAlt(E,_.outerContext,_.s0.configs,C)}computeReachSet(E,C,_,w){let F=C.useContext,O=C.remainingOuterContext,D=C.s0;if(F)for(;D.isContextSymbol(_);){let W;if(O!=null&&(O=this.skipTailCalls(O),W=D.getContextTarget(this.getReturnState(O))),W==null)break;ce(O!=null),O=O.parent,D=W}if(ce(!this.isAcceptState(D,F)),this.isAcceptState(D,F))return new te.SimulatorState(C.outerContext,D,F,O);let j=D,U=this.getExistingTargetState(j,_);if(U==null){let W=this.computeTargetState(E,j,O,_,F,w);U=W[0],O=W[1]}if(U!==c.ATNSimulator.ERROR)return ce(!F||!U.configs.dipsIntoOuterContext),new te.SimulatorState(C.outerContext,U,F,O)}getExistingTargetState(E,C){return E.getTarget(C)}computeTargetState(E,C,_,w,F,O){let D=C.configs.toArray(),j,U=new a.ATNConfigSet,W;do{let M=!F||_!=null;M||(U.isOutermostConfigSet=!0);let H=new a.ATNConfigSet,Y;for(let q of D){if(Ee.debug&&console.log("testing "+this.getTokenName(w)+" at "+q.toString()),q.state instanceof B.RuleStopState){ce(q.context.isEmpty),(F&&!q.reachesIntoOuterContext||w===m.IntStream.EOF)&&(Y==null&&(Y=[]),Y.push(q));continue}let X=q.state.numberOfOptimizedTransitions;for(let he=0;he<X;he++){let be=q.state.getOptimizedTransition(he),Re=this.getReachableTarget(q,be,w);Re!=null&&H.add(q.transform(Re,!1),O)}}if(this.optimize_unique_closure&&Y==null&&w!==oe.Token.EOF&&H.uniqueAlt!==r.ATN.INVALID_ALT_NUMBER){H.isOutermostConfigSet=U.isOutermostConfigSet,U=H;break}let re=!1,ne=w===oe.Token.EOF;if(this.closure(H,U,re,M,O,ne),W=U.dipsIntoOuterContext,w===m.IntStream.EOF&&(U=this.removeAllConfigsNotInRuleStopState(U,O)),Y!=null&&(!F||!P.PredictionMode.hasConfigInRuleStopState(U))){ce(Y.length>0);for(let q of Y)U.add(q,O)}if(F&&W){U.clear(),_=_,_=this.skipTailCalls(_);let q=this.getReturnState(_);if(j==null&&(j=new x.IntegerList),_.isEmpty?_=void 0:_=_.parent,j.add(q),q!==R.PredictionContext.EMPTY_FULL_STATE_KEY)for(let X=0;X<D.length;X++)D[X]=D[X].appendContext(q,O)}}while(F&&W);return U.isEmpty?(this.setDFAEdge(C,w,c.ATNSimulator.ERROR),[c.ATNSimulator.ERROR,_]):[this.addDFAEdge(E,C,w,j,U,O),_]}removeAllConfigsNotInRuleStopState(E,C){if(P.PredictionMode.allConfigsInRuleStopStates(E))return E;let _=new a.ATNConfigSet;for(let w of E)w.state instanceof B.RuleStopState&&_.add(w,C);return _}computeStartState(E,C,_){let w=E.isPrecedenceDfa?E.getPrecedenceStartState(this._parser.precedence,_):_?E.s0full:E.s0;if(w!=null){if(!_)return new te.SimulatorState(C,w,_,C);w.setContextSensitive(this.atn)}E.decision;let F=E.atnStartState,O=0,D=C,j=_?R.PredictionContext.EMPTY_FULL:R.PredictionContext.EMPTY_LOCAL,U=new N.PredictionContextCache;if(_){if(!this.enable_global_context_dfa)for(;D!=null;)D.isEmpty?(O=R.PredictionContext.EMPTY_FULL_STATE_KEY,D=void 0):(O=this.getReturnState(D),j=j.appendSingleContext(O,U),D=D.parent);for(;w!=null&&w.isContextSensitive&&D!=null;){let L;if(D=this.skipTailCalls(D),D.isEmpty?(L=w.getContextTarget(R.PredictionContext.EMPTY_FULL_STATE_KEY),O=R.PredictionContext.EMPTY_FULL_STATE_KEY,D=void 0):(O=this.getReturnState(D),L=w.getContextTarget(O),j=j.appendSingleContext(O,U),D=D.parent),L==null)break;w=L}}if(w!=null&&!w.isContextSensitive)return new te.SimulatorState(C,w,_,D);let W=new a.ATNConfigSet;for(;;){let L=new a.ATNConfigSet,M=F.numberOfTransitions;for(let X=0;X<M;X++){let he=F.transition(X).target;L.add(s.ATNConfig.create(he,X+1,j))}let H=D!=null;H||(W.isOutermostConfigSet=!0),this.closure(L,W,!0,H,U,!1);let re=W.dipsIntoOuterContext,ne;if(_&&!this.enable_global_context_dfa){w=this.addDFAState(E,W,U);break}else w==null?E.isPrecedenceDfa?(W=this.applyPrecedenceFilter(W,C,U),ne=this.addDFAState(E,W,U),E.setPrecedenceStartState(this._parser.precedence,_,ne)):(ne=this.addDFAState(E,W,U),_?E.s0full?ne=E.s0full:E.s0full=ne:E.s0?ne=E.s0:E.s0=ne):(E.isPrecedenceDfa&&(W=this.applyPrecedenceFilter(W,C,U)),ne=this.addDFAState(E,W,U),w.setContextTarget(O,ne));if(w=ne,!_||!re)break;ne.setContextSensitive(this.atn),D=D,W.clear(),D=this.skipTailCalls(D);let q=this.getReturnState(D);D.isEmpty?D=void 0:D=D.parent,q!==R.PredictionContext.EMPTY_FULL_STATE_KEY&&(j=j.appendSingleContext(q,U)),O=q}return new te.SimulatorState(C,w,_,D)}applyPrecedenceFilter(E,C,_){let w=new Map,F=new a.ATNConfigSet;for(let O of E){if(O.alt!==1)continue;let D=O.semanticContext.evalPrecedence(this._parser,C);D!=null&&(w.set(O.state.stateNumber,O.context),D!==O.semanticContext?F.add(O.transform(O.state,!1,D),_):F.add(O,_))}for(let O of E)if(O.alt!==1){if(!O.isPrecedenceFilterSuppressed){let D=w.get(O.state.stateNumber);if(D!=null&&D.equals(O.context))continue}F.add(O,_)}return F}getReachableTarget(E,C,_){if(C.matches(_,0,this.atn.maxTokenType))return C.target}predicateDFAState(E,C,_){let w=this.getConflictingAltsFromConfigSet(C);if(!w)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");Ee.debug&&console.log("predicateDFAState "+E);let F=this.getPredsForAmbigAlts(w,C,_),O;return F!=null&&(O=this.getPredicatePredictions(w,F),E.predicates=O),O}getPredsForAmbigAlts(E,C,_){let w=new Array(_+1),F=w.length;for(let j of C)E.get(j.alt)&&(w[j.alt]=V.SemanticContext.or(w[j.alt],j.semanticContext));let O=0;for(let j=0;j<F;j++)w[j]==null?w[j]=V.SemanticContext.NONE:w[j]!==V.SemanticContext.NONE&&O++;let D=w;return O===0&&(D=void 0),Ee.debug&&console.log("getPredsForAmbigAlts result "+(D?i.Arrays.toString(D):"undefined")),D}getPredicatePredictions(E,C){let _=[],w=!1;for(let F=1;F<C.length;F++){let O=C[F];ce(O!=null),E!=null&&E.get(F)&&O===V.SemanticContext.NONE?_.push(new S.DFAState.PredPrediction(O,F)):O!==V.SemanticContext.NONE&&(w=!0,_.push(new S.DFAState.PredPrediction(O,F)))}if(w)return _}evalSemanticContext(E,C,_){let w=new f.BitSet;for(let F of E){if(F.pred===V.SemanticContext.NONE){if(w.set(F.alt),!_)break;continue}let O=this.evalSemanticContextImpl(F.pred,C,F.alt);if((Ee.debug||Ee.dfa_debug)&&console.log("eval pred "+F+"="+O),O&&((Ee.debug||Ee.dfa_debug)&&console.log("PREDICT "+F.alt),w.set(F.alt),!_))break}return w}evalSemanticContextImpl(E,C,_){return E.eval(this._parser,C)}closure(E,C,_,w,F,O){F==null&&(F=N.PredictionContextCache.UNCACHED);let D=E,j=new o.Array2DHashSet(A.ObjectEqualityComparator.INSTANCE);for(;D.size>0;){let U=new a.ATNConfigSet;for(let W of D)this.closureImpl(W,C,U,j,_,w,F,0,O);D=U}}closureImpl(E,C,_,w,F,O,D,j,U){if(Ee.debug&&console.log("closure("+E.toString(this._parser,!0)+")"),E.state instanceof B.RuleStopState)if(E.context.isEmpty)if(O)Ee.debug&&console.log("FALLING off rule "+this.getRuleName(E.state.ruleIndex)),E.context===R.PredictionContext.EMPTY_FULL?E=E.transform(E.state,!1,R.PredictionContext.EMPTY_LOCAL):!E.reachesIntoOuterContext&&R.PredictionContext.isEmptyLocal(E.context)&&C.add(E,D);else{C.add(E,D);return}else{let L=E.context.hasEmpty,M=E.context.size-(L?1:0);for(let H=0;H<M;H++){let Y=E.context.getParent(H),re=this.atn.states[E.context.getReturnState(H)],ne=s.ATNConfig.create(re,E.alt,Y,E.semanticContext);ne.outerContextDepth=E.outerContextDepth,ne.isPrecedenceFilterSuppressed=E.isPrecedenceFilterSuppressed,ce(j>G),this.closureImpl(ne,C,_,w,F,O,D,j-1,U)}if(!L||!O)return;E=E.transform(E.state,!1,R.PredictionContext.EMPTY_LOCAL)}let W=E.state;W.onlyHasEpsilonTransitions||(C.add(E,D),Ee.debug&&console.log("added config "+C));for(let L=0;L<W.numberOfOptimizedTransitions;L++){if(L===0&&W.stateType===u.ATNStateType.STAR_LOOP_ENTRY&&W.precedenceRuleDecision&&!E.context.hasEmpty){let re=W,ne=!0;for(let q=0;q<E.context.size;q++)if(!re.precedenceLoopbackStates.get(E.context.getReturnState(q))){ne=!1;break}if(ne)continue}let M=W.getOptimizedTransition(L),H=!(M instanceof n.ActionTransition)&&F,Y=this.getEpsilonTarget(E,M,H,j===0,D,U);if(Y!=null){if(M instanceof I.RuleTransition&&_!=null&&!F){_.add(Y,D);continue}let re=j;if(E.state instanceof B.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&M.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(Y.isPrecedenceFilterSuppressed=!0),Y.outerContextDepth=Y.outerContextDepth+1,!w.add(Y))continue;ce(re>G),re--,Ee.debug&&console.log("dips into outer ctx: "+Y)}else if(M instanceof I.RuleTransition)this.optimize_tail_calls&&M.optimizedTailCall&&(!this.tail_call_preserves_sll||!R.PredictionContext.isEmptyLocal(E.context))?(ce(Y.context===E.context),re===0&&(re--,!this.tail_call_preserves_sll&&R.PredictionContext.isEmptyLocal(E.context)&&(Y.outerContextDepth=Y.outerContextDepth+1))):re>=0&&re++;else if(!M.isEpsilon&&!w.add(Y))continue;this.closureImpl(Y,C,_,w,H,O,D,re,U)}}}getRuleName(E){return this._parser!=null&&E>=0?this._parser.ruleNames[E]:"<rule "+E+">"}getEpsilonTarget(E,C,_,w,F,O){switch(C.serializationType){case 3:return this.ruleTransition(E,C,F);case 10:return this.precedenceTransition(E,C,_,w);case 4:return this.predTransition(E,C,_,w);case 6:return this.actionTransition(E,C);case 1:return E.transform(C.target,!1);case 5:case 2:case 7:return O&&C.matches(oe.Token.EOF,0,1)?E.transform(C.target,!1):void 0;default:return}}actionTransition(E,C){return Ee.debug&&console.log("ACTION edge "+C.ruleIndex+":"+C.actionIndex),E.transform(C.target,!1)}precedenceTransition(E,C,_,w){Ee.debug&&(console.log("PRED (collectPredicates="+_+") "+C.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let F;if(_&&w){let O=V.SemanticContext.and(E.semanticContext,C.predicate);F=E.transform(C.target,!1,O)}else F=E.transform(C.target,!1);return Ee.debug&&console.log("config from pred transition="+F),F}predTransition(E,C,_,w){Ee.debug&&(console.log("PRED (collectPredicates="+_+") "+C.ruleIndex+":"+C.predIndex+", ctx dependent="+C.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let F;if(_&&(!C.isCtxDependent||C.isCtxDependent&&w)){let O=V.SemanticContext.and(E.semanticContext,C.predicate);F=E.transform(C.target,!1,O)}else F=E.transform(C.target,!1);return Ee.debug&&console.log("config from pred transition="+F),F}ruleTransition(E,C,_){Ee.debug&&console.log("CALL rule "+this.getRuleName(C.target.ruleIndex)+", ctx="+E.context);let w=C.followState,F;return this.optimize_tail_calls&&C.optimizedTailCall&&(!this.tail_call_preserves_sll||!R.PredictionContext.isEmptyLocal(E.context))?F=E.context:_!=null?F=_.getChild(E.context,w.stateNumber):F=E.context.getChild(w.stateNumber),E.transform(C.target,!1,F)}isConflicted(E,C){if(E.uniqueAlt!==r.ATN.INVALID_ALT_NUMBER||E.size<=1)return;let _=E.toArray();_.sort(Ee.STATE_ALT_SORT_COMPARATOR);let w=!E.dipsIntoOuterContext,F=new f.BitSet,O=_[0].alt;F.set(O);let D=_[0].state.nonStopStateNumber;for(let M of _){let H=M.state.nonStopStateNumber;if(H!==D){if(M.alt!==O)return;D=H}}let j;if(w){D=_[0].state.nonStopStateNumber,j=new f.BitSet;let M=O;for(let Y of _){if(Y.state.nonStopStateNumber!==D)break;let re=Y.alt;j.set(re),M=re}D=_[0].state.nonStopStateNumber;let H=O;for(let Y of _){let re=Y.state.nonStopStateNumber,ne=Y.alt;if(re!==D){if(H!==M){w=!1;break}D=re,H=O}else if(ne!==H){if(ne!==j.nextSetBit(H+1)){w=!1;break}H=ne}}}D=_[0].state.nonStopStateNumber;let U=0,W=0,L=_[0].context;for(let M=1;M<_.length;M++){let H=_[M];if(H.alt!==O||H.state.nonStopStateNumber!==D)break;W=M,L=C.join(L,_[M].context)}for(let M=W+1;M<_.length;M++){let H=_[M],Y=H.state;if(F.set(H.alt),Y.nonStopStateNumber!==D){D=Y.nonStopStateNumber,U=M,W=M,L=H.context;for(let he=U+1;he<_.length;he++){let be=_[he];if(be.alt!==O||be.state.nonStopStateNumber!==D)break;W=he,L=C.join(L,be.context)}M=W;continue}let re=H.context,ne=H.alt,q=M;for(let he=q+1;he<_.length;he++){let be=_[he];if(be.alt!==ne||be.state.nonStopStateNumber!==D)break;q=he,re=C.join(re,be.context)}M=q;let X=C.join(L,re);if(!L.equals(X))return;w=w&&L.equals(re)}return new d.ConflictInfo(F,w)}getConflictingAltsFromConfigSet(E){let C=E.conflictingAlts;return C==null&&E.uniqueAlt!==r.ATN.INVALID_ALT_NUMBER&&(C=new f.BitSet,C.set(E.uniqueAlt)),C}getTokenName(E){if(E===oe.Token.EOF)return"EOF";let _=(this._parser!=null?this._parser.vocabulary:ge.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(E);return _===String(E)?_:_+"<"+E+">"}getLookaheadName(E){return this.getTokenName(E.LA(1))}dumpDeadEndConfigs(E){console.log("dead end configs: ");let C=E.deadEndConfigs;if(C)for(let _ of C){let w="no edges";if(_.state.numberOfOptimizedTransitions>0){let F=_.state.getOptimizedTransition(0);F instanceof h.AtomTransition?w="Atom "+this.getTokenName(F._label):F instanceof J.SetTransition&&(w=(F instanceof y.NotSetTransition?"~":"")+"Set "+F.set.toString())}console.log(_.toString(this._parser,!0)+":"+w)}}noViableAlt(E,C,_,w){return new T.NoViableAltException(this._parser,E,E.get(w),E.LT(1),_,C)}getUniqueAlt(E){let C=r.ATN.INVALID_ALT_NUMBER;for(let _ of E)if(C===r.ATN.INVALID_ALT_NUMBER)C=_.alt;else if(_.alt!==C)return r.ATN.INVALID_ALT_NUMBER;return C}configWithAltAtStopState(E,C){for(let _ of E)if(_.alt===C&&_.state instanceof B.RuleStopState)return!0;return!1}addDFAEdge(E,C,_,w,F,O){ce(w==null||w.isEmpty||E.isContextSensitive);let D=C,j=this.addDFAState(E,F,O);if(w!=null)for(let U of w.toArray()){if(U===R.PredictionContext.EMPTY_FULL_STATE_KEY&&D.configs.isOutermostConfigSet)continue;D.setContextSensitive(this.atn),D.setContextSymbol(_);let W=D.getContextTarget(U);if(W!=null){D=W;continue}W=this.addDFAContextState(E,D.configs,U,O),ce(U!==R.PredictionContext.EMPTY_FULL_STATE_KEY||W.configs.isOutermostConfigSet),D.setContextTarget(U,W),D=W}return Ee.debug&&console.log("EDGE "+D+" -> "+j+" upon "+this.getTokenName(_)),this.setDFAEdge(D,_,j),Ee.debug&&console.log(`DFA=
`+E.toString(this._parser!=null?this._parser.vocabulary:ge.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),j}setDFAEdge(E,C,_){E!=null&&E.setTarget(C,_)}addDFAContextState(E,C,_,w){if(_!==R.PredictionContext.EMPTY_FULL_STATE_KEY){let F=new a.ATNConfigSet;for(let O of C)F.add(O.appendContext(_,w));return this.addDFAState(E,F,w)}else return ce(!C.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),C=C.clone(!0),C.isOutermostConfigSet=!0,this.addDFAState(E,C,w)}addDFAState(E,C,_){let w=this.enable_global_context_dfa||!C.isOutermostConfigSet;if(w){C.isReadOnly||C.optimizeConfigs(this);let U=this.createDFAState(E,C),W=E.states.get(U);if(W!=null)return W}C.isReadOnly||C.conflictInfo==null&&(C.conflictInfo=this.isConflicted(C,_));let F=this.createDFAState(E,C.clone(!0)),O=this.atn.getDecisionState(E.decision),D=this.getUniqueAlt(C);if(D!==r.ATN.INVALID_ALT_NUMBER)F.acceptStateInfo=new t.AcceptStateInfo(D);else if(C.conflictingAlts!=null){let U=C.conflictingAlts;U&&(F.acceptStateInfo=new t.AcceptStateInfo(U.nextSetBit(0)))}if(F.isAcceptState&&C.hasSemanticContext&&this.predicateDFAState(F,C,O.numberOfTransitions),!w)return F;let j=E.addState(F);return Ee.debug&&j===F&&console.log("adding new DFA state: "+F),j}createDFAState(E,C){return new S.DFAState(C)}reportAttemptingFullContext(E,C,_,w,F){if(Ee.debug||Ee.retry_debug){let O=v.Interval.of(w,F);console.log("reportAttemptingFullContext decision="+E.decision+":"+_.s0.configs+", input="+this._parser.inputStream.getText(O))}if(this._parser!=null){let O=this._parser.getErrorListenerDispatch();O.reportAttemptingFullContext&&O.reportAttemptingFullContext(this._parser,E,w,F,C,_)}}reportContextSensitivity(E,C,_,w,F){if(Ee.debug||Ee.retry_debug){let O=v.Interval.of(w,F);console.log("reportContextSensitivity decision="+E.decision+":"+_.s0.configs+", input="+this._parser.inputStream.getText(O))}if(this._parser!=null){let O=this._parser.getErrorListenerDispatch();O.reportContextSensitivity&&O.reportContextSensitivity(this._parser,E,w,F,C,_)}}reportAmbiguity(E,C,_,w,F,O,D){if(Ee.debug||Ee.retry_debug){let j=v.Interval.of(_,w);console.log("reportAmbiguity "+O+":"+D+", input="+this._parser.inputStream.getText(j))}if(this._parser!=null){let j=this._parser.getErrorListenerDispatch();j.reportAmbiguity&&j.reportAmbiguity(this._parser,E,_,w,F,O,D)}}getReturnState(E){return E.isEmpty?R.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[E.invokingState].transition(0).followState.stateNumber}skipTailCalls(E){if(!this.optimize_tail_calls)return E;for(;!E.isEmpty;){let C=this.atn.states[E.invokingState];if(ce(C.numberOfTransitions===1&&C.transition(0).serializationType===3),!C.transition(0).tailCall)break;E=E.parent}return E}get parser(){return this._parser}};return Q.debug=!1,Q.dfa_debug=!1,Q.retry_debug=!1,Q.STATE_ALT_SORT_COMPARATOR=(ie,E)=>{let C=ie.state.nonStopStateNumber-E.state.nonStopStateNumber;return C!==0||(C=ie.alt-E.alt,C!==0)?C:0},l([g.NotNull],Q.prototype,"predictionMode",void 0),l([g.NotNull],Q.prototype,"getPredictionMode",null),l([e(0,g.NotNull)],Q.prototype,"setPredictionMode",null),l([g.Override],Q.prototype,"reset",null),l([e(0,g.NotNull)],Q.prototype,"adaptivePredict",null),l([e(0,g.NotNull),e(1,g.NotNull),e(2,g.NotNull)],Q.prototype,"getStartState",null),l([e(0,g.NotNull),e(1,g.NotNull),e(3,g.NotNull)],Q.prototype,"execDFA",null),l([e(0,g.NotNull),e(1,g.NotNull),e(3,g.NotNull)],Q.prototype,"execATN",null),l([e(0,g.NotNull),e(2,g.NotNull)],Q.prototype,"handleNoViableAlt",null),l([e(0,g.NotNull)],Q.prototype,"getExistingTargetState",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"computeTargetState",null),l([g.NotNull,e(0,g.NotNull)],Q.prototype,"removeAllConfigsNotInRuleStopState",null),l([g.NotNull],Q.prototype,"computeStartState",null),l([g.NotNull,e(0,g.NotNull)],Q.prototype,"applyPrecedenceFilter",null),l([e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"getReachableTarget",null),l([e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"getPredsForAmbigAlts",null),l([e(0,g.NotNull)],Q.prototype,"evalSemanticContext",null),l([e(0,g.NotNull)],Q.prototype,"evalSemanticContextImpl",null),l([e(1,g.NotNull),e(4,g.Nullable)],Q.prototype,"closure",null),l([e(0,g.NotNull),e(1,g.NotNull),e(2,g.Nullable),e(3,g.NotNull),e(6,g.NotNull)],Q.prototype,"closureImpl",null),l([g.NotNull],Q.prototype,"getRuleName",null),l([e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"getEpsilonTarget",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"actionTransition",null),l([g.Nullable,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"precedenceTransition",null),l([g.Nullable,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"predTransition",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull),e(2,g.Nullable)],Q.prototype,"ruleTransition",null),l([e(0,g.NotNull)],Q.prototype,"isConflicted",null),l([g.NotNull],Q.prototype,"getTokenName",null),l([e(0,g.NotNull)],Q.prototype,"dumpDeadEndConfigs",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull),e(2,g.NotNull)],Q.prototype,"noViableAlt",null),l([e(0,g.NotNull)],Q.prototype,"getUniqueAlt",null),l([e(0,g.NotNull)],Q.prototype,"configWithAltAtStopState",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull),e(4,g.NotNull)],Q.prototype,"addDFAEdge",null),l([e(0,g.Nullable),e(2,g.Nullable)],Q.prototype,"setDFAEdge",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"addDFAContextState",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"addDFAState",null),l([g.NotNull,e(0,g.NotNull),e(1,g.NotNull)],Q.prototype,"createDFAState",null),l([e(0,g.NotNull),e(2,g.NotNull)],Q.prototype,"reportAttemptingFullContext",null),l([e(0,g.NotNull),e(2,g.NotNull)],Q.prototype,"reportContextSensitivity",null),l([e(0,g.NotNull),e(5,g.NotNull),e(6,g.NotNull)],Q.prototype,"reportAmbiguity",null),Q=l([e(0,g.NotNull)],Q),Ht.ParserATNSimulator=Q,Ht}var yn={},dh;function k0(){if(dh)return yn;dh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=yn&&yn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(yn,"__esModule",{value:!0}),yn.PlusBlockStartState=void 0;const e=He(),t=Ro(),n=Z();let o=class extends t.BlockStartState{get stateType(){return e.ATNStateType.PLUS_BLOCK_START}};return l([n.Override],o.prototype,"stateType",null),yn.PlusBlockStartState=o,yn}var vn={},ph;function z0(){if(ph)return vn;ph=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=vn&&vn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(vn,"__esModule",{value:!0}),vn.PlusLoopbackState=void 0;const e=He(),t=$n(),n=Z();let o=class extends t.DecisionState{get stateType(){return e.ATNStateType.PLUS_LOOP_BACK}};return l([n.Override],o.prototype,"stateType",null),vn.PlusLoopbackState=o,vn}var Vt={},xh;function j0(){if(xh)return Vt;xh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Vt&&Vt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=Vt&&Vt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.PrecedencePredicateTransition=void 0;const t=Ua(),n=Z(),o=ii();let i=class extends t.AbstractPredicateTransition{constructor(s,a){super(s),this.precedence=a}get serializationType(){return 10}get isEpsilon(){return!0}matches(s,a,c){return!1}get predicate(){return new o.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};return l([n.Override],i.prototype,"serializationType",null),l([n.Override],i.prototype,"isEpsilon",null),l([n.Override],i.prototype,"matches",null),l([n.Override],i.prototype,"toString",null),i=l([e(0,n.NotNull)],i),Vt.PrecedencePredicateTransition=i,Vt}var Wt={},mh;function q0(){if(mh)return Wt;mh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Wt&&Wt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=Wt&&Wt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.RangeTransition=void 0;const t=Wn(),n=Z(),o=wr();let i=class extends o.Transition{constructor(s,a,c){super(s),this.from=a,this.to=c}get serializationType(){return 2}get label(){return t.IntervalSet.of(this.from,this.to)}matches(s,a,c){return s>=this.from&&s<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};return l([n.Override],i.prototype,"serializationType",null),l([n.Override,n.NotNull],i.prototype,"label",null),l([n.Override],i.prototype,"matches",null),l([n.Override,n.NotNull],i.prototype,"toString",null),i=l([e(0,n.NotNull)],i),Wt.RangeTransition=i,Wt}var Sn={},gh;function H0(){if(gh)return Sn;gh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Sn&&Sn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.RuleStartState=void 0;const e=mr(),t=He(),n=Z();let o=class extends e.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return t.ATNStateType.RULE_START}};return l([n.Override],o.prototype,"stateType",null),Sn.RuleStartState=o,Sn}var An={},yh;function U0(){if(yh)return An;yh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=An&&An.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(An,"__esModule",{value:!0}),An.StarBlockStartState=void 0;const e=He(),t=Ro(),n=Z();let o=class extends t.BlockStartState{get stateType(){return e.ATNStateType.STAR_BLOCK_START}};return l([n.Override],o.prototype,"stateType",null),An.StarBlockStartState=o,An}var Cn={},vh;function $0(){if(vh)return Cn;vh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Cn&&Cn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.StarLoopbackState=void 0;const e=mr(),t=He(),n=Z();let o=class extends e.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return t.ATNStateType.STAR_LOOP_BACK}};return l([n.Override],o.prototype,"stateType",null),Cn.StarLoopbackState=o,Cn}var En={},Sh;function V0(){if(Sh)return En;Sh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=En&&En.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(En,"__esModule",{value:!0}),En.TokensStartState=void 0;const e=He(),t=$n(),n=Z();let o=class extends t.DecisionState{get stateType(){return e.ATNStateType.TOKEN_START}};return l([n.Override],o.prototype,"stateType",null),En.TokensStartState=o,En}var Ei={},Ah;function W0(){if(Ah)return Ei;Ah=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.UUID=void 0;const l=je();let e=class ba{constructor(n,o,i,r){this.data=new Uint32Array(4),this.data[0]=n,this.data[1]=o,this.data[2]=i,this.data[3]=r}static fromString(n){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(n))throw new Error("Incorrectly formatted UUID");let o=n.split("-"),i=parseInt(o[0],16),r=(parseInt(o[1],16)<<16>>>0)+parseInt(o[2],16),s=(parseInt(o[3],16)<<16>>>0)+parseInt(o[4].substr(0,4),16),a=parseInt(o[4].substr(-8),16);return new ba(i,r,s,a)}hashCode(){return l.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(n){return n===this?!0:n instanceof ba?this.data[0]===n.data[0]&&this.data[1]===n.data[1]&&this.data[2]===n.data[2]&&this.data[3]===n.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}};return Ei.UUID=e,Ei}var Ch;function tl(){if(Ch)return Dt;Ch=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Dt&&Dt.__decorate||function(W,L,M,H){var Y=arguments.length,re=Y<3?L:H===null?H=Object.getOwnPropertyDescriptor(L,M):H,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(W,L,M,H);else for(var q=W.length-1;q>=0;q--)(ne=W[q])&&(re=(Y<3?ne(re):Y>3?ne(L,M,re):ne(L,M))||re);return Y>3&&re&&Object.defineProperty(L,M,re),re},e=Dt&&Dt.__param||function(W,L){return function(M,H){L(M,H,W)}};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.ATNDeserializer=void 0;const t=Rd(),n=Or(),o=ht(),i=bd(),r=He(),s=Nd(),a=T0(),c=Ad(),u=Fr(),h=b0(),f=Ro(),d=$n(),p=Sd(),S=R0(),x=Wn(),v=Cd(),m=N0(),g=w0(),y=O0(),T=F0(),A=P0(),b=D0(),R=I0(),N=L0(),P=Id(),B=Z(),I=Qa(),V=Xi(),J=k0(),te=z0(),oe=j0(),ge=fd(),ce=q0(),ee=H0(),G=Yi(),Q=Ja(),ie=Ka(),E=U0(),C=$0(),_=Xa(),w=Be(),F=V0(),O=W0(),D=Ed();var j;(function(W){W[W.UNICODE_BMP=0]="UNICODE_BMP",W[W.UNICODE_SMP=1]="UNICODE_SMP"})(j||(j={}));let U=class fe{constructor(L){L===void 0&&(L=i.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=L}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported(L,M){let H=fe.SUPPORTED_UUIDS.findIndex(Y=>Y.equals(L));return H<0?!1:fe.SUPPORTED_UUIDS.findIndex(Y=>Y.equals(M))>=H}static getUnicodeDeserializer(L){return L===0?{readUnicode:(M,H)=>fe.toInt(M[H]),size:1}:{readUnicode:(M,H)=>fe.toInt32(M,H),size:2}}deserialize(L){L=L.slice(0);for(let K=1;K<L.length;K++)L[K]=L[K]-2&65535;let M=0,H=fe.toInt(L[M++]);if(H!==fe.SERIALIZED_VERSION){let K=`Could not deserialize ATN with version ${H} (expected ${fe.SERIALIZED_VERSION}).`;throw new Error(K)}let Y=fe.toUUID(L,M);if(M+=8,fe.SUPPORTED_UUIDS.findIndex(K=>K.equals(Y))<0){let K=`Could not deserialize ATN with UUID ${Y} (expected ${fe.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(K)}let re=fe.isFeatureSupported(fe.ADDED_LEXER_ACTIONS,Y),ne=fe.toInt(L[M++]),q=fe.toInt(L[M++]),X=new o.ATN(ne,q),he=[],be=[],Re=fe.toInt(L[M++]);for(let K=0;K<Re;K++){let me=fe.toInt(L[M++]);if(me===r.ATNStateType.INVALID_TYPE){X.addState(new v.InvalidState);continue}let ye=fe.toInt(L[M++]);ye===65535&&(ye=-1);let Ce=this.stateFactory(me,ye);if(me===r.ATNStateType.LOOP_END){let Pe=fe.toInt(L[M++]);he.push([Ce,Pe])}else if(Ce instanceof f.BlockStartState){let Pe=fe.toInt(L[M++]);be.push([Ce,Pe])}X.addState(Ce)}for(let K of he)K[0].loopBackState=X.states[K[1]];for(let K of be)K[0].endState=X.states[K[1]];let z=fe.toInt(L[M++]);for(let K=0;K<z;K++){let me=fe.toInt(L[M++]);X.states[me].nonGreedy=!0}let $=fe.toInt(L[M++]);for(let K=0;K<$;K++){let me=fe.toInt(L[M++]);X.states[me].sll=!0}let le=fe.toInt(L[M++]);for(let K=0;K<le;K++){let me=fe.toInt(L[M++]);X.states[me].isPrecedenceRule=!0}let de=fe.toInt(L[M++]);X.grammarType===0&&(X.ruleToTokenType=new Int32Array(de)),X.ruleToStartState=new Array(de);for(let K=0;K<de;K++){let me=fe.toInt(L[M++]),ye=X.states[me];if(ye.leftFactored=fe.toInt(L[M++])!==0,X.ruleToStartState[K]=ye,X.grammarType===0){let Ce=fe.toInt(L[M++]);Ce===65535&&(Ce=w.Token.EOF),X.ruleToTokenType[K]=Ce,fe.isFeatureSupported(fe.ADDED_LEXER_ACTIONS,Y)||fe.toInt(L[M++])}}X.ruleToStopState=new Array(de);for(let K of X.states)K instanceof G.RuleStopState&&(X.ruleToStopState[K.ruleIndex]=K,X.ruleToStartState[K.ruleIndex].stopState=K);let xe=fe.toInt(L[M++]);for(let K=0;K<xe;K++){let me=fe.toInt(L[M++]);X.modeToStartState.push(X.states[me])}X.modeToDFA=new Array(xe);for(let K=0;K<xe;K++)X.modeToDFA[K]=new p.DFA(X.modeToStartState[K]);let _e=[];M=this.deserializeSets(L,M,_e,fe.getUnicodeDeserializer(0)),fe.isFeatureSupported(fe.ADDED_UNICODE_SMP,Y)&&(M=this.deserializeSets(L,M,_e,fe.getUnicodeDeserializer(1)));let Se=fe.toInt(L[M++]);for(let K=0;K<Se;K++){let me=fe.toInt(L[M]),ye=fe.toInt(L[M+1]),Ce=fe.toInt(L[M+2]),Pe=fe.toInt(L[M+3]),Ve=fe.toInt(L[M+4]),qe=fe.toInt(L[M+5]),Ke=this.edgeFactory(X,Ce,me,ye,Pe,Ve,qe,_e);X.states[me].addTransition(Ke),M+=6}let Ne=new n.Array2DHashSet({hashCode:K=>K.stopState^K.returnState^K.outermostPrecedenceReturn,equals:(K,me)=>K.stopState===me.stopState&&K.returnState===me.returnState&&K.outermostPrecedenceReturn===me.outermostPrecedenceReturn}),we=[];for(let K of X.states){let me=K.ruleIndex>=0&&X.ruleToStartState[K.ruleIndex].leftFactored;for(let ye=0;ye<K.numberOfTransitions;ye++){let Ce=K.transition(ye);if(!(Ce instanceof Q.RuleTransition))continue;let Pe=Ce;if(!X.ruleToStartState[Pe.target.ruleIndex].leftFactored&&me)continue;let qe=-1;X.ruleToStartState[Pe.target.ruleIndex].isPrecedenceRule&&Pe.precedence===0&&(qe=Pe.target.ruleIndex);let Ke={stopState:Pe.target.ruleIndex,returnState:Pe.followState.stateNumber,outermostPrecedenceReturn:qe};Ne.add(Ke)&&we.push(Ke)}}for(let K of we){let me=new S.EpsilonTransition(X.states[K.returnState],K.outermostPrecedenceReturn);X.ruleToStopState[K.stopState].addTransition(me)}for(let K of X.states){if(K instanceof f.BlockStartState){if(K.endState===void 0)throw new Error("IllegalStateException");if(K.endState.startState!==void 0)throw new Error("IllegalStateException");K.endState.startState=K}if(K instanceof te.PlusLoopbackState){let me=K;for(let ye=0;ye<me.numberOfTransitions;ye++){let Ce=me.transition(ye).target;Ce instanceof J.PlusBlockStartState&&(Ce.loopBackState=me)}}else if(K instanceof C.StarLoopbackState){let me=K;for(let ye=0;ye<me.numberOfTransitions;ye++){let Ce=me.transition(ye).target;Ce instanceof _.StarLoopEntryState&&(Ce.loopBackState=me)}}}let ze=fe.toInt(L[M++]);for(let K=1;K<=ze;K++){let me=fe.toInt(L[M++]),ye=X.states[me];X.decisionToState.push(ye),ye.decision=K-1}if(X.grammarType===0)if(re){X.lexerActions=new Array(fe.toInt(L[M++]));for(let K=0;K<X.lexerActions.length;K++){let me=fe.toInt(L[M++]),ye=fe.toInt(L[M++]);ye===65535&&(ye=-1);let Ce=fe.toInt(L[M++]);Ce===65535&&(Ce=-1);let Pe=this.lexerActionFactory(me,ye,Ce);X.lexerActions[K]=Pe}}else{let K=[];for(let me of X.states)for(let ye=0;ye<me.numberOfTransitions;ye++){let Ce=me.transition(ye);if(!(Ce instanceof t.ActionTransition))continue;let Pe=Ce.ruleIndex,Ve=Ce.actionIndex,qe=new g.LexerCustomAction(Pe,Ve);me.setTransition(ye,new t.ActionTransition(Ce.target,Pe,K.length,!1)),K.push(qe)}X.lexerActions=K}this.markPrecedenceDecisions(X),X.decisionToDFA=new Array(ze);for(let K=0;K<ze;K++)X.decisionToDFA[K]=new p.DFA(X.decisionToState[K],K);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(X),this.deserializationOptions.isGenerateRuleBypassTransitions&&X.grammarType===1){X.ruleToTokenType=new Int32Array(X.ruleToStartState.length);for(let K=0;K<X.ruleToStartState.length;K++)X.ruleToTokenType[K]=X.maxTokenType+K+1;for(let K=0;K<X.ruleToStartState.length;K++){let me=new a.BasicBlockStartState;me.ruleIndex=K,X.addState(me);let ye=new h.BlockEndState;ye.ruleIndex=K,X.addState(ye),me.endState=ye,X.defineDecisionState(me),ye.startState=me;let Ce,Pe;if(X.ruleToStartState[K].isPrecedenceRule){Ce=void 0;for(let qe of X.states){if(qe.ruleIndex!==K||!(qe instanceof _.StarLoopEntryState))continue;let Ke=qe.transition(qe.numberOfTransitions-1).target;if(Ke instanceof P.LoopEndState&&Ke.epsilonOnlyTransitions&&Ke.transition(0).target instanceof G.RuleStopState){Ce=qe;break}}if(!Ce)throw new Error("Couldn't identify final state of the precedence rule prefix section.");Pe=Ce.loopBackState.transition(0)}else Ce=X.ruleToStopState[K];for(let qe of X.states)for(let Ke=0;Ke<qe.numberOfTransitions;Ke++){let Zi=qe.transition(Ke);Zi!==Pe&&Zi.target===Ce&&(Zi.target=ye)}for(;X.ruleToStartState[K].numberOfTransitions>0;){let qe=X.ruleToStartState[K].removeTransition(X.ruleToStartState[K].numberOfTransitions-1);me.addTransition(qe)}X.ruleToStartState[K].addTransition(new S.EpsilonTransition(me)),ye.addTransition(new S.EpsilonTransition(Ce));let Ve=new c.BasicState;X.addState(Ve),Ve.addTransition(new s.AtomTransition(ye,X.ruleToTokenType[K])),me.addTransition(new S.EpsilonTransition(Ve))}this.deserializationOptions.isVerifyATN&&this.verifyATN(X)}if(this.deserializationOptions.isOptimize){for(;;){let K=0;K+=fe.inlineSetRules(X),K+=fe.combineChainedEpsilons(X);let me=X.grammarType===0;if(K+=fe.optimizeSets(X,me),K===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(X)}return fe.identifyTailCalls(X),X}deserializeSets(L,M,H,Y){let re=fe.toInt(L[M++]);for(let ne=0;ne<re;ne++){let q=fe.toInt(L[M]);M++;let X=new x.IntervalSet;H.push(X),fe.toInt(L[M++])!==0&&X.add(-1);for(let be=0;be<q;be++){let Re=Y.readUnicode(L,M);M+=Y.size;let z=Y.readUnicode(L,M);M+=Y.size,X.add(Re,z)}}return M}markPrecedenceDecisions(L){let M=new Map;for(let H of L.states)if(H instanceof _.StarLoopEntryState&&L.ruleToStartState[H.ruleIndex].isPrecedenceRule){let Y=H.transition(H.numberOfTransitions-1).target;Y instanceof P.LoopEndState&&Y.epsilonOnlyTransitions&&Y.transition(0).target instanceof G.RuleStopState&&(M.set(H.ruleIndex,H),H.precedenceRuleDecision=!0,H.precedenceLoopbackStates=new u.BitSet(L.states.length))}for(let H of M)for(let Y of L.ruleToStopState[H[0]].getTransitions())Y.serializationType!==1||Y.outermostPrecedenceReturn!==-1||H[1].precedenceLoopbackStates.set(Y.target.stateNumber)}verifyATN(L){for(let M of L.states)if(this.checkCondition(M!==void 0,"ATN states should not be undefined."),M.stateType!==r.ATNStateType.INVALID_TYPE){if(this.checkCondition(M.onlyHasEpsilonTransitions||M.numberOfTransitions<=1),M instanceof J.PlusBlockStartState&&this.checkCondition(M.loopBackState!==void 0),M instanceof _.StarLoopEntryState){let H=M;if(this.checkCondition(H.loopBackState!==void 0),this.checkCondition(H.numberOfTransitions===2),H.transition(0).target instanceof E.StarBlockStartState)this.checkCondition(H.transition(1).target instanceof P.LoopEndState),this.checkCondition(!H.nonGreedy);else if(H.transition(0).target instanceof P.LoopEndState)this.checkCondition(H.transition(1).target instanceof E.StarBlockStartState),this.checkCondition(H.nonGreedy);else throw new Error("IllegalStateException")}if(M instanceof C.StarLoopbackState&&(this.checkCondition(M.numberOfTransitions===1),this.checkCondition(M.transition(0).target instanceof _.StarLoopEntryState)),M instanceof P.LoopEndState&&this.checkCondition(M.loopBackState!==void 0),M instanceof ee.RuleStartState&&this.checkCondition(M.stopState!==void 0),M instanceof f.BlockStartState&&this.checkCondition(M.endState!==void 0),M instanceof h.BlockEndState&&this.checkCondition(M.startState!==void 0),M instanceof d.DecisionState){let H=M;this.checkCondition(H.numberOfTransitions<=1||H.decision>=0)}else this.checkCondition(M.numberOfTransitions<=1||M instanceof G.RuleStopState)}}checkCondition(L,M){if(!L)throw new Error("IllegalStateException: "+M)}static inlineSetRules(L){let M=0,H=new Array(L.ruleToStartState.length);for(let Y=0;Y<L.ruleToStartState.length;Y++){let ne=L.ruleToStartState[Y];for(;ne.onlyHasEpsilonTransitions&&ne.numberOfOptimizedTransitions===1&&ne.getOptimizedTransition(0).serializationType===1;)ne=ne.getOptimizedTransition(0).target;if(ne.numberOfOptimizedTransitions!==1)continue;let q=ne.getOptimizedTransition(0),X=q.target;if(!(q.isEpsilon||!X.onlyHasEpsilonTransitions||X.numberOfOptimizedTransitions!==1||!(X.getOptimizedTransition(0).target instanceof G.RuleStopState)))switch(q.serializationType){case 5:case 2:case 7:H[Y]=q;break;case 8:case 9:continue;default:continue}}for(let Y of L.states){if(Y.ruleIndex<0)continue;let re;for(let ne=0;ne<Y.numberOfOptimizedTransitions;ne++){let q=Y.getOptimizedTransition(ne);if(!(q instanceof Q.RuleTransition)){re!==void 0&&re.push(q);continue}let X=q,he=H[X.target.ruleIndex];if(he===void 0){re!==void 0&&re.push(q);continue}if(re===void 0){re=[];for(let z=0;z<ne;z++)re.push(Y.getOptimizedTransition(ne))}M++;let be=X.followState,Re=new c.BasicState;switch(Re.setRuleIndex(be.ruleIndex),L.addState(Re),re.push(new S.EpsilonTransition(Re)),he.serializationType){case 5:Re.addTransition(new s.AtomTransition(be,he._label));break;case 2:Re.addTransition(new ce.RangeTransition(be,he.from,he.to));break;case 7:Re.addTransition(new ie.SetTransition(be,he.label));break;default:throw new Error("UnsupportedOperationException")}}if(re!==void 0){if(Y.isOptimized)for(;Y.numberOfOptimizedTransitions>0;)Y.removeOptimizedTransition(Y.numberOfOptimizedTransitions-1);for(let ne of re)Y.addOptimizedTransition(ne)}}return V.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+M+" rule invocations by inlining sets."),M}static combineChainedEpsilons(L){let M=0;for(let H of L.states){if(!H.onlyHasEpsilonTransitions||H instanceof G.RuleStopState)continue;let Y;e:for(let re=0;re<H.numberOfOptimizedTransitions;re++){let ne=H.getOptimizedTransition(re),q=ne.target;if(ne.serializationType!==1||ne.outermostPrecedenceReturn!==-1||q.stateType!==r.ATNStateType.BASIC||!q.onlyHasEpsilonTransitions){Y!==void 0&&Y.push(ne);continue e}for(let X=0;X<q.numberOfOptimizedTransitions;X++)if(q.getOptimizedTransition(X).serializationType!==1||q.getOptimizedTransition(X).outermostPrecedenceReturn!==-1){Y!==void 0&&Y.push(ne);continue e}if(M++,Y===void 0){Y=[];for(let X=0;X<re;X++)Y.push(H.getOptimizedTransition(X))}for(let X=0;X<q.numberOfOptimizedTransitions;X++){let he=q.getOptimizedTransition(X).target;Y.push(new S.EpsilonTransition(he))}}if(Y!==void 0){if(H.isOptimized)for(;H.numberOfOptimizedTransitions>0;)H.removeOptimizedTransition(H.numberOfOptimizedTransitions-1);for(let re of Y)H.addOptimizedTransition(re)}}return V.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+M+" transitions by combining chained epsilon transitions."),M}static optimizeSets(L,M){if(M)return 0;let H=0,Y=L.decisionToState;for(let re of Y){let ne=new x.IntervalSet;for(let z=0;z<re.numberOfOptimizedTransitions;z++){let $=re.getOptimizedTransition(z);if(!($ instanceof S.EpsilonTransition)||$.target.numberOfOptimizedTransitions!==1)continue;let le=$.target.getOptimizedTransition(0);le.target instanceof h.BlockEndState&&(le instanceof I.NotSetTransition||(le instanceof s.AtomTransition||le instanceof ce.RangeTransition||le instanceof ie.SetTransition)&&ne.add(z))}if(ne.size<=1)continue;let q=[];for(let z=0;z<re.numberOfOptimizedTransitions;z++)ne.contains(z)||q.push(re.getOptimizedTransition(z));let X=re.getOptimizedTransition(ne.minElement).target.getOptimizedTransition(0).target,he=new x.IntervalSet;for(let z of ne.intervals)for(let $=z.a;$<=z.b;$++){let le=re.getOptimizedTransition($).target.getOptimizedTransition(0);if(le instanceof I.NotSetTransition)throw new Error("Not yet implemented.");he.addAll(le.label)}let be;if(he.intervals.length===1)if(he.size===1)be=new s.AtomTransition(X,he.minElement);else{let z=he.intervals[0];be=new ce.RangeTransition(X,z.a,z.b)}else be=new ie.SetTransition(X,he);let Re=new c.BasicState;if(Re.setRuleIndex(re.ruleIndex),L.addState(Re),Re.addTransition(be),q.push(new S.EpsilonTransition(Re)),H+=re.numberOfOptimizedTransitions-q.length,re.isOptimized)for(;re.numberOfOptimizedTransitions>0;)re.removeOptimizedTransition(re.numberOfOptimizedTransitions-1);for(let z of q)re.addOptimizedTransition(z)}return V.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+H+" paths by collapsing sets."),H}static identifyTailCalls(L){for(let M of L.states){for(let H=0;H<M.numberOfTransitions;H++){let Y=M.transition(H);Y instanceof Q.RuleTransition&&(Y.tailCall=this.testTailCall(L,Y,!1),Y.optimizedTailCall=this.testTailCall(L,Y,!0))}if(M.isOptimized)for(let H=0;H<M.numberOfOptimizedTransitions;H++){let Y=M.getOptimizedTransition(H);Y instanceof Q.RuleTransition&&(Y.tailCall=this.testTailCall(L,Y,!1),Y.optimizedTailCall=this.testTailCall(L,Y,!0))}}}static testTailCall(L,M,H){if(!H&&M.tailCall||H&&M.optimizedTailCall)return!0;let Y=new u.BitSet(L.states.length),re=[];for(re.push(M.followState);;){let ne=re.pop();if(!ne)break;if(Y.get(ne.stateNumber)||ne instanceof G.RuleStopState)continue;if(!ne.onlyHasEpsilonTransitions)return!1;let q=H?ne.numberOfOptimizedTransitions:ne.numberOfTransitions;for(let X=0;X<q;X++){let he=H?ne.getOptimizedTransition(X):ne.transition(X);if(he.serializationType!==1)return!1;re.push(he.target)}}return!0}static toInt(L){return L}static toInt32(L,M){return(L[M]|L[M+1]<<16)>>>0}static toUUID(L,M){let H=fe.toInt32(L,M),Y=fe.toInt32(L,M+2),re=fe.toInt32(L,M+4),ne=fe.toInt32(L,M+6);return new O.UUID(ne,re,Y,H)}edgeFactory(L,M,H,Y,re,ne,q,X){let he=L.states[Y];switch(M){case 1:return new S.EpsilonTransition(he);case 2:return q!==0?new ce.RangeTransition(he,w.Token.EOF,ne):new ce.RangeTransition(he,re,ne);case 3:return new Q.RuleTransition(L.states[re],ne,q,he);case 4:return new ge.PredicateTransition(he,re,ne,q!==0);case 10:return new oe.PrecedencePredicateTransition(he,re);case 5:return q!==0?new s.AtomTransition(he,w.Token.EOF):new s.AtomTransition(he,re);case 6:return new t.ActionTransition(he,re,ne,q!==0);case 7:return new ie.SetTransition(he,X[re]);case 8:return new I.NotSetTransition(he,X[re]);case 9:return new D.WildcardTransition(he)}throw new Error("The specified transition type is not valid.")}stateFactory(L,M){let H;switch(L){case r.ATNStateType.INVALID_TYPE:return new v.InvalidState;case r.ATNStateType.BASIC:H=new c.BasicState;break;case r.ATNStateType.RULE_START:H=new ee.RuleStartState;break;case r.ATNStateType.BLOCK_START:H=new a.BasicBlockStartState;break;case r.ATNStateType.PLUS_BLOCK_START:H=new J.PlusBlockStartState;break;case r.ATNStateType.STAR_BLOCK_START:H=new E.StarBlockStartState;break;case r.ATNStateType.TOKEN_START:H=new F.TokensStartState;break;case r.ATNStateType.RULE_STOP:H=new G.RuleStopState;break;case r.ATNStateType.BLOCK_END:H=new h.BlockEndState;break;case r.ATNStateType.STAR_LOOP_BACK:H=new C.StarLoopbackState;break;case r.ATNStateType.STAR_LOOP_ENTRY:H=new _.StarLoopEntryState;break;case r.ATNStateType.PLUS_LOOP_BACK:H=new te.PlusLoopbackState;break;case r.ATNStateType.LOOP_END:H=new P.LoopEndState;break;default:let Y=`The specified state type ${L} is not valid.`;throw new Error(Y)}return H.ruleIndex=M,H}lexerActionFactory(L,M,H){switch(L){case 0:return new m.LexerChannelAction(M);case 1:return new g.LexerCustomAction(M,H);case 2:return new y.LexerModeAction(M);case 3:return T.LexerMoreAction.INSTANCE;case 4:return A.LexerPopModeAction.INSTANCE;case 5:return new b.LexerPushModeAction(M);case 6:return R.LexerSkipAction.INSTANCE;case 7:return new N.LexerTypeAction(M);default:let Y=`The specified lexer action type ${L} is not valid.`;throw new Error(Y)}}};return U.BASE_SERIALIZED_UUID=O.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),U.ADDED_LEXER_ACTIONS=O.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),U.ADDED_UNICODE_SMP=O.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B"),U.SUPPORTED_UUIDS=[U.BASE_SERIALIZED_UUID,U.ADDED_LEXER_ACTIONS,U.ADDED_UNICODE_SMP],U.SERIALIZED_UUID=U.ADDED_UNICODE_SMP,l([B.NotNull],U.prototype,"deserializationOptions",void 0),l([e(0,B.NotNull)],U.prototype,"deserialize",null),l([e(0,B.NotNull)],U.prototype,"markPrecedenceDecisions",null),l([B.NotNull,e(0,B.NotNull)],U.prototype,"edgeFactory",null),Dt.ATNDeserializer=U,Dt}var Gt={},Eh;function G0(){if(Eh)return Gt;Eh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Gt&&Gt.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c},e=Gt&&Gt.__param||function(o,i){return function(r,s){i(r,s,o)}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.ParseInfo=void 0;const t=Z();let n=class{constructor(i){this.atnSimulator=i}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let i=this.atnSimulator.getDecisionInfo(),r=[];for(let s=0;s<i.length;s++)i[s].LL_Fallback>0&&r.push(s);return r}getTotalTimeInPrediction(){let i=this.atnSimulator.getDecisionInfo(),r=0;for(let s of i)r+=s.timeInPrediction;return r}getTotalSLLLookaheadOps(){let i=this.atnSimulator.getDecisionInfo(),r=0;for(let s of i)r+=s.SLL_TotalLook;return r}getTotalLLLookaheadOps(){let i=this.atnSimulator.getDecisionInfo(),r=0;for(let s of i)r+=s.LL_TotalLook;return r}getTotalSLLATNLookaheadOps(){let i=this.atnSimulator.getDecisionInfo(),r=0;for(let s of i)r+=s.SLL_ATNTransitions;return r}getTotalLLATNLookaheadOps(){let i=this.atnSimulator.getDecisionInfo(),r=0;for(let s of i)r+=s.LL_ATNTransitions;return r}getTotalATNLookaheadOps(){let i=this.atnSimulator.getDecisionInfo(),r=0;for(let s of i)r+=s.SLL_ATNTransitions,r+=s.LL_ATNTransitions;return r}getDFASize(i){if(i)return this.atnSimulator.atn.decisionToDFA[i].states.size;{let r=0,s=this.atnSimulator.atn.decisionToDFA;for(let a=0;a<s.length;a++)r+=this.getDFASize(a);return r}}};return l([t.NotNull],n.prototype,"getDecisionInfo",null),l([t.NotNull],n.prototype,"getLLDecisions",null),n=l([e(0,t.NotNull)],n),Gt.ParseInfo=n,Gt}var _n={},_h;function zd(){if(_h)return _n;_h=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=_n&&_n.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(_n,"__esModule",{value:!0}),_n.ProxyParserErrorListener=void 0;const e=Ya(),t=Z();let n=class extends e.ProxyErrorListener{constructor(i){super(i)}reportAmbiguity(i,r,s,a,c,u,h){this.getDelegates().forEach(f=>{f.reportAmbiguity&&f.reportAmbiguity(i,r,s,a,c,u,h)})}reportAttemptingFullContext(i,r,s,a,c,u){this.getDelegates().forEach(h=>{h.reportAttemptingFullContext&&h.reportAttemptingFullContext(i,r,s,a,c,u)})}reportContextSensitivity(i,r,s,a,c,u){this.getDelegates().forEach(h=>{h.reportContextSensitivity&&h.reportContextSensitivity(i,r,s,a,c,u)})}};return l([t.Override],n.prototype,"reportAmbiguity",null),l([t.Override],n.prototype,"reportAttemptingFullContext",null),l([t.Override],n.prototype,"reportContextSensitivity",null),_n.ProxyParserErrorListener=n,_n}var Tn={},oa={},sa={},Yt={},Th;function Y0(){if(Th)return Yt;Th=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.isSupplementaryCodePoint=Yt.isLowSurrogate=Yt.isHighSurrogate=void 0;function l(n){return n>=55296&&n<=56319}Yt.isHighSurrogate=l;function e(n){return n>=56320&&n<=57343}Yt.isLowSurrogate=e;function t(n){return n>=65536}return Yt.isSupplementaryCodePoint=t,Yt}var bh;function jd(){return bh||(bh=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.CodePointBuffer=void 0;const e=$e(),t=Y0();class n{constructor(i,r){this.buffer=i,this._position=0,this._size=r}static withArray(i){return new n(i,i.length)}get position(){return this._position}set position(i){if(i<0||i>this._size)throw new RangeError;this._position=i}get remaining(){return this._size-this.position}get(i){return this.buffer[i]}array(){return this.buffer.slice(0,this._size)}static builder(i){return new n.Builder(i)}}l.CodePointBuffer=n,function(o){let i;(function(s){s[s.BYTE=0]="BYTE",s[s.CHAR=1]="CHAR",s[s.INT=2]="INT"})(i||(i={}));class r{constructor(a){this.type=0,this.buffer=new Uint8Array(a),this.prevHighSurrogate=-1,this.position=0}build(){return new o(this.buffer,this.position)}static roundUpToNextPowerOfTwo(a){let c=32-Math.clz32(a-1);return Math.pow(2,c)}ensureRemaining(a){switch(this.type){case 0:if(this.buffer.length-this.position<a){let c=r.roundUpToNextPowerOfTwo(this.buffer.length+a),u=new Uint8Array(c);u.set(this.buffer.subarray(0,this.position),0),this.buffer=u}break;case 1:if(this.buffer.length-this.position<a){let c=r.roundUpToNextPowerOfTwo(this.buffer.length+a),u=new Uint16Array(c);u.set(this.buffer.subarray(0,this.position),0),this.buffer=u}break;case 2:if(this.buffer.length-this.position<a){let c=r.roundUpToNextPowerOfTwo(this.buffer.length+a),u=new Int32Array(c);u.set(this.buffer.subarray(0,this.position),0),this.buffer=u}break}}append(a){this.ensureRemaining(a.length),this.appendArray(a)}appendArray(a){switch(this.type){case 0:this.appendArrayByte(a);break;case 1:this.appendArrayChar(a);break;case 2:this.appendArrayInt(a);break}}appendArrayByte(a){e(this.prevHighSurrogate===-1);let c=a,u=0,h=a.length,f=this.buffer,d=this.position;for(;u<h;){let p=c[u];if(p<=255)f[d]=p;else if(a=a.subarray(u,h),this.position=d,t.isHighSurrogate(p)){this.byteToIntBuffer(a.length),this.appendArrayInt(a);return}else{this.byteToCharBuffer(a.length),this.appendArrayChar(a);return}u++,d++}this.position=d}appendArrayChar(a){e(this.prevHighSurrogate===-1);let c=a,u=0,h=a.length,f=this.buffer,d=this.position;for(;u<h;){let p=c[u];if(!t.isHighSurrogate(p))f[d]=p;else{a=a.subarray(u,h),this.position=d,this.charToIntBuffer(a.length),this.appendArrayInt(a);return}u++,d++}this.position=d}appendArrayInt(a){let c=a,u=0,h=a.length,f=this.buffer,d=this.position;for(;u<h;){let p=c[u];u++,this.prevHighSurrogate!==-1?t.isLowSurrogate(p)?(f[d]=String.fromCharCode(this.prevHighSurrogate,p).codePointAt(0),d++,this.prevHighSurrogate=-1):(f[d]=this.prevHighSurrogate,d++,t.isHighSurrogate(p)?this.prevHighSurrogate=p:(f[d]=p,d++,this.prevHighSurrogate=-1)):t.isHighSurrogate(p)?this.prevHighSurrogate=p:(f[d]=p,d++)}this.prevHighSurrogate!==-1&&(f[d]=this.prevHighSurrogate,d++),this.position=d}byteToCharBuffer(a){let c=new Uint16Array(Math.max(this.position+a,this.buffer.length>>1));c.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=c}byteToIntBuffer(a){let c=new Int32Array(Math.max(this.position+a,this.buffer.length>>2));c.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=c}charToIntBuffer(a){let c=new Int32Array(Math.max(this.position+a,this.buffer.length>>1));c.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=c}}o.Builder=r}(n=l.CodePointBuffer||(l.CodePointBuffer={}))}(sa)),sa}var bn={},Rh;function Hd(){if(Rh)return bn;Rh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=bn&&bn.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(bn,"__esModule",{value:!0}),bn.CodePointCharStream=void 0;const e=$e(),t=Rr(),n=We(),o=Z();let i=class qd{constructor(s,a,c,u){e(a===0),this._array=s,this._size=c,this._name=u,this._position=0}get internalStorage(){return this._array}static fromBuffer(s,a){return(a===void 0||a.length===0)&&(a=t.IntStream.UNKNOWN_SOURCE_NAME),new qd(s.array(),s.position,s.remaining,a)}consume(){if(this._size-this._position===0)throw e(this.LA(1)===t.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(s){}seek(s){this._position=s}get sourceName(){return this._name}toString(){return this.getText(n.Interval.of(0,this.size-1))}LA(s){let a;switch(Math.sign(s)){case-1:return a=this.index+s,a<0?t.IntStream.EOF:this._array[a];case 0:return 0;case 1:return a=this.index+s-1,a>=this.size?t.IntStream.EOF:this._array[a]}throw new RangeError("Not reached")}getText(s){const a=Math.min(s.a,this.size),c=Math.min(s.b-s.a+1,this.size-a);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(a,a+c))):String.fromCharCode(...Array.from(this._array.subarray(a,a+c)))}};return l([o.Override],i.prototype,"consume",null),l([o.Override],i.prototype,"index",null),l([o.Override],i.prototype,"size",null),l([o.Override],i.prototype,"mark",null),l([o.Override],i.prototype,"release",null),l([o.Override],i.prototype,"seek",null),l([o.Override],i.prototype,"sourceName",null),l([o.Override],i.prototype,"toString",null),l([o.Override],i.prototype,"LA",null),l([o.Override],i.prototype,"getText",null),bn.CodePointCharStream=i,bn}var Nh;function rl(){return Nh||(Nh=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.CharStreams=void 0;const e=jd(),t=Hd(),n=Rr();(function(o){function i(r,s){(s===void 0||s.length===0)&&(s=n.IntStream.UNKNOWN_SOURCE_NAME);let a=e.CodePointBuffer.builder(r.length),c=new Uint16Array(r.length);for(let u=0;u<r.length;u++)c[u]=r.charCodeAt(u);return a.append(c),t.CodePointCharStream.fromBuffer(a.build(),s)}o.fromString=i})(l.CharStreams||(l.CharStreams={}))}(oa)),oa}var Xt={},Kt={},wh;function Ud(){if(wh)return Kt;wh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Kt&&Kt.__decorate||function(c,u,h,f){var d=arguments.length,p=d<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,h):f,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,u,h,f);else for(var x=c.length-1;x>=0;x--)(S=c[x])&&(p=(d<3?S(p):d>3?S(u,h,p):S(u,h))||p);return d>3&&p&&Object.defineProperty(u,h,p),p},e=Kt&&Kt.__param||function(c,u){return function(h,f){u(h,f,c)}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.BufferedTokenStream=void 0;const t=$e(),n=Vi(),o=We(),i=Pr(),r=Z(),s=Be();let a=class{constructor(u){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,u==null)throw new Error("tokenSource cannot be null");this._tokenSource=u}get tokenSource(){return this._tokenSource}set tokenSource(u){this._tokenSource=u,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(u){}seek(u){this.lazyInit(),this.p=this.adjustSeekIndex(u)}get size(){return this.tokens.length}consume(){let u;if(this.p>=0?this.fetchedEOF?u=this.p<this.tokens.length-1:u=this.p<this.tokens.length:u=!1,!u&&this.LA(1)===s.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(u){t(u>=0);let h=u-this.tokens.length+1;return h>0?this.fetch(h)>=h:!0}fetch(u){if(this.fetchedEOF)return 0;for(let h=0;h<u;h++){let f=this.tokenSource.nextToken();if(this.isWritableToken(f)&&(f.tokenIndex=this.tokens.length),this.tokens.push(f),f.type===s.Token.EOF)return this.fetchedEOF=!0,h+1}return u}get(u){if(u<0||u>=this.tokens.length)throw new RangeError("token index "+u+" out of range 0.."+(this.tokens.length-1));return this.tokens[u]}getRange(u,h){if(u<0||h<0)return[];this.lazyInit();let f=new Array;h>=this.tokens.length&&(h=this.tokens.length-1);for(let d=u;d<=h;d++){let p=this.tokens[d];if(p.type===s.Token.EOF)break;f.push(p)}return f}LA(u){let h=this.LT(u);return h?h.type:s.Token.INVALID_TYPE}tryLB(u){if(!(this.p-u<0))return this.tokens[this.p-u]}LT(u){let h=this.tryLT(u);if(h===void 0)throw new RangeError("requested lookback index out of range");return h}tryLT(u){if(this.lazyInit(),u===0)throw new RangeError("0 is not a valid lookahead index");if(u<0)return this.tryLB(-u);let h=this.p+u-1;return this.sync(h),h>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[h]}adjustSeekIndex(u){return u}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(u,h,f){if(this.lazyInit(),u===void 0)return t(h===void 0&&f===void 0),this.tokens;if(h===void 0&&(h=this.tokens.length-1),u<0||h>=this.tokens.length||h<0||u>=this.tokens.length)throw new RangeError("start "+u+" or stop "+h+" not in 0.."+(this.tokens.length-1));if(u>h)return[];if(f===void 0)return this.tokens.slice(u,h+1);typeof f=="number"&&(f=new Set().add(f));let d=f,p=this.tokens.slice(u,h+1);return p=p.filter(S=>d.has(S.type)),p}nextTokenOnChannel(u,h){if(this.sync(u),u>=this.size)return this.size-1;let f=this.tokens[u];for(;f.channel!==h;){if(f.type===s.Token.EOF)return u;u++,this.sync(u),f=this.tokens[u]}return u}previousTokenOnChannel(u,h){if(this.sync(u),u>=this.size)return this.size-1;for(;u>=0;){let f=this.tokens[u];if(f.type===s.Token.EOF||f.channel===h)return u;u--}return u}getHiddenTokensToRight(u,h=-1){if(this.lazyInit(),u<0||u>=this.tokens.length)throw new RangeError(u+" not in 0.."+(this.tokens.length-1));let f=this.nextTokenOnChannel(u+1,i.Lexer.DEFAULT_TOKEN_CHANNEL),d,p=u+1;return f===-1?d=this.size-1:d=f,this.filterForChannel(p,d,h)}getHiddenTokensToLeft(u,h=-1){if(this.lazyInit(),u<0||u>=this.tokens.length)throw new RangeError(u+" not in 0.."+(this.tokens.length-1));if(u===0)return[];let f=this.previousTokenOnChannel(u-1,i.Lexer.DEFAULT_TOKEN_CHANNEL);if(f===u-1)return[];let d=f+1,p=u-1;return this.filterForChannel(d,p,h)}filterForChannel(u,h,f){let d=new Array;for(let p=u;p<=h;p++){let S=this.tokens[p];f===-1?S.channel!==i.Lexer.DEFAULT_TOKEN_CHANNEL&&d.push(S):S.channel===f&&d.push(S)}return d}get sourceName(){return this.tokenSource.sourceName}getText(u){u===void 0?u=o.Interval.of(0,this.size-1):u instanceof o.Interval||(u=u.sourceInterval);let h=u.a,f=u.b;if(h<0||f<0)return"";this.fill(),f>=this.tokens.length&&(f=this.tokens.length-1);let d="";for(let p=h;p<=f;p++){let S=this.tokens[p];if(S.type===s.Token.EOF)break;d+=S.text}return d.toString()}getTextFromRange(u,h){return this.isToken(u)&&this.isToken(h)?this.getText(o.Interval.of(u.tokenIndex,h.tokenIndex)):""}fill(){this.lazyInit();const u=1e3;for(;;)if(this.fetch(u)<u)return}isWritableToken(u){return u instanceof n.CommonToken}isToken(u){return u instanceof n.CommonToken}};return l([r.NotNull],a.prototype,"_tokenSource",void 0),l([r.Override],a.prototype,"tokenSource",null),l([r.Override],a.prototype,"index",null),l([r.Override],a.prototype,"mark",null),l([r.Override],a.prototype,"release",null),l([r.Override],a.prototype,"seek",null),l([r.Override],a.prototype,"size",null),l([r.Override],a.prototype,"consume",null),l([r.Override],a.prototype,"get",null),l([r.Override],a.prototype,"LA",null),l([r.NotNull,r.Override],a.prototype,"LT",null),l([r.Override],a.prototype,"sourceName",null),l([r.NotNull,r.Override],a.prototype,"getText",null),l([r.NotNull,r.Override],a.prototype,"getTextFromRange",null),a=l([e(0,r.NotNull)],a),Kt.BufferedTokenStream=a,Kt}var Oh;function nl(){if(Oh)return Xt;Oh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Xt&&Xt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=Xt&&Xt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.CommonTokenStream=void 0;const t=Ud(),n=Z(),o=Be();let i=class extends t.BufferedTokenStream{constructor(s,a=o.Token.DEFAULT_CHANNEL){super(s),this.channel=a}adjustSeekIndex(s){return this.nextTokenOnChannel(s,this.channel)}tryLB(s){if(this.p-s<0)return;let a=this.p,c=1;for(;c<=s&&a>0;)a=this.previousTokenOnChannel(a-1,this.channel),c++;if(!(a<0))return this.tokens[a]}tryLT(s){if(this.lazyInit(),s===0)throw new RangeError("0 is not a valid lookahead index");if(s<0)return this.tryLB(-s);let a=this.p,c=1;for(;c<s;)this.sync(a+1)&&(a=this.nextTokenOnChannel(a+1,this.channel)),c++;return this.tokens[a]}getNumberOfOnChannelTokens(){let s=0;this.fill();for(let a of this.tokens)if(a.channel===this.channel&&s++,a.type===o.Token.EOF)break;return s}};return l([n.Override],i.prototype,"adjustSeekIndex",null),l([n.Override],i.prototype,"tryLB",null),l([n.Override],i.prototype,"tryLT",null),i=l([e(0,n.NotNull)],i),Xt.CommonTokenStream=i,Xt}var Qt={},Fh;function $d(){if(Fh)return Qt;Fh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Qt&&Qt.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=Qt&&Qt.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.ListTokenSource=void 0;const t=Wa(),n=Z(),o=Be();let i=class{constructor(s,a){if(this.i=0,this._factory=t.CommonTokenFactory.DEFAULT,s==null)throw new Error("tokens cannot be null");this.tokens=s,this._sourceName=a}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let s=this.tokens[this.tokens.length-1],a=s.text;if(a!=null){let c=a.lastIndexOf(`
`);if(c>=0)return a.length-c-1}return s.charPositionInLine+s.stopIndex-s.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let a=-1;if(this.tokens.length>0){let u=this.tokens[this.tokens.length-1].stopIndex;u!==-1&&(a=u+1)}let c=Math.max(-1,a-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},o.Token.EOF,"EOF",o.Token.DEFAULT_CHANNEL,a,c,this.line,this.charPositionInLine)}return this.eofToken}let s=this.tokens[this.i];return this.i===this.tokens.length-1&&s.type===o.Token.EOF&&(this.eofToken=s),this.i++,s}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let s=this.tokens[this.tokens.length-1],a=s.line,c=s.text;if(c!=null)for(let u=0;u<c.length;u++)c.charAt(u)===`
`&&a++;return a}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let s=this.inputStream;return s!=null?s.sourceName:"List"}set tokenFactory(s){this._factory=s}get tokenFactory(){return this._factory}};return l([n.Override],i.prototype,"charPositionInLine",null),l([n.Override],i.prototype,"nextToken",null),l([n.Override],i.prototype,"line",null),l([n.Override],i.prototype,"inputStream",null),l([n.Override],i.prototype,"sourceName",null),l([n.Override,n.NotNull,e(0,n.NotNull)],i.prototype,"tokenFactory",null),i=l([e(0,n.NotNull)],i),Qt.ListTokenSource=i,Qt}var _i={},Ph;function X0(){if(Ph)return _i;Ph=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(_i,"__esModule",{value:!0}),_i.MultiMap=void 0;let l=class extends Map{constructor(){super()}map(t,n){let o=super.get(t);o||(o=[],super.set(t,o)),o.push(n)}getPairs(){let t=[];return this.forEach((n,o)=>{n.forEach(i=>{t.push([o,i])})}),t}};return _i.MultiMap=l,_i}var Ti={},Dh;function Vd(){if(Dh)return Ti;Dh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.ParseCancellationException=void 0;let l=class extends Error{constructor(t){super(t.message),this.cause=t,this.stack=t.stack}getCause(){return this.cause}};return Ti.ParseCancellationException=l,Ti}var Jt={},Rn={},Ih;function Wd(){if(Ih)return Rn;Ih=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Rn&&Rn.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.InterpreterRuleContext=void 0;const e=Z(),t=ot();let n=class extends t.ParserRuleContext{constructor(i,r,s){s!==void 0?super(r,s):super(),this._ruleIndex=i}get ruleIndex(){return this._ruleIndex}};return l([e.Override],n.prototype,"ruleIndex",null),Rn.InterpreterRuleContext=n,Rn}var Lh;function Gd(){if(Lh)return Jt;Lh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Jt&&Jt.__decorate||function(v,m,g,y){var T=arguments.length,A=T<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,g):y,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(v,m,g,y);else for(var R=v.length-1;R>=0;R--)(b=v[R])&&(A=(T<3?b(A):T>3?b(m,g,A):b(m,g))||A);return T>3&&A&&Object.defineProperty(m,g,A),A},e=Jt&&Jt.__param||function(v,m){return function(g,y){m(g,y,v)}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.ParserInterpreter=void 0;const t=mr(),n=He(),o=Fr(),i=So(),r=Ao(),s=Wd(),a=Id(),c=Z(),u=Z(),h=Qi(),f=Xi(),d=Nr(),p=Xa(),S=Be();let x=class Ra extends h.Parser{constructor(m,g,y,T,A){if(super(m instanceof Ra?m.inputStream:A),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,m instanceof Ra){let b=m;this._grammarFileName=b._grammarFileName,this._atn=b._atn,this.pushRecursionContextStates=b.pushRecursionContextStates,this._ruleNames=b._ruleNames,this._vocabulary=b._vocabulary,this.interpreter=new f.ParserATNSimulator(this._atn,this)}else{g=g,y=y,T=T,this._grammarFileName=m,this._atn=T,this._ruleNames=y.slice(0),this._vocabulary=g,this.pushRecursionContextStates=new o.BitSet(T.states.length);for(let b of T.states)b instanceof p.StarLoopEntryState&&b.precedenceRuleDecision&&this.pushRecursionContextStates.set(b.stateNumber);this.interpreter=new f.ParserATNSimulator(T,this)}}reset(m){m===void 0?super.reset():super.reset(m),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(m){let g=this._atn.ruleToStartState[m];for(this._rootContext=this.createInterpreterRuleContext(void 0,t.ATNState.INVALID_STATE_NUMBER,m),g.isPrecedenceRule?this.enterRecursionRule(this._rootContext,g.stateNumber,m,0):this.enterRule(this._rootContext,g.stateNumber,m);;){let y=this.atnState;switch(y.stateType){case n.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(g.isPrecedenceRule){let T=this._ctx,A=this._parentContextStack.pop();return this.unrollRecursionContexts(A[0]),T}else return this.exitRule(),this._rootContext;this.visitRuleStopState(y);break;default:try{this.visitState(y)}catch(T){if(T instanceof d.RecognitionException)this.state=this._atn.ruleToStopState[y.ruleIndex].stateNumber,this.context.exception=T,this.errorHandler.reportError(this,T),this.recover(T);else throw T}break}}}enterRecursionRule(m,g,y,T){this._parentContextStack.push([this._ctx,m.invokingState]),super.enterRecursionRule(m,g,y,T)}get atnState(){return this._atn.states[this.state]}visitState(m){let g=1;m.numberOfTransitions>1&&(g=this.visitDecisionState(m));let y=m.transition(g-1);switch(y.serializationType){case 1:if(this.pushRecursionContextStates.get(m.stateNumber)&&!(y.target instanceof a.LoopEndState)){let P=this._parentContextStack[this._parentContextStack.length-1],B=this.createInterpreterRuleContext(P[0],P[1],this._ctx.ruleIndex);this.pushNewRecursionContext(B,this._atn.ruleToStartState[m.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(y._label);break;case 2:case 7:case 8:y.matches(this._input.LA(1),S.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let T=y.target,A=T.ruleIndex,b=this.createInterpreterRuleContext(this._ctx,m.stateNumber,A);T.isPrecedenceRule?this.enterRecursionRule(b,T.stateNumber,A,y.precedence):this.enterRule(b,y.target.stateNumber,A);break;case 4:let R=y;if(!this.sempred(this._ctx,R.ruleIndex,R.predIndex))throw new i.FailedPredicateException(this);break;case 6:let N=y;this.action(this._ctx,N.ruleIndex,N.actionIndex);break;case 10:if(!this.precpred(this._ctx,y.precedence)){let P=y.precedence;throw new i.FailedPredicateException(this,`precpred(_ctx, ${P})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=y.target.stateNumber}visitDecisionState(m){let g;this.errorHandler.sync(this);let y=m.decision;return y===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(g=this.overrideDecisionAlt,this.overrideDecisionReached=!0):g=this.interpreter.adaptivePredict(this._input,y,this._ctx),g}createInterpreterRuleContext(m,g,y){return new s.InterpreterRuleContext(y,m,g)}visitRuleStopState(m){if(this._atn.ruleToStartState[m.ruleIndex].isPrecedenceRule){let T=this._parentContextStack.pop();this.unrollRecursionContexts(T[0]),this.state=T[1]}else this.exitRule();let y=this._atn.states[this.state].transition(0);this.state=y.followState.stateNumber}addDecisionOverride(m,g,y){this.overrideDecision=m,this.overrideDecisionInputIndex=g,this.overrideDecisionAlt=y}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(m){let g=this._input.index;if(this.errorHandler.recover(this,m),this._input.index===g){let y=m.getOffendingToken();if(!y)throw new Error("Expected exception to have an offending token");let T=y.tokenSource,A=T!==void 0?T.inputStream:void 0,b={source:T,stream:A};if(m instanceof r.InputMismatchException){let R=m.expectedTokens;if(R===void 0)throw new Error("Expected the exception to provide expected tokens");let N=S.Token.INVALID_TYPE;R.isNil||(N=R.minElement);let P=this.tokenFactory.create(b,N,y.text,S.Token.DEFAULT_CHANNEL,-1,-1,y.line,y.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,P))}else{y.tokenSource;let R=this.tokenFactory.create(b,S.Token.INVALID_TYPE,y.text,S.Token.DEFAULT_CHANNEL,-1,-1,y.line,y.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,R))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};return l([c.NotNull],x.prototype,"_vocabulary",void 0),l([u.Override],x.prototype,"reset",null),l([u.Override],x.prototype,"atn",null),l([u.Override],x.prototype,"vocabulary",null),l([u.Override],x.prototype,"ruleNames",null),l([u.Override],x.prototype,"grammarFileName",null),l([u.Override],x.prototype,"enterRecursionRule",null),x=l([e(1,c.NotNull)],x),Jt.ParserInterpreter=x,Jt}var Zt={},Bh;function K0(){if(Bh)return Zt;Bh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Zt&&Zt.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c},e=Zt&&Zt.__param||function(o,i){return function(r,s){i(r,s,o)}};Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.ParseTreeMatch=void 0;const t=Z();let n=class{constructor(i,r,s,a){if(!i)throw new Error("tree cannot be null");if(!r)throw new Error("pattern cannot be null");if(!s)throw new Error("labels cannot be null");this._tree=i,this._pattern=r,this._labels=s,this._mismatchedNode=a}get(i){let r=this._labels.get(i);if(!(!r||r.length===0))return r[r.length-1]}getAll(i){const r=this._labels.get(i);return r||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};return l([t.NotNull,e(0,t.NotNull)],n.prototype,"getAll",null),l([t.NotNull],n.prototype,"labels",null),l([t.NotNull],n.prototype,"pattern",null),l([t.NotNull],n.prototype,"tree",null),l([t.Override],n.prototype,"toString",null),n=l([e(0,t.NotNull),e(1,t.NotNull),e(2,t.NotNull)],n),Zt.ParseTreeMatch=n,Zt}var er={},bi={},Ri={},Mh;function Q0(){if(Mh)return Ri;Mh=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.XPathLexer=void 0;const l=tl(),e=Pr(),t=bo(),n=Vn(),o=gr();let i=class Xe extends e.Lexer{constructor(s){super(s),this._interp=new t.LexerATNSimulator(Xe._ATN,this)}get vocabulary(){return Xe.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return Xe.ruleNames}get serializedATN(){return Xe._serializedATN}get channelNames(){return Xe.channelNames}get modeNames(){return Xe.modeNames}action(s,a,c){switch(a){case 4:this.ID_action(s,c);break}}ID_action(s,a){switch(a){case 0:let c=this.text;c.charAt(0)===c.charAt(0).toUpperCase()?this.type=Xe.TOKEN_REF:this.type=Xe.RULE_REF;break}}static get _ATN(){return Xe.__ATN||(Xe.__ATN=new l.ATNDeserializer().deserialize(o.toCharArray(Xe._serializedATN))),Xe.__ATN}};return Ri.XPathLexer=i,i.TOKEN_REF=1,i.RULE_REF=2,i.ANYWHERE=3,i.ROOT=4,i.WILDCARD=5,i.BANG=6,i.ID=7,i.STRING=8,i.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],i.modeNames=["DEFAULT_MODE"],i.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"],i._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"],i._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"],i.VOCABULARY=new n.VocabularyImpl(i._LITERAL_NAMES,i._SYMBOLIC_NAMES,[]),i._serializedATNSegments=2,i._serializedATNSegment0=`
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r

2;C\\aac|\r(*<>?AOR_\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1"C\\c|\r(*<>?AOR_`,i._serializedATNSegment1=`1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`,i._serializedATN=o.join([i._serializedATNSegment0,i._serializedATNSegment1],""),Ri}var Nn={},kh;function J0(){if(kh)return Nn;kh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Nn&&Nn.__decorate||function(n,o,i,r){var s=arguments.length,a=s<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,o,i,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(s<3?c(a):s>3?c(o,i,a):c(o,i))||a);return s>3&&a&&Object.defineProperty(o,i,a),a};Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.XPathLexerErrorListener=void 0;const e=Z();let t=class{syntaxError(o,i,r,s,a,c){}};return l([e.Override],t.prototype,"syntaxError",null),Nn.XPathLexerErrorListener=t,Nn}var wn={},On={},zh;function ai(){if(zh)return On;zh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=On&&On.__decorate||function(n,o,i,r){var s=arguments.length,a=s<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,o,i,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(s<3?c(a):s>3?c(o,i,a):c(o,i))||a);return s>3&&a&&Object.defineProperty(o,i,a),a};Object.defineProperty(On,"__esModule",{value:!0}),On.XPathElement=void 0;const e=Z();let t=class{constructor(o){this.nodeName=o,this.invert=!1}toString(){let o=this.invert?"!":"";return Object.constructor.name+"["+o+this.nodeName+"]"}};return l([e.Override],t.prototype,"toString",null),On.XPathElement=t,On}var jh;function Z0(){if(jh)return wn;jh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=wn&&wn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(wn,"__esModule",{value:!0}),wn.XPathRuleAnywhereElement=void 0;const e=Z(),t=Gn(),n=ai();let o=class extends n.XPathElement{constructor(r,s){super(r),this.ruleIndex=s}evaluate(r){return t.Trees.findAllRuleNodes(r,this.ruleIndex)}};return l([e.Override],o.prototype,"evaluate",null),wn.XPathRuleAnywhereElement=o,wn}var Fn={},qh;function ex(){if(qh)return Fn;qh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Fn&&Fn.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.XPathRuleElement=void 0;const e=ot(),t=Z(),n=Gn(),o=ai();let i=class extends o.XPathElement{constructor(s,a){super(s),this.ruleIndex=a}evaluate(s){let a=[];for(let c of n.Trees.getChildren(s))c instanceof e.ParserRuleContext&&(c.ruleIndex===this.ruleIndex&&!this.invert||c.ruleIndex!==this.ruleIndex&&this.invert)&&a.push(c);return a}};return l([t.Override],i.prototype,"evaluate",null),Fn.XPathRuleElement=i,Fn}var Pn={},Hh;function tx(){if(Hh)return Pn;Hh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Pn&&Pn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.XPathTokenAnywhereElement=void 0;const e=Z(),t=Gn(),n=ai();let o=class extends n.XPathElement{constructor(r,s){super(r),this.tokenType=s}evaluate(r){return t.Trees.findAllTokenNodes(r,this.tokenType)}};return l([e.Override],o.prototype,"evaluate",null),Pn.XPathTokenAnywhereElement=o,Pn}var Dn={},Uh;function rx(){if(Uh)return Dn;Uh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Dn&&Dn.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.XPathTokenElement=void 0;const e=Z(),t=si(),n=Gn(),o=ai();let i=class extends o.XPathElement{constructor(s,a){super(s),this.tokenType=a}evaluate(s){let a=[];for(let c of n.Trees.getChildren(s))c instanceof t.TerminalNode&&(c.symbol.type===this.tokenType&&!this.invert||c.symbol.type!==this.tokenType&&this.invert)&&a.push(c);return a}};return l([e.Override],i.prototype,"evaluate",null),Dn.XPathTokenElement=i,Dn}var In={},$h;function nx(){if($h)return In;$h=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=In&&In.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(In,"__esModule",{value:!0}),In.XPathWildcardAnywhereElement=void 0;const e=Z(),t=Gn(),n=il(),o=ai();let i=class extends o.XPathElement{constructor(){super(n.XPath.WILDCARD)}evaluate(s){return this.invert?[]:t.Trees.getDescendants(s)}};return l([e.Override],i.prototype,"evaluate",null),In.XPathWildcardAnywhereElement=i,In}var Ln={},Vh;function ix(){if(Vh)return Ln;Vh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Ln&&Ln.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.XPathWildcardElement=void 0;const e=Z(),t=Gn(),n=il(),o=ai();let i=class extends o.XPathElement{constructor(){super(n.XPath.WILDCARD)}evaluate(s){let a=[];if(this.invert)return a;for(let c of t.Trees.getChildren(s))a.push(c);return a}};return l([e.Override],i.prototype,"evaluate",null),Ln.XPathWildcardElement=i,Ln}var Wh;function il(){if(Wh)return bi;Wh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(bi,"__esModule",{value:!0}),bi.XPath=void 0;const l=rl(),e=nl(),t=To(),n=ot(),o=Be(),i=Q0(),r=J0(),s=Z0(),a=ex(),c=tx(),u=rx(),h=nx(),f=ix();let d=class Yd{constructor(S,x){this.parser=S,this.path=x,this.elements=this.split(x)}split(S){let x=new i.XPathLexer(l.CharStreams.fromString(S));x.recover=A=>{throw A},x.removeErrorListeners(),x.addErrorListener(new r.XPathLexerErrorListener);let v=new e.CommonTokenStream(x);try{v.fill()}catch(A){if(A instanceof t.LexerNoViableAltException){let R="Invalid tokens or characters at index "+x.charPositionInLine+" in path '"+S+"' -- "+A.message;throw new RangeError(R)}throw A}let m=v.getTokens(),g=[],y=m.length,T=0;e:for(;T<y;){let A=m[T],b;switch(A.type){case i.XPathLexer.ROOT:case i.XPathLexer.ANYWHERE:let R=A.type===i.XPathLexer.ANYWHERE;T++,b=m[T];let N=b.type===i.XPathLexer.BANG;N&&(T++,b=m[T]);let P=this.getXPathElement(b,R);P.invert=N,g.push(P),T++;break;case i.XPathLexer.TOKEN_REF:case i.XPathLexer.RULE_REF:case i.XPathLexer.WILDCARD:g.push(this.getXPathElement(A,!1)),T++;break;case o.Token.EOF:break e;default:throw new Error("Unknowth path element "+A)}}return g}getXPathElement(S,x){if(S.type===o.Token.EOF)throw new Error("Missing path element at end of path");let v=S.text;if(v==null)throw new Error("Expected wordToken to have text content.");let m=this.parser.getTokenType(v),g=this.parser.getRuleIndex(v);switch(S.type){case i.XPathLexer.WILDCARD:return x?new h.XPathWildcardAnywhereElement:new f.XPathWildcardElement;case i.XPathLexer.TOKEN_REF:case i.XPathLexer.STRING:if(m===o.Token.INVALID_TYPE)throw new Error(v+" at index "+S.startIndex+" isn't a valid token name");return x?new c.XPathTokenAnywhereElement(v,m):new u.XPathTokenElement(v,m);default:if(g===-1)throw new Error(v+" at index "+S.startIndex+" isn't a valid rule name");return x?new s.XPathRuleAnywhereElement(v,g):new a.XPathRuleElement(v,g)}}static findAll(S,x,v){return new Yd(v,x).evaluate(S)}evaluate(S){let x=new n.ParserRuleContext;x.addChild(S);let v=new Set([x]),m=0;for(;m<this.elements.length;){let g=new Set;for(let y of v)y.childCount>0&&this.elements[m].evaluate(y).forEach(g.add,g);m++,v=g}return v}};return bi.XPath=d,d.WILDCARD="*",d.NOT="!",bi}var Gh;function ox(){if(Gh)return er;Gh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=er&&er.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=er&&er.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(er,"__esModule",{value:!0}),er.ParseTreePattern=void 0;const t=Z(),n=il();let o=class{constructor(r,s,a,c){this._matcher=r,this._patternRuleIndex=a,this._pattern=s,this._patternTree=c}match(r){return this._matcher.match(r,this)}matches(r){return this._matcher.match(r,this).succeeded}findAll(r,s){let a=n.XPath.findAll(r,s,this._matcher.parser),c=[];for(let u of a){let h=this.match(u);h.succeeded&&c.push(h)}return c}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};return l([t.NotNull],o.prototype,"_pattern",void 0),l([t.NotNull],o.prototype,"_patternTree",void 0),l([t.NotNull],o.prototype,"_matcher",void 0),l([t.NotNull,e(0,t.NotNull)],o.prototype,"match",null),l([e(0,t.NotNull)],o.prototype,"matches",null),l([t.NotNull,e(0,t.NotNull),e(1,t.NotNull)],o.prototype,"findAll",null),l([t.NotNull],o.prototype,"matcher",null),l([t.NotNull],o.prototype,"pattern",null),l([t.NotNull],o.prototype,"patternTree",null),o=l([e(0,t.NotNull),e(1,t.NotNull),e(3,t.NotNull)],o),er.ParseTreePattern=o,er}var tr={},Yh;function sx(){if(Yh)return tr;Yh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=tr&&tr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=tr&&tr.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(tr,"__esModule",{value:!0}),tr.RuleTagToken=void 0;const t=Z(),n=Be();let o=class{constructor(r,s,a){if(r==null||r.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=r,this.bypassTokenType=s,this._label=a}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return n.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};return l([t.NotNull],o.prototype,"ruleName",null),l([t.Override],o.prototype,"channel",null),l([t.Override],o.prototype,"text",null),l([t.Override],o.prototype,"type",null),l([t.Override],o.prototype,"line",null),l([t.Override],o.prototype,"charPositionInLine",null),l([t.Override],o.prototype,"tokenIndex",null),l([t.Override],o.prototype,"startIndex",null),l([t.Override],o.prototype,"stopIndex",null),l([t.Override],o.prototype,"tokenSource",null),l([t.Override],o.prototype,"inputStream",null),l([t.Override],o.prototype,"toString",null),o=l([e(0,t.NotNull)],o),tr.RuleTagToken=o,tr}var Bn={},Ni={},Xh;function Xd(){if(Xh)return Ni;Xh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Chunk=void 0;let l=class{};return Ni.Chunk=l,Ni}var Kh;function ax(){if(Kh)return Bn;Kh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Bn&&Bn.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.TagChunk=void 0;const e=Xd(),t=Z();let n=class extends e.Chunk{constructor(i,r){if(super(),i==null||i.length===0)throw new Error("tag cannot be null or empty");this._tag=i,this._label=r}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}};return l([t.NotNull],n.prototype,"tag",null),l([t.Override],n.prototype,"toString",null),Bn.TagChunk=n,Bn}var rr={},Qh;function lx(){if(Qh)return rr;Qh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=rr&&rr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=rr&&rr.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(rr,"__esModule",{value:!0}),rr.TextChunk=void 0;const t=Xd(),n=Z();let o=class extends t.Chunk{constructor(r){if(super(),r==null)throw new Error("text cannot be null");this._text=r}get text(){return this._text}toString(){return"'"+this._text+"'"}};return l([n.NotNull],o.prototype,"_text",void 0),l([n.NotNull],o.prototype,"text",null),l([n.Override],o.prototype,"toString",null),o=l([e(0,n.NotNull)],o),rr.TextChunk=o,rr}var nr={},Jh;function ux(){if(Jh)return nr;Jh=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=nr&&nr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=nr&&nr.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(nr,"__esModule",{value:!0}),nr.TokenTagToken=void 0;const t=Vi(),n=Z();let o=class extends t.CommonToken{constructor(r,s,a){super(s),this._tokenName=r,this._label=a}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};return l([n.NotNull],o.prototype,"_tokenName",void 0),l([n.NotNull],o.prototype,"tokenName",null),l([n.Override],o.prototype,"text",null),l([n.Override],o.prototype,"toString",null),o=l([e(0,n.NotNull)],o),nr.TokenTagToken=o,nr}var Zh;function cx(){return Zh||(Zh=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Tn&&Tn.__decorate||function(b,R,N,P){var B=arguments.length,I=B<3?R:P===null?P=Object.getOwnPropertyDescriptor(R,N):P,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(b,R,N,P);else for(var J=b.length-1;J>=0;J--)(V=b[J])&&(I=(B<3?V(I):B>3?V(R,N,I):V(R,N))||I);return B>3&&I&&Object.defineProperty(R,N,I),I},t=Tn&&Tn.__param||function(b,R){return function(N,P){R(N,P,b)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ParseTreePatternMatcher=void 0;const n=Kd(),o=rl(),i=nl(),r=$d(),s=X0(),a=Z(),c=Vd(),u=Gd(),h=ot(),f=K0(),d=ox(),p=Nr(),S=el(),x=sx(),v=ax(),m=si(),g=lx(),y=Be(),T=ux();let A=class Na{constructor(R,N){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=R,this._parser=N}setDelimiters(R,N,P){if(!R)throw new Error("start cannot be null or empty");if(!N)throw new Error("stop cannot be null or empty");this.start=R,this.stop=N,this.escape=P,this.escapeRE=new RegExp(P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(R,N,P=0){if(typeof N=="string"){let B=this.compile(N,P);return this.matches(R,B)}else{let B=new s.MultiMap;return!this.matchImpl(R,N.patternTree,B)}}match(R,N,P=0){if(typeof N=="string"){let B=this.compile(N,P);return this.match(R,B)}else{let B=new s.MultiMap,I=this.matchImpl(R,N.patternTree,B);return new f.ParseTreeMatch(R,N,B,I)}}compile(R,N){let P=this.tokenize(R),B=new r.ListTokenSource(P),I=new i.CommonTokenStream(B);const V=this._parser;let J=new u.ParserInterpreter(V.grammarFileName,V.vocabulary,V.ruleNames,V.getATNWithBypassAlts(),I),te;try{J.errorHandler=new n.BailErrorStrategy,te=J.parse(N)}catch(oe){throw oe instanceof c.ParseCancellationException?oe.getCause():oe instanceof p.RecognitionException?oe:oe instanceof Error?new Na.CannotInvokeStartRule(oe):oe}if(I.LA(1)!==y.Token.EOF)throw new Na.StartRuleDoesNotConsumeFullPattern;return new d.ParseTreePattern(this,R,N,te)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(R,N,P){if(!R)throw new TypeError("tree cannot be null");if(!N)throw new TypeError("patternTree cannot be null");if(R instanceof m.TerminalNode&&N instanceof m.TerminalNode){let B;if(R.symbol.type===N.symbol.type)if(N.symbol instanceof T.TokenTagToken){let I=N.symbol;P.map(I.tokenName,R);const V=I.label;V&&P.map(V,R)}else R.text===N.text||B||(B=R);else B||(B=R);return B}if(R instanceof h.ParserRuleContext&&N instanceof h.ParserRuleContext){let B,I=this.getRuleTagToken(N);if(I){if(R.ruleContext.ruleIndex===N.ruleContext.ruleIndex){P.map(I.ruleName,R);const J=I.label;J&&P.map(J,R)}else B||(B=R);return B}if(R.childCount!==N.childCount)return B||(B=R),B;let V=R.childCount;for(let J=0;J<V;J++){let te=this.matchImpl(R.getChild(J),N.getChild(J),P);if(te)return te}return B}return R}getRuleTagToken(R){if(R instanceof S.RuleNode&&R.childCount===1&&R.getChild(0)instanceof m.TerminalNode){let N=R.getChild(0);if(N.symbol instanceof x.RuleTagToken)return N.symbol}}tokenize(R){let N=this.split(R),P=[];for(let B of N)if(B instanceof v.TagChunk){let I=B;const V=I.tag.substr(0,1);if(V===V.toUpperCase()){let J=this._parser.getTokenType(I.tag);if(J===y.Token.INVALID_TYPE)throw new Error("Unknown token "+I.tag+" in pattern: "+R);let te=new T.TokenTagToken(I.tag,J,I.label);P.push(te)}else if(V===V.toLowerCase()){let J=this._parser.getRuleIndex(I.tag);if(J===-1)throw new Error("Unknown rule "+I.tag+" in pattern: "+R);let te=this._parser.getATNWithBypassAlts().ruleToTokenType[J];P.push(new x.RuleTagToken(I.tag,te,I.label))}else throw new Error("invalid tag: "+I.tag+" in pattern: "+R)}else{let I=B;this._lexer.inputStream=o.CharStreams.fromString(I.text);let V=this._lexer.nextToken();for(;V.type!==y.Token.EOF;)P.push(V),V=this._lexer.nextToken()}return P}split(R){let N=0,P=R.length,B=[],I=[],V=[];for(;N<P;)N===R.indexOf(this.escape+this.start,N)?N+=this.escape.length+this.start.length:N===R.indexOf(this.escape+this.stop,N)?N+=this.escape.length+this.stop.length:N===R.indexOf(this.start,N)?(I.push(N),N+=this.start.length):N===R.indexOf(this.stop,N)?(V.push(N),N+=this.stop.length):N++;if(I.length>V.length)throw new Error("unterminated tag in pattern: "+R);if(I.length<V.length)throw new Error("missing start tag in pattern: "+R);let J=I.length;for(let te=0;te<J;te++)if(I[te]>=V[te])throw new Error("tag delimiters out of order in pattern: "+R);if(J===0){let te=R.substring(0,P);B.push(new g.TextChunk(te))}if(J>0&&I[0]>0){let te=R.substring(0,I[0]);B.push(new g.TextChunk(te))}for(let te=0;te<J;te++){let oe=R.substring(I[te]+this.start.length,V[te]),ge=oe,ce,ee=oe.indexOf(":");if(ee>=0&&(ce=oe.substring(0,ee),ge=oe.substring(ee+1,oe.length)),B.push(new v.TagChunk(ge,ce)),te+1<J){let G=R.substring(V[te]+this.stop.length,I[te+1]);B.push(new g.TextChunk(G))}}if(J>0){let te=V[J-1]+this.stop.length;if(te<P){let oe=R.substring(te,P);B.push(new g.TextChunk(oe))}}for(let te=0;te<B.length;te++){let oe=B[te];if(oe instanceof g.TextChunk){let ge=oe.text.replace(this.escapeRE,"");ge.length<oe.text.length&&(B[te]=new g.TextChunk(ge))}}return B}};e([a.NotNull,t(1,a.NotNull)],A.prototype,"match",null),e([a.NotNull],A.prototype,"lexer",null),e([a.NotNull],A.prototype,"parser",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],A.prototype,"matchImpl",null),l.ParseTreePatternMatcher=A,function(b){class R extends Error{constructor(B){super(`CannotInvokeStartRule: ${B}`),this.error=B}}b.CannotInvokeStartRule=R;class N extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}b.StartRuleDoesNotConsumeFullPattern=N}(A=l.ParseTreePatternMatcher||(l.ParseTreePatternMatcher={}))}(Tn)),Tn}var ir={},or={},sr={},ef;function Ki(){if(ef)return sr;ef=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=sr&&sr.__decorate||function(o,i,r,s){var a=arguments.length,c=a<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,r):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,i,r,s);else for(var h=o.length-1;h>=0;h--)(u=o[h])&&(c=(a<3?u(c):a>3?u(i,r,c):u(i,r))||c);return a>3&&c&&Object.defineProperty(i,r,c),c},e=sr&&sr.__param||function(o,i){return function(r,s){i(r,s,o)}};Object.defineProperty(sr,"__esModule",{value:!0}),sr.DecisionEventInfo=void 0;const t=Z();let n=class{constructor(i,r,s,a,c,u){this.decision=i,this.fullCtx=u,this.stopIndex=c,this.input=s,this.startIndex=a,this.state=r}};return l([t.NotNull],n.prototype,"input",void 0),n=l([e(2,t.NotNull)],n),sr.DecisionEventInfo=n,sr}var tf;function hx(){if(tf)return or;tf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=or&&or.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=or&&or.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(or,"__esModule",{value:!0}),or.AmbiguityInfo=void 0;const t=Ki(),n=Z();let o=class extends t.DecisionEventInfo{constructor(r,s,a,c,u,h){super(r,s,c,u,h,s.useContext),this.ambigAlts=a}get ambiguousAlternatives(){return this.ambigAlts}};return l([n.NotNull],o.prototype,"ambigAlts",void 0),l([n.NotNull],o.prototype,"ambiguousAlternatives",null),o=l([e(1,n.NotNull),e(2,n.NotNull),e(3,n.NotNull)],o),or.AmbiguityInfo=o,or}var ar={},rf;function fx(){if(rf)return ar;rf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=ar&&ar.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=ar&&ar.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(ar,"__esModule",{value:!0}),ar.ContextSensitivityInfo=void 0;const t=Ki(),n=Z();let o=class extends t.DecisionEventInfo{constructor(r,s,a,c,u){super(r,s,a,c,u,!0)}};return o=l([e(1,n.NotNull),e(2,n.NotNull)],o),ar.ContextSensitivityInfo=o,ar}var Mn={},nf;function dx(){if(nf)return Mn;nf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Mn&&Mn.__decorate||function(n,o,i,r){var s=arguments.length,a=s<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,i):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,o,i,r);else for(var u=n.length-1;u>=0;u--)(c=n[u])&&(a=(s<3?c(a):s>3?c(o,i,a):c(o,i))||a);return s>3&&a&&Object.defineProperty(o,i,a),a};Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.DecisionInfo=void 0;const e=Z();let t=class{constructor(o){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=o}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}};return l([e.Override],t.prototype,"toString",null),Mn.DecisionInfo=t,Mn}var lr={},of;function px(){if(of)return lr;of=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=lr&&lr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=lr&&lr.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(lr,"__esModule",{value:!0}),lr.ErrorInfo=void 0;const t=Ki(),n=Z();let o=class extends t.DecisionEventInfo{constructor(r,s,a,c,u){super(r,s,a,c,u,s.useContext)}};return o=l([e(1,n.NotNull),e(2,n.NotNull)],o),lr.ErrorInfo=o,lr}var ur={},sf;function xx(){if(sf)return ur;sf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=ur&&ur.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=ur&&ur.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(ur,"__esModule",{value:!0}),ur.LookaheadEventInfo=void 0;const t=Ki(),n=Z();let o=class extends t.DecisionEventInfo{constructor(r,s,a,c,u,h,f){super(r,s,c,u,h,f),this.predictedAlt=a}};return o=l([e(3,n.NotNull)],o),ur.LookaheadEventInfo=o,ur}var cr={},af;function mx(){if(af)return cr;af=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=cr&&cr.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u},e=cr&&cr.__param||function(i,r){return function(s,a){r(s,a,i)}};Object.defineProperty(cr,"__esModule",{value:!0}),cr.PredicateEvalInfo=void 0;const t=Ki(),n=Z();let o=class extends t.DecisionEventInfo{constructor(r,s,a,c,u,h,f,d){super(s,r,a,c,u,r.useContext),this.semctx=h,this.evalResult=f,this.predictedAlt=d}};return o=l([e(0,n.NotNull),e(2,n.NotNull),e(5,n.NotNull)],o),cr.PredicateEvalInfo=o,cr}var lf;function uf(){if(lf)return ir;lf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=ir&&ir.__decorate||function(S,x,v,m){var g=arguments.length,y=g<3?x:m===null?m=Object.getOwnPropertyDescriptor(x,v):m,T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(S,x,v,m);else for(var A=S.length-1;A>=0;A--)(T=S[A])&&(y=(g<3?T(y):g>3?T(x,v,y):T(x,v))||y);return g>3&&y&&Object.defineProperty(x,v,y),y},e=ir&&ir.__param||function(S,x){return function(v,m){x(v,m,S)}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.ProfilingATNSimulator=void 0;const t=hx(),n=ht(),o=_o(),i=fx(),r=dx(),s=px(),a=Z(),c=xx(),u=Xi(),h=mx(),f=ii(),d=kd();let p=class extends u.ParserATNSimulator{constructor(x){super(x.interpreter.atn,x),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let v=0;v<this.numDecisions;v++)this.decisions.push(new r.DecisionInfo(v))}adaptivePredict(x,v,m,g){if(g!==void 0)return super.adaptivePredict(x,v,m,g);try{this._input=x,this._startIndex=x.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=v,this.currentState=void 0,this.conflictingAltResolvedBySLL=n.ATN.INVALID_ALT_NUMBER;let y=process.hrtime(),T=super.adaptivePredict(x,v,m),A=process.hrtime(),b=(A[0]-y[0])*1e9;b===0?b=A[1]-y[1]:b+=1e9-y[1]+A[1],this.decisions[v].timeInPrediction+=b,this.decisions[v].invocations++;let R=this._sllStopIndex-this._startIndex+1;if(this.decisions[v].SLL_TotalLook+=R,this.decisions[v].SLL_MinLook=this.decisions[v].SLL_MinLook===0?R:Math.min(this.decisions[v].SLL_MinLook,R),R>this.decisions[v].SLL_MaxLook&&(this.decisions[v].SLL_MaxLook=R,this.decisions[v].SLL_MaxLookEvent=new c.LookaheadEventInfo(v,void 0,T,x,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let N=this._llStopIndex-this._startIndex+1;this.decisions[v].LL_TotalLook+=N,this.decisions[v].LL_MinLook=this.decisions[v].LL_MinLook===0?N:Math.min(this.decisions[v].LL_MinLook,N),N>this.decisions[v].LL_MaxLook&&(this.decisions[v].LL_MaxLook=N,this.decisions[v].LL_MaxLookEvent=new c.LookaheadEventInfo(v,void 0,T,x,this._startIndex,this._llStopIndex,!0))}return T}finally{this._input=void 0,this.currentDecision=-1}}getStartState(x,v,m,g){let y=super.getStartState(x,v,m,g);return this.currentState=y,y}computeStartState(x,v,m){let g=super.computeStartState(x,v,m);return this.currentState=g,g}computeReachSet(x,v,m,g){if(this._input===void 0)throw new Error("Invalid state");let y=super.computeReachSet(x,v,m,g);return y==null&&this.decisions[this.currentDecision].errors.push(new s.ErrorInfo(this.currentDecision,v,this._input,this._startIndex,this._input.index)),this.currentState=y,y}getExistingTargetState(x,v){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let m=super.getExistingTargetState(x,v);if(m!=null&&(this.currentState=new d.SimulatorState(this.currentState.outerContext,m,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,m===o.ATNSimulator.ERROR)){let g=new d.SimulatorState(this.currentState.outerContext,x,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new s.ErrorInfo(this.currentDecision,g,this._input,this._startIndex,this._input.index))}return m}computeTargetState(x,v,m,g,y,T){let A=super.computeTargetState(x,v,m,g,y,T);return y?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,A}evalSemanticContextImpl(x,v,m){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let g=super.evalSemanticContextImpl(x,v,m);if(!(x instanceof f.SemanticContext.PrecedencePredicate)){let T=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new h.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,T,x,g,m))}return g}reportContextSensitivity(x,v,m,g,y){if(this._input===void 0)throw new Error("Invalid state");v!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new i.ContextSensitivityInfo(this.currentDecision,m,this._input,g,y)),super.reportContextSensitivity(x,v,m,g,y)}reportAttemptingFullContext(x,v,m,g,y){v!=null?this.conflictingAltResolvedBySLL=v.nextSetBit(0):this.conflictingAltResolvedBySLL=m.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(x,v,m,g,y)}reportAmbiguity(x,v,m,g,y,T,A){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let b;T!=null?b=T.nextSetBit(0):b=A.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==n.ATN.INVALID_ALT_NUMBER&&b!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new i.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,m,g)),this.decisions[this.currentDecision].ambiguities.push(new t.AmbiguityInfo(this.currentDecision,this.currentState,T,this._input,m,g)),super.reportAmbiguity(x,v,m,g,y,T,A)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}};return l([a.Override,e(0,a.NotNull)],p.prototype,"adaptivePredict",null),l([a.Override],p.prototype,"getStartState",null),l([a.Override],p.prototype,"computeStartState",null),l([a.Override],p.prototype,"computeReachSet",null),l([a.Override],p.prototype,"getExistingTargetState",null),l([a.Override],p.prototype,"computeTargetState",null),l([a.Override],p.prototype,"evalSemanticContextImpl",null),l([a.Override],p.prototype,"reportContextSensitivity",null),l([a.Override],p.prototype,"reportAttemptingFullContext",null),l([a.Override,e(0,a.NotNull),e(5,a.NotNull),e(6,a.NotNull)],p.prototype,"reportAmbiguity",null),ir.ProfilingATNSimulator=p,ir}var cf;function Qi(){if(cf)return nt;cf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=nt&&nt.__decorate||function(g,y,T,A){var b=arguments.length,R=b<3?y:A===null?A=Object.getOwnPropertyDescriptor(y,T):A,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(g,y,T,A);else for(var P=g.length-1;P>=0;P--)(N=g[P])&&(R=(b<3?N(R):b>3?N(y,T,R):N(y,T))||R);return b>3&&R&&Object.defineProperty(y,T,R),R},e=nt&&nt.__param||function(g,y){return function(T,A){y(T,A,g)}},t=nt&&nt.__awaiter||function(g,y,T,A){function b(R){return R instanceof T?R:new T(function(N){N(R)})}return new(T||(T=Promise))(function(R,N){function P(V){try{I(A.next(V))}catch(J){N(J)}}function B(V){try{I(A.throw(V))}catch(J){N(J)}}function I(V){V.done?R(V.value):b(V.value).then(P,B)}I((A=A.apply(g,y||[])).next())})};Object.defineProperty(nt,"__esModule",{value:!0}),nt.Parser=void 0;const n=gr(),o=bd(),i=tl(),r=ol(),s=Za(),a=pd(),c=Pr(),u=Z(),h=G0(),f=Xi(),d=zd(),p=Gi(),S=si(),x=Be();class v{constructor(y,T){this.ruleNames=y,this.tokenStream=T}enterEveryRule(y){console.log("enter   "+this.ruleNames[y.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(y){console.log("exit    "+this.ruleNames[y.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(y){}visitTerminal(y){let T=y.parent.ruleContext,A=y.symbol;console.log("consume "+A+" rule "+this.ruleNames[T.ruleIndex])}}l([u.Override],v.prototype,"enterEveryRule",null),l([u.Override],v.prototype,"exitEveryRule",null),l([u.Override],v.prototype,"visitErrorNode",null),l([u.Override],v.prototype,"visitTerminal",null);let m=class co extends p.Recognizer{constructor(y){super(),this._errHandler=new r.DefaultErrorStrategy,this._precedenceStack=new a.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=y}reset(y){(y===void 0||y)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let T=this.interpreter;T!=null&&T.reset()}match(y){let T=this.currentToken;return T.type===y?(y===x.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(T=this._errHandler.recoverInline(this),this._buildParseTrees&&T.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,T))),T}matchWildcard(){let y=this.currentToken;return y.type>0?(this._errHandler.reportMatch(this),this.consume()):(y=this._errHandler.recoverInline(this),this._buildParseTrees&&y.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,y))),y}set buildParseTree(y){this._buildParseTrees=y}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(y){if(y==null)throw new TypeError("listener cannot be null");this._parseListeners.push(y)}removeParseListener(y){let T=this._parseListeners.findIndex(A=>A===y);T!==-1&&this._parseListeners.splice(T,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let y of this._parseListeners)y.enterEveryRule&&y.enterEveryRule(this._ctx),this._ctx.enterRule(y)}triggerExitRuleEvent(){for(let y=this._parseListeners.length-1;y>=0;y--){let T=this._parseListeners[y];this._ctx.exitRule(T),T.exitEveryRule&&T.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let y=this.serializedATN;if(y==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let T=co.bypassAltsAtnCache.get(y);if(T==null){let A=new o.ATNDeserializationOptions;A.isGenerateRuleBypassTransitions=!0,T=new i.ATNDeserializer(A).deserialize(n.toCharArray(y)),co.bypassAltsAtnCache.set(y,T)}return T}compileParseTreePattern(y,T,A){return t(this,void 0,void 0,function*(){if(!A){if(this.inputStream){let P=this.inputStream.tokenSource;P instanceof c.Lexer&&(A=P)}if(!A)throw new Error("Parser can't discover a lexer to use")}let b=A,R=yield Promise.resolve().then(()=>cx());return new R.ParseTreePatternMatcher(b,this).compile(y,T)})}get errorHandler(){return this._errHandler}set errorHandler(y){this._errHandler=y}get inputStream(){return this._input}set inputStream(y){this.reset(!1),this._input=y}get currentToken(){return this._input.LT(1)}notifyErrorListeners(y,T,A){T===void 0?T=this.currentToken:T===null&&(T=void 0),this._syntaxErrors++;let b=-1,R=-1;T!=null&&(b=T.line,R=T.charPositionInLine);let N=this.getErrorListenerDispatch();N.syntaxError&&N.syntaxError(this,T,b,R,y,A)}consume(){let y=this.currentToken;y.type!==co.EOF&&this.inputStream.consume();let T=this._parseListeners.length!==0;if(this._buildParseTrees||T)if(this._errHandler.inErrorRecoveryMode(this)){let A=this._ctx.addErrorNode(this.createErrorNode(this._ctx,y));if(T)for(let b of this._parseListeners)b.visitErrorNode&&b.visitErrorNode(A)}else{let A=this.createTerminalNode(this._ctx,y);if(this._ctx.addChild(A),T)for(let b of this._parseListeners)b.visitTerminal&&b.visitTerminal(A)}return y}createTerminalNode(y,T){return new S.TerminalNode(T)}createErrorNode(y,T){return new s.ErrorNode(T)}addContextToParseTree(){let y=this._ctx._parent;y!=null&&y.addChild(this._ctx)}enterRule(y,T,A){this.state=T,this._ctx=y,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(y,T,A){if(this.state=T,this._buildParseTrees){let b=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),b._parent=y,y.addChild(b)}this._ctx=y,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(y,T){if(y.altNumber=T,this._buildParseTrees&&this._ctx!==y){let A=this._ctx._parent;A!=null&&(A.removeLastChild(),A.addChild(y))}this._ctx=y}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(y,T,A,b){this.state=T,this._precedenceStack.push(b),this._ctx=y,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(y,T,A){let b=this._ctx;b._parent=y,b.invokingState=T,b._stop=this._input.tryLT(-1),this._ctx=y,this._ctx._start=b._start,this._buildParseTrees&&this._ctx.addChild(b),this.triggerEnterRuleEvent()}unrollRecursionContexts(y){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let T=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==y;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=y;T._parent=y,this._buildParseTrees&&y!=null&&y.addChild(T)}getInvokingContext(y){let T=this._ctx;for(;T&&T.ruleIndex!==y;)T=T._parent;return T}get context(){return this._ctx}set context(y){this._ctx=y}precpred(y,T){return T>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new d.ProxyParserErrorListener(this.getErrorListeners())}inContext(y){return!1}isExpectedToken(y){let T=this.interpreter.atn,A=this._ctx,b=T.states[this.state],R=T.nextTokens(b);if(R.contains(y))return!0;if(!R.contains(x.Token.EPSILON))return!1;for(;A!=null&&A.invokingState>=0&&R.contains(x.Token.EPSILON);){let P=T.states[A.invokingState].transition(0);if(R=T.nextTokens(P.followState),R.contains(y))return!0;A=A._parent}return!!(R.contains(x.Token.EPSILON)&&y===x.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let y=this.interpreter.atn,T=y.states[this.state];return y.nextTokens(T)}getRuleIndex(y){let T=this.getRuleIndexMap().get(y);return T??-1}get ruleContext(){return this._ctx}getRuleInvocationStack(y=this._ctx){let T=y,A=this.ruleNames,b=[];for(;T!=null;){let R=T.ruleIndex;R<0?b.push("n/a"):b.push(A[R]),T=T._parent}return b}getDFAStrings(){let y=[];for(let T of this._interp.atn.decisionToDFA)y.push(T.toString(this.vocabulary,this.ruleNames));return y}dumpDFA(){let y=!1;for(let T of this._interp.atn.decisionToDFA)T.isEmpty||(y&&console.log(),console.log("Decision "+T.decision+":"),process.stdout.write(T.toString(this.vocabulary,this.ruleNames)),y=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>uf()).then(y=>{let T=this.interpreter;if(T instanceof y.ProfilingATNSimulator)return new h.ParseInfo(T)})}setProfile(y){return t(this,void 0,void 0,function*(){let T=yield Promise.resolve().then(()=>uf()),A=this.interpreter;y?A instanceof T.ProfilingATNSimulator||(this.interpreter=new T.ProfilingATNSimulator(this)):A instanceof T.ProfilingATNSimulator&&(this.interpreter=new f.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(A.getPredictionMode())})}set isTrace(y){y?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new v(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}};return m.bypassAltsAtnCache=new Map,l([u.NotNull],m.prototype,"_errHandler",void 0),l([u.NotNull],m.prototype,"match",null),l([u.NotNull],m.prototype,"matchWildcard",null),l([u.NotNull],m.prototype,"getParseListeners",null),l([e(0,u.NotNull)],m.prototype,"addParseListener",null),l([u.NotNull],m.prototype,"getATNWithBypassAlts",null),l([u.NotNull,e(0,u.NotNull)],m.prototype,"errorHandler",null),l([u.Override],m.prototype,"inputStream",null),l([u.NotNull],m.prototype,"currentToken",null),l([e(0,u.NotNull)],m.prototype,"enterRule",null),l([u.Override,e(0,u.Nullable)],m.prototype,"precpred",null),l([u.Override],m.prototype,"getErrorListenerDispatch",null),l([u.NotNull],m.prototype,"getExpectedTokens",null),l([u.NotNull],m.prototype,"getExpectedTokensWithinCurrentRule",null),l([u.Override],m.prototype,"parseInfo",null),nt.Parser=m,nt}var hf;function No(){if(hf)return on;hf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=on&&on.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(on,"__esModule",{value:!0}),on.NoViableAltException=void 0;const e=Qi(),t=Nr(),n=Z();let o=class extends t.RecognitionException{constructor(r,s,a,c,u,h){r instanceof e.Parser&&(s===void 0&&(s=r.inputStream),a===void 0&&(a=r.currentToken),c===void 0&&(c=r.currentToken),h===void 0&&(h=r.context)),super(r,s,h),this._deadEndConfigs=u,this._startToken=a,this.setOffendingToken(r,c)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}};return l([n.NotNull],o.prototype,"_startToken",void 0),on.NoViableAltException=o,on}var ff;function ol(){if(ff)return ft;ff=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=ft&&ft.__decorate||function(f,d,p,S){var x=arguments.length,v=x<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,p):S,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,d,p,S);else for(var g=f.length-1;g>=0;g--)(m=f[g])&&(v=(x<3?m(v):x>3?m(d,p,v):m(d,p))||v);return x>3&&v&&Object.defineProperty(d,p,v),v},e=ft&&ft.__param||function(f,d){return function(p,S){d(p,S,f)}};Object.defineProperty(ft,"__esModule",{value:!0}),ft.DefaultErrorStrategy=void 0;const t=mr(),n=He(),o=So(),i=Ao(),r=Wn(),s=No(),a=it(),c=Be(),u=Z();let h=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER}reset(d){this.endErrorCondition(d)}beginErrorCondition(d){this.errorRecoveryMode=!0}inErrorRecoveryMode(d){return this.errorRecoveryMode}endErrorCondition(d){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(d){this.endErrorCondition(d)}reportError(d,p){this.inErrorRecoveryMode(d)||(this.beginErrorCondition(d),p instanceof s.NoViableAltException?this.reportNoViableAlternative(d,p):p instanceof i.InputMismatchException?this.reportInputMismatch(d,p):p instanceof o.FailedPredicateException?this.reportFailedPredicate(d,p):(console.error(`unknown recognition error type: ${p}`),this.notifyErrorListeners(d,p.toString(),p)))}notifyErrorListeners(d,p,S){let x=S.getOffendingToken(d);x===void 0&&(x=null),d.notifyErrorListeners(p,x,S)}recover(d,p){this.lastErrorIndex===d.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(d.state)&&d.consume(),this.lastErrorIndex=d.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new r.IntervalSet),this.lastErrorStates.add(d.state);let S=this.getErrorRecoverySet(d);this.consumeUntil(d,S)}sync(d){let p=d.interpreter.atn.states[d.state];if(this.inErrorRecoveryMode(d))return;let x=d.inputStream.LA(1),v=d.atn.nextTokens(p);if(v.contains(x)){this.nextTokensContext=void 0,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER;return}if(v.contains(c.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=d.context,this.nextTokensState=d.state);return}switch(p.stateType){case n.ATNStateType.BLOCK_START:case n.ATNStateType.STAR_BLOCK_START:case n.ATNStateType.PLUS_BLOCK_START:case n.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(d))return;throw new i.InputMismatchException(d);case n.ATNStateType.PLUS_LOOP_BACK:case n.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(d);let g=d.getExpectedTokens().or(this.getErrorRecoverySet(d));this.consumeUntil(d,g);break}}reportNoViableAlternative(d,p){let S=d.inputStream,x;S?p.startToken.type===c.Token.EOF?x="<EOF>":x=S.getTextFromRange(p.startToken,p.getOffendingToken()):x="<unknown input>";let v="no viable alternative at input "+this.escapeWSAndQuote(x);this.notifyErrorListeners(d,v,p)}reportInputMismatch(d,p){let S=p.expectedTokens,x=S?S.toStringVocabulary(d.vocabulary):"",v="mismatched input "+this.getTokenErrorDisplay(p.getOffendingToken(d))+" expecting "+x;this.notifyErrorListeners(d,v,p)}reportFailedPredicate(d,p){let x="rule "+d.ruleNames[d.context.ruleIndex]+" "+p.message;this.notifyErrorListeners(d,x,p)}reportUnwantedToken(d){if(this.inErrorRecoveryMode(d))return;this.beginErrorCondition(d);let p=d.currentToken,S=this.getTokenErrorDisplay(p),x=this.getExpectedTokens(d),v="extraneous input "+S+" expecting "+x.toStringVocabulary(d.vocabulary);d.notifyErrorListeners(v,p,void 0)}reportMissingToken(d){if(this.inErrorRecoveryMode(d))return;this.beginErrorCondition(d);let p=d.currentToken,x="missing "+this.getExpectedTokens(d).toStringVocabulary(d.vocabulary)+" at "+this.getTokenErrorDisplay(p);d.notifyErrorListeners(x,p,void 0)}recoverInline(d){let p=this.singleTokenDeletion(d);if(p)return d.consume(),p;if(this.singleTokenInsertion(d))return this.getMissingSymbol(d);throw this.nextTokensContext===void 0?new i.InputMismatchException(d):new i.InputMismatchException(d,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(d){let p=d.inputStream.LA(1),x=d.interpreter.atn.states[d.state].transition(0).target,v=d.interpreter.atn;return v.nextTokens(x,a.PredictionContext.fromRuleContext(v,d.context)).contains(p)?(this.reportMissingToken(d),!0):!1}singleTokenDeletion(d){let p=d.inputStream.LA(2);if(this.getExpectedTokens(d).contains(p)){this.reportUnwantedToken(d),d.consume();let x=d.currentToken;return this.reportMatch(d),x}}getMissingSymbol(d){let p=d.currentToken,S=this.getExpectedTokens(d),x=c.Token.INVALID_TYPE;S.isNil||(x=S.minElement);let v;x===c.Token.EOF?v="<missing EOF>":v="<missing "+d.vocabulary.getDisplayName(x)+">";let m=p,g=d.inputStream.tryLT(-1);return m.type===c.Token.EOF&&g!=null&&(m=g),this.constructToken(d.inputStream.tokenSource,x,v,m)}constructToken(d,p,S,x){let v=d.tokenFactory,m=x.tokenSource,g=m?m.inputStream:void 0;return v.create({source:d,stream:g},p,S,c.Token.DEFAULT_CHANNEL,-1,-1,x.line,x.charPositionInLine)}getExpectedTokens(d){return d.getExpectedTokens()}getTokenErrorDisplay(d){if(!d)return"<no token>";let p=this.getSymbolText(d);return p||(this.getSymbolType(d)===c.Token.EOF?p="<EOF>":p=`<${this.getSymbolType(d)}>`),this.escapeWSAndQuote(p)}getSymbolText(d){return d.text}getSymbolType(d){return d.type}escapeWSAndQuote(d){return d=d.replace(`
`,"\\n"),d=d.replace("\r","\\r"),d=d.replace("	","\\t"),"'"+d+"'"}getErrorRecoverySet(d){let p=d.interpreter.atn,S=d.context,x=new r.IntervalSet;for(;S&&S.invokingState>=0;){let m=p.states[S.invokingState].transition(0),g=p.nextTokens(m.followState);x.addAll(g),S=S._parent}return x.remove(c.Token.EPSILON),x}consumeUntil(d,p){let S=d.inputStream.LA(1);for(;S!==c.Token.EOF&&!p.contains(S);)d.consume(),S=d.inputStream.LA(1)}};return l([u.Override],h.prototype,"reset",null),l([e(0,u.NotNull)],h.prototype,"beginErrorCondition",null),l([u.Override],h.prototype,"inErrorRecoveryMode",null),l([e(0,u.NotNull)],h.prototype,"endErrorCondition",null),l([u.Override],h.prototype,"reportMatch",null),l([u.Override],h.prototype,"reportError",null),l([e(0,u.NotNull)],h.prototype,"notifyErrorListeners",null),l([u.Override],h.prototype,"recover",null),l([u.Override],h.prototype,"sync",null),l([e(0,u.NotNull),e(1,u.NotNull)],h.prototype,"reportNoViableAlternative",null),l([e(0,u.NotNull),e(1,u.NotNull)],h.prototype,"reportInputMismatch",null),l([e(0,u.NotNull),e(1,u.NotNull)],h.prototype,"reportFailedPredicate",null),l([e(0,u.NotNull)],h.prototype,"reportUnwantedToken",null),l([e(0,u.NotNull)],h.prototype,"reportMissingToken",null),l([u.Override],h.prototype,"recoverInline",null),l([e(0,u.NotNull)],h.prototype,"singleTokenInsertion",null),l([e(0,u.NotNull)],h.prototype,"singleTokenDeletion",null),l([u.NotNull,e(0,u.NotNull)],h.prototype,"getMissingSymbol",null),l([u.NotNull,e(0,u.NotNull)],h.prototype,"getExpectedTokens",null),l([e(0,u.NotNull)],h.prototype,"getSymbolText",null),l([e(0,u.NotNull)],h.prototype,"getSymbolType",null),l([u.NotNull,e(0,u.NotNull)],h.prototype,"escapeWSAndQuote",null),l([u.NotNull,e(0,u.NotNull)],h.prototype,"getErrorRecoverySet",null),l([e(0,u.NotNull),e(1,u.NotNull)],h.prototype,"consumeUntil",null),ft.DefaultErrorStrategy=h,ft}var df;function Kd(){if(df)return Mr;df=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=Mr&&Mr.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h};Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.BailErrorStrategy=void 0;const e=ol(),t=Ao(),n=Z(),o=Vd();let i=class extends e.DefaultErrorStrategy{recover(s,a){for(let c=s.context;c;c=c.parent)c.exception=a;throw new o.ParseCancellationException(a)}recoverInline(s){let a=new t.InputMismatchException(s);for(let c=s.context;c;c=c.parent)c.exception=a;throw new o.ParseCancellationException(a)}sync(s){}};return l([n.Override],i.prototype,"recover",null),l([n.Override],i.prototype,"recoverInline",null),l([n.Override],i.prototype,"sync",null),Mr.BailErrorStrategy=i,Mr}var aa={},pf;function gx(){if(pf)return aa;pf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(aa,"__esModule",{value:!0}),aa}var la={},xf;function yx(){return xf||(xf=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(l,"__esModule",{value:!0}),l.Dependents=void 0,function(e){e[e.SELF=0]="SELF",e[e.PARENTS=1]="PARENTS",e[e.CHILDREN=2]="CHILDREN",e[e.ANCESTORS=3]="ANCESTORS",e[e.DESCENDANTS=4]="DESCENDANTS",e[e.SIBLINGS=5]="SIBLINGS",e[e.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",e[e.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",e[e.PRECEEDING=8]="PRECEEDING",e[e.FOLLOWING=9]="FOLLOWING"}(l.Dependents||(l.Dependents={}))}(la)),la}var hr={},mf;function vx(){if(mf)return hr;mf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=hr&&hr.__decorate||function(r,s,a,c){var u=arguments.length,h=u<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,a):c,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(r,s,a,c);else for(var d=r.length-1;d>=0;d--)(f=r[d])&&(h=(u<3?f(h):u>3?f(s,a,h):f(s,a))||h);return u>3&&h&&Object.defineProperty(s,a,h),h},e=hr&&hr.__param||function(r,s){return function(a,c){s(a,c,r)}};Object.defineProperty(hr,"__esModule",{value:!0}),hr.DiagnosticErrorListener=void 0;const t=Fr(),n=Z(),o=We();let i=class{constructor(s=!0){this.exactOnly=s,this.exactOnly=s}syntaxError(s,a,c,u,h,f){}reportAmbiguity(s,a,c,u,h,f,d){if(this.exactOnly&&!h)return;let p=this.getDecisionDescription(s,a),S=this.getConflictingAlts(f,d),x=s.inputStream.getText(o.Interval.of(c,u)),v=`reportAmbiguity d=${p}: ambigAlts=${S}, input='${x}'`;s.notifyErrorListeners(v)}reportAttemptingFullContext(s,a,c,u,h,f){let d=this.getDecisionDescription(s,a),p=s.inputStream.getText(o.Interval.of(c,u)),S=`reportAttemptingFullContext d=${d}, input='${p}'`;s.notifyErrorListeners(S)}reportContextSensitivity(s,a,c,u,h,f){let d=this.getDecisionDescription(s,a),p=s.inputStream.getText(o.Interval.of(c,u)),S=`reportContextSensitivity d=${d}, input='${p}'`;s.notifyErrorListeners(S)}getDecisionDescription(s,a){let c=a.decision,u=a.atnStartState.ruleIndex,h=s.ruleNames;if(u<0||u>=h.length)return c.toString();let f=h[u];return f?`${c} (${f})`:c.toString()}getConflictingAlts(s,a){if(s!=null)return s;let c=new t.BitSet;for(let u of a)c.set(u.alt);return c}};return l([n.Override],i.prototype,"syntaxError",null),l([n.Override,e(0,n.NotNull),e(1,n.NotNull),e(6,n.NotNull)],i.prototype,"reportAmbiguity",null),l([n.Override,e(0,n.NotNull),e(1,n.NotNull),e(5,n.NotNull)],i.prototype,"reportAttemptingFullContext",null),l([n.Override,e(0,n.NotNull),e(1,n.NotNull),e(5,n.NotNull)],i.prototype,"reportContextSensitivity",null),l([e(0,n.NotNull),e(1,n.NotNull)],i.prototype,"getDecisionDescription",null),l([n.NotNull,e(1,n.NotNull)],i.prototype,"getConflictingAlts",null),hr.DiagnosticErrorListener=i,hr}var fr={},gf;function Sx(){if(gf)return fr;gf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=fr&&fr.__decorate||function(s,a,c,u){var h=arguments.length,f=h<3?a:u===null?u=Object.getOwnPropertyDescriptor(a,c):u,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(s,a,c,u);else for(var p=s.length-1;p>=0;p--)(d=s[p])&&(f=(h<3?d(f):h>3?d(a,c,f):d(a,c))||f);return h>3&&f&&Object.defineProperty(a,c,f),f},e=fr&&fr.__param||function(s,a){return function(c,u){a(c,u,s)}};Object.defineProperty(fr,"__esModule",{value:!0}),fr.LexerInterpreter=void 0;const t=Pr(),n=bo(),o=Z(),i=Z();let r=class extends t.Lexer{constructor(a,c,u,h,f,d,p){if(super(p),d.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=a,this._atn=d,this._ruleNames=u.slice(0),this._channelNames=h.slice(0),this._modeNames=f.slice(0),this._vocabulary=c,this._interp=new n.LexerATNSimulator(d,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};return l([o.NotNull],r.prototype,"_vocabulary",void 0),l([i.Override],r.prototype,"atn",null),l([i.Override],r.prototype,"grammarFileName",null),l([i.Override],r.prototype,"ruleNames",null),l([i.Override],r.prototype,"channelNames",null),l([i.Override],r.prototype,"modeNames",null),l([i.Override],r.prototype,"vocabulary",null),r=l([e(1,o.NotNull)],r),fr.LexerInterpreter=r,fr}var ua={},yf;function Ax(){if(yf)return ua;yf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(ua,"__esModule",{value:!0}),ua}var kn={},vf;function Cx(){if(vf)return kn;vf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=kn&&kn.__decorate||function(i,r,s,a){var c=arguments.length,u=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,s,a);else for(var f=i.length-1;f>=0;f--)(h=i[f])&&(u=(c<3?h(u):c>3?h(r,s,u):h(r,s))||u);return c>3&&u&&Object.defineProperty(r,s,u),u};Object.defineProperty(kn,"__esModule",{value:!0}),kn.RuleContextWithAltNum=void 0;const e=ht(),t=Z(),n=ot();let o=class extends n.ParserRuleContext{constructor(r,s){s!==void 0?super(r,s):super(),this._altNumber=e.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(r){this._altNumber=r}};return l([t.Override],o.prototype,"altNumber",null),kn.RuleContextWithAltNum=o,kn}var wi={},Sf;function Ex(){if(Sf)return wi;Sf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(wi,"__esModule",{value:!0}),wi.RuleDependency=void 0;function l(e){return(t,n,o)=>{}}return wi.RuleDependency=l,wi}var Oi={},Af;function _x(){if(Af)return Oi;Af=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.RuleVersion=void 0;function l(e){return(t,n,o)=>{}}return Oi.RuleVersion=l,Oi}var ca={},Cf;function Tx(){if(Cf)return ca;Cf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(ca,"__esModule",{value:!0}),ca}var ha={},Ef;function bx(){if(Ef)return ha;Ef=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(ha,"__esModule",{value:!0}),ha}var fa={},_f;function Rx(){if(_f)return fa;_f=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(fa,"__esModule",{value:!0}),fa}var dr={},Tf;function Nx(){if(Tf)return dr;Tf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var l=dr&&dr.__decorate||function(c,u,h,f){var d=arguments.length,p=d<3?u:f===null?f=Object.getOwnPropertyDescriptor(u,h):f,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(c,u,h,f);else for(var x=c.length-1;x>=0;x--)(S=c[x])&&(p=(d<3?S(p):d>3?S(u,h,p):S(u,h))||p);return d>3&&p&&Object.defineProperty(u,h,p),p};Object.defineProperty(dr,"__esModule",{value:!0}),dr.RewriteOperation=dr.TokenStreamRewriter=void 0;const e=We(),t=Z(),n=Be();let o=class et{constructor(u){this.tokens=u,this.programs=new Map,this.programs.set(et.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(u,h=et.DEFAULT_PROGRAM_NAME){let f=this.programs.get(h);f!=null&&this.programs.set(h,f.slice(et.MIN_TOKEN_INDEX,u))}deleteProgram(u=et.DEFAULT_PROGRAM_NAME){this.rollback(et.MIN_TOKEN_INDEX,u)}insertAfter(u,h,f=et.DEFAULT_PROGRAM_NAME){let d;typeof u=="number"?d=u:d=u.tokenIndex;let p=this.getProgram(f),S=new s(this.tokens,d,p.length,h);p.push(S)}insertBefore(u,h,f=et.DEFAULT_PROGRAM_NAME){let d;typeof u=="number"?d=u:d=u.tokenIndex;let p=this.getProgram(f),S=new r(this.tokens,d,p.length,h);p.push(S)}replaceSingle(u,h){typeof u=="number"?this.replace(u,u,h):this.replace(u,u,h)}replace(u,h,f,d=et.DEFAULT_PROGRAM_NAME){if(typeof u!="number"&&(u=u.tokenIndex),typeof h!="number"&&(h=h.tokenIndex),u>h||u<0||h<0||h>=this.tokens.size)throw new RangeError(`replace: range invalid: ${u}..${h}(size=${this.tokens.size})`);let p=this.getProgram(d),S=new a(this.tokens,u,h,p.length,f);p.push(S)}delete(u,h,f=et.DEFAULT_PROGRAM_NAME){h===void 0&&(h=u),typeof u=="number"?this.replace(u,h,"",f):this.replace(u,h,"",f)}getLastRewriteTokenIndex(u=et.DEFAULT_PROGRAM_NAME){let h=this.lastRewriteTokenIndexes.get(u);return h??-1}setLastRewriteTokenIndex(u,h){this.lastRewriteTokenIndexes.set(u,h)}getProgram(u){let h=this.programs.get(u);return h==null&&(h=this.initializeProgram(u)),h}initializeProgram(u){let h=[];return this.programs.set(u,h),h}getText(u,h=et.DEFAULT_PROGRAM_NAME){let f;u instanceof e.Interval?f=u:f=e.Interval.of(0,this.tokens.size-1),typeof u=="string"&&(h=u);let d=this.programs.get(h),p=f.a,S=f.b;if(S>this.tokens.size-1&&(S=this.tokens.size-1),p<0&&(p=0),d==null||d.length===0)return this.tokens.getText(f);let x=[],v=this.reduceToSingleOperationPerIndex(d),m=p;for(;m<=S&&m<this.tokens.size;){let g=v.get(m);v.delete(m);let y=this.tokens.get(m);g==null?(y.type!==n.Token.EOF&&x.push(String(y.text)),m++):m=g.execute(x)}if(S===this.tokens.size-1)for(let g of v.values())g.index>=this.tokens.size-1&&x.push(g.text.toString());return x.join("")}reduceToSingleOperationPerIndex(u){for(let f=0;f<u.length;f++){let d=u[f];if(d==null||!(d instanceof a))continue;let p=d,S=this.getKindOfOps(u,r,f);for(let v of S)v.index===p.index?(u[v.instructionIndex]=void 0,p.text=v.text.toString()+(p.text!=null?p.text.toString():"")):v.index>p.index&&v.index<=p.lastIndex&&(u[v.instructionIndex]=void 0);let x=this.getKindOfOps(u,a,f);for(let v of x){if(v.index>=p.index&&v.lastIndex<=p.lastIndex){u[v.instructionIndex]=void 0;continue}let m=v.lastIndex<p.index||v.index>p.lastIndex;if(v.text==null&&p.text==null&&!m)u[v.instructionIndex]=void 0,p.index=Math.min(v.index,p.index),p.lastIndex=Math.max(v.lastIndex,p.lastIndex);else if(!m)throw new Error(`replace op boundaries of ${p} overlap with previous ${v}`)}}for(let f=0;f<u.length;f++){let d=u[f];if(d==null||!(d instanceof r))continue;let p=d,S=this.getKindOfOps(u,r,f);for(let v of S)v.index===p.index&&(v instanceof s?(p.text=this.catOpText(v.text,p.text),u[v.instructionIndex]=void 0):v instanceof r&&(p.text=this.catOpText(p.text,v.text),u[v.instructionIndex]=void 0));let x=this.getKindOfOps(u,a,f);for(let v of x){if(p.index===v.index){v.text=this.catOpText(p.text,v.text),u[f]=void 0;continue}if(p.index>=v.index&&p.index<=v.lastIndex)throw new Error(`insert op ${p} within boundaries of previous ${v}`)}}let h=new Map;for(let f of u)if(f!=null){if(h.get(f.index)!=null)throw new Error("should only be one op per index");h.set(f.index,f)}return h}catOpText(u,h){let f="",d="";return u!=null&&(f=u.toString()),h!=null&&(d=h.toString()),f+d}getKindOfOps(u,h,f){let d=[];for(let p=0;p<f&&p<u.length;p++){let S=u[p];S!=null&&S instanceof h&&d.push(S)}return d}};dr.TokenStreamRewriter=o,o.DEFAULT_PROGRAM_NAME="default",o.PROGRAM_INIT_SIZE=100,o.MIN_TOKEN_INDEX=0;class i{constructor(u,h,f,d){this.tokens=u,this.instructionIndex=f,this.index=h,this.text=d===void 0?"":d}execute(u){return this.index}toString(){let u=this.constructor.name,h=u.indexOf("$");return u=u.substring(h+1,u.length),"<"+u+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}l([t.Override],i.prototype,"toString",null),dr.RewriteOperation=i;class r extends i{constructor(u,h,f,d){super(u,h,f,d)}execute(u){return u.push(this.text.toString()),this.tokens.get(this.index).type!==n.Token.EOF&&u.push(String(this.tokens.get(this.index).text)),this.index+1}}l([t.Override],r.prototype,"execute",null);class s extends r{constructor(u,h,f,d){super(u,h+1,f,d)}}class a extends i{constructor(u,h,f,d,p){super(u,h,d,p),this.lastIndex=f}execute(u){return this.text!=null&&u.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}return l([t.Override],a.prototype,"execute",null),l([t.Override],a.prototype,"toString",null),dr}var da={},bf;function wx(){if(bf)return da;bf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(da,"__esModule",{value:!0}),da}var pa={},Rf;function Ox(){if(Rf)return pa;Rf=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */return Object.defineProperty(pa,"__esModule",{value:!0}),pa}var Nf;function Fx(){return Nf||(Nf=1,function(l){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=Lr&&Lr.__createBinding||(Object.create?function(n,o,i,r){r===void 0&&(r=i),Object.defineProperty(n,r,{enumerable:!0,get:function(){return o[i]}})}:function(n,o,i,r){r===void 0&&(r=i),n[r]=o[i]}),t=Lr&&Lr.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,n,i)};Object.defineProperty(l,"__esModule",{value:!0}),t(Np(),l),t(wp(),l),t(y0(),l),t(Kd(),l),t(Ud(),l),t(gx(),l),t(rl(),l),t(jd(),l),t(Hd(),l),t(Vi(),l),t(Wa(),l),t(nl(),l),t(yd(),l),t(ol(),l),t(yx(),l),t(vx(),l),t(So(),l),t(Ao(),l),t(Wd(),l),t(Rr(),l),t(Pr(),l),t(Sx(),l),t(To(),l),t($d(),l),t(No(),l),t(Qi(),l),t(Ax(),l),t(Gd(),l),t(ot(),l),t(Ya(),l),t(zd(),l),t(Nr(),l),t(Gi(),l),t(Md(),l),t(Cx(),l),t(Ex(),l),t(_x(),l),t(Be(),l),t(Tx(),l),t(bx(),l),t(Rx(),l),t(Nx(),l),t(wx(),l),t(Vn(),l),t(Ox(),l)}(Lr)),Lr}var Jn=Fx(),Qd=tl(),Px=Pr(),Dx=bo(),Jd=Vn(),Zd=gr();const Ae=class Ae extends Px.Lexer{get vocabulary(){return Ae.VOCABULARY}constructor(e){super(e),this._interp=new Dx.LexerATNSimulator(Ae._ATN,this)}get grammarFileName(){return"Formula.g4"}get ruleNames(){return Ae.ruleNames}get serializedATN(){return Ae._serializedATN}get channelNames(){return Ae.channelNames}get modeNames(){return Ae.modeNames}action(e,t,n){switch(t){case 6:this.REF_action(e,n);break}}REF_action(e,t){}static get _ATN(){return Ae.__ATN||(Ae.__ATN=new Qd.ATNDeserializer().deserialize(Zd.toCharArray(Ae._serializedATN))),Ae.__ATN}};k(Ae,"T__0",1),k(Ae,"T__1",2),k(Ae,"T__2",3),k(Ae,"REFERENCE",4),k(Ae,"REF",5),k(Ae,"REFRANGE",6),k(Ae,"BOOL",7),k(Ae,"STRING",8),k(Ae,"NUM",9),k(Ae,"FUNCNAME",10),k(Ae,"WS",11),k(Ae,"MUL",12),k(Ae,"DIV",13),k(Ae,"ADD",14),k(Ae,"SUB",15),k(Ae,"EQ",16),k(Ae,"NEQ",17),k(Ae,"LTE",18),k(Ae,"GTE",19),k(Ae,"LT",20),k(Ae,"GT",21),k(Ae,"channelNames",["DEFAULT_TOKEN_CHANNEL","HIDDEN"]),k(Ae,"modeNames",["DEFAULT_MODE"]),k(Ae,"ruleNames",["T__0","T__1","T__2","REFERENCE","SHEET_NAME","QUOTED_SHEET_NAME","REF","REFRANGE","BOOL","STRING","NUM","FUNCNAME","WS","MUL","DIV","ADD","SUB","EQ","NEQ","LTE","GTE","LT","GT"]),k(Ae,"_LITERAL_NAMES",[void 0,"'('","')'","','",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'*'","'/'","'+'","'-'","'='","'<>'","'<='","'>='","'<'","'>'"]),k(Ae,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,"REFERENCE","REF","REFRANGE","BOOL","STRING","NUM","FUNCNAME","WS","MUL","DIV","ADD","SUB","EQ","NEQ","LTE","GTE","LT","GT"]),k(Ae,"VOCABULARY",new Jd.VocabularyImpl(Ae._LITERAL_NAMES,Ae._SYMBOLIC_NAMES,[])),k(Ae,"_serializedATN",`\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r											J
\x07N
\fQ\v\x07\x07\x07U
\x07\r\x07\x07V\x07\x07\b\b\\
\b\b\b\b\ba
\b\b\b\x07\be
\b\f\b\bh\v\b				




















\v\v\x07\v
\v\f\v\v\v\v\v\v\f\f
\f\r\f\f\f\f\f
\f\r\f\f\f
\f\r\r\x07\r
\r\f\r\r\v\r
\r\x07	\v\r\x07\b	
\v\f\x1B\r!#%')+-/
C\\c|2;C\\c|))3;2;$$\x07002;C\\aac|\v\v""\x07	\x1B!#%')+-/13\x075	I\vK\rR[i\x1B!#%')+-/12\x07*234\x07+456\x07.6\b78\r\x0789\x07#9:	:J;<\r\x07<=\x07#=>\b>J?@\v@A\x07#AB	BJCD\vDE\x07#EF\bFJGJ	HJ\bI7I;I?ICIGIHJ
KO	LN	MLNQOMOPP\fQORT\x07)SU
TSUVVTVWWXXY\x07)YZ\\\x07&[Z[\\\\]]^	^\`\b\b_a\x07&\`_\`aabbf	ce	dcehfdfgghfij\bjk\x07<kl\blmn\x07Vno\x07Top\x07Wp\x07Gqr\x07Hrs\x07Cst\x07Ntu\x07Uu\x07Gvw\x07vwx\x07txy\x07wy\x07gz{\x07h{|\x07c|}\x07n}~\x07u~\x07gmqvz\x07$
\x07\x07$	\x070			\b		\b\x07,\x071 \x07-"\x07/$\x07?&\x07>\x07@(\x07>\x07?*\x07@\x07?,\x07>.\x07@0IOV[\`f\b\b`),k(Ae,"__ATN");let Zn=Ae;var Ix=ht(),Lx=So(),Bx=No(),Mx=Qi(),sl=ot(),kx=Xi(),xa=Nr(),ma=Be();const ae=class ae extends Mx.Parser{get vocabulary(){return ae.VOCABULARY}get grammarFileName(){return"Formula.g4"}get ruleNames(){return ae.ruleNames}get serializedATN(){return ae._serializedATN}createFailedPredicateException(e,t){return new Lx.FailedPredicateException(this,e,t)}constructor(e){super(e),this._interp=new kx.ParserATNSimulator(ae._ATN,this)}formula(){let e=new zx(this._ctx,this.state);this.enterRule(e,0,ae.RULE_formula);let t;try{this.enterOuterAlt(e,1);{this.state=7,this._errHandler.sync(this),t=this._input.LA(1);do this.state=6,this.expr(0),this.state=9,this._errHandler.sync(this),t=this._input.LA(1);while((t&-32)===0&&(1<<t&(1<<ae.T__0|1<<ae.REFERENCE|1<<ae.BOOL|1<<ae.STRING|1<<ae.NUM|1<<ae.FUNCNAME))!==0)}}catch(n){if(n instanceof xa.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}expr(e){e===void 0&&(e=0);let t=this._ctx,n=this.state,o=new Me(this._ctx,n),i=o,r=2;this.enterRecursionRule(o,2,ae.RULE_expr,e);let s;try{let a;this.enterOuterAlt(o,1);{switch(this.state=26,this._errHandler.sync(this),this._input.LA(1)){case ae.FUNCNAME:o=new jx(o),this._ctx=o,i=o,this.state=12,this.match(ae.FUNCNAME),this.state=13,this.match(ae.T__0),this.state=15,this._errHandler.sync(this),s=this._input.LA(1),(s&-32)===0&&(1<<s&(1<<ae.T__0|1<<ae.REFERENCE|1<<ae.BOOL|1<<ae.STRING|1<<ae.NUM|1<<ae.FUNCNAME))!==0&&(this.state=14,this.args()),this.state=17,this.match(ae.T__1);break;case ae.NUM:o=new $x(o),this._ctx=o,i=o,this.state=18,this.match(ae.NUM);break;case ae.BOOL:o=new Vx(o),this._ctx=o,i=o,this.state=19,this.match(ae.BOOL);break;case ae.STRING:o=new Wx(o),this._ctx=o,i=o,this.state=20,this.match(ae.STRING);break;case ae.REFERENCE:o=new Gx(o),this._ctx=o,i=o,this.state=21,this.match(ae.REFERENCE);break;case ae.T__0:o=new Yx(o),this._ctx=o,i=o,this.state=22,this.match(ae.T__0),this.state=23,this.expr(0),this.state=24,this.match(ae.T__1);break;default:throw new Bx.NoViableAltException(this)}for(this._ctx._stop=this._input.tryLT(-1),this.state=39,this._errHandler.sync(this),a=this.interpreter.adaptivePredict(this._input,4,this._ctx);a!==2&&a!==Ix.ATN.INVALID_ALT_NUMBER;){if(a===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),i=o,this.state=37,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,3,this._ctx)){case 1:{if(o=new qx(new Me(t,n)),this.pushNewRecursionContext(o,r,ae.RULE_expr),this.state=28,!this.precpred(this._ctx,8))throw this.createFailedPredicateException("this.precpred(this._ctx, 8)");this.state=29,o._op=this._input.LT(1),s=this._input.LA(1),s===ae.MUL||s===ae.DIV?(this._input.LA(1)===ma.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):o._op=this._errHandler.recoverInline(this),this.state=30,this.expr(9)}break;case 2:{if(o=new Hx(new Me(t,n)),this.pushNewRecursionContext(o,r,ae.RULE_expr),this.state=31,!this.precpred(this._ctx,7))throw this.createFailedPredicateException("this.precpred(this._ctx, 7)");this.state=32,o._op=this._input.LT(1),s=this._input.LA(1),s===ae.ADD||s===ae.SUB?(this._input.LA(1)===ma.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):o._op=this._errHandler.recoverInline(this),this.state=33,this.expr(8)}break;case 3:{if(o=new Ux(new Me(t,n)),this.pushNewRecursionContext(o,r,ae.RULE_expr),this.state=34,!this.precpred(this._ctx,6))throw this.createFailedPredicateException("this.precpred(this._ctx, 6)");this.state=35,o._op=this._input.LT(1),s=this._input.LA(1),(s&-32)===0&&(1<<s&(1<<ae.EQ|1<<ae.NEQ|1<<ae.LTE|1<<ae.GTE|1<<ae.LT|1<<ae.GT))!==0?(this._input.LA(1)===ma.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):o._op=this._errHandler.recoverInline(this),this.state=36,this.expr(7)}break}this.state=41,this._errHandler.sync(this),a=this.interpreter.adaptivePredict(this._input,4,this._ctx)}}}catch(a){if(a instanceof xa.RecognitionException)o.exception=a,this._errHandler.reportError(this,a),this._errHandler.recover(this,a);else throw a}finally{this.unrollRecursionContexts(t)}return o}args(){let e=new ep(this._ctx,this.state);this.enterRule(e,4,ae.RULE_args);let t;try{for(this.enterOuterAlt(e,1),this.state=42,this.expr(0),this.state=47,this._errHandler.sync(this),t=this._input.LA(1);t===ae.T__2;)this.state=43,this.match(ae.T__2),this.state=44,this.expr(0),this.state=49,this._errHandler.sync(this),t=this._input.LA(1)}catch(n){if(n instanceof xa.RecognitionException)e.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return e}sempred(e,t,n){switch(t){case 1:return this.expr_sempred(e,n)}return!0}expr_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,8);case 1:return this.precpred(this._ctx,7);case 2:return this.precpred(this._ctx,6)}return!0}static get _ATN(){return ae.__ATN||(ae.__ATN=new Qd.ATNDeserializer().deserialize(Zd.toCharArray(ae._serializedATN))),ae.__ATN}};k(ae,"T__0",1),k(ae,"T__1",2),k(ae,"T__2",3),k(ae,"REFERENCE",4),k(ae,"REF",5),k(ae,"REFRANGE",6),k(ae,"BOOL",7),k(ae,"STRING",8),k(ae,"NUM",9),k(ae,"FUNCNAME",10),k(ae,"WS",11),k(ae,"MUL",12),k(ae,"DIV",13),k(ae,"ADD",14),k(ae,"SUB",15),k(ae,"EQ",16),k(ae,"NEQ",17),k(ae,"LTE",18),k(ae,"GTE",19),k(ae,"LT",20),k(ae,"GT",21),k(ae,"RULE_formula",0),k(ae,"RULE_expr",1),k(ae,"RULE_args",2),k(ae,"ruleNames",["formula","expr","args"]),k(ae,"_LITERAL_NAMES",[void 0,"'('","')'","','",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"'*'","'/'","'+'","'-'","'='","'<>'","'<='","'>='","'<'","'>'"]),k(ae,"_SYMBOLIC_NAMES",[void 0,void 0,void 0,void 0,"REFERENCE","REF","REFRANGE","BOOL","STRING","NUM","FUNCNAME","WS","MUL","DIV","ADD","SUB","EQ","NEQ","LTE","GTE","LT","GT"]),k(ae,"VOCABULARY",new Jd.VocabularyImpl(ae._LITERAL_NAMES,ae._SYMBOLIC_NAMES,[])),k(ae,"_serializedATN",`5			

\r\v

\x07(
\f+\v\x070
\f3\v<	,\b
	\b
\v\v	\v\f\f\r\b\x07\f\x07\x07\x07\v\x07	\x07
\x07\x07\x1B\x07\x1B\r)\f
 	 (\v!"\f	"#	#(
$%\f\b%&	&(	''!'$(+)')**+),1-.\x07.0/-031/122\x0731\b\v')1`),k(ae,"__ATN");let Ie=ae;class zx extends sl.ParserRuleContext{expr(e){return e===void 0?this.getRuleContexts(Me):this.getRuleContext(e,Me)}constructor(e,t){super(e,t)}get ruleIndex(){return Ie.RULE_formula}enterRule(e){e.enterFormula&&e.enterFormula(this)}exitRule(e){e.exitFormula&&e.exitFormula(this)}accept(e){return e.visitFormula?e.visitFormula(this):e.visitChildren(this)}}class Me extends sl.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return Ie.RULE_expr}copyFrom(e){super.copyFrom(e)}}class jx extends Me{FUNCNAME(){return this.getToken(Ie.FUNCNAME,0)}args(){return this.tryGetRuleContext(0,ep)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterFunction&&e.enterFunction(this)}exitRule(e){e.exitFunction&&e.exitFunction(this)}accept(e){return e.visitFunction?e.visitFunction(this):e.visitChildren(this)}}class qx extends Me{constructor(t){super(t.parent,t.invokingState);k(this,"_op");this.copyFrom(t)}expr(t){return t===void 0?this.getRuleContexts(Me):this.getRuleContext(t,Me)}MUL(){return this.tryGetToken(Ie.MUL,0)}DIV(){return this.tryGetToken(Ie.DIV,0)}enterRule(t){t.enterMulDiv&&t.enterMulDiv(this)}exitRule(t){t.exitMulDiv&&t.exitMulDiv(this)}accept(t){return t.visitMulDiv?t.visitMulDiv(this):t.visitChildren(this)}}class Hx extends Me{constructor(t){super(t.parent,t.invokingState);k(this,"_op");this.copyFrom(t)}expr(t){return t===void 0?this.getRuleContexts(Me):this.getRuleContext(t,Me)}ADD(){return this.tryGetToken(Ie.ADD,0)}SUB(){return this.tryGetToken(Ie.SUB,0)}enterRule(t){t.enterAddSub&&t.enterAddSub(this)}exitRule(t){t.exitAddSub&&t.exitAddSub(this)}accept(t){return t.visitAddSub?t.visitAddSub(this):t.visitChildren(this)}}class Ux extends Me{constructor(t){super(t.parent,t.invokingState);k(this,"_op");this.copyFrom(t)}expr(t){return t===void 0?this.getRuleContexts(Me):this.getRuleContext(t,Me)}EQ(){return this.tryGetToken(Ie.EQ,0)}NEQ(){return this.tryGetToken(Ie.NEQ,0)}LT(){return this.tryGetToken(Ie.LT,0)}GT(){return this.tryGetToken(Ie.GT,0)}LTE(){return this.tryGetToken(Ie.LTE,0)}GTE(){return this.tryGetToken(Ie.GTE,0)}enterRule(t){t.enterComparison&&t.enterComparison(this)}exitRule(t){t.exitComparison&&t.exitComparison(this)}accept(t){return t.visitComparison?t.visitComparison(this):t.visitChildren(this)}}class $x extends Me{NUM(){return this.getToken(Ie.NUM,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterNumber&&e.enterNumber(this)}exitRule(e){e.exitNumber&&e.exitNumber(this)}accept(e){return e.visitNumber?e.visitNumber(this):e.visitChildren(this)}}class Vx extends Me{BOOL(){return this.getToken(Ie.BOOL,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterBoolean&&e.enterBoolean(this)}exitRule(e){e.exitBoolean&&e.exitBoolean(this)}accept(e){return e.visitBoolean?e.visitBoolean(this):e.visitChildren(this)}}class Wx extends Me{STRING(){return this.getToken(Ie.STRING,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterStr&&e.enterStr(this)}exitRule(e){e.exitStr&&e.exitStr(this)}accept(e){return e.visitStr?e.visitStr(this):e.visitChildren(this)}}class Gx extends Me{REFERENCE(){return this.getToken(Ie.REFERENCE,0)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterReference&&e.enterReference(this)}exitRule(e){e.exitReference&&e.exitReference(this)}accept(e){return e.visitReference?e.visitReference(this):e.visitChildren(this)}}class Yx extends Me{expr(){return this.getRuleContext(0,Me)}constructor(e){super(e.parent,e.invokingState),this.copyFrom(e)}enterRule(e){e.enterParentheses&&e.enterParentheses(this)}exitRule(e){e.exitParentheses&&e.exitParentheses(this)}accept(e){return e.visitParentheses?e.visitParentheses(this):e.visitChildren(this)}}class ep extends sl.ParserRuleContext{expr(e){return e===void 0?this.getRuleContexts(Me):this.getRuleContext(e,Me)}constructor(e,t){super(e,t)}get ruleIndex(){return Ie.RULE_args}enterRule(e){e.enterArgs&&e.enterArgs(this)}exitRule(e){e.exitArgs&&e.exitArgs(this)}accept(e){return e.visitArgs?e.visitArgs(this):e.visitChildren(this)}}function*wf(l){const[e,t]=l;for(let n=e.r;n<=t.r;n++)for(let o=e.c;o<=t.c;o++)yield{r:n,c:o}}function Ar(l,e){const[t,n]=e;return t.r<=l.r&&l.r<=n.r&&t.c<=l.c&&l.c<=n.c}function Xx(l,e){const[t,n]=l,[o,i]=e;return o.r<=t.r&&n.r<=i.r&&o.c<=t.c&&n.c<=i.c}function st(l,e){return[{r:Math.min(l.r,e.r),c:Math.min(l.c,e.c)},{r:Math.max(l.r,e.r),c:Math.max(l.c,e.c)}]}function at(l){return[Of(l[0]),Of(l[1])]}function Cr(l,e){return zi(l[0],e[0])&&zi(l[1],e[1])}function Kx(l,e){const t=[];return l[0].r>e[0].r&&t.push([{r:l[0].r-1,c:l[0].c},{r:l[0].r-1,c:l[1].c}]),l[1].r<e[1].r&&t.push([{r:l[1].r+1,c:l[0].c},{r:l[1].r+1,c:l[1].c}]),l[0].c>e[0].c&&t.push([{r:l[0].r,c:l[0].c-1},{r:l[1].r,c:l[0].c-1}]),l[1].c<e[1].c&&t.push([{r:l[0].r,c:l[1].c+1},{r:l[1].r,c:l[1].c+1}]),t}function ga(l,e){const[t,n]=l,[o,i]=e;return[{r:Math.min(t.r,o.r),c:Math.min(t.c,o.c)},{r:Math.max(n.r,i.r),c:Math.max(n.c,i.c)}]}function zi(l,e){return l.r===e.r&&l.c===e.c}function Of(l){return{r:l.r,c:l.c}}function tt(l){return l.includes(":")}function wo(l){return l.includes("!")}function tp(l){const e=l.indexOf("!");if(e===-1)throw new Error(`Not a cross-sheet reference: ${l}`);let t=l.substring(0,e);t.startsWith("'")&&t.endsWith("'")&&(t=t.slice(1,-1));const n=l.substring(e+1);return{sheetName:t,localRef:n}}function*Dr(l){for(const e of l){if(wo(e)){const{sheetName:t,localRef:n}=tp(e);if(n.includes(":")){const o=wa(n);for(const i of wf(o))yield`${t}!${pe(i)}`}else yield e;continue}if(tt(e)){const t=wa(e);for(const n of wf(t))yield pe(n);continue}yield e}}function pe(l){return ei(l.c)+l.r}function Qx(l){const[e,t]=l;return`${pe(e)}:${pe(t)}`}function ei(l){let e="";for(;l>0;){const t=l%26;t===0?(e="Z"+e,l=Math.floor(l/26)-1):(e=String.fromCharCode(t+64)+e,l=Math.floor(l/26))}return e}function Te(l){const e=l.replace(/\$/g,"");let t=0;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(48<=r&&r<=57){t=i;break}}if(t===0)throw new Error("Invalid Reference");const n=parseInt(e.substring(t)),o=e.substring(0,t).split("").reverse().reduce((i,r,s)=>i+Math.pow(26,s)*(r.charCodeAt(0)-65+1),0);if(isNaN(n)||isNaN(o))throw new Error("Invalid Reference");return{r:n,c:o}}function wa(l){const[e,t]=l.split(":");return[Te(e),Te(t)]}class Ji{constructor(){k(this,"ref");k(this,"bool");k(this,"num");k(this,"str")}static create(){return new Ji}setRef(e){return this.ref=e,this}setBool(e){return this.bool=e,this}setNum(e){return this.num=e,this}setStr(e){return this.str=e,this}map(e,t){return e.t==="bool"&&this.bool?this.bool(e):e.t==="num"&&this.num?this.num(e):e.t==="str"&&this.str?this.str(e):e.t==="ref"&&this.ref&&t?this.ref(e,t):e}*iterate(e,t,n){for(const o of e.expr()){const i=t(o);if(i.t==="ref"&&n)for(const r of Dr([i.v]))yield this.ref({t:"ref",v:r},n);else yield this.map(i)}}}function Jx(l){return{t:"num",v:l.v?1:0}}function Zx(l){const e=Number(l);return{t:"num",v:isNaN(e)?0:e}}function em(l,e){var o;if(tt(l.v))return{t:"err",v:"#VALUE!"};const t=((o=e.get(l.v))==null?void 0:o.v)||"",n=Number(t);return{t:"num",v:isNaN(n)?0:n}}const Le=Ji.create().setRef(em).setBool(Jx).setStr(Zx);function tm(l){return{t:"bool",v:l.v!==0}}function rm(l,e){var o;if(tt(l.v))return{t:"err",v:"#VALUE!"};const t=((o=e.get(l.v))==null?void 0:o.v)||"";if(t==="TRUE"||t==="true")return{t:"bool",v:!0};if(t==="FALSE"||t==="false"||t==="")return{t:"bool",v:!1};const n=Number(t);return isNaN(n)?{t:"err",v:"#VALUE!"}:{t:"bool",v:n!==0}}const li=Ji.create().setRef(rm).setNum(tm).setStr(()=>({t:"err",v:"#VALUE!"}));function nm(l){return{t:"str",v:l.v.toString()}}function im(l){return{t:"str",v:l.v?"TRUE":"FALSE"}}function rp(l,e){var n;return tt(l.v)?{t:"err",v:"#VALUE!"}:{t:"str",v:((n=e.get(l.v))==null?void 0:n.v)||""}}Ji.create().setRef(rp).setNum(nm).setBool(im);const Ff=new Map([["SUM",om],["ABS",sm],["ROUND",lm],["ROUNDUP",um],["ROUNDDOWN",cm],["INT",hm],["MOD",fm],["SQRT",dm],["POWER",pm],["PRODUCT",xm],["MEDIAN",mm],["IF",gm],["IFS",ym],["SWITCH",vm],["AND",Sm],["OR",Am],["NOT",Cm],["AVERAGE",Em],["MIN",_m],["MAX",Tm],["COUNT",bm],["COUNTA",Rm],["COUNTBLANK",Nm],["COUNTIF",wm],["SUMIF",Om],["COUNTIFS",Fm],["SUMIFS",Pm],["TRIM",Dm],["LEN",Im],["LEFT",Lm],["RIGHT",Bm],["MID",Mm],["CONCATENATE",ip],["CONCAT",km],["FIND",zm],["SEARCH",jm],["TEXTJOIN",qm],["LOWER",Hm],["UPPER",Um],["PROPER",$m],["SUBSTITUTE",Vm],["TODAY",Wm],["NOW",Gm],["YEAR",Ym],["MONTH",Xm],["DAY",Km],["ISBLANK",Qm],["ISNUMBER",Jm],["ISTEXT",Zm],["IFERROR",eg]]);function om(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=0;for(const i of Le.iterate(n,e,t)){if(i.t==="err")return i;o+=i.v}return{t:"num",v:o}}function sm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);return i.t==="err"?i:{t:"num",v:Math.abs(i.v)}}function am(l){return l>=0?Math.floor(l+.5):Math.ceil(l-.5)}function al(l,e,t){if(!l)return{t:"num",v:0};const n=Le.map(e(l),t);return n.t==="err"?n:{t:"num",v:Math.trunc(n.v)}}function Oo(l){return l.t==="err"}function ti(l,e,t){const n=e(l);return n.t==="err"?n:n.t!=="ref"||!t?{t:"err",v:"#VALUE!"}:{t:"refs",v:Array.from(Dr([n.v]))}}function np(l){const e=Number(l);return isNaN(e)?0:e}function Fo(l,e){if(l.t==="err")return l;if(l.t==="num")return{op:"=",value:l.v.toString(),numericValue:l.v};if(l.t==="bool")return{op:"=",value:l.v?"TRUE":"FALSE",boolValue:l.v};const t=ke(l,e);if(t.t==="err")return t;const n=/^(<=|>=|<>|=|<|>)(.*)$/.exec(t.v),o=(n==null?void 0:n[1])||"=",i=n?n[2]:t.v;let r,s;if(i!==""){const c=Number(i);isNaN(c)?i.toUpperCase()==="TRUE"?s=!0:i.toUpperCase()==="FALSE"&&(s=!1):r=c}let a;return(o==="="||o==="<>")&&/(^|[^~])[*?]/.test(i)&&(a=new RegExp(`^${sp(i)}$`,"i")),{op:o,value:i,numericValue:r,boolValue:s,wildcardPattern:a}}function Po(l,e){const t=l===""?void 0:Number(l),n=t!==void 0&&!isNaN(t),o=l.toUpperCase(),i=o==="TRUE"?!0:o==="FALSE"?!1:void 0,r=l.toLowerCase(),s=e.value.toLowerCase();if(e.op==="<"||e.op==="<="||e.op===">"||e.op===">=")return e.numericValue!==void 0?n?e.op==="<"?t<e.numericValue:e.op==="<="?t<=e.numericValue:e.op===">"?t>e.numericValue:t>=e.numericValue:!1:e.op==="<"?r<s:e.op==="<="?r<=s:e.op===">"?r>s:r>=s;let a=!1;return e.wildcardPattern?a=e.wildcardPattern.test(l):e.numericValue!==void 0&&n?a=t===e.numericValue:e.boolValue!==void 0&&i!==void 0?a=i===e.boolValue:a=r===s,e.op==="="?a:!a}function lm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<1||o.length>2)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);if(i.t==="err")return i;const r=al(o[1],e,t);if(r.t==="err")return r;const s=10**r.v;return{t:"num",v:am(i.v*s)/s}}function um(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<1||o.length>2)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);if(i.t==="err")return i;const r=al(o[1],e,t);if(r.t==="err")return r;const s=10**r.v,a=i.v*s;return{t:"num",v:(a>=0?Math.ceil(a):Math.floor(a))/s}}function cm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<1||o.length>2)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);if(i.t==="err")return i;const r=al(o[1],e,t);if(r.t==="err")return r;const s=10**r.v,a=i.v*s;return{t:"num",v:(a>=0?Math.floor(a):Math.ceil(a))/s}}function hm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);return i.t==="err"?i:{t:"num",v:Math.floor(i.v)}}function fm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==2)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);if(i.t==="err")return i;const r=Le.map(e(o[1]),t);return r.t==="err"?r:r.v===0?{t:"err",v:"#VALUE!"}:{t:"num",v:i.v-r.v*Math.floor(i.v/r.v)}}function dm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);return i.t==="err"?i:i.v<0?{t:"err",v:"#VALUE!"}:{t:"num",v:Math.sqrt(i.v)}}function pm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==2)return{t:"err",v:"#N/A!"};const i=Le.map(e(o[0]),t);if(i.t==="err")return i;const r=Le.map(e(o[1]),t);if(r.t==="err")return r;const s=Math.pow(i.v,r.v);return isFinite(s)?{t:"num",v:s}:{t:"err",v:"#VALUE!"}}function xm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=1;for(const i of Le.iterate(n,e,t)){if(i.t==="err")return i;o*=i.v}return{t:"num",v:o}}function mm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=[];for(const r of Le.iterate(n,e,t)){if(r.t==="err")return r;o.push(r.v)}if(o.length===0)return{t:"err",v:"#VALUE!"};o.sort((r,s)=>r-s);const i=Math.floor(o.length/2);return o.length%2===1?{t:"num",v:o[i]}:{t:"num",v:(o[i-1]+o[i])/2}}function gm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2||o.length>3)return{t:"err",v:"#N/A!"};const i=li.map(e(o[0]),t);return i.t==="err"?i:i.v?e(o[1]):o.length===3?e(o[2]):{t:"bool",v:!1}}function ym(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2||o.length%2!==0)return{t:"err",v:"#N/A!"};for(let i=0;i<o.length;i+=2){const r=li.map(e(o[i]),t);if(r.t==="err")return r;if(r.v)return e(o[i+1])}return{t:"err",v:"#N/A!"}}function vm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<3)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;const r=o.length-1,s=r%2===1,a=s?(r-1)/2:r/2;for(let c=0;c<a;c++){const u=ke(e(o[1+c*2]),t);if(u.t==="err")return u;if(u.v===i.v)return e(o[2+c*2])}return s?e(o[o.length-1]):{t:"err",v:"#N/A!"}}function Sm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};for(const o of li.iterate(n,e,t)){if(o.t==="err")return o;if(!o.v)return{t:"bool",v:!1}}return{t:"bool",v:!0}}function Am(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};for(const o of li.iterate(n,e,t)){if(o.t==="err")return o;if(o.v)return{t:"bool",v:!0}}return{t:"bool",v:!1}}function Cm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=li.map(e(o[0]),t);return i.t==="err"?i:{t:"bool",v:!i.v}}function Em(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=0,i=0;for(const r of Le.iterate(n,e,t)){if(r.t==="err")return r;o+=r.v,i++}return i===0?{t:"err",v:"#VALUE!"}:{t:"num",v:o/i}}function _m(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=1/0;for(const i of Le.iterate(n,e,t)){if(i.t==="err")return i;i.v<o&&(o=i.v)}return{t:"num",v:o}}function Tm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=-1/0;for(const i of Le.iterate(n,e,t)){if(i.t==="err")return i;i.v>o&&(o=i.v)}return{t:"num",v:o}}function bm(l,e,t){var i,r;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=0;for(const s of n.expr()){const a=e(s);if(a.t==="num")o++;else if(a.t==="bool")o++;else if(a.t==="ref"&&t)if(tt(a.v))for(const c of Dr([a.v])){const u=((i=t.get(c))==null?void 0:i.v)||"";u!==""&&!isNaN(Number(u))&&o++}else{const c=((r=t.get(a.v))==null?void 0:r.v)||"";c!==""&&!isNaN(Number(c))&&o++}}return{t:"num",v:o}}function Rm(l,e,t){var i,r;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=0;for(const s of n.expr()){const a=e(s);if(a.t==="num"||a.t==="bool")o++;else if(a.t==="str")a.v!==""&&o++;else if(a.t==="ref"&&t)if(tt(a.v))for(const c of Dr([a.v]))(((i=t.get(c))==null?void 0:i.v)||"")!==""&&o++;else(((r=t.get(a.v))==null?void 0:r.v)||"")!==""&&o++}return{t:"num",v:o}}function Nm(l,e,t){var i,r;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};let o=0;for(const s of n.expr()){const a=e(s);if(a.t==="str"){a.v===""&&o++;continue}if(a.t!=="ref"||!t)continue;if(tt(a.v)){for(const u of Dr([a.v]))(((i=t.get(u))==null?void 0:i.v)||"")===""&&o++;continue}(((r=t.get(a.v))==null?void 0:r.v)||"")===""&&o++}return{t:"num",v:o}}function wm(l,e,t){var a;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==2)return{t:"err",v:"#N/A!"};const i=ti(o[0],e,t);if(i.t==="err")return i;const r=Fo(e(o[1]),t);if(Oo(r))return r;let s=0;for(const c of i.v){const u=((a=t==null?void 0:t.get(c))==null?void 0:a.v)||"";Po(u,r)&&s++}return{t:"num",v:s}}function Om(l,e,t){var c,u;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2||o.length>3)return{t:"err",v:"#N/A!"};const i=ti(o[0],e,t);if(i.t==="err")return i;const r=Fo(e(o[1]),t);if(Oo(r))return r;const s=o.length===3?ti(o[2],e,t):i;if(s.t==="err")return s;if(i.v.length!==s.v.length)return{t:"err",v:"#VALUE!"};let a=0;for(let h=0;h<i.v.length;h++){const f=((c=t==null?void 0:t.get(i.v[h]))==null?void 0:c.v)||"";if(!Po(f,r))continue;const d=((u=t==null?void 0:t.get(s.v[h]))==null?void 0:u.v)||"";a+=np(d)}return{t:"num",v:a}}function Fm(l,e,t){var c;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2||o.length%2!==0)return{t:"err",v:"#N/A!"};const i=[],r=[];for(let u=0;u<o.length;u+=2){const h=ti(o[u],e,t);if(h.t==="err")return h;i.push(h.v);const f=Fo(e(o[u+1]),t);if(Oo(f))return f;r.push(f)}const s=i[0].length;if(i.some(u=>u.length!==s))return{t:"err",v:"#VALUE!"};let a=0;for(let u=0;u<s;u++){let h=!0;for(let f=0;f<i.length;f++){const d=((c=t==null?void 0:t.get(i[f][u]))==null?void 0:c.v)||"";if(!Po(d,r[f])){h=!1;break}}h&&a++}return{t:"num",v:a}}function Pm(l,e,t){var c,u;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<3||(o.length-1)%2!==0)return{t:"err",v:"#N/A!"};const i=ti(o[0],e,t);if(i.t==="err")return i;const r=[],s=[];for(let h=1;h<o.length;h+=2){const f=ti(o[h],e,t);if(f.t==="err")return f;r.push(f.v);const d=Fo(e(o[h+1]),t);if(Oo(d))return d;s.push(d)}if(r.some(h=>h.length!==i.v.length))return{t:"err",v:"#VALUE!"};let a=0;for(let h=0;h<i.v.length;h++){let f=!0;for(let d=0;d<r.length;d++){const p=((c=t==null?void 0:t.get(r[d][h]))==null?void 0:c.v)||"";if(!Po(p,s[d])){f=!1;break}}f&&(a+=np(((u=t==null?void 0:t.get(i.v[h]))==null?void 0:u.v)||""))}return{t:"num",v:a}}function ke(l,e){return l.t==="err"||l.t==="str"?l:l.t==="num"?{t:"str",v:l.v.toString()}:l.t==="bool"?{t:"str",v:l.v?"TRUE":"FALSE"}:l.t==="ref"&&e?rp(l,e):{t:"err",v:"#VALUE!"}}function Dm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);return i.t==="err"?i:{t:"str",v:i.v.trim()}}function Im(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);return i.t==="err"?i:{t:"num",v:i.v.length}}function Lm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<1||o.length>2)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;let r=1;if(o.length===2){const s=Le.map(e(o[1]),t);if(s.t==="err")return s;r=s.v}return{t:"str",v:i.v.slice(0,r)}}function Bm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<1||o.length>2)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;let r=1;if(o.length===2){const s=Le.map(e(o[1]),t);if(s.t==="err")return s;r=s.v}return{t:"str",v:i.v.slice(-r)}}function Mm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==3)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;const r=Le.map(e(o[1]),t);if(r.t==="err")return r;const s=Le.map(e(o[2]),t);if(s.t==="err")return s;const a=r.v-1;return{t:"str",v:i.v.slice(a,a+s.v)}}function ip(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2)return{t:"err",v:"#N/A!"};let i="";for(const r of o){const s=ke(e(r),t);if(s.t==="err")return s;i+=s.v}return{t:"str",v:i}}function km(l,e,t){return ip(l,e,t)}function op(l,e,t,n){if(!l)return{t:"num",v:1};const o=Le.map(t(l),n);if(o.t==="err")return o;const i=Math.trunc(o.v);return i<1||i>e.length+1?{t:"err",v:"#VALUE!"}:{t:"num",v:i}}function zm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2||o.length>3)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;const r=ke(e(o[1]),t);if(r.t==="err")return r;const s=op(o[2],r.v,e,t);if(s.t==="err")return s;if(i.v==="")return{t:"num",v:s.v};const a=r.v.indexOf(i.v,s.v-1);return a<0?{t:"err",v:"#VALUE!"}:{t:"num",v:a+1}}function sp(l){let e="";for(let t=0;t<l.length;t++){const n=l[t];if(n==="~"&&t+1<l.length){e+=l[t+1].replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t++;continue}if(n==="*"){e+=".*";continue}if(n==="?"){e+=".";continue}e+=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}return e}function jm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<2||o.length>3)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;const r=ke(e(o[1]),t);if(r.t==="err")return r;const s=op(o[2],r.v,e,t);if(s.t==="err")return s;if(i.v==="")return{t:"num",v:s.v};const a=sp(i.v),c=new RegExp(a,"i"),u=r.v.slice(s.v-1),h=c.exec(u);return!h||h.index===void 0?{t:"err",v:"#VALUE!"}:{t:"num",v:s.v+h.index}}function qm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<3)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;const r=li.map(e(o[1]),t);if(r.t==="err")return r;const s=[];for(const a of o.slice(2)){const c=e(a);if(c.t==="ref"&&t&&tt(c.v)){for(const h of Dr([c.v])){const f=ke({t:"ref",v:h},t);if(f.t==="err")return f;r.v&&f.v===""||s.push(f.v)}continue}const u=ke(c,t);if(u.t==="err")return u;r.v&&u.v===""||s.push(u.v)}return{t:"str",v:s.join(i.v)}}function Hm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);return i.t==="err"?i:{t:"str",v:i.v.toLowerCase()}}function Um(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);return i.t==="err"?i:{t:"str",v:i.v.toUpperCase()}}function $m(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);return i.t==="err"?i:{t:"str",v:i.v.toLowerCase().replace(/\b([a-z])([a-z]*)/g,(s,a,c)=>a.toUpperCase()+c)}}function Vm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length<3||o.length>4)return{t:"err",v:"#N/A!"};const i=ke(e(o[0]),t);if(i.t==="err")return i;const r=ke(e(o[1]),t);if(r.t==="err")return r;const s=ke(e(o[2]),t);if(s.t==="err")return s;if(r.v==="")return{t:"str",v:i.v};if(o.length===3)return{t:"str",v:i.v.split(r.v).join(s.v)};const a=Le.map(e(o[3]),t);if(a.t==="err")return a;const c=Math.trunc(a.v);if(c<=0)return{t:"err",v:"#VALUE!"};let u=0,h=0;for(;;){const f=i.v.indexOf(r.v,u);if(f<0)return{t:"str",v:i.v};if(h++,h===c)return{t:"str",v:i.v.slice(0,f)+s.v+i.v.slice(f+r.v.length)};u=f+r.v.length}}function Wm(l,e,t){const n=l.args();if(n&&n.expr().length>0)return{t:"err",v:"#N/A!"};const o=new Date,i=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),s=String(o.getDate()).padStart(2,"0");return{t:"str",v:`${i}-${r}-${s}`}}function Gm(l,e,t){const n=l.args();if(n&&n.expr().length>0)return{t:"err",v:"#N/A!"};const o=new Date,i=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),s=String(o.getDate()).padStart(2,"0"),a=String(o.getHours()).padStart(2,"0"),c=String(o.getMinutes()).padStart(2,"0"),u=String(o.getSeconds()).padStart(2,"0");return{t:"str",v:`${i}-${r}-${s} ${a}:${c}:${u}`}}function ll(l,e){const t=ke(l,e);if(t.t==="err")return t;const n=new Date(t.v);return isNaN(n.getTime())?{t:"err",v:"#VALUE!"}:n}function Ym(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ll(e(o[0]),t);return i instanceof Date?{t:"num",v:i.getFullYear()}:i}function Xm(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ll(e(o[0]),t);return i instanceof Date?{t:"num",v:i.getMonth()+1}:i}function Km(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=ll(e(o[0]),t);return i instanceof Date?{t:"num",v:i.getDate()}:i}function Qm(l,e,t){var s;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=e(o[0]);return i.t==="err"?i:i.t!=="ref"||!t?{t:"bool",v:!1}:tt(i.v)?{t:"err",v:"#VALUE!"}:{t:"bool",v:(((s=t.get(i.v))==null?void 0:s.v)||"")===""}}function Jm(l,e,t){var c;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=e(o[0]);if(i.t==="err")return i;if(i.t==="num")return{t:"bool",v:!0};if(i.t!=="ref"||!t)return{t:"bool",v:!1};if(tt(i.v))return{t:"err",v:"#VALUE!"};const r=((c=t.get(i.v))==null?void 0:c.v)||"",s=r.toUpperCase();return{t:"bool",v:r!==""&&!(s==="TRUE"||s==="FALSE")&&!isNaN(Number(r))}}function Zm(l,e,t){var u;const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==1)return{t:"err",v:"#N/A!"};const i=e(o[0]);if(i.t==="err")return i;if(i.t==="str")return{t:"bool",v:!0};if(i.t!=="ref"||!t)return{t:"bool",v:!1};if(tt(i.v))return{t:"err",v:"#VALUE!"};const r=((u=t.get(i.v))==null?void 0:u.v)||"";if(r==="")return{t:"bool",v:!1};const s=r.toUpperCase(),a=s==="TRUE"||s==="FALSE",c=!isNaN(Number(r));return{t:"bool",v:!a&&!c}}function eg(l,e,t){const n=l.args();if(!n)return{t:"err",v:"#N/A!"};const o=n.expr();if(o.length!==2)return{t:"err",v:"#N/A!"};const i=e(o[0]);return i.t==="err"?e(o[1]):i}function ap(l){const e=Jn.CharStreams.fromString(l.slice(1)),t=new Zn(e),n=new Jn.CommonTokenStream(t);t.removeErrorListeners(),n.fill();const o=new Set;for(const i of n.getTokens())i.type===Ie.REFERENCE&&o.add(i.text.toUpperCase());return o}function Ir(l){const e=Jn.CharStreams.fromString(l.slice(1)),t=new Zn(e),n=new Jn.CommonTokenStream(t);t.removeErrorListeners(),n.fill();const o=[];for(const s of n.getTokens())s.type!=Zn.EOF&&o.push({type:t.vocabulary.getSymbolicName(s.type)||"STRING",start:s.startIndex,stop:s.stopIndex,text:s.text});const i=[];let r;for(const s of o)!r&&s.start>0?i.push({type:"STRING",start:0,stop:s.start-1,text:l.slice(1,s.start+1)}):r&&r.stop+1!==s.start&&i.push({type:"STRING",start:r.stop+1,stop:s.start-1,text:l.slice(r.stop+2,s.start+1)}),i.push(s),r=s;return r&&r.stop+2<l.length&&i.push({type:"STRING",start:r.stop+1,stop:l.length-1,text:l.slice(r.stop+2)}),i}function Fi(l){const e=Ir(l),t=[];for(const n of e)if(n.type==="REFERENCE")try{const o=n.text.toUpperCase();if(wo(o))continue;if(o.includes(":"))t.push({text:o,range:wa(o)});else{const i=Te(o);t.push({text:o,range:[i,i]})}}catch{}return t}function tg(l,e){if(!l.startsWith("=")||e<=0)return!1;if(e===1)return!0;const t=Ir(l);for(const s of t){const a=s.start+1,c=s.stop+2;if(s.type==="REFERENCE"&&e>=a&&e<=c)return!0}const o=l.slice(0,e).trimEnd();if(o.length===0)return!1;const i=o[o.length-1];return new Set(["=","(",",","+","-","*","/","<",">",":"]).has(i)}function Pf(l,e){if(!l.startsWith("="))return;const t=Ir(l);for(const n of t){if(n.type!=="REFERENCE")continue;const o=n.start+1,i=n.stop+2;if(e>=o&&e<=i)return{start:o,end:i,text:n.text}}}function rg(l,e){var t;try{const n=Jn.CharStreams.fromString(l.slice(1)),o=new Zn(n),i=new Jn.CommonTokenStream(o),r=new Ie(i),s=r.expr(),a=new ng(e);o.removeErrorListeners(),r.removeErrorListeners();const c=a.visit(s);return c.t==="ref"&&e?tt(c.v)?"#VALUE!":((t=e.get(c.v))==null?void 0:t.v)||"":c.v.toString()}catch{return"#ERROR!"}}class ng{constructor(e){k(this,"grid");this.visit=this.visit.bind(this),this.grid=e}visitChildren(){throw new Error("Method not implemented.")}visitTerminal(){throw new Error("Method not implemented.")}visitErrorNode(){throw new Error("Method not implemented.")}visitFormula(){throw new Error("Method not implemented.")}visitExpr(){throw new Error("Method not implemented.")}visitArgs(){throw new Error("Method not implemented.")}visit(e){return e.accept(this)}visitFunction(e){const t=e.FUNCNAME().text.toUpperCase();if(Ff.has(t))return Ff.get(t)(e,this.visit,this.grid);throw new Error("Function not implemented.")}visitReference(e){return this.grid?{t:"ref",v:e.text.toUpperCase()}:{t:"err",v:"#REF!"}}visitParentheses(e){return this.visit(e.expr())}visitNumber(e){return{t:"num",v:Number(e.text)}}visitBoolean(e){return{t:"bool",v:e.text==="TRUE"||e.text==="true"}}visitAddSub(e){const t=Le.map(this.visit(e.expr(0)),this.grid);if(t.t==="err")return t;const n=Le.map(this.visit(e.expr(1)),this.grid);return n.t==="err"?n:e._op.type===Ie.ADD?{t:"num",v:t.v+n.v}:{t:"num",v:t.v-n.v}}visitMulDiv(e){const t=Le.map(this.visit(e.expr(0)),this.grid);if(t.t==="err")return t;const n=Le.map(this.visit(e.expr(1)),this.grid);return n.t==="err"?n:e._op.type===Ie.MUL?{t:"num",v:t.v*n.v}:{t:"num",v:t.v/n.v}}visitComparison(e){const t=Le.map(this.visit(e.expr(0)),this.grid);if(t.t==="err")return t;const n=Le.map(this.visit(e.expr(1)),this.grid);if(n.t==="err")return n;switch(e._op.type){case Ie.EQ:return{t:"bool",v:t.v===n.v};case Ie.NEQ:return{t:"bool",v:t.v!==n.v};case Ie.LT:return{t:"bool",v:t.v<n.v};case Ie.GT:return{t:"bool",v:t.v>n.v};case Ie.LTE:return{t:"bool",v:t.v<=n.v};case Ie.GTE:return{t:"bool",v:t.v>=n.v};default:return{t:"err",v:"#ERROR!"}}}visitStr(e){return{t:"str",v:e.text.slice(1,-1)}}}function lt(l,e,t,n){const o=e+t;return n<=e?l>=e&&l<o?n+(l-e):l>=n&&l<e?l+t:l:l>=e&&l<o?n-t+(l-e):l>=o&&l<n?l-t:l}function Un(l,e,t,n,o){return e==="row"?{r:lt(l.r,t,n,o),c:l.c}:{r:l.r,c:lt(l.c,t,n,o)}}function ig(l,e,t,n,o){const i=Ir(l);let r="=";for(const s of i)if(s.type==="REFERENCE"){const a=s.text;if(a.includes("!"))r+=a;else if(a.includes(":")){const[c,u]=a.split(":"),h=Te(c.toUpperCase()),f=Te(u.toUpperCase()),d=Un(h,e,t,n,o),p=Un(f,e,t,n,o);r+=pe(d)+":"+pe(p)}else{const c=Te(a.toUpperCase()),u=Un(c,e,t,n,o);r+=pe(u)}}else r+=s.text;return r}function og(l,e,t,n,o){const i=new Map;for(const[r,s]of l){const a=Te(r),c=Un(a,e,t,n,o),u=pe(c);let h;s.f?h={...s,f:ig(s.f,e,t,n,o)}:h={...s},i.set(u,h)}return i}function Tr(l,e,t,n){const o=new Map;for(const[i,r]of l)o.set(lt(i,e,t,n),r);return o}function Df(l,e,t){const n=Ir(l);let o="=";for(const i of n)if(i.type==="REFERENCE"){const r=i.text;if(r.includes("!"))o+=r;else if(r.includes(":")){const[s,a]=r.split(":"),c=Te(s.toUpperCase()),u=Te(a.toUpperCase()),h={r:c.r+e,c:c.c+t},f={r:u.r+e,c:u.c+t};h.r<1||h.c<1||f.r<1||f.c<1?o+="#REF!":o+=pe(h)+":"+pe(f)}else{const s=Te(r.toUpperCase()),a={r:s.r+e,c:s.c+t};a.r<1||a.c<1?o+="#REF!":o+=pe(a)}}else o+=i.text;return o}function ho(l,e,t,n){const o=e==="row"?l.r:l.c;if(n>0)return o>=t?e==="row"?{r:l.r+n,c:l.c}:{r:l.r,c:l.c+n}:l;const i=Math.abs(n);return o>=t&&o<t+i?null:o>=t+i?e==="row"?{r:l.r+n,c:l.c}:{r:l.r,c:l.c+n}:l}function sg(l,e,t,n){const o=Te(l),i=ho(o,e,t,n);return i?pe(i):null}function ag(l,e,t,n){const o=Ir(l);let i="=";for(const r of o)if(r.type==="REFERENCE"){const s=r.text;if(s.includes("!"))i+=s;else if(s.includes(":")){const[a,c]=s.split(":"),u=Te(a.toUpperCase()),h=Te(c.toUpperCase()),f=ho(u,e,t,n),d=ho(h,e,t,n);!f||!d?i+="#REF!":i+=pe(f)+":"+pe(d)}else{const a=Te(s.toUpperCase()),c=ho(a,e,t,n);c?i+=pe(c):i+="#REF!"}}else i+=r.text;return i}function br(l,e,t){const n=new Map;for(const[o,i]of l)if(t>0)o>=e?n.set(o+t,i):n.set(o,i);else{const r=Math.abs(t);o>=e&&o<e+r||(o>=e+r?n.set(o+t,i):n.set(o,i))}return n}function lg(l,e,t,n){const o=new Map;for(const[i,r]of l){const s=sg(i,e,t,n);if(s===null)continue;let a;r.f?a={...r,f:ag(r.f,e,t,n)}:a={...r},o.set(s,a)}return o}function lp(l){const e={};for(const t of Object.keys(l)){const n=l[t];n!==void 0&&(e[t]=n)}return Object.keys(e).length>0?e:void 0}function up(l,e){const t=l?{...l}:{};let n=!1;for(const o of Object.keys(e)){const i=e[o];i!==void 0&&(t[o]=i,n=!0)}if(Object.keys(t).length!==0&&!(!l&&!n))return t}function ul(l){const e=Math.min(l[0].r,l[1].r),t=Math.min(l[0].c,l[1].c),n=Math.max(l[0].r,l[1].r),o=Math.max(l[0].c,l[1].c);return[{r:e,c:t},{r:n,c:o}]}function ji(l){return{range:ul(l.range),style:{...l.style}}}function xr(l){const e=lp(l.style);if(e)return{range:ul(l.range),style:e}}function qi(l,e){const t=Object.keys(l),n=Object.keys(e);if(t.length!==n.length)return!1;for(const o of t)if(l[o]!==e[o])return!1;return!0}function ug(l,e){return l[0].r<=e[0].r&&l[0].c<=e[0].c&&l[1].r>=e[1].r&&l[1].c>=e[1].c}function cl(l){const e=[];for(let t=l.length-1;t>=0;t--){const n=xr(l[t]);if(!n)continue;let o=!1;for(const i of e)if(qi(i.style,n.style)&&ug(i.range,n.range)){o=!0;break}o||e.push(ji(n))}return e.reverse()}function cp(l){if(l.length<=1)return l;const e=[...l].sort((n,o)=>n[0]-o[0]),t=[];for(const n of e){const o=t[t.length-1];if(!o){t.push([n[0],n[1]]);continue}if(n[0]<=o[1]+1){o[1]=Math.max(o[1],n[1]);continue}t.push([n[0],n[1]])}return t}function If(l,e,t,n){if(n===0)return[[l,e]];if(n>0)return e<t?[[l,e]]:l>=t?[[l+n,e+n]]:[[l,e+n]];const o=Math.abs(n),i=t+o-1,r=[];return l<t&&r.push([l,Math.min(e,t-1)]),e>i&&r.push([Math.max(l,i+1)+n,e+n]),cp(r.filter(([s,a])=>s<=a))}function Lf(l,e,t,n,o){const i=t+n,r=[];o<=t?(r.push({start:Number.NEGATIVE_INFINITY,end:o-1,delta:0}),r.push({start:o,end:t-1,delta:n}),r.push({start:t,end:i-1,delta:o-t}),r.push({start:i,end:Number.POSITIVE_INFINITY,delta:0})):(r.push({start:Number.NEGATIVE_INFINITY,end:t-1,delta:0}),r.push({start:t,end:i-1,delta:o-n-t}),r.push({start:i,end:o-1,delta:-n}),r.push({start:o,end:Number.POSITIVE_INFINITY,delta:0}));const s=[];for(const a of r){const c=Math.max(l,a.start),u=Math.min(e,a.end);c>u||s.push([c+a.delta,u+a.delta])}return cp(s)}function hp(l,e,t){const n=[];for(const[o,i]of t){if(e==="row"){n.push({range:[{r:o,c:l.range[0].c},{r:i,c:l.range[1].c}],style:{...l.style}});continue}n.push({range:[{r:l.range[0].r,c:o},{r:l.range[1].r,c:i}],style:{...l.style}})}return n}function fp(l,e){if(l.length<=1)return l.map(ji);const t=[];for(const n of l){const o=xr(n);if(!o)continue;const i=t[t.length-1];if(!i||!qi(i.style,o.style)){t.push(o);continue}if(e==="row"){const a=i.range[0].c===o.range[0].c&&i.range[1].c===o.range[1].c,c=o.range[0].r<=i.range[1].r+1;if(!a||!c){t.push(o);continue}i.range[0].r=Math.min(i.range[0].r,o.range[0].r),i.range[1].r=Math.max(i.range[1].r,o.range[1].r);continue}const r=i.range[0].r===o.range[0].r&&i.range[1].r===o.range[1].r,s=o.range[0].c<=i.range[1].c+1;if(!r||!s){t.push(o);continue}i.range[0].c=Math.min(i.range[0].c,o.range[0].c),i.range[1].c=Math.max(i.range[1].c,o.range[1].c)}return t}function dp(l,e,t,n){const o=[];for(const i of l){const r=xr(i);if(!r)continue;const s=e==="row"?If(r.range[0].r,r.range[1].r,t,n):If(r.range[0].c,r.range[1].c,t,n);o.push(...hp(r,e,s))}return cl(fp(o,e))}function pp(l,e,t,n,o){const i=[];for(const r of l){const s=xr(r);if(!s)continue;const a=e==="row"?Lf(s.range[0].r,s.range[1].r,t,n,o):Lf(s.range[0].c,s.range[1].c,t,n,o);i.push(...hp(s,e,a))}return cl(fp(i,e))}function cg(l,e){const t=ul(e),n=[];for(const o of l){const i=xr(o);if(!i)continue;const r=Math.max(i.range[0].r,t[0].r),s=Math.min(i.range[1].r,t[1].r),a=Math.max(i.range[0].c,t[0].c),c=Math.min(i.range[1].c,t[1].c);r>s||a>c||n.push({range:[{r,c:a},{r:s,c}],style:{...i.style}})}return n}function hg(l,e,t){const n=[];for(const o of l){const i=xr(o);if(!i)continue;const r=i.range[0].r+e,s=i.range[1].r+e,a=i.range[0].c+t,c=i.range[1].c+t;s<1||c<1||n.push({range:[{r:Math.max(1,r),c:Math.max(1,a)},{r:Math.max(1,s),c:Math.max(1,c)}],style:{...i.style}})}return n}function xp(l,e,t){let n;for(const o of l)e<o.range[0].r||e>o.range[1].r||t<o.range[0].c||t>o.range[1].c||(n=up(n,o.style));return n}function Pi(l,e){return[{r:l.r,c:l.c},{r:l.r+e.rs-1,c:l.c+e.cs-1}]}function Bf(l,e,t,n){if(n>0)return t<=l?[l+n,e+n]:t<=e?[l,e+n]:[l,e];const o=Math.abs(n),i=t,r=t+o-1;if(r<l)return[l+n,e+n];if(i>e)return[l,e];const s=Math.max(l,i),c=Math.min(e,r)-s+1,u=e-l+1-c;return u<=0?null:i<=l?[i,i+u-1]:[l,l+u-1]}function fg(l,e,t,n,o){const i=Bf(l.r,l.r+e.rs-1,t==="row"?n:Number.NEGATIVE_INFINITY,t==="row"?o:0);if(!i)return null;const r=Bf(l.c,l.c+e.cs-1,t==="column"?n:Number.NEGATIVE_INFINITY,t==="column"?o:0);if(!r)return null;const[s,a]=i,[c,u]=r,h=a-s+1,f=u-c+1;return h<=1&&f<=1?null:{anchor:{r:s,c},span:{rs:h,cs:f}}}function dg(l,e,t,n,o,i){const r=t==="row"?l.r+e.rs-1:l.c+e.cs-1,s=t==="row"?l.r:l.c,a=lt(s,n,o,i),c=lt(r,n,o,i),u=Math.min(a,c),f=Math.max(a,c)-u+1;if(t==="row"){const S=f,x=e.cs;return S<=1&&x<=1?null:{anchor:{r:u,c:l.c},span:{rs:S,cs:x}}}const d=e.rs,p=f;return d<=1&&p<=1?null:{anchor:{r:l.r,c:u},span:{rs:d,cs:p}}}function mp(l,e,t,n){const o=new Map;for(const[i,r]of l){const s=Te(i),a=fg(s,r,e,t,n);a&&o.set(pe(a.anchor),a.span)}return o}function gp(l,e,t,n,o){const i=new Map;for(const[r,s]of l){const a=Te(r),c=dg(a,s,e,t,n,o);c&&i.set(pe(c.anchor),c.span)}return i}function pg(l,e,t,n,o){const i=t==="row"?l.r:l.c,r=t==="row"?l.r+e.rs-1:l.c+e.cs-1,s=n+o-1;return r<n||i>s?!1:!(i>=n&&r<=s)}class Mf{constructor(e){k(this,"customSizes");k(this,"defaultSize");k(this,"cacheDirty",!0);k(this,"sortedIndices",[]);k(this,"sortedSizes",[]);k(this,"prefixDeltas",[]);k(this,"customStarts",[]);this.defaultSize=e,this.customSizes=new Map}getSize(e){return this.customSizes.get(e)??this.defaultSize}setSize(e,t){t===this.defaultSize?this.customSizes.delete(e):this.customSizes.set(e,t),this.cacheDirty=!0}getDefaultSize(){return this.defaultSize}getOffset(e){let t=(e-1)*this.defaultSize;if(this.customSizes.size===0)return t;this.ensureCache();const n=this.lowerBound(this.sortedIndices,e)-1;return n>=0&&(t+=this.prefixDeltas[n]),t}findIndex(e){if(e<0)return 1;if(this.customSizes.size===0)return Math.floor(e/this.defaultSize)+1;this.ensureCache();const t=this.customStarts[0];if(e<t)return Math.floor(e/this.defaultSize)+1;const n=this.upperBound(this.customStarts,e)-1,o=this.sortedIndices[n],i=this.customStarts[n],r=this.sortedSizes[n];if(e<i+r)return o;const s=e-(i+r);return o+1+Math.floor(s/this.defaultSize)}shift(e,t){const n=new Map;for(const[o,i]of this.customSizes)if(t>0)o>=e?n.set(o+t,i):n.set(o,i);else{const r=Math.abs(t);o>=e&&o<e+r||(o>=e+r?n.set(o+t,i):n.set(o,i))}this.customSizes=n,this.cacheDirty=!0}move(e,t,n){const o=new Map;for(const[i,r]of this.customSizes)o.set(lt(i,e,t,n),r);this.customSizes=o,this.cacheDirty=!0}clear(){this.customSizes.clear(),this.cacheDirty=!0}hasCustomSizes(){return this.customSizes.size>0}ensureCache(){if(!this.cacheDirty)return;if(this.customSizes.size===0){this.sortedIndices=[],this.sortedSizes=[],this.prefixDeltas=[],this.customStarts=[],this.cacheDirty=!1;return}const e=Array.from(this.customSizes.entries()).sort((n,o)=>n[0]-o[0]);this.sortedIndices=[],this.sortedSizes=[],this.prefixDeltas=[],this.customStarts=[];let t=0;for(const[n,o]of e)this.sortedIndices.push(n),this.sortedSizes.push(o),this.customStarts.push((n-1)*this.defaultSize+t),t+=o-this.defaultSize,this.prefixDeltas.push(t);this.cacheDirty=!1}lowerBound(e,t){let n=0,o=e.length;for(;n<o;){const i=n+Math.floor((o-n)/2);e[i]<t?n=i+1:o=i}return n}upperBound(e,t){let n=0,o=e.length;for(;n<o;){const i=n+Math.floor((o-n)/2);e[i]<=t?n=i+1:o=i}return n}}class xg{constructor(){k(this,"rowIndex",new Map);k(this,"colIndex",new Map)}add(e,t){let n=this.rowIndex.get(e);n||(n=new Set,this.rowIndex.set(e,n)),n.add(t);let o=this.colIndex.get(t);o||(o=new Set,this.colIndex.set(t,o)),o.add(e)}remove(e,t){const n=this.rowIndex.get(e);n&&(n.delete(t),n.size===0&&this.rowIndex.delete(e));const o=this.colIndex.get(t);o&&(o.delete(e),o.size===0&&this.colIndex.delete(t))}has(e,t){const n=this.rowIndex.get(e);return n!==void 0&&n.has(t)}clear(){this.rowIndex.clear(),this.colIndex.clear()}rebuild(e){this.clear();for(const[t,n]of e)this.add(t,n)}*cellsInRange(e){const[t,n]=e;for(const[o,i]of this.rowIndex)if(!(o<t.r||o>n.r))for(const r of i)r>=t.c&&r<=n.c&&(yield[o,r])}hasAnyInRange(e){return!this.cellsInRange(e).next().done}getOccupiedColsInRow(e){return this.rowIndex.get(e)}getOccupiedRowsInCol(e){return this.colIndex.get(e)}get size(){let e=0;for(const t of this.rowIndex.values())e+=t.size;return e}}function mg(l,e,t,n,o){const i=t==="left"||t==="right",r=t==="down"||t==="right",s=i?e.c:e.r,a=i?n[0].c:n[0].r,c=i?n[1].c:n[1].r,u=i?l.getOccupiedColsInRow(e.r):l.getOccupiedRowsInCol(e.c);let h;if(u&&o){const v=new Set;for(const m of u){const g=i?e.r:m,y=i?m:e.c;o(g,y)&&v.add(m)}h=v.size>0?v:void 0}else h=u;if(!h||h.size===0)return kf(e,t,n);const f=Array.from(h).sort((v,m)=>v-m);r||f.reverse();const d=r?f.filter(v=>v>s):f.filter(v=>v<s),p=h.has(s),S=r?s+1:s-1,x=Ar(i?{r:e.r,c:S}:{r:S,c:e.c},n)&&h.has(S);if(p&&x){let v=s,m=S;for(;(r?m<=c:m>=a)&&h.has(m);)v=m,m=r?m+1:m-1;return i?{r:e.r,c:v}:{r:v,c:e.c}}if(d.length>0){const v=d[0];return i?{r:e.r,c:v}:{r:v,c:e.c}}return kf(e,t,n)}function kf(l,e,t){switch(e){case"up":return{r:t[0].r,c:l.c};case"down":return{r:t[1].r,c:l.c};case"left":return{r:l.r,c:t[0].c};case"right":return{r:l.r,c:t[1].c}}}async function yr(l,e,t){const[n,o]=gg(e,t);for(const i of n){const r=Te(i);if(!await l.hasFormula(r))continue;const s=await l.getCell(r);if(o.has(i)){await l.setCell(r,{v:"#REF!",f:s.f,s:s.s});continue}const a=ap(s.f),c=await l.fetchGridByReferences(a),u=await rg(s.f,c);await l.setCell(r,{v:u,f:s.f,s:s.s})}}function gg(l,e){const t=[],n=new Set,o=new Set,i=new Set,r=s=>{if(i.has(s))for(const a of i)n.add(a);if(i.add(s),!o.has(s)){if(o.add(s),l.has(s))for(const a of l.get(s))r(a);t.push(s)}i.delete(s)};for(const s of e)r(s);return[t.reverse(),n]}function yg(l){let e=1/0,t=1/0,n=0,o=0;for(const[r]of l.entries()){const{r:s,c:a}=Te(r);e=Math.min(e,s),t=Math.min(t,a),n=Math.max(n,s),o=Math.max(o,a)}const i=Array.from({length:n-e+1},()=>Array(o-t+1).fill(""));for(const[r,s]of l.entries()){const{r:a,c}=Te(r);i[a-e][c-t]=s.v||s.f||""}return i.map(r=>r.join("	")).join(`
`)}function vg(l,e){let t=l.r,n=l.c;const o=new Map,i=e.split(`
`);for(const r of i){const s=r.split("	");for(const a of s)o.set(pe({r:t,c:n}),{v:a}),n+=1;t+=1,n=l.c}return o}function zf(l){const e=l.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);if(!e)return;const t=parseInt(e[1],10),n=parseInt(e[2],10),o=parseInt(e[3],10);if(!(t===255&&n===255&&o===255))return"#"+t.toString(16).padStart(2,"0")+n.toString(16).padStart(2,"0")+o.toString(16).padStart(2,"0")}function Sg(l){return l.includes("google-sheets-html-origin")||l.includes("data-sheets-value")||l.includes("urn:schemas-microsoft-com:office:excel")||l.includes('xmlns:x="urn:schemas-microsoft-com:office:excel"')}function Ag(l,e){const o=new DOMParser().parseFromString(l,"text/html").querySelector("table");if(!o)return new Map;const i=new Map,r=o.querySelectorAll("tr");for(let s=0;s<r.length;s++){const a=r[s].querySelectorAll("td, th");for(let c=0;c<a.length;c++){const u=a[c],h=u.textContent||"";if(!h&&!u.style.cssText)continue;const f={v:h},d={};let p=!1;const S=u.style.fontWeight;if((S==="bold"||S==="700")&&(d.b=!0,p=!0),u.style.fontStyle==="italic"&&(d.i=!0,p=!0),u.style.backgroundColor){const x=zf(u.style.backgroundColor);x&&(d.bg=x,p=!0)}if(u.style.color){const x=zf(u.style.color);x&&(d.tc=x,p=!0)}if(u.style.textAlign){const x=u.style.textAlign;(x==="left"||x==="center"||x==="right")&&(d.al=x,p=!0)}p&&(f.s=d),i.set(pe({r:e.r+s,c:e.c+c}),f)}}return i}const hl="en-US",jf="USD",Cg=new Set(["AT","BE","CY","DE","EE","ES","FI","FR","GR","HR","IE","IT","LT","LU","LV","MT","NL","PT","SI","SK"]),Eg={AE:"AED",AR:"ARS",AU:"AUD",BD:"BDT",BR:"BRL",CA:"CAD",CH:"CHF",CL:"CLP",CN:"CNY",CO:"COP",CZ:"CZK",DK:"DKK",EG:"EGP",GB:"GBP",HK:"HKD",HU:"HUF",ID:"IDR",IL:"ILS",IN:"INR",JP:"JPY",KE:"KES",KR:"KRW",KW:"KWD",MX:"MXN",MY:"MYR",NG:"NGN",NO:"NOK",NZ:"NZD",PE:"PEN",PH:"PHP",PK:"PKR",PL:"PLN",QA:"QAR",RO:"RON",RU:"RUB",SA:"SAR",SE:"SEK",SG:"SGD",TH:"THB",TR:"TRY",TW:"TWD",UA:"UAH",US:"USD",VN:"VND",ZA:"ZAR"},qf=new Map;function fl(l){return l&&l.trim()?l.trim():typeof navigator<"u"&&navigator.language?navigator.language:Intl.DateTimeFormat().resolvedOptions().locale||hl}function _g(l){const[e]=l.replace(/_/g,"-").split("-u-"),t=e.split("-").filter(Boolean);for(let n=1;n<t.length;n++){const o=t[n];if(/^[a-z]{2}$/i.test(o))return o.toUpperCase()}try{const n=new Intl.Locale(l).maximize().region;if(n)return n.toUpperCase()}catch{}}function ya(l,e,t){try{return new Intl.NumberFormat(e,t).format(l)}catch{return new Intl.NumberFormat(hl,t).format(l)}}function Tg(l,e){try{return new Intl.DateTimeFormat(e,{dateStyle:"medium"}).format(l)}catch{return new Intl.DateTimeFormat(hl,{year:"numeric",month:"short",day:"numeric"}).format(l)}}function bg(){return fl()}function yp(l){const e=fl(l),t=qf.get(e);if(t)return t;const n=_g(e);let o=jf;return n&&(o=Cg.has(n)?"EUR":Eg[n]??jf),qf.set(e,o),o}function eS(l){const e=fl(l),t=yp(e);return{locale:e,currency:t,number:ya(1234.56,e,{minimumFractionDigits:2,maximumFractionDigits:2}),currencyValue:ya(1234.56,e,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}),percent:ya(.1234,e,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:Tg(new Date(2026,1,18),e)}}function to(l,e,t){try{return l.toLocaleString(e,t)}catch{return l.toLocaleString("en-US",t)}}function Rg(l){const e=l.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(e){const n=Number(e[1]),o=Number(e[2]),i=Number(e[3]),r=new Date(n,o-1,i);return r.getFullYear()===n&&r.getMonth()===o-1&&r.getDate()===i?r:void 0}const t=new Date(l);if(!isNaN(t.getTime()))return t}function Ng(l,e){const t=Rg(l);if(!t)return l;try{return new Intl.DateTimeFormat(e,{dateStyle:"medium"}).format(t)}catch{return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}}function Oa(l,e,t,n){if(!e||e==="plain"||l==="")return l;const o=t??2,i=(n==null?void 0:n.locale)??bg(),r=(n==null?void 0:n.currency)??yp(i);switch(e){case"number":{const s=Number(l);return isNaN(s)?l:to(s,i,{minimumFractionDigits:o,maximumFractionDigits:o})}case"currency":{const s=Number(l);return isNaN(s)?l:t===void 0?to(s,i,{style:"currency",currency:r}):to(s,i,{style:"currency",currency:r,minimumFractionDigits:o,maximumFractionDigits:o})}case"percent":{const s=Number(l);return isNaN(s)?l:to(s,i,{style:"percent",minimumFractionDigits:o,maximumFractionDigits:o})}case"date":return Ng(l,i);default:return l}}const wg={$:"USD","":"KRW"};function Hf(l){return l.length>1&&l.startsWith("0")}function Og(l){if(!l.includes(","))return/^\d+$/.test(l)?l:void 0;const e=l.split(",");if(/^\d{1,3}$/.test(e[0])){for(let t=1;t<e.length;t++)if(!/^\d{3}$/.test(e[t]))return;return e.join("")}}function dl(l,e){if(l.length===0||/\s/.test(l))return;if(e.allowExponent&&/[eE]/.test(l)){const n=l.match(/^([+-])?(\d+(?:\.\d+)?|\.\d+)[eE]([+-]?\d+)$/);if(!n)return;const o=n[1]??"",i=n[2],r=n[3],s=i.startsWith(".")?"0":i.split(".")[0];if(!e.allowPaddedInteger&&Hf(s))return;const a=+`${o}${i}e${r}`;return Number.isFinite(a)?a:void 0}const t=l.match(/^([+-])?(\d[\d,]*)(?:\.(\d*))?$/);if(t){const n=t[1]??"",o=t[2],i=t[3],r=Og(o);if(!r||!e.allowPaddedInteger&&Hf(r))return;const s=i!==void 0?`${n}${r}.${i}`:`${n}${r}`,a=Number(s);return Number.isFinite(a)?a:void 0}if(e.allowLeadingDot){const n=l.match(/^([+-])?\.(\d+)$/);if(!n)return;const o=n[1]??"",i=n[2],r=+`${o}0.${i}`;return Number.isFinite(r)?r:void 0}}function vp(l,e,t){const n=new Date(l,e-1,t);if(!(n.getFullYear()!==l||n.getMonth()!==e-1||n.getDate()!==t))return`${String(l).padStart(4,"0")}-${String(e).padStart(2,"0")}-${String(t).padStart(2,"0")}`}function Fg(l){const e=l.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!e)return;const t=Number(e[1]),n=Number(e[2]),o=Number(e[3]);return vp(t,n,o)}function Pg(l,e){const t=l.match(/^(\d{1,2})\/(\d{1,2})$/);if(!t)return;const n=Number(t[1]),o=Number(t[2]);return vp(e,n,o)}function Dg(l){const e=l.match(/^([+-])?\s*([$])\s*([0-9][0-9,]*(?:\.[0-9]+)?|\.\d+)$/);if(!e)return;const t=e[1]??"",n=e[2],o=e[3],i=dl(`${t}${o}`,{allowExponent:!1,allowLeadingDot:!0,allowPaddedInteger:!0});if(i!==void 0)return{code:wg[n],value:i}}function Ig(l){const e=l.match(/^([+-])?\s*([0-9][0-9,]*(?:\.[0-9]+)?|\.\d+)\s*%$/);if(!e)return;const t=e[1]??"",n=e[2],o=dl(`${t}${n}`,{allowExponent:!1,allowLeadingDot:!0,allowPaddedInteger:!0});if(o!==void 0)return o/100}function Uf(l,e){const t=l.trim();if(t.startsWith("="))return{type:"formula",value:t.slice(1).trimStart()};const n=t.toLowerCase();if(n==="true")return{type:"boolean",value:!0};if(n==="false")return{type:"boolean",value:!1};const o=Dg(t);if(o)return{type:"number",value:o.value,format:`currency:${o.code}`};const i=Ig(t);if(i!==void 0)return{type:"number",value:i,format:"percent"};const r=Fg(t);if(r)return{type:"date",value:r,format:"yyyy-mm-dd"};const s=new Date().getFullYear(),a=Pg(t,s);if(a)return{type:"date",value:a,format:"yyyy-mm-dd"};const c=dl(t,{allowExponent:!0,allowLeadingDot:!0,allowPaddedInteger:!1});return c!==void 0?{type:"number",value:c}:{type:"text",value:t}}const Lg={rows:1e6,columns:18278},Bg=5e4,Mg={b:!1,i:!1,u:!1,st:!1,bt:!1,br:!1,bb:!1,bl:!1,al:"left",va:"top",nf:"plain",dp:2};class kg{constructor(e){k(this,"store");k(this,"dimension");k(this,"activeCell");k(this,"range");k(this,"selectionType","cell");k(this,"rowDimensions");k(this,"colDimensions");k(this,"frozenRows",0);k(this,"frozenCols",0);k(this,"colStyles",new Map);k(this,"rowStyles",new Map);k(this,"sheetStyle");k(this,"rangeStyles",[]);k(this,"merges",new Map);k(this,"mergeCoverMap",new Map);k(this,"filterRange");k(this,"filterColumns",new Map);k(this,"hiddenRows",new Set);k(this,"copyBuffer");k(this,"gridResolver");this.store=e,this.dimension={...Lg},this.activeCell={r:1,c:1}}get dimensionRange(){return[{r:1,c:1},{r:this.dimension.rows,c:this.dimension.columns}]}getDimension(){return this.dimension}setDimensions(e,t){this.rowDimensions=e,this.colDimensions=t}getRowDimensions(){return this.rowDimensions}getColDimensions(){return this.colDimensions}setRowHeight(e,t){var n;(n=this.rowDimensions)==null||n.setSize(e,t),this.store.setDimensionSize("row",e,t)}setColumnWidth(e,t){var n;(n=this.colDimensions)==null||n.setSize(e,t),this.store.setDimensionSize("column",e,t)}async loadDimensions(){if(this.rowDimensions){this.rowDimensions.clear();const e=await this.store.getDimensionSizes("row");for(const[t,n]of e)this.rowDimensions.setSize(t,n)}if(this.colDimensions){this.colDimensions.clear();const e=await this.store.getDimensionSizes("column");for(const[t,n]of e)this.colDimensions.setSize(t,n)}}getFreezePane(){return{frozenRows:this.frozenRows,frozenCols:this.frozenCols}}async setFreezePane(e,t){this.frozenRows=e,this.frozenCols=t,await this.store.setFreezePane(e,t)}async loadFreezePane(){const{frozenRows:e,frozenCols:t}=await this.store.getFreezePane();this.frozenRows=e,this.frozenCols=t}async loadStyles(){this.colStyles=await this.store.getColumnStyles(),this.rowStyles=await this.store.getRowStyles(),this.sheetStyle=await this.store.getSheetStyle(),this.rangeStyles=await this.store.getRangeStyles()}async loadMerges(){this.merges=await this.store.getMerges(),this.rebuildMergeCoverMap()}async loadFilterState(){const e=await this.store.getFilterState();if(!e){this.filterRange=void 0,this.filterColumns.clear(),this.hiddenRows.clear();return}this.filterRange=st(e.range[0],e.range[1]),this.filterColumns=new Map;for(const[t,n]of Object.entries(e.columns)){const o=Number(t);Number.isFinite(o)&&this.filterColumns.set(o,{...n})}this.normalizeFilterColumnsToRange(),this.hiddenRows=new Set(e.hiddenRows.filter(t=>t>0)),this.pruneHiddenRowsOutsideFilter(),this.ensureActiveCellVisibleAfterFiltering()}hasFilter(){return!!this.filterRange}getFilterRange(){return this.filterRange?at(this.filterRange):void 0}getHiddenRows(){return new Set(this.hiddenRows)}getFilteredColumns(){return new Set(this.filterColumns.keys())}getColumnFilterCondition(e){const t=this.filterColumns.get(e);if(t)return{...t,values:t.values?[...t.values]:void 0}}isColumnInFilter(e){return this.filterRange?e>=this.filterRange[0].c&&e<=this.filterRange[1].c:!1}getFilterState(){return this.buildFilterStatePayload()}getColStyles(){return this.colStyles}getRowStyles(){return this.rowStyles}getSheetStyle(){return this.sheetStyle}getRangeStyles(){return this.rangeStyles.map(e=>({range:at(e.range),style:{...e.style}}))}getMerges(){return this.merges}rebuildMergeCoverMap(){this.mergeCoverMap.clear();for(const[e,t]of this.merges){const n=Te(e);for(let o=n.r;o<n.r+t.rs;o++)for(let i=n.c;i<n.c+t.cs;i++){const r=pe({r:o,c:i});r!==e&&this.mergeCoverMap.set(r,e)}}}getAnchorSrefForRef(e){const t=pe(e);return this.merges.has(t)?t:this.mergeCoverMap.get(t)||t}normalizeRefToAnchor(e){return Te(this.getAnchorSrefForRef(e))}getMergeForRef(e){const t=this.getAnchorSrefForRef(e),n=this.merges.get(t);if(!n)return;const o=Te(t);return{anchorSref:t,anchor:o,span:n,range:Pi(o,n)}}expandRangeToMergedBoundaries(e){let t=at(e),n=!0;for(;n;){n=!1;for(const[o,i]of this.merges){const r=Pi(Te(o),i);if(!Ar(r[0],t)&&!Ar(r[1],t)&&!(r[0].r<=t[1].r&&r[1].r>=t[0].r&&r[0].c<=t[1].c&&r[1].c>=t[0].c))continue;const s=ga(t,r);Cr(s,t)||(t=s,n=!0)}}return t}*mergeCoveredSrefs(e,t){for(let n=e.r;n<e.r+t.rs;n++)for(let o=e.c;o<e.c+t.cs;o++)yield pe({r:n,c:o})}expandChangedSrefsWithMergeAliases(e){const t=new Set;for(const n of e){const o=this.getAnchorSrefForRef(Te(n)),i=this.merges.get(o);if(!i){t.add(n);continue}const r=Te(o);for(const s of this.mergeCoveredSrefs(r,i))t.add(s)}return t}getMergesIntersecting(e){const t=[];for(const[n,o]of this.merges){const i=Te(n),r=Pi(i,o);r[0].r<=e[1].r&&r[1].r>=e[0].r&&r[0].c<=e[1].c&&r[1].c>=e[0].c&&t.push({anchorSref:n,anchor:i,span:o,range:r})}return t}resolveEffectiveStyle(e,t,n){const o=this.sheetStyle,i=this.colStyles.get(t),r=this.rowStyles.get(e),s=xp(this.rangeStyles,e,t);if(!(!o&&!i&&!r&&!s&&!n))return{...o,...i,...r,...s,...n}}async getCell(e){return this.store.get(this.normalizeRefToAnchor(e))}async setCell(e,t){await this.store.set(this.normalizeRefToAnchor(e),t)}async setGrid(e){await this.store.setGrid(e)}async hasFormula(e){const t=await this.getCell(e);return!!(t&&t.f)}async toInputString(e){const t=await this.getCell(e);return t?t.f?t.f:t.v||"":""}async toDisplayString(e){const t=this.normalizeRefToAnchor(e),n=await this.store.get(t);if(!n||!n.v)return"";const o=this.resolveEffectiveStyle(t.r,t.c,n.s);return Oa(n.v,o==null?void 0:o.nf,o==null?void 0:o.dp,{currency:o==null?void 0:o.cu})}toStoredValue(e){switch(e.type){case"number":return e.value.toString();case"date":case"text":return e.value;case"boolean":return e.value?"TRUE":"FALSE"}}applyInferredFormat(e,t){var n;if(t.type==="date"){const o={...e||{},nf:"date"};return delete o.cu,o}if(t.type==="number"&&t.format==="percent"){const o={...e||{},nf:"percent"};return delete o.cu,o}return t.type==="number"&&((n=t.format)!=null&&n.startsWith("currency:"))?{...e||{},nf:"currency",cu:t.format.slice(9)}:e?{...e}:void 0}applyInputInferenceToGrid(e){const t=new Map;for(const[n,o]of e){if(o.f){t.set(n,{...o});continue}const i=Uf(o.v??""),r=this.applyInferredFormat(o.s,i),s=i.type==="formula"?{f:`=${i.value}`}:{v:this.toStoredValue(i)};t.set(n,this.compactCell(s,r))}return t}async setData(e,t){const n=this.normalizeRefToAnchor(e);this.store.beginBatch();try{const o=await this.store.get(n),i=Uf(t),r=this.applyInferredFormat(o==null?void 0:o.s,i),s=i.type==="formula"?{f:`=${i.value}`}:{v:this.toStoredValue(i)},a=this.compactCell(s,r);this.isEmptyCell(a)?await this.store.delete(n):await this.store.set(n,a);const c=this.expandChangedSrefsWithMergeAliases([pe(n)]),u=await this.store.buildDependantsMap(c);await yr(this,u,c),this.filterRange&&await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}}async removeData(){this.store.beginBatch();try{const e=this.getRangeOrActiveCell(),t=await this.store.getGrid(e),n=new Set;for(const[r,s]of t){const a=Te(r);s.s&&Object.keys(s.s).length>0?await this.store.set(a,{s:s.s}):await this.store.delete(a),n.add(r)}if(n.size===0)return!1;const o=this.expandChangedSrefsWithMergeAliases(n),i=await this.store.buildDependantsMap(o);return await yr(this,i,o),this.filterRange&&await this.recomputeFilterHiddenRows(),!0}finally{this.store.endBatch()}}async insertRows(e,t=1){await this.shiftCells("row",e,t)}async deleteRows(e,t=1){await this.shiftCells("row",e,-t)}async insertColumns(e,t=1){await this.shiftCells("column",e,t)}async deleteColumns(e,t=1){await this.shiftCells("column",e,-t)}async moveRows(e,t,n){await this.moveCells("row",e,t,n)}async moveColumns(e,t,n){await this.moveCells("column",e,t,n)}async shiftCells(e,t,n){var i,r;await this.store.shiftCells(e,t,n),e==="row"?((i=this.rowDimensions)==null||i.shift(t,n),this.rowStyles=br(this.rowStyles,t,n)):((r=this.colDimensions)==null||r.shift(t,n),this.colStyles=br(this.colStyles,t,n)),this.rangeStyles=dp(this.rangeStyles,e,t,n),this.merges=mp(this.merges,e,t,n),this.rebuildMergeCoverMap(),this.shiftFilterState(e,t,n);const o=e==="row"?this.activeCell.r:this.activeCell.c;if(n>0&&o>=t)e==="row"?this.activeCell={r:this.activeCell.r+n,c:this.activeCell.c}:this.activeCell={r:this.activeCell.r,c:this.activeCell.c+n};else if(n<0){const s=Math.abs(n);o>=t&&o<t+s?e==="row"?this.activeCell={r:Math.max(1,t),c:this.activeCell.c}:this.activeCell={r:this.activeCell.r,c:Math.max(1,t)}:o>=t+s&&(e==="row"?this.activeCell={r:this.activeCell.r+n,c:this.activeCell.c}:this.activeCell={r:this.activeCell.r,c:this.activeCell.c+n})}this.activeCell=this.normalizeRefToAnchor(this.activeCell),this.store.beginBatch();try{const s=e==="row"?this.frozenRows:this.frozenCols;if(s>0){if(n>0&&t<=s){const a=s+n;e==="row"?this.frozenRows=a:this.frozenCols=a,await this.store.setFreezePane(this.frozenRows,this.frozenCols)}else if(n<0){const a=Math.abs(n);if(t<=s){const c=Math.min(a,s-t+1),u=Math.max(0,s-c);e==="row"?this.frozenRows=u:this.frozenCols=u,await this.store.setFreezePane(this.frozenRows,this.frozenCols)}}}await this.recalculateAllFormulaCells(),this.filterRange&&await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}}async moveCells(e,t,n,o,i){var r,s;if(!(o>=t&&o<=t+n)){for(const[a,c]of this.merges){const u=Te(a);if(pg(u,c,e,t,n))return}if(await this.store.moveCells(e,t,n,o),e==="row"?((r=this.rowDimensions)==null||r.move(t,n,o),this.rowStyles=Tr(this.rowStyles,t,n,o)):((s=this.colDimensions)==null||s.move(t,n,o),this.colStyles=Tr(this.colStyles,t,n,o)),this.rangeStyles=pp(this.rangeStyles,e,t,n,o),this.merges=gp(this.merges,e,t,n,o),this.rebuildMergeCoverMap(),this.moveFilterState(e,t,n,o),this.activeCell=this.normalizeRefToAnchor(Un(this.activeCell,e,t,n,o)),this.range&&(this.range=this.expandRangeToMergedBoundaries([Un(this.range[0],e,t,n,o),Un(this.range[1],e,t,n,o)])),!(i!=null&&i.skipPostRecalculate)){this.store.beginBatch();try{await this.recalculateAllFormulaCells(),this.filterRange&&await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}}}}async recalculateAllFormulaCells(){const e=new Set,t=[{r:1,c:1},{r:1e3,c:100}],n=await this.store.getGrid(t);for(const[o,i]of n)i.f&&e.add(o);if(e.size>0){const o=await this.store.buildDependantsMap(e);await yr(this,o,e)}}buildFilterStatePayload(){if(!this.filterRange)return;const e={},t=Array.from(this.filterColumns.entries()).sort((n,o)=>n[0]-o[0]);for(const[n,o]of t)this.isColumnInFilter(n)&&(e[String(n)]={...o});return{range:at(this.filterRange),columns:e,hiddenRows:Array.from(this.hiddenRows).sort((n,o)=>n-o)}}normalizeFilterColumnsToRange(){if(!this.filterRange){this.filterColumns.clear();return}for(const e of this.filterColumns.keys())this.isColumnInFilter(e)||this.filterColumns.delete(e)}pruneHiddenRowsOutsideFilter(){if(!this.filterRange){this.hiddenRows.clear();return}const e=this.filterRange[0].r+1,t=this.filterRange[1].r,n=new Set;for(const o of this.hiddenRows)o>=e&&o<=t&&n.add(o);this.hiddenRows=n}normalizeFilterText(e){if(typeof e=="string")return e;if(e==null)return"";if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){const t=e;if(t.value!==void 0&&t.value!==e)return this.normalizeFilterText(t.value);if(typeof t.toJSON=="function")try{const n=t.toJSON.call(e);if(n!==e)return this.normalizeFilterText(n)}catch{}}return String(e)}normalizeFilterCondition(e){const t=e.op;if(t==="in"){const o=Array.from(new Set((e.values||[]).map(i=>this.normalizeFilterText(i).trim())));return{op:t,values:o}}if(t==="isEmpty"||t==="isNotEmpty")return{op:t};const n=this.normalizeFilterText(e.value).trim();if(n.length!==0)return{op:t,value:n}}matchesFilterCondition(e,t){const n=this.normalizeFilterText(e).trim(),o=n.toLowerCase(),i=this.normalizeFilterText(t.value).trim().toLowerCase();switch(t.op){case"in":return new Set((t.values||[]).map(r=>this.normalizeFilterText(r).trim())).has(n);case"contains":return o.includes(i);case"notContains":return!o.includes(i);case"equals":return o===i;case"notEquals":return o!==i;case"isEmpty":return o.length===0;case"isNotEmpty":return o.length>0;default:return!0}}async rowMatchesFilters(e,t){for(const[n,o]of this.filterColumns){if(n===t)continue;const i=await this.getCell({r:e,c:n}),r=this.normalizeFilterText(i==null?void 0:i.v);if(!this.matchesFilterCondition(r,o))return!1}return!0}async recomputeFilterHiddenRows(){if(!this.filterRange){this.hiddenRows.clear(),await this.store.setFilterState(void 0);return}if(this.filterRange=st({r:Math.max(1,this.filterRange[0].r),c:Math.max(1,this.filterRange[0].c)},{r:Math.min(this.dimension.rows,this.filterRange[1].r),c:Math.min(this.dimension.columns,this.filterRange[1].c)}),this.filterRange[1].r<=this.filterRange[0].r){this.filterRange=void 0,this.filterColumns.clear(),this.hiddenRows.clear(),await this.store.setFilterState(void 0);return}this.normalizeFilterColumnsToRange();const e=new Set,t=this.filterRange[0].r+1,n=this.filterRange[1].r;if(this.filterColumns.size>0)for(let o=t;o<=n;o++)await this.rowMatchesFilters(o)||e.add(o);this.hiddenRows=e,this.ensureActiveCellVisibleAfterFiltering(),await this.store.setFilterState(this.buildFilterStatePayload())}shiftFilterBoundary(e,t,n){if(n>0)return e>=t?e+n:e;const o=Math.abs(n);return e>=t&&e<t+o?t:e>=t+o?e+n:e}shiftFilterState(e,t,n){if(!this.filterRange)return;if(e==="row"){const s=this.shiftFilterBoundary(this.filterRange[0].r,t,n),a=this.shiftFilterBoundary(this.filterRange[1].r,t,n);this.filterRange=st({r:Math.max(1,s),c:this.filterRange[0].c},{r:Math.max(1,a),c:this.filterRange[1].c});const c=new Map;for(const h of this.hiddenRows)c.set(h,1);const u=br(c,t,n);this.hiddenRows=new Set(u.keys()),this.pruneHiddenRowsOutsideFilter();return}const o=this.shiftFilterBoundary(this.filterRange[0].c,t,n),i=this.shiftFilterBoundary(this.filterRange[1].c,t,n);this.filterRange=st({r:this.filterRange[0].r,c:Math.max(1,o)},{r:this.filterRange[1].r,c:Math.max(1,i)});const r=new Map;for(const[s,a]of this.filterColumns)r.set(s,a);this.filterColumns=br(r,t,n),this.normalizeFilterColumnsToRange()}moveFilterState(e,t,n,o){if(!this.filterRange)return;if(e==="row"){const a=lt(this.filterRange[0].r,t,n,o),c=lt(this.filterRange[1].r,t,n,o);this.filterRange=st({r:a,c:this.filterRange[0].c},{r:c,c:this.filterRange[1].c});const u=new Map;for(const f of this.hiddenRows)u.set(f,1);const h=Tr(u,t,n,o);this.hiddenRows=new Set(h.keys()),this.pruneHiddenRowsOutsideFilter();return}const i=lt(this.filterRange[0].c,t,n,o),r=lt(this.filterRange[1].c,t,n,o);this.filterRange=st({r:this.filterRange[0].r,c:i},{r:this.filterRange[1].r,c:r});const s=new Map;for(const[a,c]of this.filterColumns)s.set(a,c);this.filterColumns=Tr(s,t,n,o),this.normalizeFilterColumnsToRange()}ensureActiveCellVisibleAfterFiltering(){if(!this.hiddenRows.has(this.activeCell.r))return;let e;if(this.filterRange&&this.activeCell.r>this.filterRange[0].r&&this.activeCell.r<=this.filterRange[1].r)e=this.filterRange[0].r;else{for(let t=this.activeCell.r+1;t<=this.dimension.rows;t++)if(!this.hiddenRows.has(t)){e=t;break}if(e===void 0){for(let t=this.activeCell.r-1;t>=1;t--)if(!this.hiddenRows.has(t)){e=t;break}}}e!==void 0&&(this.range=void 0,this.setActiveCell({r:e,c:this.activeCell.c}))}findNextVisibleRow(e,t){const n=t==="down"?1:-1;let o=e;for(;o>=1&&o<=this.dimension.rows;){if(!this.hiddenRows.has(o))return o;o+=n}}async fetchGrid(e){return this.store.getGrid(e)}hasCellContent(e){const t=e.v!==void 0&&e.v!==""&&e.v!==null,n=!!e.f;return t||n}isEmptyCell(e){const t=this.hasCellContent(e),n=e.s!==void 0&&Object.keys(e.s).length>0;return!t&&!n}normalizeStylePatch(e){return lp(e)}mergeStylePatch(e,t){return up(e,t)}rangesIntersect(e,t){return e[0].r<=t[1].r&&e[1].r>=t[0].r&&e[0].c<=t[1].c&&e[1].c>=t[0].c}hasConflictingStyleSourceForKey(e,t,n,o){var r;const i=(r=this.sheetStyle)==null?void 0:r[t];if(i!==void 0&&i!==n)return!0;for(const[s,a]of this.colStyles){if(s<e[0].c||s>e[1].c)continue;const c=a[t];if(c!==void 0&&c!==n)return!0}for(const[s,a]of this.rowStyles){if(s<e[0].r||s>e[1].r)continue;const c=a[t];if(c!==void 0&&c!==n)return!0}for(let s=0;s<this.rangeStyles.length;s++){if(o!==void 0&&s===o)continue;const a=this.rangeStyles[s],c=a.style[t];if(!(c===void 0||c===n)&&this.rangesIntersect(e,a.range))return!0}return!1}pruneRedundantDefaultStyleKeys(e,t,n){const o={};for(const i of Object.keys(t)){const r=t[i];if(r===void 0)continue;const s=Mg[i];s!==void 0&&r===s&&!this.hasConflictingStyleSourceForKey(e,i,r,n)||(o[i]=r)}return Object.keys(o).length>0?o:void 0}sameRangeStylePatchList(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Cr(e[n].range,t[n].range)||!qi(e[n].style,t[n].style))return!1;return!0}compactShadowedRangeStyles(){const e=cl(this.rangeStyles);return this.sameRangeStylePatchList(e,this.rangeStyles)?!1:(this.rangeStyles=e,!0)}containsRange(e,t){return e[0].r<=t[0].r&&e[0].c<=t[0].c&&e[1].r>=t[1].r&&e[1].c>=t[1].c}mergeableColBand(e,t){return e[0].r!==t[0].r||e[1].r!==t[1].r?!1:t[0].c<=e[1].c+1&&e[0].c<=t[1].c+1}mergeableRowBand(e,t){return e[0].c!==t[0].c||e[1].c!==t[1].c?!1:t[0].r<=e[1].r+1&&e[0].r<=t[1].r+1}tryMergeRangeStylePatches(e,t){if(qi(e.style,t.style)){if(Cr(e.range,t.range)||this.containsRange(e.range,t.range))return e;if(this.containsRange(t.range,e.range))return t;if(this.mergeableColBand(e.range,t.range))return{range:[{r:e.range[0].r,c:Math.min(e.range[0].c,t.range[0].c)},{r:e.range[1].r,c:Math.max(e.range[1].c,t.range[1].c)}],style:{...e.style}};if(this.mergeableRowBand(e.range,t.range))return{range:[{r:Math.min(e.range[0].r,t.range[0].r),c:e.range[0].c},{r:Math.max(e.range[1].r,t.range[1].r),c:e.range[1].c}],style:{...e.style}}}}async addRangeStylePatch(e,t){const n=this.normalizeStylePatch(t);if(!n)return;const o=xr({range:at(e),style:n});if(!o)return;const i=this.rangeStyles,r=this.pruneRedundantDefaultStyleKeys(o.range,o.style);if(!r)return;o.style=r;const s=i[i.length-1];if(s&&Cr(s.range,o.range)){const u=this.mergeStylePatch(s.style,o.style);if(!u)return;const h=this.pruneRedundantDefaultStyleKeys(s.range,u,i.length-1);if(!h){this.rangeStyles=i.slice(0,-1),this.compactShadowedRangeStyles(),await this.store.setRangeStyles(this.rangeStyles);return}if(qi(h,s.style))return;s.style={...h},this.compactShadowedRangeStyles(),await this.store.setRangeStyles(this.rangeStyles);return}let a=o,c=i.length;for(let u=i.length-1;u>=0;u--){const h=i[u],f=this.tryMergeRangeStylePatches(h,a);if(!f)break;if(Cr(f.range,h.range)){if(u===i.length-1)return;this.rangeStyles=i.slice(0,u+1),this.compactShadowedRangeStyles(),await this.store.setRangeStyles(this.rangeStyles);return}a=f,c=u}if(c===i.length){this.rangeStyles.push(a),await this.store.addRangeStyle(a),this.compactShadowedRangeStyles()&&await this.store.setRangeStyles(this.rangeStyles);return}this.rangeStyles=[...i.slice(0,c),a],this.compactShadowedRangeStyles(),await this.store.setRangeStyles(this.rangeStyles)}async applyStylePatchToExistingCells(e,t){const n=this.normalizeStylePatch(t);if(!n)return;const o=await this.store.getGrid(e),i=new Set;for(const[r]of o){const s=Te(r),a=this.normalizeRefToAnchor(s),c=pe(a);if(i.has(c))continue;i.add(c);const u=await this.store.get(a);if(!(u!=null&&u.s))continue;const h={};for(const f of Object.keys(n)){const d=u.s[f],p=n[f];d===void 0||d===p||(h[f]=p)}Object.keys(h).length!==0&&await this.setStyle(a,h)}}compactCell(e,t){const n={};return e.v!==void 0&&(n.v=e.v),e.f!==void 0&&(n.f=e.f),t&&Object.keys(t).length>0&&(n.s=t),n}getCopyRange(){var e;return(e=this.copyBuffer)==null?void 0:e.sourceRange}clearCopyBuffer(){this.copyBuffer=void 0}async copy(){const e=this.getRangeOrActiveCell(),t=await this.fetchGrid(e),n=cg(this.rangeStyles,e),o=yg(t);return this.copyBuffer={sourceRange:e,grid:t,rangeStyles:n,text:o},{text:o}}async paste(e){const{text:t,html:n}=e;let o,i=[],r=!1;if(this.copyBuffer&&t===this.copyBuffer.text){o=this.relocateGrid(this.copyBuffer.grid,this.copyBuffer.sourceRange,this.activeCell);const s=this.activeCell.r-this.copyBuffer.sourceRange[0].r,a=this.activeCell.c-this.copyBuffer.sourceRange[0].c;i=hg(this.copyBuffer.rangeStyles,s,a)}else if(n&&Sg(n))o=Ag(n,this.activeCell),r=!0;else if(t)o=vg(this.activeCell,t),r=!0;else return;r&&(o=this.applyInputInferenceToGrid(o)),this.store.beginBatch();try{await this.setGrid(o);for(const a of i)await this.addRangeStylePatch(a.range,a.style),await this.applyStylePatchToExistingCells(a.range,a.style);const s=new Set;for(const[a]of o)s.add(a);if(s.size>0){const a=this.expandChangedSrefsWithMergeAliases(s),c=await this.store.buildDependantsMap(a);await yr(this,c,a)}this.filterRange&&await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}this.selectPastedRange(o)}selectPastedRange(e){if(e.size===0)return;let t=1/0,n=-1/0,o=1/0,i=-1/0;for(const r of e.keys()){const s=Te(r);s.r<t&&(t=s.r),s.r>n&&(n=s.r),s.c<o&&(o=s.c),s.c>i&&(i=s.c)}t===n&&o===i?this.selectStart({r:t,c:o}):(this.selectionType="cell",this.activeCell={r:t,c:o},this.range=[{r:t,c:o},{r:n,c:i}],this.store.updateActiveCell(this.activeCell))}relocateGrid(e,t,n){const o=n.r-t[0].r,i=n.c-t[0].c,r=new Map;for(const[s,a]of e){const c=Te(s),u={r:c.r+o,c:c.c+i},h=pe(u);if(a.f){const f=Df(a.f,o,i);r.set(h,{f,s:a.s})}else r.set(h,{...a})}return r}computeAutofillRange(e,t){if(!Ar(t,e))return ga(e,[t,t])}getAutofillPreviewRange(e){if(this.selectionType!=="cell")return;const t=this.getRangeOrActiveCell();return this.computeAutofillRange(t,e)}positiveMod(e,t){return(e%t+t)%t}cloneCellForAutofill(e,t,n){if(e.f){const i=Df(e.f,t,n);return e.s?{f:i,s:{...e.s}}:{f:i}}const o={};return e.v!==void 0&&(o.v=e.v),e.s&&(o.s={...e.s}),o}async autofill(e){if(this.selectionType!=="cell")return!1;const t=at(this.getRangeOrActiveCell()),n=this.computeAutofillRange(t,e);if(!n||this.getMergesIntersecting(n).length>0)return!1;const o=await this.store.getGrid(t),i=t[1].r-t[0].r+1,r=t[1].c-t[0].c+1,s=new Set;this.store.beginBatch();try{for(let a=n[0].r;a<=n[1].r;a++)for(let c=n[0].c;c<=n[1].c;c++){const u={r:a,c};if(Ar(u,t))continue;const h={r:t[0].r+this.positiveMod(u.r-t[0].r,i),c:t[0].c+this.positiveMod(u.c-t[0].c,r)},f=o.get(pe(h)),d=this.normalizeRefToAnchor(u),p=pe(d);if(!f){await this.store.delete(d),s.add(p);continue}const S=u.r-h.r,x=u.c-h.c,v=this.cloneCellForAutofill(f,S,x);this.isEmptyCell(v)?await this.store.delete(d):await this.store.set(d,v),s.add(p)}if(s.size>0){const a=this.expandChangedSrefsWithMergeAliases(s),c=await this.store.buildDependantsMap(a);await yr(this,c,a)}this.filterRange&&await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}return s.size===0?!1:(this.selectionType="cell",this.range=n,!0)}async hasContents(e){const t=await this.store.getGrid(e);for(const n of t.values())if(this.hasCellContent(n))return!0;return!1}async fetchGridByReferences(e){const t=new Map,n=new Map;for(const o of Dr(e))if(wo(o)){const{sheetName:i,localRef:r}=tp(o);n.has(i.toUpperCase())||n.set(i.toUpperCase(),new Set),n.get(i.toUpperCase()).add(r)}else{const i=this.normalizeRefToAnchor(Te(o)),r=await this.store.get(i);r&&t.set(o,r)}if(this.gridResolver&&n.size>0)for(const[o,i]of n){const r=this.gridResolver(o,i);if(r)for(const[s,a]of r)t.set(`${o}!${s}`,a)}return t}setGridResolver(e){this.gridResolver=e}async recalculateCrossSheetFormulas(){const e=await this.store.getFormulaGrid(),t=new Set;for(const[n]of e)t.add(n);if(t.size!==0){this.store.beginBatch();try{const n=await this.store.buildDependantsMap(t);await yr(this,n,t),this.filterRange&&await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}}}getActiveCell(){return this.activeCell}setActiveCell(e){const t=this.normalizeRefToAnchor(e);this.activeCell=t,this.store.updateActiveCell(t)}getRange(){return this.range}getPresences(){return this.store.getPresences()}getRangeOrActiveCell(){if(this.range)return this.expandRangeToMergedBoundaries(this.range);const e=this.getMergeForRef(this.activeCell);return e?e.range:[this.activeCell,this.activeCell]}getSelectionType(){return this.selectionType}selectRow(e){this.selectionType="row",this.activeCell={r:e,c:1},this.range=[{r:e,c:1},{r:e,c:this.dimension.columns}],this.store.updateActiveCell(this.activeCell)}selectColumn(e){this.selectionType="column",this.activeCell={r:1,c:e},this.range=[{r:1,c:e},{r:this.dimension.rows,c:e}],this.store.updateActiveCell(this.activeCell)}selectRowRange(e,t){this.selectionType="row";const n=Math.min(e,t),o=Math.max(e,t);this.range=[{r:n,c:1},{r:o,c:this.dimension.columns}]}selectColumnRange(e,t){this.selectionType="column";const n=Math.min(e,t),o=Math.max(e,t);this.range=[{r:1,c:n},{r:this.dimension.rows,c:o}]}selectAllCells(){this.selectionType="all",this.activeCell={r:1,c:1},this.range=at(this.dimensionRange),this.store.updateActiveCell(this.activeCell)}getSelectedIndices(){return this.selectionType==="cell"||this.selectionType==="all"||!this.range?null:this.selectionType==="row"?{axis:"row",from:this.range[0].r,to:this.range[1].r}:{axis:"column",from:this.range[0].c,to:this.range[1].c}}async createFilterFromSelection(){if(this.selectionType!=="cell")return!1;const e=this.getRangeOrActiveCell();return this.setFilterRange(e)}async setFilterRange(e){const t=st(e[0],e[1]);if(t[1].r<=t[0].r)return!1;this.store.beginBatch();try{this.filterRange=t,this.normalizeFilterColumnsToRange(),await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}return!0}async clearFilter(){this.store.beginBatch();try{this.filterRange=void 0,this.filterColumns.clear(),this.hiddenRows.clear(),await this.store.setFilterState(void 0)}finally{this.store.endBatch()}}async setColumnFilter(e,t){if(!this.filterRange||!this.isColumnInFilter(e))return!1;this.store.beginBatch();try{const n=this.normalizeFilterCondition(t);n?this.filterColumns.set(e,n):this.filterColumns.delete(e),await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}return!0}async filterColumnByValue(e,t){return this.setColumnFilter(e,{op:"equals",value:t})}async clearColumnFilter(e){if(!this.filterRange||!this.isColumnInFilter(e)||!this.filterColumns.has(e))return!1;this.store.beginBatch();try{this.filterColumns.delete(e),await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}return!0}async getFilterColumnValues(e){if(!this.filterRange||!this.isColumnInFilter(e))return;const t=new Set,n=this.filterRange[0].r+1,o=this.filterRange[1].r;for(let s=n;s<=o;s++){if(!await this.rowMatchesFilters(s,e))continue;const a=await this.getCell({r:s,c:e}),c=this.normalizeFilterText(a==null?void 0:a.v);t.add(c.trim())}const i=Array.from(t).sort((s,a)=>s.localeCompare(a,void 0,{sensitivity:"base"})),r=this.filterColumns.get(e);return r?r.op==="in"?{values:i,selected:new Set((r.values||[]).map(s=>this.normalizeFilterText(s).trim()))}:{values:i,selected:new Set(i.filter(s=>this.matchesFilterCondition(s,r)))}:{values:i,selected:new Set(i)}}async setColumnIncludedValues(e,t){if(!this.filterRange||!this.isColumnInFilter(e))return!1;const n=Array.from(new Set(t.map(s=>this.normalizeFilterText(s).trim()))).sort((s,a)=>s.localeCompare(a,void 0,{sensitivity:"base"})),o=await this.getFilterColumnValues(e);if(!o)return!1;const i=new Set(o.values),r=n.filter(s=>i.has(s));this.store.beginBatch();try{r.length===o.values.length?this.filterColumns.delete(e):this.filterColumns.set(e,{op:"in",values:r}),await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}return!0}async sortFilterByColumn(e,t){if(!this.filterRange||!this.isColumnInFilter(e))return!1;const n=this.filterRange[0].r+1,o=this.filterRange[1].r;if(o<=n)return!1;const i=[{r:n,c:1},{r:o,c:this.dimension.columns}];if(this.getMergesIntersecting(i).length>0)return!1;const r=[];for(let u=n;u<=o;u++){const h=await this.getCell({r:u,c:e}),f=this.normalizeFilterText(h==null?void 0:h.v).trim(),d=f.length>0&&Number.isFinite(Number(f))?Number(f):null;r.push({row:u,text:f,lower:f.toLowerCase(),numeric:d})}r.sort((u,h)=>{const f=u.text.length===0,d=h.text.length===0;if(f&&!d)return 1;if(!f&&d)return-1;let p=0;return u.numeric!==null&&h.numeric!==null?p=u.numeric-h.numeric:p=u.lower.localeCompare(h.lower,void 0,{sensitivity:"base"}),p===0&&(p=u.row-h.row),t==="asc"?p:-p});const s=r.map(u=>u.row),a=Array.from({length:o-n+1},(u,h)=>n+h),c=[];for(let u=0;u<s.length;u++){const h=s[u],f=a.indexOf(h);if(f===-1||f===u)continue;const d=n+f,p=n+u;c.push({srcIndex:d,dstIndex:p}),a.splice(f,1),a.splice(u,0,h)}if(c.length===0)return!0;this.store.beginBatch();try{for(const u of c)await this.moveCells("row",u.srcIndex,1,u.dstIndex,{skipPostRecalculate:!0});await this.recalculateAllFormulaCells(),await this.recomputeFilterHiddenRows()}finally{this.store.endBatch()}return!0}selectStart(e){Ar(e,this.dimensionRange)&&(this.selectionType="cell",this.setActiveCell(this.normalizeRefToAnchor(e)),this.range=void 0)}selectEnd(e){if(!Ar(e,this.dimensionRange))return;const t=this.normalizeRefToAnchor(e);if(zi(this.activeCell,t)){this.range=void 0;return}this.range=this.expandRangeToMergedBoundaries(st(this.activeCell,t))}hasRange(){return!!this.range}async selectAll(){let e=this.getRangeOrActiveCell(),t=at(e),n=!0;for(;n;){n=!1;for(const o of Kx(t,this.dimensionRange))await this.hasContents(o)&&(t=ga(t,o),n=!0)}if(Cr(e,t)){this.range=at(this.dimensionRange);return}this.range=t}async moveToEdge(e){const t=this.getMergeForRef(this.activeCell),n={...this.activeCell};t&&(e==="right"?n.c=t.range[1].c:e==="down"&&(n.r=t.range[1].r));const o=await this.store.findEdge(n,e,this.dimensionRange);let i=this.normalizeRefToAnchor(o);if((e==="up"||e==="down")&&this.hiddenRows.has(i.r)){const r=this.findNextVisibleRow(i.r,e);if(r===void 0)return!1;i=this.normalizeRefToAnchor({r,c:i.c})}return zi(this.activeCell,i)?!1:(this.range=void 0,this.setActiveCell(i),!0)}move(e){const t=e==="up"?-1:e==="down"?1:0,n=e==="left"?-1:e==="right"?1:0;let o=this.activeCell.r,i=this.activeCell.c;const r=this.getMergeForRef(this.activeCell);if(r?e==="right"?i=r.range[1].c+1:e==="down"?o=r.range[1].r+1:e==="left"?i-=1:o-=1:(o+=t,i+=n),(e==="up"||e==="down")&&this.hiddenRows.has(o)){const a=this.findNextVisibleRow(o,e);if(a===void 0)return!1;o=a}if(!Ar({r:o,c:i},this.dimensionRange))return!1;const s=this.normalizeRefToAnchor({r:o,c:i});return zi(this.activeCell,s)?!1:(this.range=void 0,this.setActiveCell(s),!0)}resizeRange(e){const t=e==="up"?-1:e==="down"?1:0,n=e==="left"?-1:e==="right"?1:0;let o=at(this.getRangeOrActiveCell());if(t!==0){const i=t>0?"down":"up",r=s=>this.hiddenRows.has(s)?this.findNextVisibleRow(s,i):s;if(this.activeCell.r===o[1].r){const s=r(o[0].r+t);if(s===void 0)return!1;o[0].r=s}else{const s=r(o[1].r+t);if(s===void 0)return!1;o[1].r=s}}return n!==0&&(this.activeCell.c===o[1].c?o[0].c+=n:o[1].c+=n),o=st(o[0],o[1]),Xx(o,this.dimensionRange)?(this.range=this.expandRangeToMergedBoundaries(o),!0):!1}async getStyle(e){const t=this.normalizeRefToAnchor(e),n=await this.store.get(t);return this.resolveEffectiveStyle(t.r,t.c,n==null?void 0:n.s)}async setStyle(e,t){const n=this.normalizeStylePatch(t);if(!n)return;const o=this.normalizeRefToAnchor(e),i=await this.store.get(o)||{},r=this.mergeStylePatch(i.s,n),s=this.compactCell(i,r);if(this.isEmptyCell(s)){await this.store.delete(o);return}await this.store.set(o,s)}async setRangeStyle(e){this.store.beginBatch();try{if(this.selectionType==="column"){const n=this.getRangeOrActiveCell();for(let o=n[0].c;o<=n[1].c;o++){const i=this.mergeStylePatch(this.colStyles.get(o),e);i&&(this.colStyles.set(o,i),await this.store.setColumnStyle(o,i))}return}if(this.selectionType==="row"){const n=this.getRangeOrActiveCell();for(let o=n[0].r;o<=n[1].r;o++){const i=this.mergeStylePatch(this.rowStyles.get(o),e);i&&(this.rowStyles.set(o,i),await this.store.setRowStyle(o,i))}return}if(this.selectionType==="all"){const n=this.mergeStylePatch(this.sheetStyle,e);if(!n)return;this.sheetStyle=n,await this.store.setSheetStyle(n);return}const t=this.getRangeOrActiveCell();await this.addRangeStylePatch(t,e),await this.applyStylePatchToExistingCells(t,e)}finally{this.store.endBatch()}}async setRangeBorders(e){if(this.selectionType!=="cell")return!1;const t=this.getRangeOrActiveCell(),n=t[1].r-t[0].r+1,o=t[1].c-t[0].c+1;if(n*o>Bg)return!1;const i=this.collectBorderTargets(t);this.store.beginBatch();try{for(const{anchor:r,range:s}of i){const a=this.toBorderPatchForPreset(e,t,s);await this.setStyle(r,a)}}finally{this.store.endBatch()}return!0}async toggleRangeStyle(e){const t=await this.getStyle(this.activeCell),n=!(t!=null&&t[e]);await this.setRangeStyle({[e]:n})}collectBorderTargets(e){const t=[],n=new Set;for(let o=e[0].r;o<=e[1].r;o++)for(let i=e[0].c;i<=e[1].c;i++){const r=this.normalizeRefToAnchor({r:o,c:i}),s=pe(r);if(n.has(s))continue;n.add(s);const a=this.merges.get(s),c=a?Pi(r,a):st(r,r);t.push({anchor:r,range:c})}return t}toBorderPatchForPreset(e,t,n){const o=n[0].r===t[0].r,i=n[1].r===t[1].r,r=n[0].c===t[0].c,s=n[1].c===t[1].c;switch(e){case"all":return{bt:!0,bl:!0,br:s,bb:i};case"outer":return{bt:o,bl:r,br:s,bb:i};case"inner":return{bt:!o,bl:!r,br:!1,bb:!1};case"top":return{bt:o};case"bottom":return{bb:i};case"left":return{bl:r};case"right":return{br:s};case"clear":default:return{bt:!1,bl:!1,br:!1,bb:!1}}}isSelectionMerged(){if(this.selectionType!=="cell")return!1;const e=this.getRangeOrActiveCell(),t=this.getMergesIntersecting(e);return t.length===1&&Cr(t[0].range,e)}canMergeSelection(){if(this.selectionType!=="cell")return!1;const e=this.getRangeOrActiveCell();if(e[0].r===e[1].r&&e[0].c===e[1].c)return!1;const n=this.frozenRows>0&&e[0].r<=this.frozenRows&&e[1].r>this.frozenRows,o=this.frozenCols>0&&e[0].c<=this.frozenCols&&e[1].c>this.frozenCols;return n||o?!1:this.getMergesIntersecting(e).length===0}async toggleMergeSelection(){return this.isSelectionMerged()?this.unmergeSelection():this.mergeSelection()}async mergeSelection(){if(!this.canMergeSelection())return!1;const e=this.getRangeOrActiveCell(),t=e[0],n={rs:e[1].r-e[0].r+1,cs:e[1].c-e[0].c+1},o=new Set;for(const i of this.mergeCoveredSrefs(t,n))o.add(i);this.store.beginBatch();try{for(let s=e[0].r;s<=e[1].r;s++)for(let a=e[0].c;a<=e[1].c;a++){if(s===t.r&&a===t.c)continue;const c={r:s,c:a},u=await this.store.get(c);u&&(u.s&&Object.keys(u.s).length>0?await this.store.set(c,{s:u.s}):await this.store.delete(c))}await this.store.setMerge(t,n),this.merges.set(pe(t),n),this.rebuildMergeCoverMap();const i=this.expandChangedSrefsWithMergeAliases(o),r=await this.store.buildDependantsMap(i);await yr(this,r,i)}finally{this.store.endBatch()}return this.selectionType="cell",this.setActiveCell(t),this.range=Pi(t,n),!0}async unmergeSelection(){if(this.selectionType!=="cell")return!1;const e=this.getRangeOrActiveCell(),t=this.getMergesIntersecting(e);if(t.length===0)return!1;const n=new Set;for(const o of t)for(const i of this.mergeCoveredSrefs(o.anchor,o.span))n.add(i);this.store.beginBatch();try{for(const r of t)await this.store.deleteMerge(r.anchor),this.merges.delete(r.anchorSref);this.rebuildMergeCoverMap();const o=this.expandChangedSrefsWithMergeAliases(n),i=await this.store.buildDependantsMap(o);await yr(this,i,o)}finally{this.store.endBatch()}return this.selectionType="cell",this.range=void 0,!0}async getActiveDecimalPlaces(){const e=await this.getStyle(this.activeCell);return(e==null?void 0:e.dp)??2}async undo(){const e=await this.store.undo();if(e.success&&(await this.loadDimensions(),await this.loadStyles(),await this.loadMerges(),await this.loadFreezePane(),await this.loadFilterState(),e.affectedRange)){const[t,n]=e.affectedRange;this.selectionType="cell",this.activeCell=t,t.r===n.r&&t.c===n.c?this.range=void 0:this.range=e.affectedRange,this.store.updateActiveCell(this.activeCell)}return e.success}async redo(){const e=await this.store.redo();if(e.success&&(await this.loadDimensions(),await this.loadStyles(),await this.loadMerges(),await this.loadFreezePane(),await this.loadFilterState(),e.affectedRange)){const[t,n]=e.affectedRange;this.selectionType="cell",this.activeCell=t,t.r===n.r&&t.c===n.c?this.range=void 0:this.range=e.affectedRange,this.store.updateActiveCell(this.activeCell)}return e.success}moveInRange(e,t){const n=this.range||this.dimensionRange;let o=this.activeCell.r,i=this.activeCell.c;const r=this.getMergeForRef(this.activeCell),s=n[1].r-n[0].r+1,a=n[1].c-n[0].c+1;if(e!==0){const c=e>0?r?r.span.rs:e:e<0?-1:0;o+c>n[1].r?(o=n[0].r,i=(i+1-n[0].c+a)%a+n[0].c):o+c<n[0].r?(o=n[1].r,i=(i-1-n[0].c+a)%a+n[0].c):o+=c}if(t!==0){const c=t>0?r?r.span.cs:t:t<0?-1:0;i+c>n[1].c?(i=n[0].c,o=(o+1-n[0].r+s)%s+n[0].r):i+c<n[0].c?(i=n[1].c,o=(o-1-n[0].r+s)%s+n[0].r):i+=c}this.setActiveCell(this.normalizeRefToAnchor({r:o,c:i}))}}class zg{constructor(e){k(this,"grid");k(this,"cellIndex",new xg);k(this,"rowHeights",new Map);k(this,"colWidths",new Map);k(this,"colStyles",new Map);k(this,"rowStyles",new Map);k(this,"sheetStyle");k(this,"rangeStyles",[]);k(this,"merges",new Map);k(this,"filterState");k(this,"frozenRows",0);k(this,"frozenCols",0);this.grid=e||new Map,this.rebuildIndex()}async set(e,t){this.grid.set(pe(e),t),this.cellIndex.add(e.r,e.c)}async get(e){return this.grid.get(pe(e))}async has(e){return this.grid.has(pe(e))}async delete(e){const t=this.grid.delete(pe(e));return t&&this.cellIndex.remove(e.r,e.c),t}async deleteRange(e){const t=new Set,n=[];for(const[o,i]of this.cellIndex.cellsInRange(e)){const r=pe({r:o,c:i});this.grid.delete(r),t.add(r),n.push([o,i])}for(const[o,i]of n)this.cellIndex.remove(o,i);return t}async setGrid(e){for(const[t,n]of e){this.grid.set(t,n);const o=Te(t);this.cellIndex.add(o.r,o.c)}}async getGrid(e){const t=new Map;for(const[n,o]of this.cellIndex.cellsInRange(e)){const i=pe({r:n,c:o}),r=this.grid.get(i);r!==void 0&&t.set(i,r)}return t}async findEdge(e,t,n){return mg(this.cellIndex,e,t,n,(o,i)=>{const r=this.grid.get(pe({r:o,c:i}));return r!==void 0&&(!!r.v||!!r.f)})}async shiftCells(e,t,n){this.grid=lg(this.grid,e,t,n),this.rebuildIndex(),e==="row"?(this.rowHeights=br(this.rowHeights,t,n),this.rowStyles=br(this.rowStyles,t,n)):(this.colWidths=br(this.colWidths,t,n),this.colStyles=br(this.colStyles,t,n)),this.rangeStyles=dp(this.rangeStyles,e,t,n),this.merges=mp(this.merges,e,t,n)}async moveCells(e,t,n,o){this.grid=og(this.grid,e,t,n,o),this.rebuildIndex(),e==="row"?(this.rowHeights=Tr(this.rowHeights,t,n,o),this.rowStyles=Tr(this.rowStyles,t,n,o)):(this.colWidths=Tr(this.colWidths,t,n,o),this.colStyles=Tr(this.colStyles,t,n,o)),this.rangeStyles=pp(this.rangeStyles,e,t,n,o),this.merges=gp(this.merges,e,t,n,o)}async getFormulaGrid(){const e=new Map;for(const[t,n]of this.grid)n.f&&e.set(t,n);return e}async buildDependantsMap(e){const t=Array.from(this.grid.entries()),n=new Map;for(const[o,i]of t)if(i.f)for(const r of Dr(ap(i.f)))wo(r)||(n.has(r)||n.set(r,new Set),n.get(r).add(o));return n}getPresences(){return[]}async setDimensionSize(e,t,n){(e==="row"?this.rowHeights:this.colWidths).set(t,n)}async getDimensionSizes(e){return new Map(e==="row"?this.rowHeights:this.colWidths)}updateActiveCell(e){}async setColumnStyle(e,t){this.colStyles.set(e,t)}async getColumnStyles(){return new Map(this.colStyles)}async setRowStyle(e,t){this.rowStyles.set(e,t)}async getRowStyles(){return new Map(this.rowStyles)}async setSheetStyle(e){this.sheetStyle=e}async getSheetStyle(){return this.sheetStyle?{...this.sheetStyle}:void 0}async addRangeStyle(e){const t=xr(e);t&&this.rangeStyles.push(ji(t))}async setRangeStyles(e){this.rangeStyles=e.map(t=>xr(t)).filter(t=>!!t).map(t=>ji(t))}async getRangeStyles(){return this.rangeStyles.map(e=>ji(e))}async setMerge(e,t){this.merges.set(pe(e),{...t})}async deleteMerge(e){return this.merges.delete(pe(e))}async getMerges(){return new Map(this.merges)}async setFilterState(e){if(!e){this.filterState=void 0;return}this.filterState={range:[{...e.range[0]},{...e.range[1]}],columns:Object.fromEntries(Object.entries(e.columns).map(([t,n])=>[t,{...n}])),hiddenRows:[...e.hiddenRows]}}async getFilterState(){if(this.filterState)return{range:[{...this.filterState.range[0]},{...this.filterState.range[1]}],columns:Object.fromEntries(Object.entries(this.filterState.columns).map(([e,t])=>[e,{...t}])),hiddenRows:[...this.filterState.hiddenRows]}}async setFreezePane(e,t){this.frozenRows=e,this.frozenCols=t}async getFreezePane(){return{frozenRows:this.frozenRows,frozenCols:this.frozenCols}}beginBatch(){}endBatch(){}async undo(){return{success:!1}}async redo(){return{success:!1}}canUndo(){return!1}canRedo(){return!1}rebuildIndex(){this.cellIndex.rebuild(Array.from(this.grid.keys()).map(e=>{const t=Te(e);return[t.r,t.c]}))}}const jg={cellBorderColor:"#D3D3D3",customBorderColor:"#000000",cellBGColor:"#FFFFFF",cellTextColor:"#000000",activeCellColor:"#E6C746",selectionBGColor:"rgba(230, 199, 70, 0.1)",headerBGColor:"#F0F0F0",headerActiveBGColor:"#E6C746","tokens.REFERENCE":"#E6C746","tokens.NUM":"#4DA6FF",peerCursor1:"#FF6B6B",peerCursor2:"#4ECDC4",peerCursor3:"#45B7D1",peerCursor4:"#96CEB4",peerCursor5:"#FFEAA7",peerCursor6:"#DDA0DD",peerCursor7:"#98D8C8",peerCursor8:"#F7DC6F",resizeHandleColor:"#1A73E8",headerSelectedBGColor:"rgba(26, 115, 232, 0.3)",dropIndicatorColor:"#1A73E8",freezeLineColor:"#BBBBBB",freezeHandleColor:"#9E9E9E",freezeHandleHoverColor:"#5F6368",formulaRange1:"#1A73E8",formulaRange2:"#E84C3D",formulaRange3:"#9B59B6",formulaRange4:"#27AE60",formulaRange5:"#F39C12",formulaRange6:"#00ACC1"},qg={cellBorderColor:"#4A4A4A",customBorderColor:"#FFFFFF",cellBGColor:"#1E1E1E",cellTextColor:"#FFFFFF",activeCellColor:"#D4B73E",selectionBGColor:"rgba(212, 183, 62, 0.1)",headerBGColor:"#2D2D2D",headerActiveBGColor:"#D4B73E","tokens.REFERENCE":"#D4B73E","tokens.NUM":"#4DA6FF",peerCursor1:"#FF7979",peerCursor2:"#55EFC4",peerCursor3:"#74B9FF",peerCursor4:"#A4D4C4",peerCursor5:"#FDCB6E",peerCursor6:"#E17055",peerCursor7:"#81ECEC",peerCursor8:"#F8D84F",resizeHandleColor:"#8AB4F8",headerSelectedBGColor:"rgba(138, 180, 248, 0.3)",dropIndicatorColor:"#8AB4F8",freezeLineColor:"#5A5A5A",freezeHandleColor:"#8E8E8E",freezeHandleHoverColor:"#CCCCCC",formulaRange1:"#8AB4F8",formulaRange2:"#FF7979",formulaRange3:"#BB86FC",formulaRange4:"#66BB6A",formulaRange5:"#FFB74D",formulaRange6:"#4DD0E1"};function ve(l,e){return l==="light"?jg[e]:qg[e]}const $f=["formulaRange1","formulaRange2","formulaRange3","formulaRange4","formulaRange5","formulaRange6"];function fo(l,e){return ve(l,$f[e%$f.length])}function Vf(l,e){const t=["peerCursor1","peerCursor2","peerCursor3","peerCursor4","peerCursor5","peerCursor6","peerCursor7","peerCursor8"];let n=0;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);n=(n<<5)-n+r,n=n&n}const o=Math.abs(n)%t.length;return ve(l,t[o])}function pr(l){const e=window.getSelection();if(e.rangeCount===0)return;const t=e.getRangeAt(0);if(!l.contains(t.commonAncestorContainer))return;let n=0,o=0,i=0;function r(s){if(s.nodeType===Node.TEXT_NODE){const a=s.textContent;s===t.startContainer&&(o=n+t.startOffset),s===t.endContainer&&(i=n+t.endOffset),n+=a.length}for(const a of s.childNodes)r(a)}return r(l),{start:o,end:i}}function Er(l,e){let t=0,n=null,o=null;const i=document.createRange();function r(a){if(a.nodeType===Node.TEXT_NODE){const c=a.textContent;n===null&&t+c.length>=e.start&&(n=a,i.setStart(a,e.start-t)),o===null&&t+c.length>=e.end&&(o=a,i.setEnd(a,e.end-t)),t+=c.length}for(const c of a.childNodes)r(c)}r(l);const s=window.getSelection();s.removeAllRanges(),s.addRange(i),l.focus()}function Sp(l){return l=l.replace(/&/g,"&amp;"),l=l.replace(/</g,"&lt;"),l=l.replace(/>/g,"&gt;"),l=l.replace(/"/g,"&quot;"),l=l.replace(/'/g,"&#039;"),l=l.replace(/\n/g,"<br>"),l=l.replace(/ /g,"&nbsp;"),l}const Ap=23,Cp=10;class Hg{constructor(e="light"){k(this,"sheet");k(this,"theme");k(this,"container");k(this,"cellLabel");k(this,"formulaInput");k(this,"boundRenderInput");this.theme=e,this.container=document.createElement("div"),this.container.style.height=`${Ap}px`,this.container.style.margin=`${Cp}px 0px`,this.container.style.display="flex",this.container.style.alignItems="center",this.container.style.borderTop=`1px solid ${ve(this.theme,"cellBorderColor")}`,this.container.style.borderBottom=`1px solid ${ve(this.theme,"cellBorderColor")}`,this.container.style.justifyContent="flex-start",this.cellLabel=document.createElement("div"),this.cellLabel.style.width="120px",this.cellLabel.style.textAlign="center",this.cellLabel.style.font="12px Arial",this.cellLabel.style.borderRight=`1px solid ${ve(this.theme,"cellBorderColor")}`,this.container.appendChild(this.cellLabel),this.formulaInput=document.createElement("div"),this.formulaInput.contentEditable="true",this.formulaInput.style.margin="0 20px",this.formulaInput.style.width="100%",this.formulaInput.style.height="12px",this.formulaInput.style.border="none",this.formulaInput.style.font="12px Arial",this.formulaInput.style.outline="none",this.formulaInput.style.overflow="hidden",this.formulaInput.style.whiteSpace="nowrap",this.formulaInput.style.lineHeight="12px",this.container.appendChild(this.formulaInput),this.boundRenderInput=this.renderInput.bind(this),this.formulaInput.addEventListener("input",this.boundRenderInput)}getContainer(){return this.container}initialize(e){this.sheet=e}cleanup(){this.formulaInput.removeEventListener("input",this.boundRenderInput),this.sheet=void 0,this.container.remove()}async render(){if(!this.sheet)return;const e=this.sheet.getActiveCell(),t=this.sheet.getSelectionType(),n=this.sheet.getSelectedIndices();let o;if(t==="row"&&n)o=`${n.from}:${n.to}`;else if(t==="column"&&n){const i=ei(n.from),r=ei(n.to);o=`${i}:${r}`}else{const i=this.sheet.getRange();o=i?Qx(i):pe(e)}this.cellLabel.textContent=o,this.formulaInput.innerText=await this.sheet.toInputString(e),this.renderInput()}getFormulaInput(){return this.formulaInput}getValue(){return this.formulaInput.innerText}setValue(e){this.formulaInput.innerText=e,this.renderInput()}focus(){this.formulaInput.focus()}blur(){this.formulaInput.blur()}isFocused(){return document.activeElement===this.formulaInput}renderInput(){const e=this.formulaInput.innerText;if(!e.startsWith("="))return;const t=Ir(e),n=[];let o=0;for(const r of t){if(r.type==="REFERENCE"){n.push(`<span style="color: ${fo(this.theme,o)}">${r.text}</span>`),o++;continue}if(r.type==="NUM"){n.push(`<span style="color: ${this.getThemeColor("tokens.NUM")}">${r.text}</span>`);continue}n.push(Sp(r.text))}const i=pr(this.formulaInput);this.formulaInput.innerHTML="="+n.join(""),i&&Er(this.formulaInput,i)}getThemeColor(e){return ve(this.theme,e)}}const ut=100,se=23,ue=50,_r=13,po=1.5,ro=4,Fa=5,va=.5,Ug=1.5,$g="center",Ep=4,Vg=10;function De(l,e={left:0,top:0},t,n){const o=n?n.getOffset(l.c):(l.c-1)*ut,i=t?t.getOffset(l.r):(l.r-1)*se,r=n?n.getSize(l.c):ut,s=t?t.getSize(l.r):se;return{left:o+ue-e.left,top:i+se-e.top,width:r,height:s}}function jn(l,e){const t=Math.min(l.left,e.left),n=Math.min(l.top,e.top),o=Math.max(l.left+l.width,e.left+e.width),i=Math.max(l.top+l.height,e.top+e.height);return{left:t,top:n,width:o-t,height:i-n}}const Hn={frozenRows:0,frozenCols:0,frozenWidth:0,frozenHeight:0};function Wg(l,e,t,n){return l===0&&e===0?Hn:{frozenRows:l,frozenCols:e,frozenWidth:e>0?n.getOffset(e+1):0,frozenHeight:l>0?t.getOffset(l+1):0}}function Gg(l,e,t,n){const o=t?t.findIndex(e-se):Math.floor(e/se),i=n?n.findIndex(l-ue):Math.floor((l+ue)/ut);return{r:o,c:i}}function Yg(l,e,t,n,o,i){const r=i.frozenCols>0&&l<ue+i.frozenWidth,s=i.frozenRows>0&&e<se+i.frozenHeight,a=r?l-ue:l-ue-i.frozenWidth+o.getOffset(i.frozenCols+1)+t.left,c=s?e-se:e-se-i.frozenHeight+n.getOffset(i.frozenRows+1)+t.top,u=o.findIndex(a),h=n.findIndex(c);return{r:Math.max(1,h),c:Math.max(1,u)}}function qn(l,e,t,n,o){const i=n.getOffset(l.c),r=t.getOffset(l.r),s=n.getSize(l.c),a=t.getSize(l.r),c=o.frozenCols>0&&l.c<=o.frozenCols,u=o.frozenRows>0&&l.r<=o.frozenRows,h=c?i+ue:i+ue-e.left-n.getOffset(o.frozenCols+1)+o.frozenWidth,f=u?r+se:r+se-e.top-t.getOffset(o.frozenRows+1)+o.frozenHeight;return{left:h,top:f,width:s,height:a}}class Xg{constructor(e="light"){k(this,"container");k(this,"input");k(this,"theme");k(this,"boundHandleInput");k(this,"minWidth",ut);k(this,"minHeight",se);k(this,"maxWidth",1/0);k(this,"maxHeight",1/0);k(this,"composing",!1);this.theme=e,this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.left="-1000px",this.container.style.width=ut+"px",this.container.style.height=se+"px",this.container.style.zIndex="1",this.container.style.margin="0px",this.container.style.pointerEvents="none",this.input=document.createElement("div"),this.input.contentEditable="true",this.input.style.border="none",this.input.style.outline=`2px solid ${this.getThemeColor("activeCellColor")}`,this.input.style.fontFamily="Arial, sans-serif",this.input.style.fontSize=_r+"px",this.input.style.fontWeight="normal",this.input.style.lineHeight=String(po),this.input.style.color=this.getThemeColor("cellTextColor"),this.input.style.backgroundColor=this.getThemeColor("cellBGColor"),this.input.style.whiteSpace="pre",this.input.style.overflow="hidden",this.container.appendChild(this.input),this.boundHandleInput=this.handleInput.bind(this),this.input.addEventListener("input",this.boundHandleInput),this.input.addEventListener("compositionstart",()=>{this.composing=!0}),this.input.addEventListener("compositionend",()=>{this.composing=!1,this.adjustSize()})}cleanup(){this.input.removeEventListener("input",this.boundHandleInput),this.container.remove()}getContainer(){return this.container}getInput(){return this.input}show(e,t,n="",o=!0,i,r,s,a){this.minWidth=i??ut,this.minHeight=r??se,this.maxWidth=s??1/0,this.maxHeight=a??1/0,this.container.style.left=e+"px",this.container.style.top=t+"px",this.container.style.pointerEvents="auto",this.input.innerText=n,this.renderInput(),this.adjustSize(),o&&(Er(this.input,{start:this.input.innerText.length,end:this.input.innerText.length}),this.input.focus())}hide(){this.container.style.left="-1000px",this.container.style.pointerEvents="none",this.input.innerText="",this.input.blur()}isShown(){return this.container.style.left!=="-1000px"}isFocused(){return document.activeElement===this.input}getValue(){return this.input.innerText}setValue(e){this.input.innerText=e,this.renderInput(),this.adjustSize()}hasFormula(){return this.input.innerText.startsWith("=")}applyStyle(e){this.input.style.fontWeight=e!=null&&e.b?"bold":"normal",this.input.style.fontStyle=e!=null&&e.i?"italic":"normal";const t=[];e!=null&&e.u&&t.push("underline"),e!=null&&e.st&&t.push("line-through"),this.input.style.textDecoration=t.length?t.join(" "):"none",this.input.style.color=(e==null?void 0:e.tc)||this.getThemeColor("cellTextColor"),this.input.style.backgroundColor=(e==null?void 0:e.bg)||this.getThemeColor("cellBGColor"),this.input.style.textAlign=(e==null?void 0:e.al)||"left";const n=(e==null?void 0:e.va)||"top";this.container.style.display="flex",this.container.style.alignItems=n==="middle"?"center":n==="bottom"?"flex-end":"flex-start"}handleInput(){this.renderInput(),this.composing||this.adjustSize()}adjustSize(){this.input.style.width=this.minWidth+"px",this.input.style.height=this.minHeight+"px";const e=Math.min(Math.max(this.minWidth,this.input.scrollWidth),this.maxWidth),t=Math.min(Math.max(this.minHeight,this.input.scrollHeight),this.maxHeight);this.container.style.width=e+"px",this.container.style.height=t+"px",this.input.style.width=e+"px",this.input.style.height=t+"px",this.input.style.overflowY=this.input.scrollHeight>this.maxHeight?"auto":"hidden"}renderInput(){const e=this.input.innerText;if(!e.startsWith("="))return;const t=Ir(e),n=[];let o=0;for(const r of t){if(r.type==="REFERENCE"){n.push(`<span style="color: ${fo(this.theme,o)}">${r.text}</span>`),o++;continue}if(r.type==="NUM"){n.push(`<span style="color: ${this.getThemeColor("tokens.NUM")}">${r.text}</span>`);continue}n.push(Sp(r.text))}const i=pr(this.input);this.input.innerHTML="="+n.join(""),i&&Er(this.input,i)}getThemeColor(e){return ve(this.theme,e)}}class Kg{constructor(e="light"){k(this,"canvas");k(this,"theme");this.theme=e,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="1",this.canvas.style.pointerEvents="none"}cleanup(){this.canvas.remove()}getContainer(){return this.canvas}render(e,t,n,o,i,r,s,a,c,u,h,f=Hn,d,p,S,x=!0,v){this.canvas.width=0,this.canvas.height=0;const m=this.canvas.getContext("2d"),g=window.devicePixelRatio||1;this.canvas.width=e.width*g,this.canvas.height=e.height*g,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",m.scale(g,g);const y=f.frozenRows>0||f.frozenCols>0,T=this.buildMergeRenderData(v),A=this.resolveAutofillSelectionRange(i,n,T);if(!y)this.renderActiveCellSimple(m,n,t,r,s,T),this.renderSelectionSimple(m,e,t,i,c,r,s),this.renderPeerCursorsSimple(m,e,o,t,r,s,T),this.renderFormulaRangesSimple(m,h,t,r,s),this.renderCopyRangeSimple(m,p,t,r,s);else{const b=this.buildQuadrants(e,t,f,r,s);this.renderSelectionFrozen(m,e,t,i,c,r,s,f,b);for(const R of b){m.save(),m.beginPath(),m.rect(R.x,R.y,R.width,R.height),m.clip();const N=this.toCellRect(n,{left:R.scrollLeft,top:R.scrollTop},r,s,T);m.strokeStyle=this.getThemeColor("activeCellColor"),m.lineWidth=2,m.strokeRect(N.left,N.top,N.width,N.height),m.restore()}for(const{clientID:R,presence:N}of o){if(!N.activeCell)continue;const P=Te(N.activeCell),B=Vf(this.theme,R);for(const I of b){m.save(),m.beginPath(),m.rect(I.x,I.y,I.width,I.height),m.clip();const V=this.toCellRect(P,{left:I.scrollLeft,top:I.scrollTop},r,s,T);V.left>=-V.width&&V.left<e.width&&V.top>=-V.height&&V.top<e.height&&(m.strokeStyle=B,m.lineWidth=2,m.strokeRect(V.left,V.top,V.width,V.height)),m.restore()}}if(h&&h.length>0)for(let R=0;R<h.length;R++){const N=h[R],P=fo(this.theme,R);for(const B of b){m.save(),m.beginPath(),m.rect(B.x,B.y,B.width,B.height),m.clip();const I={left:B.scrollLeft,top:B.scrollTop},V=jn(De(N[0],I,r,s),De(N[1],I,r,s));m.strokeStyle=P,m.lineWidth=2,m.strokeRect(V.left,V.top,V.width,V.height),m.fillStyle=P+"20",m.fillRect(V.left,V.top,V.width,V.height),m.restore()}}if(p)for(const R of b){m.save(),m.beginPath(),m.rect(R.x,R.y,R.width,R.height),m.clip();const N={left:R.scrollLeft,top:R.scrollTop};this.drawCopyRangeBorder(m,p,N,r,s),m.restore()}}S&&!Cr(S,A)&&this.renderAutofillPreview(m,S,t,r,s,f),x&&this.renderAutofillHandle(m,A,c,t,r,s,f),a&&s&&r&&this.renderResizeHover(m,e,t,a,r,s,f),u&&s&&r&&this.renderDragMoveIndicator(m,e,t,u,r,s,f),d&&s&&r&&this.renderFreezeDragPreview(m,e,d,r,s)}buildQuadrants(e,t,n,o,i){const r=n.frozenWidth,s=n.frozenHeight,a=o?o.getOffset(n.frozenRows+1):0,c=i?i.getOffset(n.frozenCols+1):0,u=[];return u.push({x:ue+r,y:se+s,width:e.width-ue-r,height:e.height-se-s,scrollLeft:t.left+c-r,scrollTop:t.top+a-s}),n.frozenRows>0&&u.push({x:ue+r,y:se,width:e.width-ue-r,height:s,scrollLeft:t.left+c-r,scrollTop:0}),n.frozenCols>0&&u.push({x:ue,y:se+s,width:r,height:e.height-se-s,scrollLeft:0,scrollTop:t.top+a-s}),n.frozenRows>0&&n.frozenCols>0&&u.push({x:ue,y:se,width:r,height:s,scrollLeft:0,scrollTop:0}),u}renderActiveCellSimple(e,t,n,o,i,r){const s=this.toCellRect(t,n,o,i,r);e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=2,e.strokeRect(s.left,s.top,s.width,s.height)}renderSelectionSimple(e,t,n,o,i,r,s){if(i==="all")e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(ue,se,t.width-ue,t.height-se);else if(o)if(i==="row"){const a=De(o[0],n,r,s),c=De(o[1],n,r,s),u=a.top,h=c.top+c.height-a.top;e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(ue,u,t.width-ue,h),e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.strokeRect(ue,u,t.width-ue,h)}else if(i==="column"){const a=De(o[0],n,r,s),c=De(o[1],n,r,s),u=a.left,h=c.left+c.width-a.left;e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(u,se,h,t.height-se),e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.strokeRect(u,se,h,t.height-se)}else{const a=jn(De(o[0],n,r,s),De(o[1],n,r,s));e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(a.left,a.top,a.width,a.height),e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.strokeRect(a.left,a.top,a.width,a.height)}}renderPeerCursorsSimple(e,t,n,o,i,r,s){for(const{clientID:a,presence:c}of n){if(!c.activeCell)continue;const u=Te(c.activeCell),h=this.toCellRect(u,o,i,r,s);if(h.left>=-h.width&&h.left<t.width&&h.top>=-h.height&&h.top<t.height){const f=Vf(this.theme,a);e.strokeStyle=f,e.lineWidth=2,e.strokeRect(h.left,h.top,h.width,h.height)}}}renderFormulaRangesSimple(e,t,n,o,i){if(!(!t||t.length===0))for(let r=0;r<t.length;r++){const s=t[r],a=jn(De(s[0],n,o,i),De(s[1],n,o,i)),c=fo(this.theme,r);e.strokeStyle=c,e.lineWidth=2,e.strokeRect(a.left,a.top,a.width,a.height),e.fillStyle=c+"20",e.fillRect(a.left,a.top,a.width,a.height)}}renderCopyRangeSimple(e,t,n,o,i){t&&this.drawCopyRangeBorder(e,t,n,o,i)}drawCopyRangeBorder(e,t,n,o,i){const r=jn(De(t[0],n,o,i),De(t[1],n,o,i));e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=2,e.setLineDash([5,3]),e.strokeRect(r.left,r.top,r.width,r.height),e.setLineDash([])}renderSelectionFrozen(e,t,n,o,i,r,s,a,c){if(i==="all"){e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(ue,se,t.width-ue,t.height-se);return}if(o)for(const u of c){e.save(),e.beginPath(),e.rect(u.x,u.y,u.width,u.height),e.clip();const h={left:u.scrollLeft,top:u.scrollTop};if(i==="row"){const f=De(o[0],h,r,s),d=De(o[1],h,r,s),p=f.top,S=d.top+d.height-f.top;e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(ue,p,t.width-ue,S),e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.strokeRect(ue,p,t.width-ue,S)}else if(i==="column"){const f=De(o[0],h,r,s),d=De(o[1],h,r,s),p=f.left,S=d.left+d.width-f.left;e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(p,se,S,t.height-se),e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.strokeRect(p,se,S,t.height-se)}else{const f=jn(De(o[0],h,r,s),De(o[1],h,r,s));e.fillStyle=this.getThemeColor("selectionBGColor"),e.fillRect(f.left,f.top,f.width,f.height),e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.strokeRect(f.left,f.top,f.width,f.height)}e.restore()}}renderResizeHover(e,t,n,o,i,r,s){if(e.strokeStyle=this.getThemeColor("resizeHandleColor"),e.lineWidth=2,o.axis==="column"){const c=s.frozenCols>0&&o.index<=s.frozenCols?0:n.left+r.getOffset(s.frozenCols+1)-s.frozenWidth,u=ue+r.getOffset(o.index)+r.getSize(o.index)-c;e.beginPath(),e.moveTo(u,0),e.lineTo(u,t.height),e.stroke()}else{const c=s.frozenRows>0&&o.index<=s.frozenRows?0:n.top+i.getOffset(s.frozenRows+1)-s.frozenHeight,u=se+i.getOffset(o.index)+i.getSize(o.index)-c;e.beginPath(),e.moveTo(0,u),e.lineTo(t.width,u),e.stroke()}}renderDragMoveIndicator(e,t,n,o,i,r,s){if(e.strokeStyle=this.getThemeColor("dropIndicatorColor"),e.lineWidth=3,o.axis==="column"){const c=s.frozenCols>0&&o.dropIndex<=s.frozenCols?0:n.left+r.getOffset(s.frozenCols+1)-s.frozenWidth,u=ue+r.getOffset(o.dropIndex)-c;e.beginPath(),e.moveTo(u,0),e.lineTo(u,t.height),e.stroke()}else{const c=s.frozenRows>0&&o.dropIndex<=s.frozenRows?0:n.top+i.getOffset(s.frozenRows+1)-s.frozenHeight,u=se+i.getOffset(o.dropIndex)-c;e.beginPath(),e.moveTo(0,u),e.lineTo(t.width,u),e.stroke()}}renderFreezeDragPreview(e,t,n,o,i){if(e.strokeStyle=this.getThemeColor("freezeLineColor"),e.lineWidth=2,n.axis==="row"){const r=n.targetIndex===0?se:se+o.getOffset(n.targetIndex+1);e.beginPath(),e.moveTo(0,r),e.lineTo(t.width,r),e.stroke()}else{const r=n.targetIndex===0?ue:ue+i.getOffset(n.targetIndex+1);e.beginPath(),e.moveTo(r,0),e.lineTo(r,t.height),e.stroke()}}toRangeRect(e,t,n,o,i=Hn){if(!n||!o)return;const r=i.frozenRows>0||i.frozenCols>0,s=r?qn(e[0],t,n,o,i):De(e[0],t,n,o),a=r?qn(e[1],t,n,o,i):De(e[1],t,n,o);return jn(s,a)}renderAutofillPreview(e,t,n,o,i,r=Hn){const s=this.toRangeRect(t,n,o,i,r);s&&(e.strokeStyle=this.getThemeColor("activeCellColor"),e.lineWidth=1,e.setLineDash([4,2]),e.strokeRect(s.left,s.top,s.width,s.height),e.setLineDash([]))}renderAutofillHandle(e,t,n,o,i,r,s=Hn){if(n!=="cell"||!t)return;const a=this.toRangeRect(t,o,i,r,s);if(!a)return;const c=8,u=a.left+a.width-c/2,h=a.top+a.height-c/2;e.fillStyle=this.getThemeColor("activeCellColor"),e.fillRect(u,h,c,c),e.strokeStyle=this.getThemeColor("cellBGColor"),e.lineWidth=1,e.strokeRect(u+.5,h+.5,c,c)}resolveAutofillSelectionRange(e,t,n){if(e)return[e[0],e[1]];const o=pe(t),i=(n==null?void 0:n.coverToAnchor.get(o))||o,r=Te(i),s=n==null?void 0:n.anchors.get(i);return!s||s.rs===1&&s.cs===1?[r,r]:[r,{r:r.r+s.rs-1,c:r.c+s.cs-1}]}getThemeColor(e){return ve(this.theme,e)}buildMergeRenderData(e){if(!e||e.size===0)return;const t=new Map,n=new Map;for(const[o,i]of e){t.set(o,i);const r=Te(o);for(let s=r.r;s<r.r+i.rs;s++)for(let a=r.c;a<r.c+i.cs;a++){const c=pe({r:s,c:a});c!==o&&n.set(c,o)}}return{anchors:t,coverToAnchor:n}}toCellRect(e,t,n,o,i){const r=pe(e),s=(i==null?void 0:i.coverToAnchor.get(r))||r,a=Te(s),c=i==null?void 0:i.anchors.get(s),u=De(a,t,n,o);if(!c||c.rs===1&&c.cs===1)return u;const h=De({r:a.r+c.rs-1,c:a.c+c.cs-1},t,n,o);return{left:u.left,top:u.top,width:h.left+h.width-u.left,height:h.top+h.height-u.top}}}const no=1e7;class Qg{constructor(e="light"){k(this,"container");k(this,"scrollContainer");k(this,"dummyContainer");k(this,"actualWidth",0);k(this,"actualHeight",0);this.createContainers()}createContainers(){this.container=document.createElement("div"),this.container.style.position="relative",this.container.style.width="100%",this.container.style.height=`calc(100% - ${Ap+Cp*2}px)`,this.scrollContainer=document.createElement("div"),this.scrollContainer.style.position="absolute",this.scrollContainer.style.overflow="auto",this.scrollContainer.style.width="100%",this.scrollContainer.style.height="100%",this.scrollContainer.style.zIndex="1",this.dummyContainer=document.createElement("div"),this.dummyContainer.style.margin="0px",this.dummyContainer.style.padding="0px",this.dummyContainer.style.pointerEvents="none",this.scrollContainer.appendChild(this.dummyContainer),this.container.appendChild(this.scrollContainer)}getContainer(){return this.container}getScrollContainer(){return this.scrollContainer}getDummyContainer(){return this.dummyContainer}updateDummySize(e,t){this.actualWidth=e,this.actualHeight=t;const n=Math.min(e,no),o=Math.min(t,no);this.dummyContainer.style.width=n+"px",this.dummyContainer.style.height=o+"px"}appendChild(e){this.container.appendChild(e)}getViewport(){return this.scrollContainer.getBoundingClientRect()}getScrollPosition(){const e=this.scrollContainer.scrollLeft,t=this.scrollContainer.scrollTop,n=this.scrollContainer.getBoundingClientRect();return{left:this.toLogical(e,this.actualWidth,n.width),top:this.toLogical(t,this.actualHeight,n.height)}}setScrollPosition(e){const t=this.scrollContainer.getBoundingClientRect();e.left!==void 0&&(this.scrollContainer.scrollLeft=this.toPhysical(e.left,this.actualWidth,t.width)),e.top!==void 0&&(this.scrollContainer.scrollTop=this.toPhysical(e.top,this.actualHeight,t.height))}scrollBy(e,t){const n=this.scrollContainer.getBoundingClientRect(),o=this.needsRemap(this.actualWidth,n.width)?e*this.physicalMax(this.actualWidth,n.width)/this.logicalMax(this.actualWidth,n.width):e,i=this.needsRemap(this.actualHeight,n.height)?t*this.physicalMax(this.actualHeight,n.height)/this.logicalMax(this.actualHeight,n.height):t;this.scrollContainer.scrollBy(o,i)}addEventListener(e,t,n){this.scrollContainer.addEventListener(e,t,n)}removeEventListener(e,t,n){this.scrollContainer.removeEventListener(e,t,n)}cleanup(){this.container.remove()}needsRemap(e,t){return e>no&&t<e}cappedSize(e){return Math.min(e,no)}physicalMax(e,t){return Math.max(0,this.cappedSize(e)-t)}logicalMax(e,t){return Math.max(0,e-t)}clamp(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}toLogical(e,t,n){const o=this.logicalMax(t,n);if(!this.needsRemap(t,n))return this.clamp(e,0,o);const i=this.physicalMax(t,n);return i<=0||o<=0?0:this.clamp(e,0,i)*o/i}toPhysical(e,t,n){const o=this.logicalMax(t,n);if(!this.needsRemap(t,n))return this.clamp(e,0,o);if(o<=0)return 0;const i=this.physicalMax(t,n);return this.clamp(e,0,o)*i/o}}const Jg="M4 6h16 M6 12h12 M9 18h6",Kn=class Kn{constructor(e="light"){k(this,"canvas");k(this,"theme");this.theme=e,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.pointerEvents="none"}getCanvas(){return this.canvas}render(e,t,n,o,i,r,s,a,c,u=Hn,h=null,f,d,p,S,x,v,m,g=null){this.canvas.width=0,this.canvas.height=0;const y=this.canvas.getContext("2d"),T=window.devicePixelRatio||1;this.canvas.width=e.width*T,this.canvas.height=e.height*T,this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",y.scale(T,T);const[A,b]=n,R=this.buildMergeRenderData(x);if(!(u.frozenRows>0||u.frozenCols>0))this.renderQuadrantCells(y,A.r,b.r+1,A.c,b.c+1,i,t,r,s,f,d,p,S,R,v,m,g),this.renderColumnHeaders(y,A.c,b.c,t.left,ue,e.width,o,a,c,r,s),this.renderRowHeaders(y,A.r,b.r,t.top,se,e.height,o,a,c,r,s);else{const B=u.frozenWidth,I=u.frozenHeight,V=u.frozenRows,J=u.frozenCols,te=V+1,oe=J+1,ge=Math.max(te,A.r),ce=Math.max(oe,A.c),ee=r?r.getOffset(te):V*se,G=s?s.getOffset(oe):J*ut;y.save(),y.beginPath(),y.rect(ue+B,se+I,e.width-ue-B,e.height-se-I),y.clip(),this.renderQuadrantCells(y,ge,b.r+1,ce,b.c+1,i,{left:t.left+G-B,top:t.top+ee-I},r,s,f,d,p,S,R,v,m,g),y.restore(),V>0&&(y.save(),y.beginPath(),y.rect(ue+B,se,e.width-ue-B,I),y.clip(),this.renderQuadrantCells(y,1,V+1,ce,b.c+1,i,{left:t.left+G-B,top:0},r,s,f,d,p,S,R,v,m,g),y.restore()),J>0&&(y.save(),y.beginPath(),y.rect(ue,se+I,B,e.height-se-I),y.clip(),this.renderQuadrantCells(y,ge,b.r+1,1,J+1,i,{left:0,top:t.top+ee-I},r,s,f,d,p,S,R,v,m,g),y.restore()),V>0&&J>0&&(y.save(),y.beginPath(),y.rect(ue,se,B,I),y.clip(),this.renderQuadrantCells(y,1,V+1,1,J+1,i,{left:0,top:0},r,s,f,d,p,S,R,v,m,g),y.restore()),J>0&&this.renderColumnHeaders(y,1,J,0,ue,ue+B,o,a,c,r,s),this.renderColumnHeaders(y,ce,b.c,t.left+G-B,ue+B,e.width,o,a,c,r,s),V>0&&this.renderRowHeaders(y,1,V,0,se,se+I,o,a,c,r,s),this.renderRowHeaders(y,ge,b.r,t.top+ee-I,se+I,e.height,o,a,c,r,s),this.renderFreezeLines(y,e,B,I)}const P=a==="all";y.fillStyle=P?this.getThemeColor("headerSelectedBGColor"):this.getThemeColor("headerBGColor"),y.fillRect(0,0,ue,se),y.strokeStyle=this.getThemeColor("cellBorderColor"),y.lineWidth=va,y.strokeRect(0,0,ue,se),this.renderFreezeHandles(y,u,h)}renderQuadrantCells(e,t,n,o,i,r,s,a,c,u,h,f,d,p,S,x,v=null){const m=this.buildTextOverflowRenderData(e,t,n,o,i,r,c,u,h,f,d,p);for(let g=t;g<=n;g++)for(let y=o;y<=i;y++){const T=pe({r:g,c:y});if(p!=null&&p.coverToAnchor.has(T))continue;const A=r==null?void 0:r.get(pe({r:g,c:y})),b=p==null?void 0:p.anchors.get(T),R=this.resolveEffectiveStyle(g,y,A,f,u,h,d),N=m==null?void 0:m.hiddenVerticalBoundaries.has(this.verticalBoundaryKey(g,y-1)),P=m==null?void 0:m.hiddenVerticalBoundaries.has(this.verticalBoundaryKey(g,y));this.renderCellBackground(e,{r:g,c:y},A,s,a,c,R,b,N,P)}for(let g=t;g<=n;g++)for(let y=o;y<=i;y++){const T=pe({r:g,c:y});if(p!=null&&p.coverToAnchor.has(T))continue;const A=r==null?void 0:r.get(pe({r:g,c:y})),b=p==null?void 0:p.anchors.get(T),R=this.resolveEffectiveStyle(g,y,A,f,u,h,d);this.renderCellCustomBorders(e,{r:g,c:y},s,a,c,R,b)}for(let g=t;g<=n;g++)for(let y=o;y<=i;y++){const T=pe({r:g,c:y});if(p!=null&&p.coverToAnchor.has(T))continue;const A=r==null?void 0:r.get(pe({r:g,c:y})),b=p==null?void 0:p.anchors.get(T),R=this.resolveEffectiveStyle(g,y,A,f,u,h,d),N=m==null?void 0:m.anchorToEndCol.get(T);this.renderCellContent(e,{r:g,c:y},A,s,a,c,R,r,i,b,N)}if(S){const g=S[0].r;if(g>=t&&g<=n){const y=Math.max(o,S[0].c),T=Math.min(i,S[1].c);for(let A=y;A<=T;A++){const b=pe({r:g,c:A});if(p!=null&&p.coverToAnchor.has(b))continue;const R=p==null?void 0:p.anchors.get(b);this.renderCellFilterButton(e,{r:g,c:A},s,a,c,R,!!(x!=null&&x.has(A)),v===A)}}}}renderColumnHeaders(e,t,n,o,i,r,s,a,c,u,h){e.save(),e.beginPath(),e.rect(i,0,r-i,se),e.clip();for(let f=t;f<=n;f++){const d=h?h.getOffset(f):ut*(f-1),p=h?h.getSize(f):ut,S=ue+d-o,x=0,v=a==="all"||a==="column"&&c&&f>=c[0].c&&f<=c[1].c;this.renderHeader(e,S,x,p,se,ei(f),s.c===f,v||!1)}e.restore()}renderCellFilterButton(e,t,n,o,i,r,s=!1,a=!1){const c=this.toCellRect(t,n,o,i,r),u=c.width,h=c.height;if(u<=6||h<=6)return;const f=Math.min(16,Math.max(12,u-4)),d=Math.min(16,Math.max(12,h-6)),p=c.left+u-f-2,S=c.top+Math.max(3,(h-d)/2);(s||a)&&(e.fillStyle=s?this.getThemeColor("selectionBGColor"):this.getThemeColor("headerSelectedBGColor"),e.fillRect(p,S,f,d));const x=s||a?this.getThemeColor("resizeHandleColor"):this.getThemeColor("cellTextColor"),v=Math.max(9,Math.min(12,Math.min(f,d)-3)),m=p+(f-v)/2,g=S+(d-v)/2;e.save(),e.translate(m,g),e.scale(v/24,v/24),e.strokeStyle=x,e.lineCap="round",e.lineJoin="round";const y=this.getFilterIconPath2D();y?(e.lineWidth=2,e.stroke(y)):(e.lineWidth=2,e.beginPath(),e.moveTo(4,6),e.lineTo(20,6),e.moveTo(6,12),e.lineTo(18,12),e.moveTo(9,18),e.lineTo(15,18),e.stroke()),e.restore()}getFilterIconPath2D(){return typeof Path2D>"u"?null:(Kn.filterIconPath2D===void 0&&(Kn.filterIconPath2D=new Path2D(Jg)),Kn.filterIconPath2D)}renderRowHeaders(e,t,n,o,i,r,s,a,c,u,h){e.save(),e.beginPath(),e.rect(0,i,ue,r-i),e.clip();for(let f=t;f<=n;f++){const d=u?u.getOffset(f):se*(f-1),p=u?u.getSize(f):se;if(p<=0)continue;const S=0,x=d+se-o,v=a==="all"||a==="row"&&c&&f>=c[0].r&&f<=c[1].r;this.renderHeader(e,S,x,ue,p,String(f),s.r===f,v||!1)}e.restore()}renderFreezeLines(e,t,n,o){if(e.strokeStyle=this.getThemeColor("freezeLineColor"),e.lineWidth=2,o>0){const i=se+o;e.beginPath(),e.moveTo(0,i),e.lineTo(t.width,i),e.stroke()}if(n>0){const i=ue+n;e.beginPath(),e.moveTo(i,0),e.lineTo(i,t.height),e.stroke()}}renderFreezeHandles(e,t,n){const o=t.frozenRows>0||t.frozenCols>0,i=Ep,r=o&&t.frozenRows>0?se+t.frozenHeight-i/2:se-i,s=n==="row";e.fillStyle=s?this.getThemeColor("freezeHandleHoverColor"):this.getThemeColor("freezeHandleColor"),e.fillRect(0,r,ue,i);const a=o&&t.frozenCols>0?ue+t.frozenWidth-i/2:ue-i,c=n==="column";e.fillStyle=c?this.getThemeColor("freezeHandleHoverColor"):this.getThemeColor("freezeHandleColor"),e.fillRect(a,0,i,se)}renderHeader(e,t,n,o,i,r,s,a=!1){o<=0||i<=0||(e.fillStyle=a?this.getThemeColor("headerSelectedBGColor"):s?this.getThemeColor("headerActiveBGColor"):this.getThemeColor("headerBGColor"),e.fillRect(t,n,o,i),e.strokeStyle=this.getThemeColor("cellBorderColor"),e.lineWidth=va,e.strokeRect(t,n,o,i),e.fillStyle=this.getThemeColor("cellTextColor"),e.textAlign=$g,e.font=s||a?"bold 10px Arial":"10px Arial",e.fillText(r,t+o/2,n+Math.min(15,i-4)))}renderCellBackground(e,t,n,o,i,r,s,a,c=!1,u=!1){const h=this.toCellRect(t,o,i,r,a),f=s??(n==null?void 0:n.s);if(e.fillStyle=(f==null?void 0:f.bg)||this.getThemeColor("cellBGColor"),e.fillRect(h.left,h.top,h.width,h.height),e.beginPath(),e.strokeStyle=this.getThemeColor("cellBorderColor"),e.lineWidth=va,c||(e.moveTo(h.left,h.top),e.lineTo(h.left,h.top+h.height)),!u){const d=h.left+h.width;e.moveTo(d,h.top),e.lineTo(d,h.top+h.height)}e.moveTo(h.left,h.top),e.lineTo(h.left+h.width,h.top),e.moveTo(h.left,h.top+h.height),e.lineTo(h.left+h.width,h.top+h.height),e.stroke()}renderCellCustomBorders(e,t,n,o,i,r,s){if(!r||!r.bt&&!r.br&&!r.bb&&!r.bl)return;const a=this.toCellRect(t,n,o,i,s);if(e.beginPath(),e.strokeStyle=this.getThemeColor("customBorderColor"),e.lineWidth=Ug,r.bt&&(e.moveTo(a.left,a.top),e.lineTo(a.left+a.width,a.top)),r.br){const c=a.left+a.width;e.moveTo(c,a.top),e.lineTo(c,a.top+a.height)}if(r.bb){const c=a.top+a.height;e.moveTo(a.left,c),e.lineTo(a.left+a.width,c)}r.bl&&(e.moveTo(a.left,a.top),e.lineTo(a.left,a.top+a.height)),e.stroke()}renderCellContent(e,t,n,o,i,r,s,a,c,u,h){const f=this.toCellRect(t,o,i,r,u),d=s??(n==null?void 0:n.s),p=(n==null?void 0:n.v)||"";if(p){const S=Oa(p,d==null?void 0:d.nf,d==null?void 0:d.dp),x=S.split(`
`),v=this.toCellFont(d);let m=f.width;const g=(d==null?void 0:d.al)||"left";if(!u&&h&&r&&h>t.c){let R=0;for(let N=t.c+1;N<=h;N++)R+=r.getSize(N);m=f.width+R}else if(!u&&x.length===1&&g==="left"&&a&&r&&c){e.save(),e.font=v;const R=e.measureText(S).width+ro*2;if(e.restore(),R>f.width){let N=0;for(let P=t.c+1;P<=c;P++){const B=a.get(pe({r:t.r,c:P}));if(B&&(B.v||B.f))break;const I=r.getSize(P);if(N+=I,f.width+N>=R)break}m=f.width+N}}e.save(),e.beginPath(),e.rect(f.left,f.top,m,f.height),e.clip(),e.fillStyle=(d==null?void 0:d.tc)||this.getThemeColor("cellTextColor"),e.font=v,e.textBaseline="top";let y;g==="center"?(e.textAlign="center",y=f.left+f.width/2):g==="right"?(e.textAlign="right",y=f.left+f.width-ro):(e.textAlign="left",y=f.left+ro);const T=(d==null?void 0:d.va)||"top",A=x.length*_r*po;let b;T==="middle"?b=f.top+(f.height-A)/2:T==="bottom"?b=f.top+f.height-A-Fa:b=f.top+Fa;for(let R=0;R<x.length;R++){const N=b+R*(_r*po);if(e.fillText(x[R],y,N),d!=null&&d.u){const P=e.measureText(x[R]),B=N+_r+1;let I;g==="center"?I=y-P.width/2:g==="right"?I=y-P.width:I=y,e.beginPath(),e.strokeStyle=(d==null?void 0:d.tc)||this.getThemeColor("cellTextColor"),e.lineWidth=1,e.moveTo(I,B),e.lineTo(I+P.width,B),e.stroke()}if(d!=null&&d.st){const P=e.measureText(x[R]),B=N+_r/2;let I;g==="center"?I=y-P.width/2:g==="right"?I=y-P.width:I=y,e.beginPath(),e.strokeStyle=(d==null?void 0:d.tc)||this.getThemeColor("cellTextColor"),e.lineWidth=1,e.moveTo(I,B),e.lineTo(I+P.width,B),e.stroke()}}e.restore()}}buildTextOverflowRenderData(e,t,n,o,i,r,s,a,c,u,h,f){if(!r||!s)return;const d=new Map,p=new Set;e.save();for(let S=t;S<=n;S++)for(let x=o;x<=i;x++){const v=pe({r:S,c:x});if(f!=null&&f.coverToAnchor.has(v)||f!=null&&f.anchors.has(v))continue;const m=r.get(v),g=(m==null?void 0:m.v)||"";if(!g)continue;const y=this.resolveEffectiveStyle(S,x,m,u,a,c,h);if(((y==null?void 0:y.al)||"left")!=="left")continue;const A=Oa(g,y==null?void 0:y.nf,y==null?void 0:y.dp);if(A.split(`
`).length!==1)continue;const R=s.getSize(x);e.font=this.toCellFont(y);const N=e.measureText(A).width+ro*2;if(N<=R)continue;let P=R,B=x;for(let I=x+1;I<=i;I++){const V=this.resolveEffectiveStyle(S,I-1,r.get(pe({r:S,c:I-1})),u,a,c,h),J=this.resolveEffectiveStyle(S,I,r.get(pe({r:S,c:I})),u,a,c,h);if(V!=null&&V.br||J!=null&&J.bl)break;const te=pe({r:S,c:I});if(f!=null&&f.coverToAnchor.has(te)||f!=null&&f.anchors.has(te))break;const oe=r.get(te);if(oe&&(oe.v||oe.f)||(P+=s.getSize(I),B=I,P>=N))break}if(B>x){d.set(v,B);for(let I=x;I<B;I++)p.add(this.verticalBoundaryKey(S,I))}}if(e.restore(),d.size!==0)return{anchorToEndCol:d,hiddenVerticalBoundaries:p}}resolveEffectiveStyle(e,t,n,o,i,r,s){const a=i==null?void 0:i.get(t),c=r==null?void 0:r.get(e),u=s?xp(s,e,t):void 0;if(!(!o&&!a&&!c&&!u&&!(n!=null&&n.s)))return{...o,...a,...c,...u,...n==null?void 0:n.s}}buildMergeRenderData(e){if(!e||e.size===0)return;const t=new Map,n=new Map;for(const[o,i]of e){t.set(o,i);const r=Te(o);for(let s=r.r;s<r.r+i.rs;s++)for(let a=r.c;a<r.c+i.cs;a++){const c=pe({r:s,c:a});c!==o&&n.set(c,o)}}return{anchors:t,coverToAnchor:n}}toCellRect(e,t,n,o,i){const r=De(e,t,n,o);if(!i||i.rs===1&&i.cs===1)return r;const s=De({r:e.r+i.rs-1,c:e.c+i.cs-1},t,n,o);return{left:r.left,top:r.top,width:s.left+s.width-r.left,height:s.top+s.height-r.top}}toCellFont(e){const t=[];return e!=null&&e.b&&t.push("bold"),e!=null&&e.i&&t.push("italic"),t.push(`${_r}px Arial`),t.join(" ")}verticalBoundaryKey(e,t){return`${e}:${t}`}getThemeColor(e){return ve(this.theme,e)}cleanup(){this.canvas.remove()}};k(Kn,"filterIconPath2D");let Pa=Kn;class Zg{constructor(e="light"){k(this,"container");k(this,"theme");this.theme=e,this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.display="none",this.container.style.zIndex="1000",this.container.style.minWidth="160px",this.container.style.borderRadius="4px",this.container.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",this.container.style.padding="4px 0",this.container.style.fontSize="13px",this.container.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',this.applyTheme(),this.handleDocumentClick=this.handleDocumentClick.bind(this)}getContainer(){return this.container}show(e,t,n){this.container.innerHTML="";for(const o of n){const i=document.createElement("div");i.textContent=o.label,i.style.padding="6px 16px",i.style.cursor="pointer",i.style.color=ve(this.theme,"cellTextColor"),i.addEventListener("mouseenter",()=>{i.style.backgroundColor=ve(this.theme,"selectionBGColor")}),i.addEventListener("mouseleave",()=>{i.style.backgroundColor="transparent"}),i.addEventListener("mousedown",r=>{r.preventDefault(),r.stopPropagation(),this.hide(),o.action()}),this.container.appendChild(i)}this.container.style.left=`${e}px`,this.container.style.top=`${t}px`,this.container.style.display="block",document.addEventListener("mousedown",this.handleDocumentClick)}hide(){this.container.style.display="none",document.removeEventListener("mousedown",this.handleDocumentClick)}cleanup(){this.hide(),this.container.remove()}handleDocumentClick(e){this.container.contains(e.target)||this.hide()}applyTheme(){this.container.style.backgroundColor=ve(this.theme,"cellBGColor"),this.container.style.border=`1px solid ${ve(this.theme,"cellBorderColor")}`}}const Hi=[{name:"SUM",description:"Returns the sum of a series of numbers",args:[{name:"number1"},{name:"number2",optional:!0,repeating:!0}]},{name:"ABS",description:"Returns the absolute value of a number",args:[{name:"number"}]},{name:"ROUND",description:"Rounds a number to a certain number of decimal places",args:[{name:"value"},{name:"places",optional:!0}]},{name:"ROUNDUP",description:"Rounds a number away from zero",args:[{name:"value"},{name:"places",optional:!0}]},{name:"ROUNDDOWN",description:"Rounds a number toward zero",args:[{name:"value"},{name:"places",optional:!0}]},{name:"INT",description:"Rounds a number down to the nearest integer",args:[{name:"value"}]},{name:"MOD",description:"Returns the remainder after division",args:[{name:"dividend"},{name:"divisor"}]},{name:"SQRT",description:"Returns the positive square root of a number",args:[{name:"value"}]},{name:"POWER",description:"Returns a number raised to a power",args:[{name:"base"},{name:"exponent"}]},{name:"PRODUCT",description:"Multiplies a series of numbers",args:[{name:"number1"},{name:"number2",optional:!0,repeating:!0}]},{name:"MEDIAN",description:"Returns the middle number in a series",args:[{name:"number1"},{name:"number2",optional:!0,repeating:!0}]},{name:"IF",description:"Returns one value if true and another if false",args:[{name:"condition"},{name:"value_if_true"},{name:"value_if_false",optional:!0}]},{name:"IFS",description:"Returns the first value whose condition is true",args:[{name:"condition1"},{name:"value1"},{name:"condition2",optional:!0,repeating:!0},{name:"value2",optional:!0,repeating:!0}]},{name:"SWITCH",description:"Matches an expression against case/value pairs",args:[{name:"expression"},{name:"case1"},{name:"value1"},{name:"case2",optional:!0,repeating:!0},{name:"value2",optional:!0,repeating:!0},{name:"default",optional:!0}]},{name:"AND",description:"Returns TRUE if all arguments are true",args:[{name:"logical1"},{name:"logical2",optional:!0,repeating:!0}]},{name:"OR",description:"Returns TRUE if any argument is true",args:[{name:"logical1"},{name:"logical2",optional:!0,repeating:!0}]},{name:"NOT",description:"Returns the opposite of a logical value",args:[{name:"logical"}]},{name:"AVERAGE",description:"Returns the average of a series of numbers",args:[{name:"number1"},{name:"number2",optional:!0,repeating:!0}]},{name:"MIN",description:"Returns the smallest value in a set of numbers",args:[{name:"number1"},{name:"number2",optional:!0,repeating:!0}]},{name:"MAX",description:"Returns the largest value in a set of numbers",args:[{name:"number1"},{name:"number2",optional:!0,repeating:!0}]},{name:"COUNT",description:"Counts the number of numeric values",args:[{name:"value1"},{name:"value2",optional:!0,repeating:!0}]},{name:"COUNTA",description:"Counts the number of non-empty values",args:[{name:"value1"},{name:"value2",optional:!0,repeating:!0}]},{name:"COUNTBLANK",description:"Counts empty cells",args:[{name:"value1"},{name:"value2",optional:!0,repeating:!0}]},{name:"COUNTIF",description:"Counts values in a range that meet a criterion",args:[{name:"range"},{name:"criterion"}]},{name:"SUMIF",description:"Sums values in a range that meet a criterion",args:[{name:"range"},{name:"criterion"},{name:"sum_range",optional:!0}]},{name:"COUNTIFS",description:"Counts values that meet multiple criteria",args:[{name:"criteria_range1"},{name:"criterion1"},{name:"criteria_range2",optional:!0,repeating:!0},{name:"criterion2",optional:!0,repeating:!0}]},{name:"SUMIFS",description:"Sums values that meet multiple criteria",args:[{name:"sum_range"},{name:"criteria_range1"},{name:"criterion1"},{name:"criteria_range2",optional:!0,repeating:!0},{name:"criterion2",optional:!0,repeating:!0}]},{name:"TRIM",description:"Removes leading and trailing whitespace from text",args:[{name:"text"}]},{name:"LEN",description:"Returns the number of characters in a text string",args:[{name:"text"}]},{name:"LEFT",description:"Returns the leftmost characters from a text string",args:[{name:"text"},{name:"num_chars",optional:!0}]},{name:"RIGHT",description:"Returns the rightmost characters from a text string",args:[{name:"text"},{name:"num_chars",optional:!0}]},{name:"MID",description:"Returns characters from the middle of a text string",args:[{name:"text"},{name:"start_num"},{name:"num_chars"}]},{name:"CONCATENATE",description:"Joins two or more text strings into one",args:[{name:"text1"},{name:"text2"},{name:"text3",optional:!0,repeating:!0}]},{name:"CONCAT",description:"Joins text values into one string",args:[{name:"text1"},{name:"text2"},{name:"text3",optional:!0,repeating:!0}]},{name:"FIND",description:"Finds one text value inside another (case-sensitive)",args:[{name:"search_for"},{name:"text_to_search"},{name:"starting_at",optional:!0}]},{name:"SEARCH",description:"Finds one text value inside another (case-insensitive)",args:[{name:"search_for"},{name:"text_to_search"},{name:"starting_at",optional:!0}]},{name:"TEXTJOIN",description:"Joins text values with a delimiter",args:[{name:"delimiter"},{name:"ignore_empty"},{name:"text1"},{name:"text2",optional:!0,repeating:!0}]},{name:"LOWER",description:"Converts text to lowercase",args:[{name:"text"}]},{name:"UPPER",description:"Converts text to uppercase",args:[{name:"text"}]},{name:"PROPER",description:"Capitalizes each word in text",args:[{name:"text"}]},{name:"SUBSTITUTE",description:"Replaces existing text with new text in a string",args:[{name:"text"},{name:"search_for"},{name:"replace_with"},{name:"occurrence",optional:!0}]},{name:"TODAY",description:"Returns the current date",args:[]},{name:"NOW",description:"Returns the current date and time",args:[]},{name:"YEAR",description:"Returns the year from a date",args:[{name:"date"}]},{name:"MONTH",description:"Returns the month from a date (1-12)",args:[{name:"date"}]},{name:"DAY",description:"Returns the day of the month from a date (1-31)",args:[{name:"date"}]},{name:"ISBLANK",description:"Checks whether a value is blank",args:[{name:"value"}]},{name:"ISNUMBER",description:"Checks whether a value is a number",args:[{name:"value"}]},{name:"ISTEXT",description:"Checks whether a value is text",args:[{name:"value"}]},{name:"IFERROR",description:"Returns a value if no error, otherwise returns an alternate value",args:[{name:"value"},{name:"value_if_error"}]}];function ey(l){const e=l.toUpperCase();return Hi.filter(t=>t.name.startsWith(e))}function ty(l){const e=l.toUpperCase();return Hi.find(t=>t.name===e)}function Da(l){const e=l.args.map(t=>{let n=t.optional?`[${t.name}]`:t.name;return t.repeating&&(n+=", ..."),n});return`${l.name}(${e.join(", ")})`}function ry(l,e){if(!l.startsWith("="))return{type:"none"};const t=l.slice(1,e);let n=0,o=0;for(let r=t.length-1;r>=0;r--){const s=t[r];if(s===")")n++;else if(s==="(")if(n>0)n--;else{const a=t.slice(0,r).match(/([A-Za-z_]\w*)$/);return a?{type:"argument",funcName:a[1].toUpperCase(),argIndex:o}:{type:"none"}}else s===","&&n===0&&o++}const i=t.match(/([A-Za-z_]\w*)$/);return i?{type:"function-name",prefix:i[1]}:{type:"none"}}class ny{constructor(e="light"){k(this,"container");k(this,"theme");k(this,"selectedIndex",0);k(this,"matches",[]);k(this,"mode","hidden");k(this,"currentHint",null);this.theme=e,this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.display="none",this.container.style.zIndex="1000",this.container.style.minWidth="220px",this.container.style.maxWidth="360px",this.container.style.borderRadius="4px",this.container.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",this.container.style.padding="4px 0",this.container.style.fontSize="13px",this.container.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',this.container.style.overflow="hidden",this.applyTheme()}getContainer(){return this.container}showList(e,t){if(this.matches=ey(e),this.matches.length===0){this.hide();return}this.mode="list",this.selectedIndex=0,this.renderList(),this.positionAt(t),this.container.style.display="block"}showHint(e,t,n){const o=ty(e);if(!o){this.hide();return}this.mode="hint",this.currentHint={info:o,argIndex:t},this.renderHint(),this.positionAt(n),this.container.style.display="block"}hide(){this.mode="hidden",this.matches=[],this.currentHint=null,this.container.style.display="none",this.container.innerHTML=""}moveUp(){this.mode!=="list"||this.matches.length===0||(this.selectedIndex=(this.selectedIndex-1+this.matches.length)%this.matches.length,this.renderList())}moveDown(){this.mode!=="list"||this.matches.length===0||(this.selectedIndex=(this.selectedIndex+1)%this.matches.length,this.renderList())}getSelectedFunction(){if(this.mode==="list")return this.matches[this.selectedIndex]}isListVisible(){return this.mode==="list"}isHintVisible(){return this.mode==="hint"}cleanup(){this.hide(),this.container.remove()}positionAt(e){this.container.style.left=`${e.left}px`,this.container.style.top=`${e.top}px`}renderList(){this.container.innerHTML="";const e=ve(this.theme,"cellBGColor"),t=ve(this.theme,"cellTextColor"),n=ve(this.theme,"selectionBGColor"),o=ve(this.theme,"activeCellColor");for(let i=0;i<this.matches.length;i++){const r=this.matches[i],s=document.createElement("div");s.style.padding="4px 10px",s.style.cursor="pointer",s.style.display="flex",s.style.flexDirection="column",s.style.gap="1px",s.style.backgroundColor=i===this.selectedIndex?n:e;const a=document.createElement("div");a.style.fontWeight="600",a.style.color=i===this.selectedIndex?o:t,a.textContent=r.name;const c=document.createElement("div");c.style.fontSize="11px",c.style.opacity="0.7",c.style.color=t,c.textContent=r.description,s.appendChild(a),s.appendChild(c),s.addEventListener("mouseenter",()=>{this.selectedIndex=i,this.renderList()}),s.addEventListener("mousedown",u=>{u.preventDefault(),u.stopPropagation()}),this.container.appendChild(s)}}renderHint(){if(this.container.innerHTML="",!this.currentHint)return;const{info:e,argIndex:t}=this.currentHint,n=ve(this.theme,"cellTextColor"),o=ve(this.theme,"activeCellColor"),i=document.createElement("div");i.style.padding="6px 10px",i.style.color=n,i.style.whiteSpace="nowrap";const r=document.createElement("span");r.style.fontWeight="600",r.textContent=e.name+"(",i.appendChild(r);for(let a=0;a<e.args.length;a++){a>0&&i.appendChild(document.createTextNode(", "));const c=e.args[a];let u=c.optional?`[${c.name}]`:c.name;c.repeating&&(u+=", ...");const h=document.createElement("span");(a===t||a===e.args.length-1&&c.repeating&&t>=a)&&(h.style.fontWeight="700",h.style.color=o),h.textContent=u,i.appendChild(h)}i.appendChild(document.createTextNode(")"));const s=document.createElement("div");s.style.fontSize="11px",s.style.opacity="0.7",s.style.color=n,s.style.padding="2px 10px 4px",s.textContent=Da(e)+"  "+e.description,this.container.appendChild(i),this.container.appendChild(s)}applyTheme(){this.container.style.backgroundColor=ve(this.theme,"cellBGColor"),this.container.style.border=`1px solid ${ve(this.theme,"cellBorderColor")}`}}class iy{constructor(e="light"){k(this,"theme");k(this,"container");k(this,"panel");k(this,"searchInput");k(this,"status");k(this,"list");k(this,"rows",[]);k(this,"matches",[...Hi]);k(this,"selectedIndex",0);k(this,"listTextColor","");k(this,"listSelectedBG","");k(this,"listActiveColor","");k(this,"onInsert");k(this,"onClose");k(this,"boundHandleBackdropMouseDown");k(this,"boundHandleSearchInput");k(this,"boundHandleSearchKeydown");k(this,"boundHandleListPointerDown");k(this,"boundHandleListClick");k(this,"boundHandleListMouseOver");this.theme=e,this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.inset="0",this.container.style.display="none",this.container.style.zIndex="1100",this.container.style.backgroundColor="rgba(0, 0, 0, 0.18)",this.container.style.padding="40px 16px 16px",this.container.style.boxSizing="border-box",this.panel=document.createElement("div"),this.panel.style.margin="0 auto",this.panel.style.maxWidth="720px",this.panel.style.height="min(560px, calc(100vh - 72px))",this.panel.style.display="flex",this.panel.style.flexDirection="column",this.panel.style.backgroundColor=ve(this.theme,"cellBGColor"),this.panel.style.border=`1px solid ${ve(this.theme,"cellBorderColor")}`,this.panel.style.borderRadius="8px",this.panel.style.boxShadow="0 10px 30px rgba(0, 0, 0, 0.2)",this.panel.style.color=ve(this.theme,"cellTextColor"),this.panel.style.overflow="hidden";const t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="space-between",t.style.padding="12px 14px",t.style.borderBottom=`1px solid ${ve(this.theme,"cellBorderColor")}`;const n=document.createElement("div");n.textContent="Functions",n.style.font="600 14px Arial",t.appendChild(n);const o=document.createElement("button");o.type="button",o.textContent="Close",o.style.border=`1px solid ${ve(this.theme,"cellBorderColor")}`,o.style.borderRadius="4px",o.style.backgroundColor=ve(this.theme,"cellBGColor"),o.style.color=ve(this.theme,"cellTextColor"),o.style.padding="4px 8px",o.style.font="12px Arial",o.style.cursor="pointer",o.addEventListener("click",()=>this.hide()),t.appendChild(o);const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.gap="6px",i.style.padding="12px 14px 10px",i.style.borderBottom=`1px solid ${ve(this.theme,"cellBorderColor")}`,this.searchInput=document.createElement("input"),this.searchInput.type="text",this.searchInput.placeholder="Search by name or description",this.searchInput.style.width="100%",this.searchInput.style.boxSizing="border-box",this.searchInput.style.padding="7px 10px",this.searchInput.style.border=`1px solid ${ve(this.theme,"cellBorderColor")}`,this.searchInput.style.borderRadius="4px",this.searchInput.style.outline="none",this.searchInput.style.font="13px Arial",this.searchInput.style.color=ve(this.theme,"cellTextColor"),this.searchInput.style.backgroundColor=ve(this.theme,"cellBGColor"),i.appendChild(this.searchInput),this.status=document.createElement("div"),this.status.style.font="12px Arial",this.status.style.opacity="0.75",i.appendChild(this.status),this.list=document.createElement("div"),this.list.style.flex="1",this.list.style.overflow="auto",this.list.style.padding="6px 0",this.panel.appendChild(t),this.panel.appendChild(i),this.panel.appendChild(this.list),this.container.appendChild(this.panel),this.boundHandleBackdropMouseDown=r=>{r.target===this.container&&this.hide()},this.boundHandleSearchInput=()=>{this.selectedIndex=0,this.filterAndRender()},this.boundHandleSearchKeydown=r=>{if(r.key==="ArrowDown"){r.preventDefault(),this.matches.length>0&&(this.setSelectedIndex((this.selectedIndex+1)%this.matches.length),this.scrollSelectedIntoView());return}if(r.key==="ArrowUp"){r.preventDefault(),this.matches.length>0&&(this.setSelectedIndex((this.selectedIndex-1+this.matches.length)%this.matches.length),this.scrollSelectedIntoView());return}if(r.key==="Enter"){r.preventDefault(),this.insertSelected();return}r.key==="Escape"&&(r.preventDefault(),this.hide())},this.boundHandleListPointerDown=r=>{if(r.button!==0)return;const s=this.getRowIndexFromTarget(r.target);s!==null&&(r.preventDefault(),this.setSelectedIndex(s),this.insertSelected())},this.boundHandleListClick=r=>{if(r.button!==0||!this.isVisible())return;const s=this.getRowIndexFromTarget(r.target);s!==null&&(r.preventDefault(),this.setSelectedIndex(s),this.insertSelected())},this.boundHandleListMouseOver=r=>{const s=this.getRowIndexFromTarget(r.target);s===null||s===this.selectedIndex||this.setSelectedIndex(s)},this.container.addEventListener("mousedown",this.boundHandleBackdropMouseDown),this.searchInput.addEventListener("input",this.boundHandleSearchInput),this.searchInput.addEventListener("keydown",this.boundHandleSearchKeydown),this.list.addEventListener("pointerdown",this.boundHandleListPointerDown),this.list.addEventListener("click",this.boundHandleListClick),this.list.addEventListener("mouseover",this.boundHandleListMouseOver),this.filterAndRender()}getContainer(){return this.container}setOnInsert(e){this.onInsert=e}setOnClose(e){this.onClose=e}contains(e){return e instanceof Node&&this.container.contains(e)}isVisible(){return this.container.style.display!=="none"}show(){this.searchInput.value="",this.selectedIndex=0,this.filterAndRender(),this.container.style.display="block",requestAnimationFrame(()=>this.searchInput.focus())}hide(){var e;this.isVisible()&&(this.container.style.display="none",(e=this.onClose)==null||e.call(this))}cleanup(){this.container.removeEventListener("mousedown",this.boundHandleBackdropMouseDown),this.searchInput.removeEventListener("input",this.boundHandleSearchInput),this.searchInput.removeEventListener("keydown",this.boundHandleSearchKeydown),this.list.removeEventListener("pointerdown",this.boundHandleListPointerDown),this.list.removeEventListener("click",this.boundHandleListClick),this.list.removeEventListener("mouseover",this.boundHandleListMouseOver),this.container.remove()}filterAndRender(){const e=this.searchInput.value.trim().toUpperCase();this.matches=e.length===0?[...Hi]:Hi.filter(t=>{const n=t.name.toUpperCase(),o=t.description.toUpperCase(),i=Da(t).toUpperCase();return n.includes(e)||o.includes(e)||i.includes(e)}),this.selectedIndex>=this.matches.length&&(this.selectedIndex=Math.max(0,this.matches.length-1)),this.renderList()}renderList(){if(this.list.innerHTML="",this.rows=[],this.status.textContent=`${this.matches.length} functions`,this.matches.length===0){const t=document.createElement("div");t.textContent="No matching functions",t.style.padding="16px 14px",t.style.font="13px Arial",t.style.opacity="0.8",this.list.appendChild(t);return}const e=ve(this.theme,"cellBorderColor");this.listTextColor=ve(this.theme,"cellTextColor"),this.listSelectedBG=ve(this.theme,"selectionBGColor"),this.listActiveColor=ve(this.theme,"activeCellColor");for(let t=0;t<this.matches.length;t++){const n=this.matches[t],o=document.createElement("div");o.dataset.funcName=n.name,o.dataset.funcIndex=String(t),o.style.display="flex",o.style.gap="10px",o.style.alignItems="flex-start",o.style.justifyContent="flex-start",o.style.padding="10px 14px",o.style.cursor="pointer",o.style.borderBottom=`1px solid ${e}`,o.style.backgroundColor="transparent";const i=document.createElement("div");i.style.minWidth="0",i.style.flex="1";const r=document.createElement("div");r.textContent=n.name,r.style.font="600 13px Arial",r.style.color=this.listTextColor;const s=document.createElement("div");s.textContent=Da(n),s.style.font="12px Arial",s.style.opacity="0.82",s.style.marginTop="2px",s.style.wordBreak="break-word";const a=document.createElement("div");a.textContent=n.description,a.style.font="12px Arial",a.style.opacity="0.72",a.style.marginTop="2px",a.style.wordBreak="break-word",i.appendChild(r),i.appendChild(s),i.appendChild(a),o.appendChild(i),this.list.appendChild(o),this.rows.push({row:o,name:r})}this.updateRowSelection(this.selectedIndex)}scrollSelectedIntoView(){var t;const e=(t=this.rows[this.selectedIndex])==null?void 0:t.row;e&&e.scrollIntoView({block:"nearest"})}getRowIndexFromTarget(e){if(!(e instanceof Element))return null;const t=e.closest("[data-func-index]");if(!(t instanceof HTMLDivElement)||!this.list.contains(t))return null;const n=Number(t.dataset.funcIndex);return Number.isInteger(n)?n:null}setSelectedIndex(e){if(e===this.selectedIndex||e<0||e>=this.matches.length)return;const t=this.selectedIndex;this.selectedIndex=e,this.updateRowSelection(t),this.updateRowSelection(e)}updateRowSelection(e){const t=this.rows[e];if(!t)return;const n=e===this.selectedIndex;t.row.style.backgroundColor=n?this.listSelectedBG:"transparent",t.name.style.color=n?this.listActiveColor:this.listTextColor}insertSelected(){var t;const e=this.matches[this.selectedIndex];e&&((t=this.onInsert)==null||t.call(this,e),this.hide())}}const Wf=l=>l.length===1?l.toLowerCase():l,Ia=l=>l.metaKey||l.ctrlKey,Fe=(l,e)=>Wf(l.key)===Wf(e),Qe=(l,e)=>!(!Fe(l,e.key)||e.mod!==void 0&&Ia(l)!==e.mod||e.shift!==void 0&&l.shiftKey!==e.shift||e.alt!==void 0&&l.altKey!==e.alt),Gf=async(l,e)=>{for(const t of e)if(t.match(l))return await t.run(l),!0;return!1},io=6,oy=10,Yf=20,Xf=120,Kf=300,sy=1800,Yn=8,oo=4,ay=200;class ly{constructor(e,t="light",n=!1){k(this,"sheet");k(this,"theme");k(this,"container");k(this,"formulaBar");k(this,"cellInput");k(this,"overlay");k(this,"gridContainer");k(this,"gridCanvas");k(this,"contextMenu");k(this,"autocomplete");k(this,"functionBrowser");k(this,"resizeTooltip");k(this,"filterPanel");k(this,"filterPanelState",null);k(this,"filterPanelOutsideClickUnsub",null);k(this,"filterPanelKeyboardUnsub",null);k(this,"rowDim");k(this,"colDim");k(this,"hiddenRows",new Set);k(this,"hiddenRowSizeBackup",new Map);k(this,"listeners",[]);k(this,"interactionCleanups",new Set);k(this,"resizeObserver");k(this,"preventDocumentSelectStart",e=>{e.preventDefault()});k(this,"resizeHover",null);k(this,"dragMove",null);k(this,"editMode",!1);k(this,"manuallyResizedRows",new Set);k(this,"formulaRanges",[]);k(this,"freezeState",Hn);k(this,"freezeHandleHover",null);k(this,"filterButtonHoverCol",null);k(this,"freezeDrag",null);k(this,"autofillPreview");k(this,"onRenderCallback");k(this,"readOnly");k(this,"formulaRangeAnchor",null);k(this,"activeFormulaInput",null);k(this,"formulaRefInsertPos",null);k(this,"lastFormulaRefTarget",null);k(this,"nativeSelectionBlockDepth",0);k(this,"previousBodyUserSelect","");k(this,"previousBodyWebkitUserSelect","");k(this,"pendingRenderFrame",null);k(this,"renderInFlight",!1);k(this,"renderQueued",!1);k(this,"renderVersion",0);this.container=e,this.theme=t,this.readOnly=n,this.formulaBar=new Hg(t),this.gridContainer=new Qg(t),this.overlay=new Kg(t),this.gridCanvas=new Pa(t),this.cellInput=new Xg(t),this.contextMenu=new Zg(t),this.autocomplete=new ny(t),this.functionBrowser=new iy(t),this.resizeTooltip=document.createElement("div"),this.filterPanel=document.createElement("div"),this.rowDim=new Mf(se),this.colDim=new Mf(ut),this.gridContainer.appendChild(this.overlay.getContainer()),this.gridContainer.appendChild(this.gridCanvas.getCanvas()),this.gridContainer.appendChild(this.cellInput.getContainer()),this.container.appendChild(this.formulaBar.getContainer()),this.container.appendChild(this.gridContainer.getContainer()),this.container.appendChild(this.contextMenu.getContainer()),this.container.appendChild(this.autocomplete.getContainer()),document.body.appendChild(this.functionBrowser.getContainer()),this.resizeTooltip.style.position="fixed",this.resizeTooltip.style.display="none",this.resizeTooltip.style.pointerEvents="none",this.resizeTooltip.style.zIndex="1001",this.resizeTooltip.style.padding="4px 8px",this.resizeTooltip.style.borderRadius="4px",this.resizeTooltip.style.border=`1px solid ${ve(t,"cellBorderColor")}`,this.resizeTooltip.style.backgroundColor=ve(t,"cellBGColor"),this.resizeTooltip.style.color=ve(t,"cellTextColor"),this.resizeTooltip.style.fontSize="11px",this.resizeTooltip.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',this.resizeTooltip.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",document.body.appendChild(this.resizeTooltip),this.filterPanel.style.position="fixed",this.filterPanel.style.display="none",this.filterPanel.style.zIndex="1002",this.filterPanel.style.width="260px",this.filterPanel.style.maxHeight="360px",this.filterPanel.style.overflow="hidden",this.filterPanel.style.borderRadius="6px",this.filterPanel.style.border=`1px solid ${ve(t,"cellBorderColor")}`,this.filterPanel.style.backgroundColor=ve(t,"cellBGColor"),this.filterPanel.style.color=ve(t,"cellTextColor"),this.filterPanel.style.fontSize="12px",this.filterPanel.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',this.filterPanel.style.boxShadow="0 4px 14px rgba(0, 0, 0, 0.2)",document.body.appendChild(this.filterPanel),this.functionBrowser.setOnInsert(o=>{this.readOnly||this.insertFunctionFromBrowser(o.name)}),this.resizeObserver=new ResizeObserver(()=>this.render())}async initialize(e){this.sheet=e,this.sheet.setDimensions(this.rowDim,this.colDim),await this.sheet.loadDimensions(),await this.sheet.loadStyles(),await this.sheet.loadMerges(),await this.sheet.loadFreezePane(),await this.sheet.loadFilterState(),this.hiddenRows.clear(),this.hiddenRowSizeBackup.clear(),this.syncHiddenRowsFromSheet(),this.updateFreezeState(),this.formulaBar.initialize(e),this.addEventListeners(),this.resizeObserver.observe(this.container),this.render()}updateFreezeState(){const{frozenRows:e,frozenCols:t}=this.sheet.getFreezePane();this.freezeState=Wg(e,t,this.rowDim,this.colDim)}async setFreezePane(e,t){await this.sheet.setFreezePane(e,t),this.updateFreezeState(),this.render()}async reloadFreezePane(){await this.sheet.loadFreezePane(),this.updateFreezeState()}panBy(e,t){this.gridContainer.scrollBy(e,t)}handleMobileDoubleTap(e,t){const{x:n,y:o}=this.clampClientPointToViewport(e,t);this.handleDblClickAt(n,o)}cleanup(){this.pendingRenderFrame!==null&&(cancelAnimationFrame(this.pendingRenderFrame),this.pendingRenderFrame=null),this.cancelActiveInteractions(),this.removeAllEventListeners(),this.forceEndNativeSelectionBlock(),this.resizeObserver.disconnect(),this.formulaBar.cleanup(),this.cellInput.cleanup(),this.overlay.cleanup(),this.gridCanvas.cleanup(),this.gridContainer.cleanup(),this.contextMenu.cleanup(),this.autocomplete.cleanup(),this.functionBrowser.cleanup(),this.resizeTooltip.remove(),this.hideFilterPanel(),this.filterPanel.remove(),this.sheet=void 0,this.container.innerHTML=""}beginNativeSelectionBlock(){if(this.nativeSelectionBlockDepth+=1,this.nativeSelectionBlockDepth!==1)return;const e=document.body.style;this.previousBodyUserSelect=e.userSelect,this.previousBodyWebkitUserSelect=e.webkitUserSelect,e.userSelect="none",e.webkitUserSelect="none",document.addEventListener("selectstart",this.preventDocumentSelectStart)}endNativeSelectionBlock(){if(this.nativeSelectionBlockDepth===0||(this.nativeSelectionBlockDepth-=1,this.nativeSelectionBlockDepth>0))return;const e=document.body.style;e.userSelect=this.previousBodyUserSelect,e.webkitUserSelect=this.previousBodyWebkitUserSelect,document.removeEventListener("selectstart",this.preventDocumentSelectStart)}forceEndNativeSelectionBlock(){this.nativeSelectionBlockDepth!==0&&(this.nativeSelectionBlockDepth=1,this.endNativeSelectionBlock())}showResizeTooltip(e,t,n,o,i){const r=e==="column"?"Width":"Height",s=i>1?` (${i} ${e==="column"?"columns":"rows"})`:"";this.resizeTooltip.textContent=`${r}: ${Math.round(t)}px${s}`,this.resizeTooltip.style.left=`${n+12}px`,this.resizeTooltip.style.top=`${o+12}px`,this.resizeTooltip.style.display="block"}hideResizeTooltip(){this.resizeTooltip.style.display="none"}bindEventListener(e,t,n,o){e.addEventListener(t,n,o);let i=!0;return()=>{i&&(i=!1,e.removeEventListener(t,n,o))}}addEventListener(e,t,n,o){const i=this.bindEventListener(e,t,n,o);return this.listeners.push(i),i}registerInteractionCleanup(e){let t=!0;const n=()=>{t&&(t=!1,this.interactionCleanups.delete(n),e())};return this.interactionCleanups.add(n),n}addInteractionEventListener(e,t,n,o){const i=this.bindEventListener(e,t,n,o);return this.registerInteractionCleanup(i)}startMouseDragSession({onMove:e,onComplete:t,onCleanup:n}){let o=()=>{};const i=()=>{try{t==null||t()}finally{o()}},r=this.addInteractionEventListener(document,"mousemove",e),s=this.addInteractionEventListener(document,"mouseup",i);return o=this.registerInteractionCleanup(()=>{r(),s(),n==null||n()}),o}cancelActiveInteractions(){for(const e of Array.from(this.interactionCleanups))e()}removeAllEventListeners(){for(const e of this.listeners)e();this.listeners=[]}focusGrid(){var e;this.formulaBar.blur(),this.cellInput.hide(),this.autocomplete.hide(),this.functionBrowser.hide(),this.formulaRanges=[],this.resetFormulaRangeState(),(e=window.getSelection())==null||e.removeAllRanges()}async finishEditing(){this.autocomplete.hide(),this.functionBrowser.hide();const e=this.sheet.getActiveCell();if(this.formulaBar.isFocused())await this.sheet.setData(e,this.formulaBar.getValue()),this.formulaBar.blur(),this.cellInput.hide();else if(this.cellInput.isFocused())await this.sheet.setData(e,this.cellInput.getValue()),this.cellInput.hide();else return;this.formulaRanges=[],this.resetFormulaRangeState(),await this.autoResizeRow(e.r)}isExternalInput(e){if(this.functionBrowser.contains(e))return!0;if(!(e instanceof Element)||this.container.contains(e))return!1;const t=e.tagName;return!!(t==="INPUT"||t==="TEXTAREA"||t==="SELECT"||e.isContentEditable)}handleKeyDown(e){if(this.functionBrowser.isVisible()){e.key==="Escape"&&(e.preventDefault(),this.functionBrowser.hide());return}if(!this.isExternalInput(e.target)){if(this.formulaBar.isFocused()){this.handleFormulaKeydown(e);return}else if(this.cellInput.isFocused()){this.handleCellInputKeydown(e);return}this.handleGridKeydown(e)}}handleKeyUp(e){if(this.functionBrowser.isVisible()||this.isExternalInput(e.target))return;const n=(e.key==="ArrowDown"||e.key==="ArrowUp"||e.key==="Escape"||e.key==="Enter"||e.key==="Tab")&&(this.autocomplete.isListVisible()||this.autocomplete.isHintVisible());let o,i;this.formulaBar.isFocused()?(o=this.formulaBar.getValue(),i=this.formulaBar.getFormulaInput(),this.cellInput.setValue(o)):this.cellInput.isFocused()&&(o=this.cellInput.getValue(),i=this.cellInput.getInput(),this.formulaBar.setValue(o)),o!==void 0&&o.startsWith("=")?(this.formulaRanges=Fi(o).map(r=>r.range),this.renderOverlay()):o!==void 0&&(this.formulaRanges=[],this.renderOverlay()),!n&&(i&&o!==void 0?this.updateAutocomplete(o,i):this.autocomplete.hide())}updateAutocomplete(e,t){if(!e.startsWith("=")){this.autocomplete.hide();return}const n=pr(t);if(!n){this.autocomplete.hide();return}const o=n.end,i=ry(e,o),r=t.getBoundingClientRect(),s={left:r.left,top:r.bottom+2};i.type==="function-name"?this.autocomplete.showList(i.prefix,s):i.type==="argument"?this.autocomplete.showHint(i.funcName,i.argIndex,s):this.autocomplete.hide()}toggleFunctionBrowser(){if(this.functionBrowser.isVisible()){this.functionBrowser.hide();return}this.autocomplete.hide(),this.functionBrowser.show()}insertFunctionCompletion(e,t){const n=t.innerText,o=pr(t);if(!o)return;const i=o.end,s=n.slice(0,i).match(/([A-Za-z_]\w*)$/);if(!s)return;const a=i-s[1].length,c=n.slice(i),u=n.slice(0,a)+e+"("+c;this.formulaBar.setValue(u),this.cellInput.setValue(u);const h=a+e.length+1;Er(t,{start:h,end:h}),this.autocomplete.hide(),this.updateAutocomplete(u,t)}async insertFunctionFromBrowser(e){const t=await this.getInputForFunctionInsert(),n=t.innerText,o=pr(t);let i,r;if(!n.startsWith("="))i=`=${e}(`,r=i.length;else{const s=(o==null?void 0:o.start)??n.length,a=(o==null?void 0:o.end)??n.length;i=n.slice(0,s)+e+"("+n.slice(a),r=s+e.length+1}this.formulaBar.setValue(i),this.cellInput.setValue(i),Er(t,{start:r,end:r}),t.focus(),this.formulaRanges=Fi(i).map(s=>s.range),this.renderOverlay(),this.autocomplete.hide(),this.updateAutocomplete(i,t)}async getInputForFunctionInsert(){if(this.cellInput.isFocused())return this.cellInput.getInput();const e=this.cellInput.getInput(),t=this.formulaBar.getFormulaInput(),n=t.innerText,o=pr(t);this.cellInput.isShown()||await this.showCellInput(!0,!0),this.cellInput.setValue(n);const i=(o==null?void 0:o.end)??n.length;return Er(e,{start:i,end:i}),this.cellInput.isFocused()||e.focus(),e}isInFormulaRangeMode(){let e,t;if(this.cellInput.isFocused()?(e=this.cellInput.getValue(),t=this.cellInput.getInput()):this.formulaBar.isFocused()&&(e=this.formulaBar.getValue(),t=this.formulaBar.getFormulaInput()),!e||!t||!e.startsWith("="))return!1;const n=pr(t);return n?tg(e,n.end):!1}insertReferenceAtCursor(e,t){const n=this.cellInput.isFocused(),o=this.formulaBar.isFocused();if(!n&&!o)return;const i=n?this.cellInput.getInput():this.formulaBar.getFormulaInput(),r=i.innerText,s=pr(i);if(!s)return;const a=t&&(e.r!==t.r||e.c!==t.c)?pe(e)+":"+pe(t):pe(e);let c,u;if(this.formulaRefInsertPos){const{start:h,end:f}=this.formulaRefInsertPos;c=r.slice(0,h)+a+r.slice(f),u=h+a.length,this.formulaRefInsertPos={start:h,end:u}}else{const h=Pf(r,s.end);h?(c=r.slice(0,h.start)+a+r.slice(h.end),u=h.start+a.length,this.formulaRefInsertPos={start:h.start,end:u}):s.start!==s.end?(c=r.slice(0,s.start)+a+r.slice(s.end),u=s.start+a.length,this.formulaRefInsertPos={start:s.start,end:u}):(c=r.slice(0,s.end)+a+r.slice(s.end),u=s.end+a.length,this.formulaRefInsertPos={start:s.end,end:u})}this.formulaBar.setValue(c),this.cellInput.setValue(c),Er(i,{start:u,end:u}),c.startsWith("=")&&(this.formulaRanges=Fi(c).map(h=>h.range),this.renderOverlay()),this.lastFormulaRefTarget=t||e}toggleAbsoluteReference(e){const t=e.innerText;if(!t.startsWith("="))return;const n=pr(e);if(!n)return;const o=Pf(t,n.end);if(!o)return;const i=o.text,r=i.startsWith("$"),s=i.replace(/\$/g,"");let a=0;for(let x=0;x<s.length;x++)if(s.charCodeAt(x)>=48&&s.charCodeAt(x)<=57){a=x;break}const c=s.slice(0,a),u=s.slice(a),h=i.indexOf(u,i.lastIndexOf(c)+c.length),f=h>0&&i[h-1]==="$";let d;!r&&!f?d="$"+c+"$"+u:r&&f?d=c+"$"+u:!r&&f?d="$"+c+u:d=c+u;const p=t.slice(0,o.start)+d+t.slice(o.end),S=o.start+d.length;this.formulaBar.setValue(p),this.cellInput.setValue(p),Er(e,{start:S,end:S}),p.startsWith("=")&&(this.formulaRanges=Fi(p).map(x=>x.range),this.renderOverlay())}resetFormulaRangeState(){this.formulaRangeAnchor=null,this.activeFormulaInput=null,this.formulaRefInsertPos=null,this.lastFormulaRefTarget=null}handleDblClick(e){e.preventDefault(),this.handleDblClickAt(e.offsetX,e.offsetY)}handleDblClickAt(e,t){if(this.readOnly)return;const n=this.detectFreezeHandle(e,t);if(n){const i=this.sheet.getFreezePane();n==="row"?this.setFreezePane(i.frozenRows>0?0:1,i.frozenCols):this.setFreezePane(i.frozenRows,i.frozenCols>0?0:1);return}const o=this.detectResizeEdge(e,t);if(o){this.autoFitSize(o.axis,o.index);return}this.showCellInput()}handleContextMenu(e){if(this.readOnly)return;const t=e.offsetX,n=e.offsetY,o=t<ue,i=n<se;if(!(!o&&!i)){if(e.preventDefault(),o){const r=this.toRowFromMouse(n);if(r<1)return;const s=this.sheet.getSelectedIndices(),a=s&&s.axis==="row"&&r>=s.from&&r<=s.to,c=a?s.from:r,u=a?s.to-s.from+1:1,h=u>1?`${u} rows`:"row";this.contextMenu.show(e.clientX,e.clientY,[{label:`Insert ${h} above`,action:()=>{this.sheet.insertRows(c,u).then(()=>this.render())}},{label:`Insert ${h} below`,action:()=>{this.sheet.insertRows(c+u,u).then(()=>this.render())}},{label:`Delete ${h}`,action:()=>{this.sheet.deleteRows(c,u).then(()=>this.render())}}])}else if(i){const r=this.toColFromMouse(t);if(r<1)return;const s=this.sheet.getSelectedIndices(),a=s&&s.axis==="column"&&r>=s.from&&r<=s.to,c=a?s.from:r,u=a?s.to-s.from+1:1,h=u>1?`${u} columns`:"column",f=[{label:`Insert ${h} left`,action:()=>{this.sheet.insertColumns(c,u).then(()=>this.render())}},{label:`Insert ${h} right`,action:()=>{this.sheet.insertColumns(c+u,u).then(()=>this.render())}},{label:`Delete ${h}`,action:()=>{this.sheet.deleteColumns(c,u).then(()=>this.render())}}];this.contextMenu.show(e.clientX,e.clientY,f)}}}getFilterButtonRect(e){var s;const t=(s=this.sheet)==null?void 0:s.getFilterRange();if(!t)return null;const n=t[0].r,o=this.getCellRect({r:n,c:e});if(o.width<=6||o.height<=6)return null;const i=Math.min(16,Math.max(12,o.width-4)),r=Math.min(16,Math.max(12,o.height-6));return{left:o.left+o.width-i-2,top:o.top+Math.max(3,(o.height-r)/2),width:i,height:r}}detectFilterButton(e,t){if(!this.sheet||!this.sheet.hasFilter()||e<=ue||t<=se)return null;const n=this.sheet.getFilterRange();if(!n)return null;const o=this.toRefFromMouse(e,t);if(o.r!==n[0].r||!this.sheet.isColumnInFilter(o.c))return null;const i=this.getFilterButtonRect(o.c);return!i||e<i.left-2||e>i.left+i.width+2||t<i.top-2||t>i.top+i.height+2?null:o.c}async showFilterPanel(e,t){var p,S;if(!this.sheet||!this.sheet.isColumnInFilter(e))return;const n=await this.sheet.getFilterColumnValues(e);if(!n)return;const o=this.sheet.getColumnFilterCondition(e),i=o&&o.op!=="in"&&o.op!=="isEmpty"&&o.op!=="isNotEmpty",r=t==="condition"||i?"condition":"values",s=o?{...o,values:o.values?[...o.values]:void 0}:{op:"contains",value:""};this.filterPanelState={col:e,values:n.values,selected:new Set(n.selected),initialSelected:new Set(n.selected),search:"",mode:r,condition:{...s,values:s.values?[...s.values]:void 0},initialCondition:s,hasExistingCondition:!!o},this.renderFilterPanel();const a=this.getFilterButtonRect(e);if(!a)return;const c=this.viewport,h=Math.min(c.left+Math.max(ue,a.left-6),c.left+Math.max(0,c.width-260-4)),f=c.top+a.top+a.height+4;this.filterPanel.style.left=`${h}px`,this.filterPanel.style.top=`${f}px`,this.filterPanel.style.display="block",(p=this.filterPanelKeyboardUnsub)==null||p.call(this);const d=x=>{if(!this.filterPanelState)return;const v=x.target,m=v?this.filterPanel.contains(v):!1;if(x.key==="Escape"){x.preventDefault(),x.stopPropagation(),this.hideFilterPanel();return}x.key==="Enter"&&m&&(x.preventDefault(),x.stopPropagation(),this.applyFilterPanel())};document.addEventListener("keydown",d,!0),this.filterPanelKeyboardUnsub=()=>{document.removeEventListener("keydown",d,!0)},(S=this.filterPanelOutsideClickUnsub)==null||S.call(this),requestAnimationFrame(()=>{if(!this.filterPanelState)return;const x=v=>{this.filterPanel.contains(v.target)||this.hideFilterPanel()};document.addEventListener("mousedown",x),this.filterPanelOutsideClickUnsub=()=>{document.removeEventListener("mousedown",x)}})}hideFilterPanel(){var e,t;this.filterPanel.style.display="none",this.filterPanel.innerHTML="",this.filterPanelState=null,(e=this.filterPanelOutsideClickUnsub)==null||e.call(this),this.filterPanelOutsideClickUnsub=null,(t=this.filterPanelKeyboardUnsub)==null||t.call(this),this.filterPanelKeyboardUnsub=null}areStringSetsEqual(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}areFilterConditionsEqual(e,t){if(e.op!==t.op)return!1;if(e.op==="in"){const n=Array.from(new Set(e.values||[])).sort(),o=Array.from(new Set(t.values||[])).sort();if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==o[i])return!1;return!0}return e.op==="isEmpty"||e.op==="isNotEmpty"?!0:(e.value||"").trim()===(t.value||"").trim()}isFilterPanelDirty(e){return e.mode==="values"?!this.areStringSetsEqual(e.selected,e.initialSelected):!this.areFilterConditionsEqual(e.condition,e.initialCondition)}async applyFilterPanel(){const e=this.filterPanelState;if(!(!e||!this.sheet)&&this.isFilterPanelDirty(e)){if(e.mode==="values"){await this.sheet.setColumnIncludedValues(e.col,Array.from(e.selected)),this.hideFilterPanel(),this.render();return}await this.sheet.setColumnFilter(e.col,e.condition),this.hideFilterPanel(),this.render()}}syncFilterPanelApplyButtonState(){const e=this.filterPanelState;if(!e)return;const t=this.filterPanel.querySelector('button[data-wb-filter-apply="true"]');if(!t)return;const n=this.isFilterPanelDirty(e);t.disabled=!n,t.style.opacity=n?"1":"0.5",t.style.cursor=n?"pointer":"not-allowed"}syncFilterPanelValuesSelectionState(e){const t=this.filterPanelState;if(!t)return;const n=this.filterPanel.querySelector('[data-wb-filter-summary="true"]');if(n){const i=t.values.filter(r=>t.selected.has(r)).length;n.textContent=`Selected ${i} / ${t.values.length}`}const o=this.filterPanel.querySelector('input[data-wb-filter-select-all="true"]');if(o){const i=e.filter(r=>t.selected.has(r)).length;o.checked=e.length>0&&i===e.length,o.indeterminate=i>0&&i<e.length}this.syncFilterPanelApplyButtonState()}renderFilterPanel(){var R;const e=this.filterPanelState;if(!e)return;const t=document.activeElement,n=t instanceof HTMLInputElement&&t.dataset.wbFilterSearch==="true",o=n?t.selectionStart:null,i=n?t.selectionEnd:null,r=ve(this.theme,"cellBorderColor"),s=ve(this.theme,"selectionBGColor"),a=N=>{const P=document.createElement("button");return P.type="button",P.textContent=N,P.style.height="26px",P.style.padding="0 8px",P.style.border=`1px solid ${r}`,P.style.borderRadius="4px",P.style.background="transparent",P.style.color="inherit",P.style.cursor="pointer",P};this.filterPanel.innerHTML="";const c=document.createElement("div");c.style.display="flex",c.style.flexDirection="column",c.style.maxHeight="360px",c.style.height=e.mode==="values"?"360px":"auto",c.style.overflow="hidden";const u=document.createElement("div");u.style.padding="8px 10px",u.style.borderBottom=`1px solid ${r}`,u.style.fontWeight="600",u.textContent=`Filter ${ei(e.col)}`,c.appendChild(u);const h=document.createElement("div");h.textContent="Sort",h.style.padding="8px 10px 4px",h.style.fontSize="11px",h.style.opacity="0.7",c.appendChild(h);const f=document.createElement("div");f.style.display="flex",f.style.flexWrap="wrap",f.style.gap="6px",f.style.padding="8px 10px 6px";const d=a("Sort A to Z");d.onclick=()=>{this.sheet.sortFilterByColumn(e.col,"asc").then(N=>{N&&(this.hideFilterPanel(),this.render())})};const p=a("Sort Z to A");p.onclick=()=>{this.sheet.sortFilterByColumn(e.col,"desc").then(N=>{N&&(this.hideFilterPanel(),this.render())})},f.append(d,p),c.appendChild(f);const S=document.createElement("div");S.textContent="Filter",S.style.padding="0 10px 4px",S.style.fontSize="11px",S.style.opacity="0.7",c.appendChild(S);const x=document.createElement("div");x.style.display="flex",x.style.flexWrap="wrap",x.style.gap="6px",x.style.padding="0 10px 8px";const v=(N,P)=>{const B=a(N);return e.mode===P&&(B.style.background=s),B.onclick=()=>{this.filterPanelState&&(this.filterPanelState.mode=P,this.renderFilterPanel())},B};x.append(v("Filter by values","values"),v("Filter by condition","condition")),c.appendChild(x);const m=document.createElement("div");if(m.style.flex="1",m.style.minHeight="0",m.style.padding="0 10px",m.style.display="flex",m.style.flexDirection="column",c.appendChild(m),e.mode==="values"){const N=document.createElement("input");N.type="text",N.dataset.wbFilterSearch="true",N.value=e.search,N.placeholder="Search values",N.style.width="100%",N.style.margin="0 0 8px",N.style.height="28px",N.style.padding="0 8px",N.style.border=`1px solid ${r}`,N.style.borderRadius="4px",N.style.background="transparent",N.style.color="inherit",N.oninput=()=>{this.filterPanelState&&(this.filterPanelState.search=N.value,this.renderFilterPanel())},m.appendChild(N);const P=e.values,B=P.filter(G=>e.selected.has(G)).length,I=document.createElement("div");I.dataset.wbFilterSummary="true",I.textContent=`Selected ${B} / ${P.length}`,I.style.margin="0 0 8px",I.style.fontSize="11px",I.style.opacity="0.7",m.appendChild(I);const V=e.search.trim().toLowerCase(),J=P.filter(G=>V?(G===""?"(Blanks)":G).toLowerCase().includes(V):!0).slice(0,ay),te=document.createElement("div");te.style.flex="1",te.style.minHeight="0",te.style.border=`1px solid ${r}`,te.style.borderRadius="4px",te.style.overflow="auto";const oe=J.filter(G=>e.selected.has(G)).length,ge=document.createElement("label");ge.style.display="flex",ge.style.alignItems="center",ge.style.gap="8px",ge.style.padding="6px 8px",ge.style.borderBottom=`1px solid ${r}`,ge.style.cursor="pointer";const ce=document.createElement("input");ce.type="checkbox",ce.dataset.wbFilterSelectAll="true",ce.checked=J.length>0&&oe===J.length,ce.indeterminate=oe>0&&oe<J.length,ce.onchange=()=>{if(this.filterPanelState){if(ce.checked)for(const G of J)this.filterPanelState.selected.add(G);else for(const G of J)this.filterPanelState.selected.delete(G);this.renderFilterPanel()}};const ee=document.createElement("span");if(ee.textContent="Select all",ge.append(ce,ee),te.appendChild(ge),J.length===0){const G=document.createElement("div");G.style.padding="10px",G.style.opacity="0.7",G.textContent="No values",te.appendChild(G)}else for(const G of J){const Q=document.createElement("label");Q.style.display="flex",Q.style.alignItems="center",Q.style.gap="8px",Q.style.padding="6px 8px",Q.style.cursor="pointer";const ie=document.createElement("input");ie.type="checkbox",ie.checked=e.selected.has(G),ie.onchange=()=>{this.filterPanelState&&(ie.checked?this.filterPanelState.selected.add(G):this.filterPanelState.selected.delete(G),this.syncFilterPanelValuesSelectionState(J))};const E=document.createElement("span");E.textContent=G===""?"(Blanks)":G,E.style.overflow="hidden",E.style.textOverflow="ellipsis",E.style.whiteSpace="nowrap",Q.append(ie,E),te.appendChild(Q)}m.appendChild(te)}else{const N=document.createElement("div");N.style.display="grid",N.style.gap="8px";const P=document.createElement("select");P.style.height="30px",P.style.border=`1px solid ${r}`,P.style.borderRadius="4px",P.style.background="transparent",P.style.color="inherit";const B=[{value:"contains",label:"Contains"},{value:"notContains",label:"Does not contain"},{value:"equals",label:"Equals"},{value:"notEquals",label:"Does not equal"},{value:"isEmpty",label:"Is empty"},{value:"isNotEmpty",label:"Is not empty"}],I=e.condition.op==="in"?"contains":e.condition.op;for(const J of B){const te=document.createElement("option");te.value=J.value,te.textContent=J.label,te.selected=I===J.value,P.appendChild(te)}if(P.onchange=()=>{if(!this.filterPanelState)return;const J=P.value;this.filterPanelState.condition={op:J,value:this.filterPanelState.condition.value||""},this.renderFilterPanel()},N.appendChild(P),I!=="isEmpty"&&I!=="isNotEmpty"){const J=document.createElement("input");J.type="text",J.value=((R=this.filterPanelState)==null?void 0:R.condition.value)||"",J.placeholder="Enter value",J.style.height="30px",J.style.padding="0 8px",J.style.border=`1px solid ${r}`,J.style.borderRadius="4px",J.style.background="transparent",J.style.color="inherit",J.oninput=()=>{this.filterPanelState&&(this.filterPanelState.condition={...this.filterPanelState.condition,value:J.value},this.syncFilterPanelApplyButtonState())},N.appendChild(J)}m.appendChild(N)}const g=document.createElement("div");g.style.display="flex",g.style.justifyContent="flex-end",g.style.gap="6px",g.style.padding="8px 10px";const y=N=>{N.disabled=!0,N.style.opacity="0.5",N.style.cursor="not-allowed"},T=a("Clear");T.onclick=()=>{this.sheet.clearColumnFilter(e.col).then(()=>{this.hideFilterPanel(),this.render()})},e.hasExistingCondition||y(T);const A=a("Cancel");A.onclick=()=>this.hideFilterPanel();const b=a("Apply");if(b.dataset.wbFilterApply="true",b.onclick=()=>{this.applyFilterPanel()},this.isFilterPanelDirty(e)||y(b),g.append(T,A,b),c.appendChild(g),this.filterPanel.appendChild(c),n&&e.mode==="values"){const N=this.filterPanel.querySelector('input[data-wb-filter-search="true"]');if(N){N.focus();const P=N.value.length,B=Math.max(0,Math.min(P,o??P)),I=Math.max(B,Math.min(P,i??B));N.setSelectionRange(B,I)}}}addEventListeners(){const e=this.gridContainer.getScrollContainer();this.addEventListener(window,"resize",()=>this.render()),this.addEventListener(e,"scroll",()=>{this.hideFilterPanel(),this.render()}),this.addEventListener(e,"mousedown",t=>{this.handleMouseDown(t)}),this.addEventListener(e,"mousemove",t=>{this.handleMouseMove(t)}),this.addEventListener(e,"mouseleave",()=>{this.handleScrollContainerMouseLeave()}),this.addEventListener(e,"dblclick",t=>{this.handleDblClick(t)}),this.addEventListener(e,"contextmenu",t=>{this.handleContextMenu(t)}),this.addEventListener(document,"keydown",t=>{this.handleKeyDown(t)}),this.addEventListener(document,"keyup",t=>{this.handleKeyUp(t)})}detectResizeEdge(e,t){const n=this.scroll,o=this.freezeState;if(t<se&&e>ue){const r=o.frozenCols>0&&e<ue+o.frozenWidth?e-ue:e-ue-o.frozenWidth+this.colDim.getOffset(o.frozenCols+1)+n.left,s=this.colDim.findIndex(r),a=this.colDim.getOffset(s)+this.colDim.getSize(s);if(Math.abs(r-a)<io)return{axis:"column",index:s};if(s>1){const c=this.colDim.getOffset(s-1)+this.colDim.getSize(s-1);if(Math.abs(r-c)<io)return{axis:"column",index:s-1}}}if(e<ue&&t>se){const r=o.frozenRows>0&&t<se+o.frozenHeight?t-se:t-se-o.frozenHeight+this.rowDim.getOffset(o.frozenRows+1)+n.top,s=this.rowDim.findIndex(r),a=this.rowDim.getOffset(s)+this.rowDim.getSize(s);if(Math.abs(r-a)<io)return{axis:"row",index:s};if(s>1){const c=this.rowDim.getOffset(s-1)+this.rowDim.getSize(s-1);if(Math.abs(r-c)<io)return{axis:"row",index:s-1}}}return null}detectFreezeHandle(e,t){const n=this.freezeState,o=n.frozenRows>0||n.frozenCols>0,i=Ep,r=Vg,s=o&&n.frozenRows>0?se+n.frozenHeight-i/2:se-i;if(e>=0&&e<=ue&&t>=s-r&&t<=s+i+r)return"row";const a=o&&n.frozenCols>0?ue+n.frozenWidth-i/2:ue-i;return e>=a-r&&e<=a+i+r&&t>=0&&t<=se?"column":null}startFreezeDrag(e,t){const n=this.gridContainer.getScrollContainer();n.style.cursor="grabbing";const o=r=>{const s=this.viewport;if(e==="row"){const a=r.target!==n?Math.max(0,Math.min(s.height,r.clientY-s.top)):r.offsetY;if(a<=se)return 0;const c=a-se,u=this.rowDim.findIndex(c),f=this.rowDim.getOffset(u)+this.rowDim.getSize(u)/2;return c<f?Math.max(0,u-1):u}else{const a=r.target!==n?Math.max(0,Math.min(s.width,r.clientX-s.left)):r.offsetX;if(a<=ue)return 0;const c=a-ue,u=this.colDim.findIndex(c),f=this.colDim.getOffset(u)+this.colDim.getSize(u)/2;return c<f?Math.max(0,u-1):u}};this.freezeDrag={axis:e,targetIndex:o(t)},this.renderOverlay();const i=r=>{const s=o(r);this.freezeDrag&&this.freezeDrag.targetIndex!==s&&(this.freezeDrag={axis:e,targetIndex:s},this.renderOverlay())};this.startMouseDragSession({onMove:i,onComplete:()=>{var a;const r=((a=this.freezeDrag)==null?void 0:a.targetIndex)??0,s=this.sheet.getFreezePane();e==="row"?this.setFreezePane(r,s.frozenCols):this.setFreezePane(s.frozenRows,r)},onCleanup:()=>{n.style.cursor="",this.freezeDrag=null,this.freezeHandleHover=null,this.renderOverlay()}})}toRefFromMouse(e,t){const n=this.freezeState;return n.frozenRows>0||n.frozenCols>0?Yg(e,t,this.scroll,this.rowDim,this.colDim,n):Gg(e+this.scroll.left,t+this.scroll.top,this.rowDim,this.colDim)}toRowFromMouse(e){const t=this.freezeState,o=t.frozenRows>0&&e<se+t.frozenHeight?e-se:e-se-t.frozenHeight+this.rowDim.getOffset(t.frozenRows+1)+this.scroll.top;return this.rowDim.findIndex(o)}toColFromMouse(e){const t=this.freezeState,o=t.frozenCols>0&&e<ue+t.frozenWidth?e-ue:e-ue-t.frozenWidth+this.colDim.getOffset(t.frozenCols+1)+this.scroll.left;return this.colDim.findIndex(o)}getAutofillSelectionRect(e){if(!this.sheet||this.sheet.getSelectionType()!=="cell")return;const t=e||this.sheet.getRangeOrActiveCell(),n=qn(t[0],this.scroll,this.rowDim,this.colDim,this.freezeState),o=qn(t[1],this.scroll,this.rowDim,this.colDim,this.freezeState),i=Math.min(n.left,o.left),r=Math.min(n.top,o.top),s=Math.max(n.left+n.width,o.left+o.width),a=Math.max(n.top+n.height,o.top+o.height);return{left:i,top:r,width:s-i,height:a-r}}detectAutofillHandle(e,t){if(this.readOnly||!this.sheet||this.sheet.getSelectionType()!=="cell")return!1;const n=this.sheet.getRangeOrActiveCell(),o=this.getAutofillSelectionRect(n);if(!o||this.isAutofillHandleHiddenByFreeze(n,o))return!1;const i=o.left+o.width-Yn/2,r=o.top+o.height-Yn/2;return e>=i-oo&&e<=i+Yn+oo&&t>=r-oo&&t<=r+Yn+oo}shouldShowAutofillHandle(){if(this.readOnly||!this.sheet||this.sheet.getSelectionType()!=="cell")return!1;const e=this.sheet.getRangeOrActiveCell(),t=this.getAutofillSelectionRect(e);return t?!this.isAutofillHandleHiddenByFreeze(e,t):!1}isAutofillHandleHiddenByFreeze(e,t){const n=this.freezeState;if(n.frozenRows===0&&n.frozenCols===0)return!1;const o=Math.max(e[0].r,e[1].r),i=Math.max(e[0].c,e[1].c);if(!(o>n.frozenRows&&i>n.frozenCols))return!1;const s=t.left+t.width-Yn/2,a=t.top+t.height-Yn/2,c=ue+n.frozenWidth,u=se+n.frozenHeight;return s<c||a<u}clampClientPointToViewport(e,t){const n=this.viewport;return{x:Math.max(0,Math.min(n.width,e-n.left)),y:Math.max(0,Math.min(n.height,t-n.top))}}getAutoScrollSpeed(e){const n=Math.min(Xf,Math.max(0,e))/Xf;return Kf+(sy-Kf)*n}getAutoScrollVelocity(e,t,n){return e<t?-this.getAutoScrollSpeed(t-e):e>n?this.getAutoScrollSpeed(e-n):0}handleMouseMove(e){var r,s,a;const t=this.gridContainer.getScrollContainer();if((e.buttons&1)===1){this.resizeHover&&(this.resizeHover=null,this.renderOverlay());return}const n=this.detectFreezeHandle(e.offsetX,e.offsetY);if(n!==this.freezeHandleHover&&(this.freezeHandleHover=n,this.render()),n){t.style.cursor="grab",this.setFilterButtonHoverCol(null),this.resizeHover&&(this.resizeHover=null,this.renderOverlay());return}const o=this.detectResizeEdge(e.offsetX,e.offsetY),i=(o==null?void 0:o.axis)!==((r=this.resizeHover)==null?void 0:r.axis)||(o==null?void 0:o.index)!==((s=this.resizeHover)==null?void 0:s.index);if(i&&(this.resizeHover=o),o)t.style.cursor=o.axis==="column"?"col-resize":"row-resize",this.setFilterButtonHoverCol(null);else{if(this.detectAutofillHandle(e.offsetX,e.offsetY)){t.style.cursor="crosshair",this.setFilterButtonHoverCol(null),i&&this.renderOverlay();return}const c=e.offsetX,u=e.offsetY,h=this.detectFilterButton(c,u);if(h!==null){t.style.cursor="pointer",this.setFilterButtonHoverCol(h),i&&this.renderOverlay();return}this.setFilterButtonHoverCol(null);const f=(a=this.sheet)==null?void 0:a.getSelectedIndices();if(f){const d=f.axis==="column"?u<se&&c>ue&&(()=>{const p=this.toColFromMouse(c);return p>=f.from&&p<=f.to})():c<ue&&u>se&&(()=>{const p=this.toRowFromMouse(u);return p>=f.from&&p<=f.to})();t.style.cursor=d?"grab":""}else t.style.cursor=""}i&&this.renderOverlay()}handleScrollContainerMouseLeave(){const e=this.gridContainer.getScrollContainer();e.style.cursor="";const t=this.filterButtonHoverCol!==null||this.resizeHover!==null||this.freezeHandleHover!==null;this.filterButtonHoverCol=null,this.resizeHover=null,this.freezeHandleHover=null,t&&this.render()}setFilterButtonHoverCol(e){this.filterButtonHoverCol!==e&&(this.filterButtonHoverCol=e,this.render())}async handleMouseDown(e){const t=this.detectFreezeHandle(e.offsetX,e.offsetY);if(t&&!this.readOnly){e.preventDefault(),this.startFreezeDrag(t,e);return}const n=this.detectResizeEdge(e.offsetX,e.offsetY);if(n&&!this.readOnly){e.preventDefault(),this.startResize(n.axis,n.index,e);return}const o=e.offsetX,i=e.offsetY,r=this.detectFilterButton(o,i);if(r!==null){e.preventDefault(),await this.finishEditing(),await this.showFilterPanel(r);return}if(o<ue&&i<se){e.preventDefault(),await this.finishEditing(),this.sheet.selectAllCells(),this.render();return}const a=i<se&&o>ue,c=o<ue&&i>se;if(a){e.preventDefault(),await this.finishEditing();const g=this.toColFromMouse(o);if(g<1)return;if(e.shiftKey){this.sheet.selectColumnRange(this.sheet.getActiveCell().c,g),this.render();return}const y=this.sheet.getSelectedIndices();if(!this.readOnly&&y&&y.axis==="column"&&g>=y.from&&g<=y.to){this.startDragMove("column",y.from,y.to-y.from+1,e);return}this.sheet.selectColumn(g),this.render();const T=g;let A=g,b=e.clientX,R=null,N=null;const P=()=>{const{x:te}=this.clampClientPointToViewport(b,0),oe=this.toColFromMouse(te);oe>=1&&oe!==A&&(A=oe,this.sheet.selectColumnRange(T,A))},B=()=>{R!==null&&(cancelAnimationFrame(R),R=null),N=null},I=te=>{const oe=this.viewport,ge=this.getAutoScrollVelocity(b,oe.left,oe.left+oe.width);if(ge===0){R=null,N=null;return}const ce=Math.min(50,N===null?16:te-N);N=te,this.gridContainer.scrollBy(ge*ce/1e3,0),P(),this.render(),R=requestAnimationFrame(I)},V=()=>{R===null&&(R=requestAnimationFrame(I))},J=te=>{b=te.clientX,P(),this.render();const oe=this.viewport;this.getAutoScrollVelocity(b,oe.left,oe.left+oe.width)===0?B():V()};this.beginNativeSelectionBlock(),this.startMouseDragSession({onMove:J,onCleanup:()=>{B(),this.endNativeSelectionBlock()}});return}if(c){e.preventDefault(),await this.finishEditing();const g=this.toRowFromMouse(i);if(g<1)return;if(e.shiftKey){this.sheet.selectRowRange(this.sheet.getActiveCell().r,g),this.render();return}const y=this.sheet.getSelectedIndices();if(!this.readOnly&&y&&y.axis==="row"&&g>=y.from&&g<=y.to){this.startDragMove("row",y.from,y.to-y.from+1,e);return}this.sheet.selectRow(g),this.render();const T=g;let A=g,b=e.clientY,R=null,N=null;const P=()=>{const{y:te}=this.clampClientPointToViewport(0,b),oe=this.toRowFromMouse(te);oe>=1&&oe!==A&&(A=oe,this.sheet.selectRowRange(T,A))},B=()=>{R!==null&&(cancelAnimationFrame(R),R=null),N=null},I=te=>{const oe=this.viewport,ge=this.getAutoScrollVelocity(b,oe.top,oe.top+oe.height);if(ge===0){R=null,N=null;return}const ce=Math.min(50,N===null?16:te-N);N=te,this.gridContainer.scrollBy(0,ge*ce/1e3),P(),this.render(),R=requestAnimationFrame(I)},V=()=>{R===null&&(R=requestAnimationFrame(I))},J=te=>{b=te.clientY,P(),this.render();const oe=this.viewport;this.getAutoScrollVelocity(b,oe.top,oe.top+oe.height)===0?B():V()};this.beginNativeSelectionBlock(),this.startMouseDragSession({onMove:J,onCleanup:()=>{B(),this.endNativeSelectionBlock()}});return}if(this.isInFormulaRangeMode()){e.preventDefault();const g=this.toRefFromMouse(e.offsetX,e.offsetY);if(this.activeFormulaInput=this.cellInput.isFocused()?"cellInput":"formulaBar",e.shiftKey&&this.formulaRangeAnchor){const A={r:Math.min(this.formulaRangeAnchor.r,g.r),c:Math.min(this.formulaRangeAnchor.c,g.c)},b={r:Math.max(this.formulaRangeAnchor.r,g.r),c:Math.max(this.formulaRangeAnchor.c,g.c)};this.insertReferenceAtCursor(A,b)}else this.formulaRangeAnchor=g,this.formulaRefInsertPos=null,this.insertReferenceAtCursor(g);const y=this.gridContainer.getScrollContainer(),T=A=>{const b=this.viewport,R=A.target!==y?Math.max(0,Math.min(b.width,A.clientX-b.left)):A.offsetX,N=A.target!==y?Math.max(0,Math.min(b.height,A.clientY-b.top)):A.offsetY,P=this.toRefFromMouse(R,N),B={r:Math.min(this.formulaRangeAnchor.r,P.r),c:Math.min(this.formulaRangeAnchor.c,P.c)},I={r:Math.max(this.formulaRangeAnchor.r,P.r),c:Math.max(this.formulaRangeAnchor.c,P.c)};this.insertReferenceAtCursor(B,I)};this.beginNativeSelectionBlock(),this.startMouseDragSession({onMove:T,onComplete:()=>{this.activeFormulaInput==="cellInput"?this.cellInput.getInput().focus():this.activeFormulaInput==="formulaBar"&&this.formulaBar.getFormulaInput().focus()},onCleanup:()=>{this.endNativeSelectionBlock(),this.formulaRefInsertPos=null}});return}if(this.detectAutofillHandle(e.offsetX,e.offsetY)){e.preventDefault(),await this.finishEditing(),this.startAutofillDrag(e);return}if(await this.finishEditing(),e.shiftKey){const g=this.toRefFromMouse(e.offsetX,e.offsetY);this.sheet.selectEnd(g),this.render();return}this.sheet.selectStart(this.toRefFromMouse(e.offsetX,e.offsetY)),this.render();let u=e.clientX,h=e.clientY,f=null,d=null;const p=()=>{const{x:g,y}=this.clampClientPointToViewport(u,h);this.sheet.selectEnd(this.toRefFromMouse(g,y))},S=()=>{f!==null&&(cancelAnimationFrame(f),f=null),d=null},x=g=>{const y=this.viewport,T=this.getAutoScrollVelocity(u,y.left,y.left+y.width),A=this.getAutoScrollVelocity(h,y.top,y.top+y.height);if(T===0&&A===0){f=null,d=null;return}const b=Math.min(50,d===null?16:g-d);d=g,this.gridContainer.scrollBy(T*b/1e3,A*b/1e3),p(),this.render(),f=requestAnimationFrame(x)},v=()=>{f===null&&(f=requestAnimationFrame(x))},m=g=>{u=g.clientX,h=g.clientY,p(),this.renderOverlay();const y=this.viewport,T=this.getAutoScrollVelocity(u,y.left,y.left+y.width),A=this.getAutoScrollVelocity(h,y.top,y.top+y.height);T===0&&A===0?S():v()};this.beginNativeSelectionBlock(),this.startMouseDragSession({onMove:m,onComplete:()=>{this.render()},onCleanup:()=>{S(),this.endNativeSelectionBlock()}})}startAutofillDrag(e){let t=e.clientX,n=e.clientY,o=null,i=null;const r=()=>{const{x:h,y:f}=this.clampClientPointToViewport(t,n),d=this.toRefFromMouse(h,f);this.autofillPreview=this.sheet.getAutofillPreviewRange(d),this.renderOverlay()},s=()=>{o!==null&&(cancelAnimationFrame(o),o=null),i=null},a=h=>{const f=this.viewport,d=this.getAutoScrollVelocity(t,f.left,f.left+f.width),p=this.getAutoScrollVelocity(n,f.top,f.top+f.height);if(d===0&&p===0){o=null,i=null;return}const S=Math.min(50,i===null?16:h-i);i=h,this.gridContainer.scrollBy(d*S/1e3,p*S/1e3),r(),o=requestAnimationFrame(a)},c=()=>{o===null&&(o=requestAnimationFrame(a))},u=h=>{t=h.clientX,n=h.clientY,r();const f=this.viewport,d=this.getAutoScrollVelocity(t,f.left,f.left+f.width),p=this.getAutoScrollVelocity(n,f.top,f.top+f.height);d===0&&p===0?s():c()};this.beginNativeSelectionBlock(),r(),this.startMouseDragSession({onMove:u,onComplete:()=>{const{x:h,y:f}=this.clampClientPointToViewport(t,n),d=this.toRefFromMouse(h,f),p=this.sheet;(async()=>{const S=await p.autofill(d);this.autofillPreview=void 0,this.sheet&&(S?this.render():this.renderOverlay())})()},onCleanup:()=>{s(),this.endNativeSelectionBlock(),this.autofillPreview=void 0,this.sheet&&this.renderOverlay()}})}startResize(e,t,n){const o=e==="column"?n.clientX:n.clientY,i=e==="column"?this.colDim.getSize(t):this.rowDim.getSize(t),r=this.gridContainer.getScrollContainer();r.style.cursor=e==="column"?"col-resize":"row-resize";const s=e==="column"?this.colDim:this.rowDim,a=this.sheet.getSelectedIndices(),u=a&&a.axis===e&&t>=a.from&&t<=a.to?Array.from({length:a.to-a.from+1},(S,x)=>a.from+x):[t],h=u.length;let f=i,d=null;this.beginNativeSelectionBlock(),this.showResizeTooltip(e,i,n.clientX,n.clientY,h);const p=S=>{const v=(e==="column"?S.clientX:S.clientY)-o;f=Math.max(e==="column"?Yf:oy,i+v),d===null&&(d=requestAnimationFrame(()=>{d=null,s.setSize(t,f),this.render()})),this.showResizeTooltip(e,f,S.clientX,S.clientY,h)};this.startMouseDragSession({onMove:p,onComplete:()=>{const S=f;s.setSize(t,S);for(const x of u)s.setSize(x,S),e==="column"?this.sheet.setColumnWidth(x,S):(this.manuallyResizedRows.add(x),this.sheet.setRowHeight(x,S));this.render()},onCleanup:()=>{r.style.cursor="",this.hideResizeTooltip(),this.endNativeSelectionBlock(),d!==null&&(cancelAnimationFrame(d),d=null)}})}async autoFitSize(e,t){const o=document.createElement("canvas").getContext("2d"),i=6;if(e==="column"){o.font=`${_r}px Arial`;const r=ei(t);let s=o.measureText(r).width+i;const[a,c]=this.viewRange,u=[{r:a.r,c:t},{r:c.r,c:t}],h=await this.sheet.fetchGrid(u);for(const[,d]of h)if(d.v){const p=o.measureText(d.v).width+i;p>s&&(s=p)}const f=Math.max(Yf,Math.ceil(s));this.sheet.setColumnWidth(t,f)}else{this.manuallyResizedRows.delete(t);const r=await this.computeContentHeight(t);this.sheet.setRowHeight(t,r)}this.render()}async computeContentHeight(e){const[t,n]=this.viewRange,o=[{r:e,c:t.c},{r:e,c:n.c}],i=await this.sheet.fetchGrid(o);let r=1;for(const[,s]of i)if(s.v){const a=s.v.split(`
`).length;a>r&&(r=a)}return r<=1?se:Math.max(se,Math.ceil(r*_r*po+2*Fa))}async autoResizeRow(e){if(this.manuallyResizedRows.has(e))return;const t=await this.computeContentHeight(e),n=this.rowDim.getSize(e);t!==n&&(this.sheet.setRowHeight(e,t),this.render())}startDragMove(e,t,n,o){const i=this.gridContainer.getScrollContainer();i.style.cursor="grabbing";const r=e==="column"?this.colDim:this.rowDim,s=c=>{const u=this.viewport;if(e==="column"){const h=c.target!==i?Math.max(0,Math.min(u.width,c.clientX-u.left)):c.offsetX,f=this.toColFromMouse(h),d=this.freezeState,S=d.frozenCols>0&&h<ue+d.frozenWidth?h-ue:h-ue-d.frozenWidth+this.colDim.getOffset(d.frozenCols+1)+this.scroll.left,v=r.getOffset(f)+r.getSize(f)/2;return S<v?f:f+1}else{const h=c.target!==i?Math.max(0,Math.min(u.height,c.clientY-u.top)):c.offsetY,f=this.toRowFromMouse(h),d=this.freezeState,S=d.frozenRows>0&&h<se+d.frozenHeight?h-se:h-se-d.frozenHeight+this.rowDim.getOffset(d.frozenRows+1)+this.scroll.top,v=r.getOffset(f)+r.getSize(f)/2;return S<v?f:f+1}};this.dragMove={axis:e,srcIndex:t,count:n,dropIndex:s(o)},this.renderOverlay();const a=c=>{const u=s(c);this.dragMove&&this.dragMove.dropIndex!==u&&(this.dragMove={axis:e,srcIndex:t,count:n,dropIndex:u},this.renderOverlay())};this.startMouseDragSession({onMove:a,onComplete:()=>{var h;const c=(h=this.dragMove)==null?void 0:h.dropIndex;if(c===void 0||c>=t&&c<=t+n)return;(e==="row"?this.sheet.moveRows(t,n,c):this.sheet.moveColumns(t,n,c)).then(()=>{const f=c<t?c:c-n;e==="row"?(this.sheet.selectRow(f),n>1&&this.sheet.selectRowRange(f,f+n-1)):(this.sheet.selectColumn(f),n>1&&this.sheet.selectColumnRange(f,f+n-1)),this.render()})},onCleanup:()=>{i.style.cursor="",this.dragMove=null,this.renderOverlay()}})}async handleFormulaKeydown(e){await this.handleEditorKeydown(e,"formulaBar")}async handleCellInputKeydown(e){await this.handleEditorKeydown(e,"cellInput")}async handleEditorKeydown(e,t){if(e.isComposing)return;const n=t==="formulaBar"?this.formulaBar.getFormulaInput():this.cellInput.getInput();if(this.handleAutocompleteKeydown(e,n))return;const o=r=>{Fe(r,"ArrowDown")?this.sheet.move("down"):Fe(r,"ArrowUp")?this.sheet.move("up"):Fe(r,"ArrowLeft")?this.sheet.move("left"):Fe(r,"ArrowRight")&&this.sheet.move("right")};!await Gf(e,[{match:r=>Qe(r,{key:"Enter",alt:!0}),run:r=>{r.preventDefault(),document.execCommand("insertLineBreak")}},{match:r=>Fe(r,"Enter"),run:async r=>{r.preventDefault(),await this.finishEditing(),t==="formulaBar"?(this.focusGrid(),this.sheet.move("down")):this.sheet.moveInRange(r.shiftKey?-1:1,0),this.render(),this.scrollIntoView()}},{match:r=>Fe(r,"Tab"),run:async r=>{r.preventDefault(),await this.finishEditing(),t==="formulaBar"&&this.focusGrid(),this.sheet.moveInRange(0,r.shiftKey?-1:1),this.render(),this.scrollIntoView()}},{match:r=>this.isArrowKey(r)&&!this.editMode&&(t==="formulaBar"||this.cellInput.hasFormula())&&this.isInFormulaRangeMode(),run:r=>{r.preventDefault(),this.applyFormulaRangeArrowKey(r)}},{match:r=>t==="cellInput"&&this.isArrowKey(r)&&!this.cellInput.hasFormula()&&!this.editMode,run:async r=>{r.preventDefault(),await this.finishEditing(),o(r),this.render(),this.scrollIntoView()}},{match:r=>Fe(r,"F4"),run:r=>{r.preventDefault(),this.toggleAbsoluteReference(n)}},{match:r=>Fe(r,"Escape"),run:r=>{r.preventDefault(),this.focusGrid(),this.render()}}])&&t==="formulaBar"&&!this.cellInput.isShown()&&this.showCellInput(!0,!0)}handleAutocompleteKeydown(e,t){if(this.autocomplete.isListVisible()){if(Fe(e,"ArrowDown"))return e.preventDefault(),this.autocomplete.moveDown(),!0;if(Fe(e,"ArrowUp"))return e.preventDefault(),this.autocomplete.moveUp(),!0;if(Fe(e,"Tab")||Fe(e,"Enter")){const n=this.autocomplete.getSelectedFunction();if(n)return e.preventDefault(),this.insertFunctionCompletion(n.name,t),!0}else Fe(e,"Escape")&&this.autocomplete.hide()}else this.autocomplete.isHintVisible()&&Fe(e,"Escape")&&this.autocomplete.hide();return!1}isArrowKey(e){return Fe(e,"ArrowDown")||Fe(e,"ArrowUp")||Fe(e,"ArrowLeft")||Fe(e,"ArrowRight")}applyFormulaRangeArrowKey(e){const n={...this.lastFormulaRefTarget||this.sheet.getActiveCell()};if(Fe(e,"ArrowDown")?n.r=Math.max(1,n.r+1):Fe(e,"ArrowUp")?n.r=Math.max(1,n.r-1):Fe(e,"ArrowLeft")?n.c=Math.max(1,n.c-1):Fe(e,"ArrowRight")&&(n.c=n.c+1),e.shiftKey&&this.formulaRangeAnchor){const o={r:Math.min(this.formulaRangeAnchor.r,n.r),c:Math.min(this.formulaRangeAnchor.c,n.c)},i={r:Math.max(this.formulaRangeAnchor.r,n.r),c:Math.max(this.formulaRangeAnchor.c,n.c)};this.insertReferenceAtCursor(o,i),this.lastFormulaRefTarget=n}else this.formulaRangeAnchor=n,this.formulaRefInsertPos=null,this.insertReferenceAtCursor(n)}async copy(){const{text:e}=await this.sheet.copy();await navigator.clipboard.writeText(e)}async paste(){try{let e,t;if(navigator.clipboard.read)try{const n=await navigator.clipboard.read();for(const o of n)o.types.includes("text/html")&&(t=await(await o.getType("text/html")).text()),o.types.includes("text/plain")&&(e=await(await o.getType("text/plain")).text())}catch{e=await navigator.clipboard.readText()}else e=await navigator.clipboard.readText();await this.sheet.paste({text:e,html:t}),this.sheet.clearCopyBuffer(),this.render()}catch(e){console.error("Failed to paste cell content: ",e)}}async handleGridKeydown(e){const t=async(n,o)=>{n.preventDefault(),(n.shiftKey?this.sheet.resizeRange(o):Ia(n)?await this.sheet.moveToEdge(o):this.sheet.move(o))&&(this.render(),this.scrollIntoView())};await Gf(e,[{match:n=>Fe(n,"ArrowDown"),run:n=>t(n,"down")},{match:n=>Fe(n,"ArrowUp"),run:n=>t(n,"up")},{match:n=>Fe(n,"ArrowLeft"),run:n=>t(n,"left")},{match:n=>Fe(n,"ArrowRight"),run:n=>t(n,"right")},{match:n=>Qe(n,{key:"a",mod:!0}),run:async n=>{n.preventDefault(),await this.sheet.selectAll(),this.render()}},{match:n=>Fe(n,"Tab"),run:n=>{n.preventDefault(),this.sheet.moveInRange(0,n.shiftKey?-1:1),this.render(),this.scrollIntoView()}},{match:n=>Fe(n,"Enter"),run:n=>{n.preventDefault(),this.sheet.hasRange()?(this.sheet.moveInRange(n.shiftKey?-1:1,0),this.render(),this.scrollIntoView()):this.readOnly||this.showCellInput()}},{match:n=>Fe(n,"Delete")||Fe(n,"Backspace"),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.removeData()&&this.render())}},{match:n=>!Ia(n)&&this.isValidCellInput(n.key),run:()=>{this.readOnly||this.showCellInput(!0)}},{match:n=>Qe(n,{key:"z",mod:!0,shift:!1}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.undo()&&(this.render(),this.scrollIntoView()))}},{match:n=>Qe(n,{key:"z",mod:!0,shift:!0})||Qe(n,{key:"y",mod:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.redo()&&(this.render(),this.scrollIntoView()))}},{match:n=>Fe(n,"Escape"),run:n=>{n.preventDefault(),this.sheet.getCopyRange()&&(this.sheet.clearCopyBuffer(),this.renderOverlay())}},{match:n=>Qe(n,{key:"c",mod:!0}),run:async n=>{n.preventDefault(),await this.copy()}},{match:n=>Qe(n,{key:"v",mod:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.paste())}},{match:n=>Qe(n,{key:"b",mod:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.toggleRangeStyle("b"),this.render())}},{match:n=>Qe(n,{key:"i",mod:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.toggleRangeStyle("i"),this.render())}},{match:n=>Qe(n,{key:"u",mod:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.toggleRangeStyle("u"),this.render())}},{match:n=>Qe(n,{key:"s",mod:!0,shift:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.toggleRangeStyle("st"),this.render())}},{match:n=>Qe(n,{key:"m",mod:!0,shift:!0}),run:async n=>{this.readOnly||(n.preventDefault(),await this.sheet.toggleMergeSelection()&&this.render())}}])}async reloadDimensions(){await this.sheet.loadDimensions(),await this.sheet.loadStyles(),await this.sheet.loadMerges(),await this.sheet.loadFreezePane(),await this.sheet.loadFilterState(),this.hiddenRows.clear(),this.hiddenRowSizeBackup.clear(),this.syncHiddenRowsFromSheet(),this.updateFreezeState()}getGridViewportRect(){const e=this.viewport,t=this.container.getBoundingClientRect();return{left:e.left-t.left,top:e.top-t.top,width:e.width,height:e.height}}getScrollableGridViewportRect(){const e=this.getGridViewportRect(),t=this.freezeState,n=ue+t.frozenWidth,o=se+t.frozenHeight;return{left:e.left+n,top:e.top+o,width:Math.max(0,e.width-n),height:Math.max(0,e.height-o)}}getCellRect(e){const t=this.freezeState;return t.frozenRows>0||t.frozenCols>0?qn(e,this.scroll,this.rowDim,this.colDim,t):De(e,this.scroll,this.rowDim,this.colDim)}getCellRectInScrollableViewport(e){const t=this.freezeState,n=this.scroll,o=n.left+this.colDim.getOffset(t.frozenCols+1)-t.frozenWidth,i=n.top+this.rowDim.getOffset(t.frozenRows+1)-t.frozenHeight;return De(e,{left:o,top:i},this.rowDim,this.colDim)}getRangeRect(e){return jn(this.getCellRect(e[0]),this.getCellRect(e[1]))}setOnRender(e){this.onRenderCallback=e}render(){this.renderVersion+=1,this.requestRenderFrame()}requestRenderFrame(){this.pendingRenderFrame===null&&(this.pendingRenderFrame=requestAnimationFrame(()=>{this.pendingRenderFrame=null,this.handleRenderFrame()}))}handleRenderFrame(){if(this.renderInFlight){this.renderQueued=!0;return}this.renderInFlight=!0;const e=this.renderVersion;this.performRender(e).finally(()=>{this.renderInFlight=!1,(this.renderQueued||this.renderVersion!==e)&&(this.renderQueued=!1,this.requestRenderFrame())})}async performRender(e){var t;this.sheet&&(this.formulaBar.render(),await this.renderSheet(e),!(!this.sheet||e!==this.renderVersion)&&(this.renderOverlay(),(t=this.onRenderCallback)==null||t.call(this)))}renderOverlay(){this.overlay.render(this.viewport,this.scroll,this.sheet.getActiveCell(),this.sheet.getPresences(),this.sheet.getRange(),this.rowDim,this.colDim,this.resizeHover,this.sheet.getSelectionType(),this.dragMove?{axis:this.dragMove.axis,dropIndex:this.dragMove.dropIndex}:null,this.formulaRanges,this.freezeState,this.freezeDrag,this.sheet.getCopyRange(),this.autofillPreview,this.shouldShowAutofillHandle(),this.sheet.getMerges())}get viewRange(){const e=this.scroll,t=this.viewport,n=this.freezeState,o=this.rowDim.getOffset(n.frozenRows+1),i=this.colDim.getOffset(n.frozenCols+1),r=Math.max(n.frozenRows+1,this.rowDim.findIndex(o+e.top)),s=Math.max(r,this.rowDim.findIndex(o+e.top+t.height)+1),a=Math.max(n.frozenCols+1,this.colDim.findIndex(i+e.left)),c=Math.max(a,this.colDim.findIndex(i+e.left+t.width)+1);return[{r,c:a},{r:s,c}]}scrollIntoView(e=this.sheet.getActiveCell()){const t=this.scroll,n=this.freezeState,o=n.frozenRows>0&&e.r<=n.frozenRows,i=n.frozenCols>0&&e.c<=n.frozenCols,r=De(e,{left:0,top:0},this.rowDim,this.colDim),s=this.sheet.getMerges().get(pe(e));if(s){const d=De({r:e.r+s.rs-1,c:e.c+s.cs-1},{left:0,top:0},this.rowDim,this.colDim);r.width=d.left+d.width-r.left,r.height=d.top+d.height-r.top}const a=this.colDim.getOffset(n.frozenCols+1),c=this.rowDim.getOffset(n.frozenRows+1),u=this.viewport.width-ue-n.frozenWidth,h=this.viewport.height-se-n.frozenHeight;let f=!1;if(!i){const d=a+t.left,p=d+u,S=r.left-ue,x=S+r.width;S<d?(this.scroll={left:S-a},f=!0):x>p&&(this.scroll={left:x-u-a},f=!0)}if(!o){const d=c+t.top,p=d+h,S=r.top-se,x=S+r.height;S<d?(this.scroll={top:S-c},f=!0):x>p&&(this.scroll={top:x-h-c},f=!0)}f&&this.render()}async showCellInput(e=!1,t=!1){t||(this.editMode=!e);const n=this.sheet.getActiveCell(),o=this.freezeState,i=o.frozenRows>0||o.frozenCols>0?qn(n,this.scroll,this.rowDim,this.colDim,o):De(n,this.scroll,this.rowDim,this.colDim),r=this.sheet.getMerges().get(pe(n));if(r){const h=o.frozenRows>0||o.frozenCols>0?qn({r:n.r+r.rs-1,c:n.c+r.cs-1},this.scroll,this.rowDim,this.colDim,o):De({r:n.r+r.rs-1,c:n.c+r.cs-1},this.scroll,this.rowDim,this.colDim);i.width=h.left+h.width-i.left,i.height=h.top+h.height-i.top}const s=e?"":await this.sheet.toInputString(n),a=Math.max(i.width,this.viewport.width-i.left),c=Math.max(i.height,this.viewport.height-i.top);this.cellInput.show(i.left,i.top,s,!t,i.width,i.height,a,c);const u=await this.sheet.getStyle(n);this.cellInput.applyStyle(u),s.startsWith("=")&&(this.formulaRanges=Fi(s).map(h=>h.range),this.renderOverlay())}isValidCellInput(e){return e.length===1||e==="Process"}async renderSheet(e=this.renderVersion){const t=this.sheet;if(!t)return;this.syncHiddenRowsFromSheet();const n=this.gridSize,o=this.freezeState;this.gridContainer.updateDummySize(n.width+ue,n.height+se);const i=this.viewport,r=this.scroll,s=this.viewRange,a=[{r:1,c:1},{r:s[1].r,c:s[1].c}],c=await t.fetchGrid(a);t!==this.sheet||e!==this.renderVersion||this.gridCanvas.render(i,r,s,t.getActiveCell(),c,this.rowDim,this.colDim,t.getSelectionType(),t.getRange(),o,this.freezeHandleHover,t.getColStyles(),t.getRowStyles(),t.getSheetStyle(),t.getRangeStyles(),t.getMerges(),t.getFilterRange(),t.getFilteredColumns(),this.filterButtonHoverCol)}syncHiddenRowsFromSheet(){const e=this.sheet;if(!e)return;const t=e.getHiddenRows();for(const n of this.hiddenRows){if(t.has(n))continue;const o=this.hiddenRowSizeBackup.get(n)??this.rowDim.getDefaultSize();this.rowDim.setSize(n,o),this.hiddenRowSizeBackup.delete(n)}for(const n of t)this.hiddenRows.has(n)||(this.hiddenRowSizeBackup.set(n,this.rowDim.getSize(n)),this.rowDim.setSize(n,0));this.hiddenRows=t}get gridSize(){const e=this.sheet.getDimension();return{width:this.colDim.getOffset(e.columns+1),height:this.rowDim.getOffset(e.rows+1)}}get viewport(){return this.gridContainer.getViewport()}get scroll(){return this.gridContainer.getScrollPosition()}set scroll(e){this.gridContainer.setScrollPosition(e)}}async function tS(l,e){const t=new uy(l,e),n=(e==null?void 0:e.store)||new zg;return await t.initialize(n),t}class uy{constructor(e,t){k(this,"container");k(this,"worksheet");k(this,"sheet");k(this,"theme");k(this,"_readOnly");k(this,"selectionChangeCallbacks",[]);this.container=e,this.container.style.position="relative",this.container.style.overflow="hidden",this.theme=(t==null?void 0:t.theme)||"light",this._readOnly=(t==null?void 0:t.readOnly)||!1,this.worksheet=new ly(this.container,this.theme,this._readOnly)}get readOnly(){return this._readOnly}async initialize(e){this.sheet=new kg(e),this.worksheet.setOnRender(()=>this.notifySelectionChange()),await this.worksheet.initialize(this.sheet)}async reloadDimensions(){await this.worksheet.reloadDimensions()}async setFreezePane(e,t){this._readOnly||await this.worksheet.setFreezePane(e,t)}render(){this.worksheet.render()}renderOverlay(){this.worksheet.renderOverlay()}panBy(e,t){this.worksheet.panBy(e,t)}handleMobileDoubleTap(e,t){this.worksheet.handleMobileDoubleTap(e,t)}async applyStyle(e){!this.sheet||this._readOnly||(await this.sheet.setRangeStyle(e),this.worksheet.render(),this.notifySelectionChange())}async applyBorders(e){!this.sheet||this._readOnly||await this.sheet.setRangeBorders(e)&&(this.worksheet.render(),this.notifySelectionChange())}async toggleStyle(e){!this.sheet||this._readOnly||(await this.sheet.toggleRangeStyle(e),this.worksheet.render(),this.notifySelectionChange())}async getActiveStyle(){if(this.sheet)return this.sheet.getStyle(this.sheet.getActiveCell())}onSelectionChange(e){return this.selectionChangeCallbacks.push(e),()=>{this.selectionChangeCallbacks=this.selectionChangeCallbacks.filter(t=>t!==e)}}notifySelectionChange(){for(const e of this.selectionChangeCallbacks)e()}getSelectionType(){var e;return(e=this.sheet)==null?void 0:e.getSelectionType()}getSelectionRangeOrActiveCell(){var e;return(e=this.sheet)==null?void 0:e.getRangeOrActiveCell()}getGridViewportRect(){return this.worksheet.getGridViewportRect()}getScrollableGridViewportRect(){return this.worksheet.getScrollableGridViewportRect()}getCellRect(e){return this.worksheet.getCellRect(e)}getCellRectInScrollableViewport(e){return this.worksheet.getCellRectInScrollableViewport(e)}async increaseDecimals(){if(!this.sheet||this._readOnly)return;const e=await this.sheet.getActiveDecimalPlaces();await this.sheet.setRangeStyle({dp:e+1}),this.worksheet.render(),this.notifySelectionChange()}async decreaseDecimals(){if(!this.sheet||this._readOnly)return;const e=await this.sheet.getActiveDecimalPlaces();await this.sheet.setRangeStyle({dp:Math.max(0,e-1)}),this.worksheet.render(),this.notifySelectionChange()}async toggleMergeCells(){!this.sheet||this._readOnly||await this.sheet.toggleMergeSelection()&&(this.worksheet.render(),this.notifySelectionChange())}isSelectionMerged(){return this.sheet?this.sheet.isSelectionMerged():!1}canMergeSelection(){return this.sheet?this.sheet.canMergeSelection():!1}hasFilter(){var e;return((e=this.sheet)==null?void 0:e.hasFilter())||!1}async createFilterFromSelection(){if(!this.sheet||this._readOnly)return!1;const e=await this.sheet.createFilterFromSelection();return e&&(this.worksheet.render(),this.notifySelectionChange()),e}async clearFilter(){!this.sheet||this._readOnly||(await this.sheet.clearFilter(),this.worksheet.render(),this.notifySelectionChange())}async setColumnFilter(e,t){if(!this.sheet||this._readOnly)return!1;const n=await this.sheet.setColumnFilter(e,t);return n&&(this.worksheet.render(),this.notifySelectionChange()),n}async clearColumnFilter(e){if(!this.sheet||this._readOnly)return!1;const t=await this.sheet.clearColumnFilter(e);return t&&(this.worksheet.render(),this.notifySelectionChange()),t}async undo(){!this.sheet||this._readOnly||await this.sheet.undo()&&(this.worksheet.render(),this.notifySelectionChange())}async redo(){!this.sheet||this._readOnly||await this.sheet.redo()&&(this.worksheet.render(),this.notifySelectionChange())}toggleFunctionBrowser(){this.worksheet.toggleFunctionBrowser()}cleanup(){this.worksheet.cleanup(),this.selectionChangeCallbacks=[]}setGridResolver(e){this.sheet&&this.sheet.setGridResolver(e)}async recalculateCrossSheetFormulas(){this.sheet&&(await this.sheet.recalculateCrossSheetFormulas(),this.worksheet.render())}}const cy=8,hy=280,fy=24;function rS({containerRef:l,sheetRef:e,enabled:t=!0}){const n=Rp();bp.useEffect(()=>{const o=l.current;if(!t||!n||!o)return;let i=0,r=0,s=0,a=0,c=!1,u=!1,h=0,f=0,d=0;const p=m=>{if(m.touches.length!==1){u=m.touches.length>1,c=!1;return}const g=m.touches[0];i=g.clientX,r=g.clientY,s=g.clientX,a=g.clientY},S=m=>{var b;if(m.touches.length!==1){u=u||m.touches.length>1;return}const g=m.touches[0],y=g.clientX-s,T=g.clientY-a,A=Math.hypot(g.clientX-i,g.clientY-r);!c&&A>=cy&&(c=!0),c&&(m.preventDefault(),(b=e.current)==null||b.panBy(-y,-T)),s=g.clientX,a=g.clientY},x=m=>{var T;if(m.touches.length>0)return;if(u){u=!1,c=!1;return}if(c){c=!1;return}const g=Date.now(),y=Math.hypot(s-f,a-d);if(h!==0&&g-h<=hy&&y<=fy){(T=e.current)==null||T.handleMobileDoubleTap(s,a),h=0;return}h=g,f=s,d=a},v=()=>{c=!1,u=!1};return o.addEventListener("touchstart",p,{passive:!0}),o.addEventListener("touchmove",S,{passive:!1}),o.addEventListener("touchend",x,{passive:!0}),o.addEventListener("touchcancel",v,{passive:!0}),()=>{o.removeEventListener("touchstart",p),o.removeEventListener("touchmove",S),o.removeEventListener("touchend",x),o.removeEventListener("touchcancel",v)}},[l,t,n,e])}export{xg as C,Dr as a,eS as b,ji as c,ag as d,ap as e,mg as f,dp as g,mp as h,wo as i,ig as j,pp as k,gp as l,Un as m,xr as n,tS as o,Te as p,lt as r,sg as s,pe as t,rS as u};
